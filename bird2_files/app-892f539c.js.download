/*! For license information please see app-892f539c.js.LICENSE.txt */
(self.webpackChunk=self.webpackChunk||[]).push([[2143],{33096:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});const s={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","juicy-bee":"rgb(var(--color-bee))","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","z-index-modal":"310","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210","course-card-container":"_3rrla"}},68709:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});const s={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","juicy-bee":"rgb(var(--color-bee))","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","z-index-modal":"310","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210","_hoverable-cell":"_2SQMn","user-cell-minimal":"_1sqVC _2SQMn","user-popover":"xDwaU","user-popover-wrap":"_1MQUC","user-item":"_2VW9F","user-link":"cWZ7Q _1Jk5X","logged-out-topbar-wrap":"_14Q7T","splash-topbar-wrap":"CTX4w","logged-out-topbar":"_3ivb5","logged-out-logo-container":"_1Ubqd","logged-out-logo":"_2RvHF","right-header":"i4pWM","hidden-on-mobile":"lCCrq","ui-language-wrap":"_3-9no",_icon:"uctf0","get-started":"_1nmAo _2dZP2","login-button":"_2ilB5 _2dZP2","hidden-everywhere":"JFeyf","arrow-with-margin-gray":"_1Q5UA"}},17383:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});const s={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","juicy-bee":"rgb(var(--color-bee))","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","z-index-modal":"310","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210",_button:"_3wk8f","google-solid":"_2qpF4 _3wk8f","facebook-solid":"_1nI6A fb3uN _3wk8f",stroke:"_3aRi5 _3wk8f","account-icon":"B-KMN","account-text":"_2ird8"}},88528:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});const s={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","juicy-bee":"rgb(var(--color-bee))","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","z-index-modal":"310","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210"}},40412:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var s=a(27378),n=a(88868),r=a(79465);const i=({location:e})=>(s.useEffect((()=>{(null==e?void 0:e.pathname)!==n.Oy&&(async()=>{await(0,r.track)("page_not_found",{},!1),await(0,n.Zs)(n.Oy,!0)})()}),[]),null)},25200:(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var s=a(60042),n=a.n(s),r=a(27378);const i={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","juicy-bee":"rgb(var(--color-bee))","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","z-index-modal":"310","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210",ruby:"_1YQpP",transliteration:"_47IB1 _3x_e5 _2m_ED","transliteration-default":"_2jxSO",base:"lwL3T","highlighted-normal":"_3Xfxq","highlighted-dictionary":"_199Iz","highlighted-new-word":"_3lWIN"};var o=a(16970),l=a(18804),c=a(34704);const d=r.forwardRef((({highlightStyle:e,highlights:t=[],highlightedCharacter:a,highlightedIsBlank:s=!1,state:d="default",text:u,type:p,transliteration:g,transliterationClassName:m},h)=>{const _=(0,l.Fx)(c.hg),v=(()=>{if(void 0!==_)return _.type;if(void 0!==p)return p;throw Error("Rendering transliteration text without transliteration settings!")})(),f=r.useMemo((()=>{var s;let n=0;const r=[];for(const i of g.tokens){const o=t.some((e=>e>=n&&e<n+i.token.length))||i.token===a;r.push({highlighted:o,tokens:u.slice(n,n+i.token.length),transliterationText:null===(s=null==_?void 0:_.transliterateNewWordsOnly)||void 0===s||!s||o&&"new-word"===e?(0,c.iZ)(i,v):void 0}),n+=i.token.length}return r}),[g,u,_]),b=(t,a,s)=>r.createElement("span",{className:n()(i.base,a?"new-word"===e?i["highlighted-new-word"]:i[`highlighted-${e}`]:null),key:s},t);return f.every((({transliterationText:e})=>void 0===e))?r.createElement("span",{ref:h},u):r.createElement("ruby",{className:i.ruby,ref:h},f.map((({highlighted:t,tokens:l,transliterationText:c},u)=>r.createElement(r.Fragment,{key:u},void 0!==a&&!t&&l.toString().includes(a)?(e=>e.map(((e,t)=>{const n=(null==e?void 0:e.toString())===a||s&&(null==e?void 0:e.toString())===o.XW;return b(e,n,t)})))(l):b(l,t),c?r.createElement("rt",{className:n()(i.transliteration,"default"!==d||t?null:i["transliteration-default"],t?"new-word"===e?i["highlighted-new-word"]:i[`highlighted-${e}`]:null,m)},c):r.createElement("rt",null)))))}))},47725:(e,t,a)=>{"use strict";a.d(t,{P:()=>d,Z:()=>u});var s=a(27378),n=a(95324),r=a(4289),i=a(17060),o=a(51158),l=a(88868),c=a(79465);class d extends s.Component{constructor(){super(...arguments),this.handleClick=e=>{var t;const{trackingScreen:a,trackingTarget:s}=this.props;"a"===(null===(t=e.target.tagName)||void 0===t?void 0:t.toLowerCase())&&(0,c.track)("click",{screen:a,target:s})}}render(){return s.createElement("span",{onClick:this.handleClick},this.props.children)}}const u=s.forwardRef(((e,t)=>{var a,{activeClassName:d,autoFocus:u,children:p,id:g,isRoutableUrl:m=l.Iw,onClick:h,locationState:_,replace:v,trackingScreen:f,trackingTarget:b}=e;const S=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]])}return a}(e,["activeClassName","autoFocus","children","id","isRoutableUrl","onClick","locationState","replace","trackingScreen","trackingTarget"]),y=s.useRef(null),E=s.useMemo((()=>(0,n.Z)([t,y])),[t,y]);(0,i.Z)({disabled:!g,id:g,offset:-100});const I=e=>{f&&b&&(0,c.track)("click",{screen:f,target:b}),null==h||h(e)};if(s.useEffect((()=>{var e;u&&(null===(e=y.current)||void 0===e||e.focus())}),[u]),"target"in S&&S.target&&"_blank"===S.target.toLowerCase()&&(S.rel="rel"in S&&S.rel&&"noopener"!==S.rel.toLowerCase()?`${S.rel} noopener`:"noopener"),!(null===(a=S.href)||void 0===a?void 0:a.startsWith("#"))&&S.href&&m(S.href)){S.href.startsWith("http")&&console.warn("Routable URL includes a protocol and domain");const{hash:e,pathname:t,search:a}=S.href.startsWith("http")?new URL(S.href):new URL(S.href,window.location.origin);return S.to={hash:e,pathname:t,search:a,state:_},delete S.href,s.createElement(r.OL,Object.assign({},S,{activeClassName:d||"",onClick:I,ref:E,replace:v}),p)}return void 0!==d&&(0,o.Kp)("activeClassName was set on a native anchor tag",{data:{href:S.href},once:!0}),s.createElement("a",Object.assign({},S,{onClick:I,ref:E,tabIndex:0}),p)}))},40597:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var s=a(27378),n=a(22498),r=a(15746);const i=a.p+"lottie/5f83bd30ac8a82f18a2514bcb8b2d750.json",o=a.p+"lottie/bcc0ba8a9738f78dd7b537d57b2b87b6.json",l=s.forwardRef((({className:e,color:t="macaw",style:a,type:l},c)=>{const d=(0,r.Z)(),[u,p]=s.useState(0);s.useImperativeHandle(c,(()=>({animate:()=>p((e=>e+1)),stop:()=>p(0)})));const g="in-text"===a||"in-character-popover"===a;return s.createElement(s.Suspense,{fallback:s.createElement("span",{className:e})},s.createElement(n.Z,{className:e,fillMode:"forwards",interruptKey:u,isPlaying:!d&&u>0,mainSegment:[0,50],path:"slow"===l?o:i,renderer:"svg",style:{"--animated-speaker-icon-color":`rgb(var(--color-${g?t:"snow"}))`}}))}))},43670:(e,t,a)=>{"use strict";a.d(t,{Z:()=>p});var s=a(60042),n=a.n(s),r=a(27378),i=a(4088),o=a(42659);var l=a(18804),c=a(79465),d=a(81621);const u={large:63,medium:48,xlarge:77},p=e=>{var t,a;const{forceNoPicture:s=!1,size:p,useSize:g=!0,user:m}=e,h=(0,l.Fx)(o.dY),_=(0,l.Fx)(o.gg),v=m.id===h,f=`${e.picture||m.picture}${g?`/${p}`:""}`,b=null!==(t=e.displaySize)&&void 0!==t?t:u[p];return(0,d.z_)(f)||s||_?r.createElement(i.Z,{className:n()(e.className,e.letterAvatarClassName,e.disableDefaultBorder?"_17g0s":void 0),id:m.id,name:m.name,size:null!=b?b:p,style:v&&!s?"ghost":"colored",username:m.username}):r.createElement("img",{alt:null!==(a=m.name)&&void 0!==a?a:m.username,className:n()(e.className,"_33LFc",c.FULL_STORY_EXCLUDE),src:f,style:{height:b,width:b}})}},81928:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var s=a(27378),n=a(47725),r=a(30033),i=a(79465),o=a(2945);const l=({[r.m5]:e,children:t,className:a})=>{const l=(0,o.Gi)();return s.createElement(n.Z,Object.assign({className:a,href:l?`https://support.duolingo.com/hc/${l}`:"/help",onClick:()=>{(0,i.track)("help_center_tap",{})}},(0,r._q)(e)),t)}},39368:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var s=a(60042),n=a.n(s),r=a(27378),i=a(2406),o=a(47725),l=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]])}return a};const c=r.forwardRef(((e,t)=>{var{children:a,className:s,fakeActive:c,fakeHover:d,leadingVisual:u,onTouchStart:p,size:g,state:m,trailingVisual:h,unstyledDisabled:_,unstyledHover:v,variant:f}=e,b=l(e,["children","className","fakeActive","fakeHover","leadingVisual","onTouchStart","size","state","trailingVisual","unstyledDisabled","unstyledHover","variant"]);return r.createElement(i.Z,{fakeActive:c,fakeHover:d,leadingVisual:u,onTouchStart:p,render:e=>{var{disabled:a}=e,i=l(e,["disabled"]);return r.createElement(o.Z,Object.assign({},i,b,{"aria-disabled":a,className:n()(i.className,s),ref:t}))},size:g,state:m,trailingVisual:h,unstyledDisabled:_,unstyledHover:v,variant:f},a)}))},22498:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});const s=(0,a(1398).Z)((()=>Promise.all([a.e(8250),a.e(148),a.e(5314),a.e(3766),a.e(8729),a.e(1684),a.e(4990),a.e(3100)]).then(a.bind(a,88695)).then((e=>({default:e.LottieAnimation})))))},84119:(e,t,a)=>{"use strict";a.d(t,{Z:()=>v});var s=a(60042),n=a.n(s),r=a(27378),i=a(97895),o=a(65445),l=a(47725);const c=a.p+"images/28d1f7a89ba7b57d86c6c1b2e40d8f4e.svg",d=a.p+"images/17db14133432ce4e82a799e760bd3e0e.svg",u=a.p+"images/4a9f9204e7e5c1d3ed3b79b7b7af8568.svg",p={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","juicy-bee":"rgb(var(--color-bee))","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","z-index-modal":"310","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210",_wrap:"_2SJZg","size-default":"_3_UBz","size-compact":"EY75l","size-icon":"_31mcG","size-medium":"_3KVdE",icon:"_2Gbos",text:"_1sq2h","wrap-macaw":"_1jqdJ _2SJZg _1vSRH","wrap-snow":"cB6Di _2SJZg _2mU94","wrap-snow-always-light":"_1yEEd _2SJZg _2_7Z1","wrap-snow-solid":"_2XelT _2SJZg _3qZKu","wrap-snow-solid-always-light":"_1M3EO _2SJZg Kc4d9"};var g=a(68903),m=a(8654),h=a(79465);const _=({children:e,className:t,href:a,image:s,onClick:c,size:d="default",style:u="snow"})=>r.createElement(l.Z,{className:n()((0,o.y)({variant:"macaw"===u||"snow-solid"===u||"snow-solid-always-light"===u?"solid":"stroke"}),p[`wrap-${u}`],p[`size-${d}`],t),href:a,onClick:c},r.createElement(i.Z,{className:p.icon,guaranteedSafeSrc:s}),r.createElement("span",{className:p.text},e)),v=e=>{var{type:t,via:a}=e,s=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]])}return a}(e,["type","via"]);switch(r.useEffect((()=>{a&&(0,h.track)("web_to_app_store_load",{via:a})}),[]),t){case"apple":return r.createElement(_,Object.assign({image:d},s),(0,m._i)(7893));case"china":return r.createElement(_,Object.assign({image:c},s),r.createElement("span",null,r.createElement("span",null,"下载请前往"),"360 手机助手"));case"google":return r.createElement(_,Object.assign({image:u},s),(0,m._i)(9328));default:return(0,g.RJ)(t),null}}},38891:(e,t,a)=>{"use strict";a.d(t,{Z:()=>p});var s=a(60042),n=a.n(s),r=a(27378),i=a(40597);const o={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","juicy-bee":"rgb(var(--color-bee))","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","z-index-modal":"310","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210",_button:"_1x6bc _17DXh whuSQ _2gwtT _1nlVc _2fOC9 t5wFJ _3dtSu _25Cnc _3yAjN UCrz7 yTpGk","_large-border-radius":"_0Wim","_large-outline":"_2KQGO",wrap:"sgs9X","wrap-in-character-popover":"V5wTd sgs9X","wrap-in-text":"_3ZPOL sgs9X","button-large":"Ii_9b _1x6bc _17DXh whuSQ _2gwtT _1nlVc _2fOC9 t5wFJ _3dtSu _25Cnc _3yAjN UCrz7 yTpGk _0Wim",icon:"_1ZuR6","button-large-flipped":"_1I13x _2kfEr _1nlVc _2fOC9 UCrz7 t5wFJ","button-medium":"_3nOBS _1x6bc _17DXh whuSQ _2gwtT _1nlVc _2fOC9 t5wFJ _3dtSu _25Cnc _3yAjN UCrz7 yTpGk _0Wim","button-medium-flipped":"_1oX8u _1I13x _2kfEr _1nlVc _2fOC9 UCrz7 t5wFJ","button-slow":"_1Uoqa _1x6bc _17DXh whuSQ _2gwtT _1nlVc _2fOC9 t5wFJ _3dtSu _25Cnc _3yAjN UCrz7 yTpGk _0Wim _2KQGO","button-slow-flipped":"_1Vrvu _2kfEr _1nlVc _2fOC9 UCrz7 t5wFJ","button-small":"_2UpLr _1x6bc _17DXh whuSQ _2gwtT _1nlVc _2fOC9 t5wFJ _3dtSu _25Cnc _3yAjN UCrz7 yTpGk","button-small-flipped":"_1KXUd _1I13x _2kfEr _1nlVc _2fOC9 UCrz7 t5wFJ"};var l=a(97236),c=a(8654),d=a(88268),u=a(26506);const p=r.forwardRef((({audio:e,autoplay:t,className:a,dir:s,disabled:p,onClick:g,onTryPlay:m,soundOptions:h,style:_,ttsTrackingData:v,type:f,useKeyboardShortcut:b},S)=>{const y=r.useRef(null);r.useImperativeHandle(S,(()=>({play:e=>E(e)})));const E=t=>{var a;null===(a=y.current)||void 0===a||a.animate();const s=v?(0,l.a1)(e,Object.assign(Object.assign({},v),{requestedAt:window.performance.now()}),null!=t?t:h):(0,l.GN)(e,null!=t?t:h);null==m||m(s)};r.useEffect((()=>{const e=e=>{if(b&&!p)switch(f){case"large":case"medium":case"small":(0,d.b)(e,"tts")&&E();break;case"slow":(0,d.b)(e,"slowTts")&&E()}};return u.U.addListener(document,"keydown",e),()=>u.U.removeListener(document,"keydown",e)})),r.useEffect((()=>{t&&!p&&E()}),[]);const I="in-text"===_||"in-character-popover"===_;return r.createElement("span",{className:n()(a,o["wrap"+(_?`-${_}`:"")]),dir:null!=s?s:c.lw?"rtl":"ltr"},r.createElement("button",{className:o[`button-${f}${I?"-flipped":""}`],disabled:p,onClick:e=>{E(),null==g||g(e)}},r.createElement(i.Z,{className:o.icon,ref:y,style:_,type:f})))}))},55107:(e,t,a)=>{"use strict";a.d(t,{Z:()=>b});var s=a(60042),n=a.n(s),r=a(27378),i=a(15094),o=a(36083),l=a(47725),c=a(42659);const d=a.p+"images/7ab97bf88f7cb74897e7b8e2acd77371.svg";var u=a(17833);const p={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","juicy-bee":"rgb(var(--color-bee))","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","z-index-modal":"310","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210","image-container":"_2_j-u","_course-card-base":"_1VVGH","_course-card":"_2R0Ah _1VVGH","course-card-snow":"_2bIJV _2R0Ah _1VVGH","course-card-transparent-always-light":"_3lPJU _2R0Ah _1VVGH","course-card-header":"_1_Kcg","badge-row":"Me8zZ",_badge:"mKWHt","hatching-badge-snow":"_2VU44 mKWHt","hatching-badge-transparent-always-light":"ffFrc mKWHt","learning-badge-container-snow":"_2qzIf mKWHt","learning-badge-container-transparent-always-light":"_2MVw3 _2qzIf mKWHt","learning-badge":"_1CUmr","beta-badge-snow":"_38Ra9 mKWHt","beta-badge-transparent-always-light":"gH5IY mKWHt","_language-name":"_2rOMB","language-name-snow":"oiAw- _2rOMB","language-name-transparent-always-light":"qmRtF _2rOMB","_learn-count":"V6RHD","learn-count-snow":"_22J27 V6RHD","learn-count-transparent-always-light":"__nHv V6RHD"};var g=a(30033),m=a(26886),h=a(67173),_=a(8654),v=a(93746),f=a(18804);const b=({className:e,course:t,headingTag:a="div",href:s,isLoggedIn:b=!1,learning:S=!1,onSelectCourse:y,style:E="snow"})=>{const I=(0,f.Fx)(c.Mb),k="dark"===(0,i.F)(),{fromLanguageId:w,learningLanguageId:T,numLearners:C,numLearnersString:R,phase:L,progress:O}=t;let P;const A=(0,m.s7)(I,w,b,T,L)&&L===v.AP.Active?v.AP.Beta:L;P=A===v.AP.Active?(0,_._i)(8380,{progress:O}):(0,_._i)(9517,{num_learners:C,num_learners_string:R});let D=null;if(S)D=r.createElement("div",{className:p[`learning-badge-container-${E}`]},r.createElement("img",{className:p["learning-badge"],src:k&&"snow"===E?d:u}));else switch(A){case v.AP.Active:D=r.createElement("span",{className:p[`hatching-badge-${E}`]},(0,_._i)(20972));break;case v.AP.Beta:D=r.createElement("span",{className:p[`beta-badge-${E}`]},(0,_._i)(20274))}const x=a||"div",N=()=>r.createElement("div",{className:p["image-container"]},r.createElement("div",{className:p["badge-row"]},D),r.createElement("div",{className:p["course-card-header"]},r.createElement(o.Z,{lang:T,size:88})),r.createElement(x,{className:p[`language-name-${E}`]},(0,_._i)(154,{language_name:(0,v.vY)(T)})),r.createElement("div",{className:p[`learn-count-${E}`]},P)),F=Object.assign({className:n()(p[`course-card-${E}`],e),onClick:y},(0,g._q)(h.V.LanguageCard,`language-${T}`));return s?r.createElement(l.Z,Object.assign({},F,{href:s}),N()):r.createElement("button",Object.assign({},F),N())}},75025:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var s=a(27378),n=a(92883);const r=({content:e})=>s.createElement(n.ql,null,s.createElement("meta",{content:e,id:"meta-description",name:"description"}),s.createElement("meta",{content:e,name:"twitter:description"}),s.createElement("meta",{content:e,name:"og:description"}))},54452:(e,t,a)=>{"use strict";a.r(t),a.d(t,{APP_HOME_DEEP_LINK:()=>I,default:()=>k,isOnMobileEmailVerificationPage:()=>E});var s=a(27378),n=a(80715),r=a(3620),i=a(13325),o=a(39368),l=a(52976),c=a(68466),d=a(85394),u=a(98149);const p="j4Wd0";var g,m=a(43464),h=a(68903),_=a(53229),v=a(8654),f=a(88868),b=a(74597),S=a(16086);!function(e){e[e.VERIFYING=0]="VERIFYING",e[e.SUCCEEDED=1]="SUCCEEDED",e[e.FAILED=2]="FAILED"}(g||(g={}));class y extends s.Component{constructor(){super(...arguments),this.state={pageState:g.VERIFYING},this.renderVerifyingState=()=>s.createElement("div",{className:p},s.createElement(i.Z,{type:"screen-white"})),this.renderSucceededState=e=>s.createElement(s.Fragment,null,s.createElement("div",{className:p},e?s.createElement("img",{alt:"",className:"_2tFAK",src:u}):null,s.createElement("div",{className:"muLbj"},(0,v._i)(22104)),s.createElement("div",null,(0,v._i)(23690))),e?s.createElement("div",{className:"_6Zbky"},s.createElement(o.Z,{className:"_1Romf",href:I,trackingScreen:"verification_page",trackingTarget:"mobile_app_open_or_install"},(0,v._i)(32344))):null),this.renderFailedState=()=>s.createElement("div",{className:p},s.createElement("div",{className:"_1fX8Z"},(0,v._i)(21553)),s.createElement("div",null,(0,v._i)(11554)))}async componentDidMount(){const{dispatch:e,history:t,match:{params:a},location:s}=this.props;let n,r,i=!1;try{n=(0,S.Jb)()}catch(e){n=void 0}if(r=parseInt((0,_.vl)(s.search).userId||"",10),!r&&n)r=n;else if(!r)return void this.setState({pageState:g.FAILED});n===r&&(i=!0);let o=!1;try{(await m.Vi.emailVerificationUpdate(r,a.token)).success?(i||this.setState({pageState:g.SUCCEEDED}),o=!0):this.setState({pageState:g.FAILED})}catch(e){this.setState({pageState:g.FAILED})}if(i){const a=e((0,d.eY)());o&&(await a,t.push(f.B6))}}render(){const{pageState:e}=this.state,t=E(this.props.match);return s.createElement(c.Z,{includeFooterLinks:!t},s.createElement(l.Z,{centerOnMobile:!0},(()=>{switch(e){case g.SUCCEEDED:return this.renderSucceededState(t);case g.FAILED:return this.renderFailedState();case g.VERIFYING:return this.renderVerifyingState();default:return(0,h.RJ)(e),null}})()))}}const E=e=>"/verify/:token"===e.path&&b.Z.hasMobileApp&&!(0,S.Pc)(),I=b.Z.android?"https://app.adjust.com/z5vyqb?deep_link=duolingo%3A%2F%2Fhome":"https://af4a.adj.st/home?adj_t=r4yebem&adj_redirect_ios=https%3A%2F%2Fapps.apple.com%2Fus%2Fapp%2Fduolingo-language-lessons%2Fid570060128&adj_redirect_android=https%3A%2F%2Fplay.google.com%2Fstore%2Fapps%2Fdetails%3Fid%3Dcom.duolingo",k=(0,r.EN)((0,n.$j)()(y))},52976:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var s=a(27378);const n=({centerOnMobile:e,children:t})=>s.createElement("div",{className:e?"_3g1v_ _1f1Nr":"_1f1Nr"},t)},51900:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var s=a(60042),n=a.n(s),r=a(27378),i=a(31542),o=a(24448);var l=a(30033);const c=e=>{var{className:t}=e,a=l.m5,s=e[a],{portalToOverlays:c,secondaryOverlayType:d}=e,u=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]])}return a}(e,["className","symbol"==typeof a?a:a+"","portalToOverlays","secondaryOverlayType"]);const p=r.createElement(o.Z,Object.assign({},(0,l._q)(s),{className:n()("modal"===d?"_3uW-E":"drawer"===d?"_1Z19a":"_36g-h",t)},u));return c?(0,i.createPortal)(p,document.getElementById("overlays")):p}},94434:(e,t,a)=>{"use strict";a.d(t,{Z:()=>v});var s=a(60042),n=a.n(s),r=a(27378),i=a(47725),o=a(8121);var l=a(30033),c=a(80388),d=a(67173),u=a(81149),p=a(8654),g=a(88868),m=a(79465),h=a(3800);const _=({children:e,href:t,linkClass:a,onClick:s,target:o})=>r.createElement("li",{className:"_1KXNm"},r.createElement(i.Z,{className:n()("_3KnwL _3yAjN",a),href:t,onClick:s,target:o},e)),v=({inLeftContent:e,linkStyle:t})=>r.createElement(r.Fragment,null,h.h||"experiment"===(0,u.j6)("gweb_redesigned_page_footer",void 0)?null:r.createElement("div",{className:n()("_3ky4c",{V9dBP:e})},r.createElement("hr",{className:"_2tnT1"}),r.createElement("ul",Object.assign({className:"_3dgVT"},(0,l._q)(d.V.FooterLinks)),r.createElement(_,{href:"/info",linkClass:t},(0,p._i)(7957)),g.Ql?r.createElement(_,{href:g.Ql,linkClass:t},(0,p._i)(14615)):null,r.createElement(_,{href:"https://schools.duolingo.com",linkClass:t},(0,p._i)(3984)),r.createElement(_,{href:"/mobile",linkClass:t},(0,p._i)(18971)),r.createElement(_,{href:"https://store.duolingo.com/",linkClass:t},(0,p._i)(15428)),r.createElement(_,{href:"/efficacy",linkClass:t,onClick:()=>(0,m.track)("web_footer_efficacy_cta",{})},(0,p._i)(30464)),r.createElement(_,{href:"/help",linkClass:t},(0,p._i)(2922)),r.createElement(_,{href:"/guidelines",linkClass:t},(0,p._i)(16027)),r.createElement(_,{href:"https://careers.duolingo.com",linkClass:t},(0,p._i)(5919)),r.createElement(_,{href:"https://investors.duolingo.com",linkClass:t},(0,p._i)(30108)),r.createElement(_,{href:"/terms",linkClass:t},(0,p._i)(22838)),r.createElement(_,{href:"/privacy",linkClass:t},(0,p._i)(19704)))),(0,c.J9)()?r.createElement(o.Z,null):null)},25132:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var s=a(27378);var n=a(8649),r=a(42464),i=a(79465);const o=({disabled:e=!1,onClick:t,style:a})=>{const o=s.useRef(null),[l,c]=s.useState(!1);return s.useEffect((()=>{(0,n.d)()}),[]),(0,r.Z)((()=>{window.google&&n.m&&c(!0)}),l||e?void 0:10),s.useLayoutEffect((()=>{var a;l&&!e&&window.google.accounts.id.renderButton(o.current,{click_listener:t,width:null===(a=o.current)||void 0===a?void 0:a.offsetWidth})}),[l,e,t]),e?null:s.createElement("div",{className:"azhQX",onClick:()=>l?void 0:(0,i.track)("sign_in_tap",{target:"google_not_loaded"}),ref:o,style:a})}},29264:(e,t,a)=>{"use strict";a.d(t,{Z:()=>N});var s=a(60042),n=a.n(s),r=a(27378),i=a(3620),o=a(65445),l=a(47725),c=a(54452),d=a(39325);var u=a(30033),p=a(67173),g=a(8654),m=a(35160),h=a(79465);class _ extends r.Component{constructor(){super(...arguments),this.handleLogin=()=>{const{dispatch:e,redirectPath:t,trackingScreen:a,via:s}=this.props;(0,h.track)("click",{screen:a,target:"login"}),e({options:{allowLanguagelessUser:!0,isSignIn:!0,name:m.t.SignInUp,redirectPath:t,removeFooter:!0,via:s},type:"TOGGLE_MODAL"})}}render(){const{buttonClassName:e,className:t,text:a}=this.props;return r.createElement("div",{className:n()("_1R3fw",t)},r.createElement(d.Z,Object.assign({className:n()("_1dzAz _2pIQ_",e),id:"sign-in-btn"},(0,u._q)(p.V.SignInButton),{onClick:this.handleLogin,variant:"solid"}),(0,g._i)(a||9109)))}}var v=a(29973),f=a(4141),b=a(87539);const S=()=>r.createElement(b.Z,{modalName:m.t.PickUiLanguage},(()=>r.createElement(f.Z,{singleColumn:!0})));var y=a(83537);const E="_2-EEb",I="_2EUSW _1Jk5X";var k=a(88528),w=a(53229),T=a(93746),C=a(64865),R=a(74597);class L extends r.Component{constructor(){super(...arguments),this.state={displayPopover:!1},this.handleUiLanguageChange=()=>{"splash"===this.props.trackingScreen&&(0,h.track)("splash_tap",{target:"hamburger_switch_language"}),this.props.dispatch({options:{name:m.t.PickUiLanguage},type:"TOGGLE_MODAL"})}}componentDidMount(){(0,C.VF)({via:"mobile_menu"})&&(0,h.track)("web_to_app_store_load",{via:"mobile_menu"})}render(){const{via:e}=(0,w.vl)(),t=(0,C.VF)({via:"share_profile"===e?"share_profile":"mobile_menu"}),a=r.createElement(y.Z,{className:"IqgUt",onToggle:()=>this.setState((e=>({displayPopover:!e.displayPopover})),(()=>{if(this.state.displayPopover)switch(this.props.trackingScreen){case"splash":(0,h.track)("splash_tap",{target:"hamburger"});break;case"course_picker":(0,h.track)("course_picker_tap",{target:"hamburger",via:"onboarding"})}}))});return r.createElement("div",{className:"kbGl0"},a,this.state.displayPopover?r.createElement(v.Z,{direction:"down",offset:-40,onClick:()=>this.setState({displayPopover:!1}),onRequestClose:()=>this.setState({displayPopover:!1}),zIndex:parseInt(k.Z["z-index-popover"],10)},r.createElement("ul",null,r.createElement("li",{className:E},r.createElement(l.Z,{className:I,href:"/log-in",onClick:()=>{"splash"===this.props.trackingScreen&&(0,h.track)("splash_tap",{target:"hamburger_login"})}},(0,g._i)(1032))),r.createElement("li",{className:E},r.createElement(l.Z,{className:I,href:"/register",onClick:()=>{(0,h.track)("click",{which:"topbar get started"}),"splash"===this.props.trackingScreen&&(0,h.track)("splash_tap",{target:"hamburger_get_started"})}},(0,g._i)(18550))),t?r.createElement("li",{className:E},r.createElement(l.Z,{className:I,href:t,onClick:()=>{(0,h.track)("web_to_app_store_tap",{target:R.Z.ios?"apple":"google_or_China",via:"mobile_menu"})}},(0,g._i)(17779))):null,r.createElement("li",{className:E},r.createElement("button",{className:"MpS4m _1Jk5X",onClick:this.handleUiLanguageChange},(0,g._i)(18889)," ",(0,g._i)(154,{language_name:(0,T.vY)(T.h9)}))))):null,r.createElement(S,null))}}const O=L;var P=a(16494),A=a(87122),D=a(68709),x=a(50548);const N=({children:e,dispatch:t,isSplashPage:a,showButtons:s,trackingScreen:d,via:m})=>{const v=(0,x.TH)(),f=(0,i.$B)(),b=(0,c.isOnMobileEmailVerificationPage)(f);return r.createElement("header",Object.assign({className:n()(D.Z["logged-out-topbar-wrap"],{[D.Z["splash-topbar-wrap"]]:a})},(0,u._q)(p.V.LoggedOutTopbar)),r.createElement("div",{className:D.Z["logged-out-topbar"]},r.createElement(l.Z,{className:D.Z["logged-out-logo-container"],href:b?c.APP_HOME_DEEP_LINK:"/",onClick:()=>(0,h.track)("topbar_logo_tapped",{via:m})},r.createElement("img",{alt:(0,g.H8)(23227),className:D.Z["logged-out-logo"],src:A})),b?null:r.createElement("div",{className:D.Z["right-header"]},r.createElement(P.Z,{className:n()(D.Z["ui-language-wrap"],D.Z["hidden-on-mobile"]),style:a?"snow-always-light":"snow",trackingScreen:d}),e,r.createElement(_,{buttonClassName:D.Z["login-button"],className:void 0===s||s?D.Z["hidden-on-mobile"]:D.Z["hidden-everywhere"],dispatch:t,redirectPath:"/join-beta"===v.pathname||"/stories"===v.pathname?v.pathname:void 0,trackingScreen:d,via:m}),a?null:r.createElement(l.Z,{className:n()((0,o.y)({color:"owl",variant:"solid"}),D.Z["get-started"]),href:"/register",onClick:()=>(0,h.track)("click",{which:"topbar get started"})},(0,g._i)(18550)),a?null:r.createElement(O,{dispatch:t,trackingScreen:d}))))}},62827:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var s=a(60042),n=a.n(s),r=a(27378),i=a(94434);const o=({children:e,className:t,includeFooterLinks:a=!0})=>r.createElement(r.Fragment,null,r.createElement("div",{className:n()(t,"_2PVaI")},e),a?r.createElement(i.Z,null):null)},68466:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var s=a(27378),n=a(62827);const r=({children:e,includeFooterLinks:t})=>s.createElement("div",{className:"_31BK0"},s.createElement(n.Z,{className:"_11Uc5",includeFooterLinks:t},e))},36011:(e,t,a)=>{"use strict";a.d(t,{Mk:()=>n,ZP:()=>i});var s=a(27378);const n=s.createContext(void 0);class r{constructor(){this.refCallbacks={gemsInHomepage:[],heartsInSession:[]},this.setHeartsStatInLessonRef=e=>{this.heartsStatInLessonRef=e,this.triggerCallbacks("heartsInSession")},this.getHeartsStatInLessonRef=()=>this.heartsStatInLessonRef,this.setGemsHomepageRef=e=>{this.gemsHomepageRef=e,this.triggerCallbacks("gemsInHomepage")},this.getGemsHomepageRef=()=>this.gemsHomepageRef}addCallback(e,t){this.refCallbacks[e].push(t)}removeCallback(e,t){this.refCallbacks[e]=this.refCallbacks[e].filter((e=>e!==t))}triggerCallbacks(e){this.refCallbacks[e].forEach((e=>e()))}}const i=({children:e})=>{const[t]=s.useState((()=>new r));return s.createElement(n.Provider,{value:t},e)}},4141:(e,t,a)=>{"use strict";a.d(t,{Z:()=>g});var s=a(60042),n=a.n(s),r=a(27378),i=a(80254),o=a(36083),l=a(47725);const c={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","juicy-bee":"rgb(var(--color-bee))","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","z-index-modal":"310","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210","single-column":"WU2c8","double-column":"_2bJUZ","ui-language-item":"_1L4sH","always-light":"_1pQTl","ui-language-link":"tcPoF","ui-language-flag":"_24Zlo"};var d=a(93746),u=a(79465);const p=i.XP(d.Jl),g=({className:e,singleColumn:t,style:a,trackingScreen:s,via:i})=>r.createElement("ul",{className:n()(e,c[(t?"single":"double")+"-column"],{[c["always-light"]]:"always-light"===a})},p.map((e=>{const{pathname:t,search:a,hash:n}=window.location,p=`//${"zh"===e?"zh-CN":e}.duolingo.com${t}${a}${n}`;return r.createElement("li",{className:c["ui-language-item"],key:e},r.createElement(l.Z,{className:c["ui-language-link"],href:p,onClick:()=>{(async e=>{"splash"!==s&&"course_picker"!==s&&"courses_page"!==s&&"course_splash"!==s||await(0,u.track)("language_selector_tap",{fromLanguage:d.h9,toLanguage:e,via:i})})(e),(async()=>{"splash"===s&&await(0,u.track)("splash_tap",{target:"switch_language"})})()}},r.createElement(o.Z,{className:c["ui-language-flag"],lang:e,size:24}),(0,d.lx)(e)))})))},16494:(e,t,a)=>{"use strict";a.d(t,{Z:()=>y});var s=a(27378),n=a(31542),r=a(15094),i=a(39325),o=a(4141),l=a(29531),c=a(44629),d=a(52761);const u=a.p+"images/splash/ca207386f803360434a992c33872c226.svg",p=a.p+"images/splash/c6eae48dd48246c89e415b89f9e55282.svg",g=a.p+"images/splash/255ee21b76e98df868332c509534e531.svg",m=a.p+"images/splash/936d5abdc28aa4f6f7219f6784691930.svg",h={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","juicy-bee":"rgb(var(--color-bee))","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","z-index-modal":"310","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210",_button:"_235VO _3yAjN","button-hare":"F_9RU _235VO _3yAjN","button-hare-always-light":"aZZ-b _235VO _3yAjN","button-snow":"_33Egi _235VO _3yAjN","button-snow-always-light":"M9G5O _235VO _3yAjN",caret:"_2myug",inner:"_29txQ",_popover:"_1ghmk","popover-hare":"sbzSU _1ghmk","popover-snow":"_9zYuM _1ghmk","popover-hare-always-light":"_3KsSl","popover-snow-always-light":"_2r9dh"};var _=a(88528),v=a(68903),f=a(8654),b=a(93746);const S=parseFloat(_.Z["margin-popover"])+parseFloat(_.Z["margin-popover-text"]),y=({className:e,trackingScreen:t,style:a="snow"})=>{const[y,E]=s.useState(!1),I=(0,l.f)({modifiers:[{name:"offset",options:{offset:[0,S]}}],placement:"bottom-end"}),k="dark"===(0,r.F)(),w="splash"===t?"splash":"course_picker"===t?"splash_course_picker":"courses_page"===t?"courses_logged_out_top_bar":"course_splash"===t?"course_splash":void 0;return s.createElement(c.Z,{className:e,customOffset:S,isOpen:y,onClose:()=>E(!1),onOpen:()=>E(!0),onToggle:()=>E(!y),popoverState:I.props.state,ref:I.setElementRef},s.createElement(i.Z,{className:h[`button-${a}`]},s.createElement("span",null,(0,f._i)(18889)," ",(0,f._i)(154,{language_name:(0,b.vY)(b.h9)})),s.createElement("img",{alt:"",className:h.caret,src:(()=>{switch(a){case"hare":return k?u:p;case"hare-always-light":return p;case"snow":return k?g:m;case"snow-always-light":return m;default:return void(0,v.RJ)(a)}})()})),y?(0,n.createPortal)(s.createElement(d.Z,{className:h[`popover-${a}`],innerClassName:h.inner,onRequestClose:()=>E(!1),popperProps:I.props,ref:I.setPopoverRef,stemContainerRef:I.setArrowRef,zIndex:parseInt(_.Z["z-index-popover"],10)},s.createElement(o.Z,{singleColumn:!1,style:"hare-always-light"===a||"snow-always-light"===a?"always-light":void 0,trackingScreen:t,via:w})),document.getElementById("overlays")):null)}},44451:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var s=a(27378),n=a(42659);var r=a(18804),i=a(79465);const o=e=>{var t,a,o,l;const c=(0,r.Fx)(n.Mb),d=null!==(a=null===(t=c.featureFlags)||void 0===t?void 0:t.web_frame_metrics_sampling_rate)&&void 0!==a?a:0,u=null!==(l=null===(o=c.featureFlags)||void 0===o?void 0:o.web_frame_metrics_slow_frame_threshold)&&void 0!==l?l:Math.ceil(1e3/60);s.useEffect((()=>{if(Math.random()<d){const t=new class{constructor(e,{resetEvery:t,slowFrameThreshold:a}){this.isObserving=!1,this.slowFrames=0,this.slowFramesDuration=0,this.totalDuration=0,this.totalFrames=0,this.disconnect=()=>{void 0!==this.requestAnimationFrameId&&(cancelAnimationFrame(this.requestAnimationFrameId),this.requestAnimationFrameId=void 0),this.isObserving=!1},this.flush=()=>{this.report(),this.reset()},this.observe=()=>{this.isObserving=!0,this.lastFrame=void 0,this.requestFrame()},this.frame=e=>{var t;this.requestAnimationFrameId=void 0;const a=this.lastFrame?Math.min(e-this.lastFrame,1e4):void 0;this.lastFrame=e,void 0!==a&&(this.slowestFrame=Math.max(null!==(t=this.slowestFrame)&&void 0!==t?t:0,a),this.totalDuration+=a,this.totalFrames++,a>=this.slowFrameThreshold&&(this.slowFrames++,this.slowFramesDuration+=a),void 0!==this.resetEvery&&this.totalDuration>=this.resetEvery&&this.flush()),this.requestFrame()},this.report=()=>{void 0!==this.slowestFrame&&this.callback({slowFrames:this.slowFrames,slowFramesDuration:this.slowFramesDuration,slowestFrame:this.slowestFrame,totalDuration:this.totalDuration,totalFrames:this.totalFrames})},this.requestFrame=()=>{this.isObserving&&void 0===this.requestAnimationFrameId&&(this.requestAnimationFrameId=requestAnimationFrame(this.frame))},this.reset=()=>{this.lastFrame=void 0,this.slowFrames=0,this.slowFramesDuration=0,this.slowestFrame=void 0,this.totalDuration=0,this.totalFrames=0},this.callback=e,this.resetEvery=t,this.slowFrameThreshold=a}}((t=>{e?(0,i.track)("app_performance_frames",{sampling_rate:d,slow_frame_count:t.slowFrames,slow_frame_duration_total:Math.round(t.slowFramesDuration),slow_frame_max_duration:t.slowestFrame>=u?Math.round(t.slowestFrame):void 0,slow_frame_session_duration:Math.round(t.totalDuration),slow_frame_session_name:e,slow_frame_threshold:u,total_frame_count:t.totalFrames}):(0,i.track)("app_performance_frames_aggregated",{sampling_rate:d,slow_frame_count_agg:t.slowFrames,slow_frame_duration_total_agg:Math.round(t.slowFramesDuration),slow_frame_max_duration_agg:t.slowestFrame>=u?Math.round(t.slowestFrame):void 0,slow_frame_session_duration_agg:Math.round(t.totalDuration),slow_frame_threshold:u,total_frame_count_agg:t.totalFrames})}),{resetEvery:36e5,slowFrameThreshold:u}),a=()=>{"hidden"===document.visibilityState?(t.disconnect(),t.flush()):t.observe()};return document.addEventListener("visibilitychange",a),a(),()=>{document.removeEventListener("visibilitychange",a),t.disconnect(),t.flush()}}}),[])}},31801:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var s=a(27378);var n=a(10391);const r=e=>{const[t,a]=s.useState(),r=((e,t)=>{const a=s.useRef(),n=s.useRef(null),r=s.useRef();return s.useLayoutEffect((()=>{a.current=e})),s.useLayoutEffect((()=>{const e=new IntersectionObserver((e=>{var t;return null===(t=a.current)||void 0===t?void 0:t.call(a,e[0])}),t);return n.current&&e.observe(n.current),r.current=e,()=>e.disconnect()}),[null==t?void 0:t.root,null==t?void 0:t.rootMargin]),s.useCallback((e=>{var t,a;n.current&&(null===(t=r.current)||void 0===t||t.unobserve(n.current)),e&&(null===(a=r.current)||void 0===a||a.observe(e)),n.current=e}),[])})((e=>a(e.isIntersecting)),e),i=s.useRef(null);return s.useLayoutEffect((()=>{var t;if(!i.current)return;const s=(0,n.jL)(null==e?void 0:e.rootMargin),r=(0,n.iY)((0,n.tW)(null!==(t=null==e?void 0:e.root)&&void 0!==t?t:null),s),o=i.current.getBoundingClientRect(),l=(0,n.mH)(r,o);a(void 0!==l)}),[]),[t,s.useCallback((e=>{r(e),i.current=e}),[])]}},69755:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var s=a(73790);const n=()=>(0,s.Z)()>0},58034:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i,y:()=>r});var s=a(27378),n=a(18804);const r=async()=>{try{return(await navigator.permissions.query({name:"microphone"})).state}catch(e){return"prompt"}},i=()=>{const e=(0,n.tX)();s.useEffect((()=>{let t=!1;return(async()=>{const a=await r();t||e({type:"MICROPHONE_PERMISSION",value:a})})(),()=>{t=!0}}),[])}},15746:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var s=a(70220),n=a(18804);const r=()=>(0,n.Fx)((e=>e.browserSettings.prefersReducedMotion))||s.H},73790:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var s=a(27378),n=a(17818);const r=()=>{const[e,t]=s.useState((()=>n.O.y));return s.useLayoutEffect((()=>{const e=()=>t(n.O.y);return n.O.addEventListener("scroll",e),()=>{n.O.removeEventListener("scroll",e)}}),[]),e}},17060:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var s=a(27378),n=a(17818);let r=!1;const i=({disabled:e,id:t,offset:a=0}={})=>{s.useEffect((()=>{if(!e&&!r&&window.location.hash.length>1){const e=window.location.hash.slice(1);if(t&&e!==t)return;const s=document.getElementById(e);s&&(n.O.scrollTo(0,n.O.y+s.getBoundingClientRect().top+a),r=!0)}}),[])}},75671:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var s=a(27378);const n=(e,t)=>t?e*(1e3/t):0,r=(e,t={})=>{t=Object.assign({damping:26,mass:1,stiffness:170},t);const a=s.useRef(),r=s.useRef(),i=s.useRef(),o=s.useRef(),l=s.useRef(),c=s=>{var d,u,p;const g=s-(null!==(d=r.current)&&void 0!==d?d:s);r.current=s;const m=(({damping:e=10,from:t,mass:a=1,restDistance:s=.5,restSpeed:r=2,stiffness:i=100,to:o,velocity:l=0})=>{l/=1e3;const c=o-t,d=Math.sqrt(i/a)/1e3,u=((e,t,a)=>t/(2*Math.sqrt(e*a)))(i,e,a),p=(()=>{if(u<1){const e=d*Math.sqrt(1-u*u);return t=>o-Math.exp(-u*d*t)*((u*d*c-l)/e*Math.sin(e*t)+c*Math.cos(e*t))}return e=>o-Math.exp(-d*e)*(c+(d*c-l)*e)})();return e=>{const a=p(e),i=0===e?l:((e,t,a)=>{const s=Math.max(t-5,0);return n(a-e(s),t-s)})(p,e,a),c=t<o&&a>=o||t>o&&a<=o||t===o,d=Math.abs(o-a)<=s,u=Math.abs(i)<=r;return{current:a,done:d&&u,hasReachedTarget:c,target:o,velocity:i}}})(Object.assign(Object.assign({},t),{from:null!==(u=a.current)&&void 0!==u?u:0,to:null!==(p=o.current)&&void 0!==p?p:1,velocity:l.current}))(g);a.current=m.current,l.current=m.velocity,m.hasReachedTarget&&t.clamp&&(m.done=!0),m.done?i.current=void 0:i.current=window.requestAnimationFrame(c),e(m)},d=s.useCallback((()=>void 0!==i.current),[]),u=s.useCallback(((e,s)=>{a.current=e,r.current=void 0,o.current=s,l.current=t.velocity,void 0!==i.current&&window.cancelAnimationFrame(i.current),i.current=window.requestAnimationFrame(c)}),[t.velocity]),p=s.useCallback((()=>{void 0!==i.current&&(window.cancelAnimationFrame(i.current),i.current=void 0)}),[]),g=s.useCallback((e=>o.current=e),[]);return{isAnimating:d,start:u,stop:p,target:o,update:g}}},13026:(e,t,a)=>{"use strict";a.d(t,{Ue:()=>F,ZP:()=>H,gs:()=>x});var s=a(60042),n=a.n(s),r=a(27378),i=a(36083),o=a(39325),l=a(43670),c=a(42659);const d=a.p+"images/leagues/5642e1e72813a88e8973b551a2004c7f.svg",u=a.p+"images/leagues/f12703218fc80de76a63e650726f742e.svg",p=a.p+"images/leagues/9fadb349c2ece257386a0e576359c867.svg",g=a.p+"images/leagues/a8e5c18e80054228b2c61168846ff643.svg",m=a.p+"images/leagues/6b8a8db5ac7f847e7e87efe97c8b451a.svg",h=a.p+"images/leagues/535fc27de224cc7d311dbb5de4f33be6.svg",_=a.p+"images/leagues/2ceb401cae52712705b66a77df83ce40.svg",v=a.p+"images/leagues/beb0df263d0f696bc7095d56b448ca78.svg",f=a.p+"images/leagues/573de2bc90b2499eeb2b3738cff90133.svg",b=a.p+"images/leagues/6df6337370e45c1b9a5029e78211d114.svg",S=a.p+"images/leagues/a35f1db4398fd29e66f1abc33a0d11a2.svg",y=a.p+"images/leagues/2439bac00452e99ba7bf6a7ed0b04196.svg",E=a.p+"images/leagues/22df4cb957e6cf2d7198b6e5449a342e.svg",I="_28T-y _2WS1S",k="_3Wtvm _3eRjX";var w=a(68903),T=a(93746),C=a(87471),R=a(18804);const L=T.Dz.map((e=>`FLAG,${e}`)),O=e=>e.slice(5),P=["NONE","ANGRY","SUNGLASSES","CAT","DUMPSTER_FIRE","EYES","FLEX","ONE_HUNDRED","POOP","POPCORN","POPPER","TROPHY",...L],A=["ANGRY","SUNGLASSES"],D={ANGRY:u,CAT:h,DUMPSTER_FIRE:p,EYES:g,FLEX:m,ONE_HUNDRED:d,POOP:v,POPCORN:f,POPPER:_,SUNGLASSES:y,TROPHY:E},x=(0,w.p)(P),N=(0,w.p)(L),F=({className:e,isEmphasizing:t=!1,isSmall:a,reaction:s,returnPlaceholder:o=!1})=>{const[l,c]=r.useState("NONE"),[d,u]=r.useState("NONE"===s?l:s),[p,g]=r.useState(!1);if(r.useEffect((()=>{"NONE"===s?(g(!0),u(l)):(g(!1),u(s),c(s))}),[s]),"NONE"===s){if(o)return r.createElement("div",{className:n()(e,a?"_2zWeL _2WS1S":I)},r.createElement("img",{className:a?"_3vDrb":"fte9h",src:a?b:S}));if("NONE"===l)return null}const m=N(d),h=A.includes(d),_=(()=>{if(!m)return h?a?"_2-VJ3":"_2wqd1":a?"MG9r_":"_2_mIU"})(),v=m?a?"_2Dohv":"_1KIMq":void 0,f=h?a?"_258ba _2WS1S":"_1U1N1 _28T-y _2WS1S":a?"_2WS1S":I,y=n()(e,f,t?"_3MbJK":void 0,p?"_2DkB8":void 0);return r.createElement("div",{className:y},m?r.createElement(i.Z,{className:v,lang:O(d),size:a?22:38}):r.createElement("img",{className:_,src:D[d]}))},M=(e,t)=>P.includes(e)?A.includes(e)?e===t?"YW-x5 _2YJm6 _3eRjX":"_2YJm6 _3eRjX":e===t?"AZ9bq _3eRjX":k:k,U=({activeReaction:e,onReactionClick:t,reactions:a})=>r.createElement("div",{className:"_1V6a-",style:{gridTemplateColumns:`repeat(${a.length}, 1fr)`}},a.map(((a,s)=>r.createElement(o.Z,{className:M(a,e),key:s,onClick:()=>t(a),variant:"stroke"},N(a)?r.createElement(i.Z,{lang:O(a),size:38}):r.createElement("img",{className:"kC7Wi",src:D[a]}))))),H=({displayedReaction:e,isEmphasizing:t,onReactionClick:a,type:s})=>{var n;const i=(0,R.Fx)(c.Oz),o=(0,R.Fx)(c.np),d=["SUNGLASSES","POPPER","FLEX","EYES","POPCORN","FLAG,".concat(i.learningLanguage)];return r.createElement("div",{className:"_323mI"},r.createElement("div",{className:"panel"===s?"_3pNi3":"_2bN71 _3pNi3"},r.createElement(l.Z,{displaySize:80,forceNoPicture:(0,C.dt)(o),picture:o.picture,size:"xxlarge",user:{id:o.id,name:null!==(n=o.name)&&void 0!==n?n:o.username}}),r.createElement(F,{isEmphasizing:!1,isSmall:!1,reaction:"NONE",returnPlaceholder:!0}),r.createElement(F,{isEmphasizing:t,isSmall:!1,reaction:e}),r.createElement("span",{className:"_18J-r"})),r.createElement(U,{activeReaction:e,onReactionClick:a,reactions:d}),r.createElement(U,{activeReaction:e,onReactionClick:a,reactions:["ANGRY","ONE_HUNDRED","POOP","TROPHY","DUMPSTER_FIRE","CAT"]}))}},98071:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var s=a(27378),n=a(59815),r=a(51158),i=a(79465);class o extends s.Component{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){if(!(0,n.Wp)(e)){const a=(0,r.vU)(e,{data:t});(0,i.track)("app_crash",{crash_message:e.message,crash_type:e.name,rollbar_uuid:null==a?void 0:a.uuid})}}render(){return this.state.hasError?null:s.createElement(s.Suspense,{fallback:null},this.props.children)}}const l=o},87539:(e,t,a)=>{"use strict";a.d(t,{Z:()=>w});var s=a(60042),n=a.n(s),r=a(27378),i=a(31542),o=a(2580),l=a(94856),c=a(15094),d=a(59073),u=a(42659),p=a(89090),g=a(45633);const m={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","juicy-bee":"rgb(var(--color-bee))","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","z-index-modal":"310","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210","style-super":"eQGGV","style-white":"_3lUbm",container:"_8_UHb","container-secondary-modal":"vhYh4",_content:"_13Rl7",content:"_1hEOp _13Rl7","content-fullscreen":"SBf4a _13Rl7",close:"FrL-W","close-fullscreen":"_2F37r","close-top-left":"_2gfp1 FrL-W","close-top-left-with-header":"_2OQnN _2gfp1 FrL-W"};var h=a(17818),_=a(9979),v=a(50498),f=a(30033),b=a(67173),S=a(68903),y=a(26506),E=a(35160),I=a(18804);const k=({animateOnMount:e,animation:t,children:a,className:s,closeStyle:i,fullscreen:E,isSecondaryModal:k=!1,isVisible:w,onDismiss:T,restoreScrollPosition:C})=>{const R=(0,I.Fx)(u.Sg),L=(0,I.Fx)(u.ep)&&!k,O=(0,I.Fx)((e=>e.ui.modalShouldWaitForOverlay)),[P,A]=r.useState(w?"visible":"invisible"),D=r.useRef(null);(0,l.Z)({disabled:"visible"!==P||R||L||E,onClick:T,ref:D}),(0,h.H)("invisible"!==P,C);const x="dark"===(0,c.F)();return r.useEffect((()=>{let e=!1;return w?(async()=>{switch(P){case"before-fade-in":await(0,_.Gg)(),e||A("overlay");break;case"fading-out":A("overlay");break;case"invisible":A("before-fade-in");break;case"overlay":"overlay-then-modal"===t&&!E&&O&&await(0,v._v)(_.nN),e||A("visible");break;case"visible":break;default:(0,S.RJ)(P)}})():(async()=>{switch(P){case"before-fade-in":A("invisible");break;case"fading-out":await(0,v._v)(_.nN),e||A("invisible");break;case"invisible":break;case"overlay":case"visible":A("fading-out");break;default:(0,S.RJ)(P)}})(),()=>{e=!0}}),[E,w,P]),r.useEffect((()=>{if(!R&&"visible"===P){const e=e=>{"Escape"===e.key&&T()};return y.U.disableListeners(),y._.disableListeners(),document.addEventListener("keydown",e),()=>{y.U.enableListeners(),y._.enableListeners(),document.removeEventListener("keydown",e)}}}),[R,T,P]),"invisible"===P?null:r.createElement(o.ZP,{autoFocus:!1,whiteList:e=>"com-1password-menu"!==e.localName},r.createElement(d.Z,{animateOnMount:e,isVisible:"visible"===P},r.createElement("div",{className:k?m["container-secondary-modal"]:m.container},r.createElement("div",{className:n()(m["content"+(E?"-fullscreen":"")],s),ref:D},"hidden"===i?null:r.createElement("div",Object.assign({},(0,f._q)(b.V.CloseButton),{className:E?m["close-fullscreen"]:"top-left"===i?m["close-top-left"]:"top-left-with-header"===i?m["close-top-left-with-header"]:m.close,onClick:T}),r.createElement("img",{src:x?p:g})),a))))},w=({animateOnMount:e,animation:t="overlay-then-modal",children:a,className:s,closeStyle:o,customStyle:l=E.W.White,isFullscreen:c=!1,isSecondaryModal:d=!1,modalName:u,onDismiss:p})=>{var g;const h=(0,I.tX)(),_=(0,I.Fx)((e=>e.ui.isModalReallyOpen)),v=(0,I.Fx)((e=>e.ui.modal)),f=(0,I.Fx)((e=>e.ui.secondaryModal)),b=(0,I.CC)(),[S,y]=r.useState(),w=(null==v?void 0:v.name)===u||d&&(null==f?void 0:f.name)===u,T=d?f:v;w&&T!==S&&y(T),r.useLayoutEffect((()=>(h({name:u,type:"MODAL_MOUNTED"}),()=>{h({name:u,type:"MODAL_UNMOUNTED"})})),[]),r.useEffect((()=>{if(w)return _||h({type:"MODAL_OPENED"}),()=>{var e;void 0===(null===(e=b.getState().ui.modal)||void 0===e?void 0:e.name)&&h({type:"MODAL_CLOSED"})}}),[w]);const C=()=>{p&&S?p({modalOptions:S}):h(d?{options:void 0,type:"TOGGLE_SECONDARY_MODAL"}:{options:void 0,type:"TOGGLE_MODAL"})};return(0,i.createPortal)(r.createElement(k,{animateOnMount:e,animation:t,className:n()(m[l],s),closeStyle:o,fullscreen:c,isSecondaryModal:d,isVisible:w,onDismiss:C,restoreScrollPosition:null===(g=null==S?void 0:S.restoreScrollPosition)||void 0===g||g},S?a({modalOptions:S,onDismiss:C}):null),document.getElementById("overlays"))}},22772:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>v,getRemainingSessions:()=>h});var s=a(27378),n=a(86155),r=a(42659),i=a(93540),o=a(60752),l=a(23275),c=a(51158),d=a(89260),u=a(80820),p=a(18804),g=a(79465),m=a(64591);function*h(e,t){for(t||(t={level:e[0].levels[0],levelIndex:0,unitIndex:0,unitNumber:1});t;){if("unit_test"===t.level.state)return;for(let e=t.level.finishedSessions;e<t.level.totalSessions;e++)yield(0,m.$f)(t,["level"],{finishedSessions:e,state:"active"});t=(0,l.OE)(e,t)}}const _=async(e,t,a,s,n,r)=>{const i={pathLevelNumber:(e.levelIndex+1).toString(),pathUnitNumber:(e.unitIndex+1).toString(),type:"path-level"};return void 0===(await(0,d.u4)({dispatch:t.dispatch.bind(t),getState:t.getState.bind(t),includeFreeform:a,includeListening:s,includeSmartTips:n,includeSpeaking:r,levelData:e,params:i,sessionWillStartRightAway:!1})).sessionPrefetchedTimestamp},v=()=>{const e=(0,p.Fx)(r.$4),t=(0,p.Fx)(r.Xr),a=(0,p.Fx)(r.df),l=(0,p.CC)(),{includeListening:d,includeSpeaking:m}=(0,n.ZP)();return s.useEffect((()=>{t&&!a&&(async()=>{try{await(async(e,t,a,s,n)=>{const r=e.getState(),l=(0,i.cb)(r),d=(0,i.HF)(r);if(!l||!d)return;const p=await(0,o.b)(),[m,v]=((e,t)=>{const a=[];let s=!1;for(const n of h(e,t))if((0,u.tr)(n.level)){if(a.push(n),8===a.length)break}else if("chest"===n.level.type){if(s)return a.pop(),[a,!0];s=!0}return[a,!1]})(d,l),f=m.map((async n=>{try{return await _(n,e,s&&"story"===n.level.type,t,s&&"story"!==n.level.type,a)}catch(e){return(0,c.Kp)(e),"error"}})),b=await Promise.all(f);if(await(0,u._x)(e),await(0,u.rb)(e),Math.random()<.1){const e=b.filter((e=>!0===e)).length,t=b.filter((e=>"error"===e)).length,a=(await p.getAllKeys("prefetchedSessions")).length;(0,g.track)("prefetch_sessions_end",{download_time_seconds:Math.round((window.performance.now()-n)/1e3),num_sessions_downloaded:e,num_sessions_in_cache:a,num_sessions_remaining:t,prefetch_end_reason:t>0?"error":v?"multiple_chests":e>0?"finished":"nothing_to_download"})}})(l,d,m,e,window.performance.now())}catch(e){(0,c.Kp)(e)}})()}),[d,m,e,t,a]),null}},77888:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var s=a(42659),n=a(21791),r=a(18804);const i=()=>{const e=(0,r.Fx)(s.Oz);return(0,r.Fx)((t=>void 0===e?0:(0,n.L)(t)))}},83537:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var s=a(60042),n=a.n(s),r=a(27378);const i=r.forwardRef(((e,t)=>{var{children:a,className:s,onToggle:i,tabIndex:o}=e,l=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]])}return a}(e,["children","className","onToggle","tabIndex"]);return r.createElement("div",Object.assign({className:n()("_2eeKH",s),onClick:i,onKeyDown:e=>{["Enter"," "].includes(e.key)&&(i(),e.preventDefault())},onMouseUp:e=>{e.stopPropagation()},ref:t,role:"button",tabIndex:null!=o?o:0},l),a)}))},29531:(e,t,a)=>{"use strict";a.d(t,{R:()=>i,f:()=>c});var s=a(27378),n=a(97276),r=a(88528);const i="bottom",o=parseFloat(r.Z["juicy-length"]),l=e=>[{name:"arrow",options:{element:e,padding:parseFloat(r.Z["margin-popover-stem"])}},{name:"flip",options:{padding:o}},{name:"offset",options:{offset:[0,parseFloat(r.Z["margin-popover"])]}},{name:"preventOverflow",options:{padding:o}}],c=(e={})=>{var t,a,{modifiers:r=[]}=e,o=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]])}return a}(e,["modifiers"]);const[c,d]=s.useState(null),[u,p]=s.useState(null),[g,m]=s.useState(null),h=(0,n.D)(u,g,Object.assign({modifiers:[...l(null!=c?c:void 0),...r]},o));return{currentPlacement:null!==(a=null===(t=h.state)||void 0===t?void 0:t.placement)&&void 0!==a?a:i,props:h,setArrowRef:d,setElementRef:p,setPopoverRef:m}}},44629:(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var s=a(60042),n=a.n(s),r=a(27378),i=a(29973),o=a(29531);const l={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","juicy-bee":"rgb(var(--color-bee))","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","z-index-modal":"310","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210",_after:"_15ywt",wrap:"_34k_q","wrap-open-down":"fYaYB _15ywt _34k_q","wrap-open-left":"_1j0Jz _15ywt _34k_q","wrap-open-right":"JF6Vl _15ywt _34k_q","wrap-open-up":"_14-op _15ywt _34k_q"};const c=e=>null!==e&&"direction"in e,d=r.forwardRef(((e,t)=>{var a,{children:s,className:d,customOffset:u,isOpen:p,onClose:g,onOpen:m,onToggle:h,popoverState:_,tabIndex:v}=e,f=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]])}return a}(e,["children","className","customOffset","isOpen","onClose","onOpen","onToggle","popoverState","tabIndex"]);const b=c(_)?_.direction:(0,i.h)(null!==(a=null==_?void 0:_.placement)&&void 0!==a?a:o.R),S=()=>c(_)?_.ref.current:null==_?void 0:_.elements.popper;return r.createElement("div",Object.assign({className:n()(l["wrap"+(p?`-open-${b}`:"")],d),onClick:e=>{var t;(null===(t=S())||void 0===t?void 0:t.contains(e.target))||h()},onKeyDown:e=>{["Enter"," "].includes(e.key)&&(h(),e.preventDefault())},onMouseEnter:m,onMouseLeave:g,onMouseUp:e=>{e.stopPropagation()},onTouchEnd:e=>{var t;(null===(t=S())||void 0===t?void 0:t.contains(e.target))||(e.preventDefault(),h())},ref:t,style:void 0!==u&&u>=0?{"--offset":`${u}px`}:void 0,tabIndex:null!=v?v:0},f),s)}))},52761:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var s=a(27378),n=a(29973),r=a(29531),i=a(8654);const o=e=>"placement"in e,l=s.forwardRef(((e,t)=>{var a,l,{dir:c,popperProps:d,style:u}=e,p=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]])}return a}(e,["dir","popperProps","style"]);let g=(0,n.h)(o(d)?d.placement:null!==(l=null===(a=d.state)||void 0===a?void 0:a.placement)&&void 0!==l?l:r.R);const m="left"===g?90:"right"===g?-90:"up"===g?180:0,h=Object.assign({margin:0},o(d)?d.arrowProps.style:d.styles.arrow);h.transform&&(h.transform=`${h.transform} rotate(${m}deg)`);const _=Object.assign(Object.assign({margin:0},o(d)?d.style:d.styles.popper),u);return i.lw&&("left"===g?g="right":"right"===g&&(g="left")),s.createElement(n.Z,Object.assign({},p,{direction:g,manualPositioning:!0,ref:t,stemContainerStyle:h,style:_}))}))},33467:(e,t,a)=>{"use strict";var s;a.d(t,{K:()=>s}),function(e){e[e.Loading=0]="Loading",e[e.Login=1]="Login",e[e.Mistakes=2]="Mistakes",e[e.Features=3]="Features",e[e.Benefits=4]="Benefits",e[e.Timeline=5]="Timeline",e[e.Packages=6]="Packages",e[e.BillingInfo=7]="BillingInfo",e[e.Welcome=8]="Welcome"}(s||(s={}))},25880:(e,t,a)=>{"use strict";a.d(t,{W:()=>C,C:()=>T});var s=a(60042),n=a.n(s),r=a(27378),i=a(25200),o=a(38891),l=a(83735);const c=a.p+"images/ee80276a6691815f08f3ae12b3c4e1c3.svg",d=a.p+"images/d36b5e77c07ab3eb62cd90cefb96d50e.svg",u={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","juicy-bee":"rgb(var(--color-bee))","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","z-index-modal":"310","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210",prompt:"_39sZy",container:"_2TJ1F","trace-wrap":"_22hDO","trace-wrap-shake":"IRApA _22hDO","horizontal-shaking":"_1Aw4M","trace-grid":"_8naOP","trace-content":"_3cfAv","thick-stroke":"_2wliM","thin-stroke":"_1r-WP","no-line":"Jeo2o","unfilled-line":"_5f82A","dashed-line":"_2V_Ki","no-cursor":"v2nWY",cursor:"_1czE4 v2nWY","filled-line":"_27cLF","white-dot":"_3FLyS"};var p=a(81469),g=a(76578);const m=100,h=(e,t)=>"GUARDRAIL"===e.strokeDrawMode||"PREDRAWN"!==e.strokeDrawMode&&("FREEHAND"!==e.strokeDrawMode||!t||e.numFailures>=2),_=(e,t)=>{const a=e.getPointAtLength(t*e.getTotalLength()),s=e.getCTM();return s?a.matrixTransform(s):a},v=(e,t)=>{const a=.9999,s=_(e,t>=a?.95:t),n=_(e,t>=a?1:Math.min(t+.05,1));return Math.atan2(n.y-s.y,n.x-s.x)/Math.PI*180},f=(e,t)=>({angle:v(t,e),angleEnd:v(t,1),endPoint:_(t,1),progressPoint:_(t,e)}),b=({cursor:e,strokeIndex:t,strokeRef:a,strokeInfo:s,strokeProgress:n,numStrokes:r})=>{if((0,g.TE)(e,s.progressPoint)>25)return;const i=t=>(0,g.TE)(_(a,t),e),o=a.getTotalLength();let l=Math.max(0,n-5/o),c=Math.min(1,n+5/o);for(;c-l>.001;){const e=l+(c-l)/2,t=e+(c-e)/2;i(l+(e-l)/2)<i(t)?c=e:l=e}const d=Math.max(n,l+(c-l)/2);return d>=.97||a.getTotalLength()<10?{cursor:e,numStrokes:r,strokeIndex:t+1,strokeInfo:void 0,strokeProgress:0,strokeRef:a}:{cursor:e,numStrokes:r,strokeIndex:t,strokeInfo:f(d,a),strokeProgress:d,strokeRef:a}},S=e=>(0,p.Z)(m).map((t=>_(e,t/m)));var y=a(16970),E=a(37971),I=a(93746),k=a(18804),w=a(34704);const T=3,C=({challenge:e,fromLanguage:t,learningLanguage:a,onChange:s,strokeWidth:p})=>{const[_,v]=r.useState(),[C,R]=r.useState(0),L=r.useRef(null),O=r.useRef(null),P=r.useRef(null),[A,D]=r.useState(0),x=r.useRef(null),N=r.useRef(!1),F=r.useRef(void 0),[M,U]=r.useState(),[H,j]=r.useState(),[G,B]=r.useState(!1),V=(0,k.tX)(),z=(0,k.Fx)((e=>e.player.status===E.c.Blaming||e.player.status===E.c.CharacterWriteRetryBlaming)),[Z,$]=r.useState([]),W=[],q=[];e.strokes.forEach((e=>{"PREDRAWN"===e.strokeDrawMode?W.push(e):q.push(e)}));const Q=q.length!==e.strokes.length,Y=e.strokes.every((e=>"NEVER"===e.backgroundDisplayMode)),K=void 0===C?void 0:"FREEHAND"===q[C].strokeDrawMode?Object.assign(Object.assign({},q[C]),{numFailures:null!=H?H:0,strokeDrawMode:"FREEHAND"}):q[C],J=null==K?void 0:K.strokeDrawMode,X=_?e.width*_+20:void 0,ee=_?e.height*_+20:void 0,te=X&&ee?Math.max(X,ee):void 0;r.useLayoutEffect((()=>{x.current&&U(f(0,x.current))}),[_,C]),r.useEffect((()=>{"FREEHAND"!==(null==K?void 0:K.strokeDrawMode)||void 0===H||G||B(!0)}),[H]);const ae=(e,t,a)=>{var s;if(!a.current)return;const n=null===(s=a.current.getScreenCTM())||void 0===s?void 0:s.inverse();return n?new DOMPoint(e,t).matrixTransform(n):void 0},se=()=>{null!==x.current&&null!==L.current&&void 0!==X&&void 0!==ee&&N.current&&void 0!==C&&"FREEHAND"===J&&((e,t,a,n)=>{const r=((e,t,a,s)=>{const n=Math.min(a,s),{referencePoints:r,drawnPoints:i}=((e,t,a)=>{const s=S(e),n=S(t),r=s.map((e=>e.x)).reduce(((e,t)=>e+t))/m,i=s.map((e=>e.y)).reduce(((e,t)=>e+t))/m,o=n.map((e=>e.x)).reduce(((e,t)=>e+t))/m,l=n.map((e=>e.y)).reduce(((e,t)=>e+t))/m,c=Math.max(1-.18,Math.min(1.18,e.getTotalLength()/t.getTotalLength())),d=n.map((e=>({x:(e.x-o)*c+o,y:(e.y-l)*c+l}))),u=Math.max(-a,Math.min(a,r-o)),p=Math.max(-a,Math.min(a,i-l));return{drawnPoints:d.map((e=>({x:e.x+u,y:e.y+p}))),referencePoints:s}})(e,t,.15*n);return((e,t,a)=>{const s=e.map((()=>t.map((()=>1/0))));s[0][0]=0;for(let n=1;n<e.length;n++)for(let r=1;r<t.length;r++){const i=a(e[n],t[r]);s[n][r]=i+Math.min(s[n-1][r],s[n][r-1],s[n-1][r-1])}return s[e.length-1][t.length-1]})(r,i,g.TE)/r.length<.07*Math.max(a,s)})(e,t,a,n),i=q.length;if(void 0===C)throw Error("Rendering transliteration text without transliteration settings!");if(r){C+1<i&&R(C+1),D(0),U(void 0),j(void 0);const e={currentStrokeNumber:C+1,numFailures:H};return s(Object.assign({},e)),C+1===i&&(V((0,l.YK)(!1,Date.now())),R(void 0)),void $([])}const o=(null!=H?H:0)+1;if(o<T)return j(o),void $([]);if(o>=T){const e={currentStrokeNumber:C+1,numFailures:o};s(Object.assign({},e));const t=C+1===i;R(t?void 0:C+1),j(t?void 0:0),D(0),U(void 0),V((0,l.YK)(!1,Date.now())),$([])}})(x.current,L.current,X,ee),N.current=!1,F.current=void 0},ne=(e,t)=>{var a;const n=ae(e,t,O);if(!(M&&n&&void 0!==C&&x.current&&N.current))return;const r=null!==(a=F.current)&&void 0!==a?a:n,i=Math.max(1,Math.ceil((0,g.TE)(r,n)/5)),o=(n.x-r.x)/i,c=(n.y-r.y)/i;let d={cursor:n,numStrokes:q.length,strokeIndex:C,strokeInfo:M,strokeProgress:A,strokeRef:x.current};for(let e=0;e<i&&d.strokeInfo;e++){const t=b({cursor:{x:r.x+e*o,y:r.y+e*c},numStrokes:d.numStrokes,strokeIndex:d.strokeIndex,strokeInfo:d.strokeInfo,strokeProgress:d.strokeProgress,strokeRef:d.strokeRef});if(!t)break;d=t}d&&(e=>{if(e.strokeIndex!==C){N.current=!1,e.strokeIndex<e.numStrokes&&R(e.strokeIndex);const t={currentStrokeNumber:e.strokeIndex,numFailures:H};s(Object.assign({},t))}D(e.strokeProgress),U(e.strokeInfo),e.strokeIndex===e.numStrokes&&(V((0,l.YK)(!1,Date.now())),R(void 0))})(d),F.current=n},re=(0,k.Fx)((e=>e.ui.viewportHeight)),ie=(0,k.Fx)((e=>e.ui.viewportWidth));r.useLayoutEffect((()=>{if(!P.current)return;const{width:t,height:a}=P.current.getBoundingClientRect(),s=Math.max(e.width,e.height),n=Math.min((t-20)/s,(a-20)/s);v(n)}),[re,ie]);const oe=void 0!==e.blank,le=void 0===e.blank?e.prompt:e.prompt.replace(e.blank,y.XW),ce=()=>{return void 0===K||void 0===te?null:r.createElement(r.Fragment,null,"FREEHAND"===K.strokeDrawMode?r.createElement("path",{className:u["filled-line"],d:(t=Z.map((e=>ae(e.x,e.y,L))),t.flatMap(((e,t)=>void 0===e?[]:[`${0===t?"M":"L"} ${e.x},${e.y} `])).join("")),pathLength:1,ref:L,transform:`translate(${te/2}, ${te/2}) scale(${_}, ${_}) translate(-${e.width/2}, -${e.height/2})`}):A>=.01?r.createElement("path",{className:n()(u["filled-line"],u.cursor),d:K.path,pathLength:1,style:{strokeDashoffset:1-A},transform:`translate(${te/2}, ${te/2}) scale(${_}, ${_}) translate(-${e.width/2}, -${e.height/2})`}):null);var t},de=void 0!==K&&h(K,Y),ue=void 0!==K&&(!Q&&0===C||((e,t)=>!h(e,t)&&("GUARDRAIL"===e.strokeDrawMode||"PREDRAWN"!==e.strokeDrawMode&&("FREEHAND"!==e.strokeDrawMode||!t||e.numFailures>=1)))(K,Y)),pe="FREEHAND"===J;return r.createElement("div",{className:u.container,dir:(0,I.Ux)(a)},r.createElement("div",{className:u.prompt},e.promptTts?r.createElement(o.Z,{audio:e.promptTts,autoplay:!0,type:"small"}):null,r.createElement("span",null,e.promptTransliteration?r.createElement(i.Z,{highlightStyle:"normal",highlightedCharacter:oe?e.blank:e.highlight,highlightedIsBlank:oe,text:[...le],transliteration:e.promptTransliteration,type:(0,w.dN)(a,t)?void 0:"hard-coded"}):e.prompt)),r.createElement("div",{className:G?u["trace-wrap-shake"]:u["trace-wrap"],onAnimationEnd:()=>{B(!1)},ref:P},void 0===_||void 0===te?null:r.createElement("svg",{className:n()(u["trace-content"],u[`${p}-stroke`]),height:te,onMouseDown:e=>{e.preventDefault(),"FREEHAND"!==J||z||(N.current=!0,$([{x:e.clientX,y:e.clientY}]))},onMouseLeave:se,onMouseMove:e=>{"FREEHAND"===J&&N.current?$([...Z,{x:e.clientX,y:e.clientY}]):ne(e.clientX,e.clientY)},onMouseUp:se,onTouchCancel:se,onTouchEnd:se,onTouchMove:e=>{"FREEHAND"===J&&N.current?$([...Z,{x:e.touches[0].clientX,y:e.touches[0].clientY}]):ne(e.touches[0].clientX,e.touches[0].clientY)},onTouchStart:e=>{N.current=!0,"FREEHAND"!==J||z?ne(e.touches[0].clientX,e.touches[0].clientY):$([{x:e.touches[0].clientX,y:e.touches[0].clientY}])},ref:O,viewBox:`0 0 ${te} ${te}`,width:te,xmlns:"http://www.w3.org/2000/svg"},void 0===te?null:r.createElement(r.Fragment,null,r.createElement("path",{className:u["trace-grid"],d:`M 0 ${te/2} H ${te}`}),r.createElement("path",{className:u["trace-grid"],d:`M ${te/2} 0 V ${te}`})),r.createElement("g",{transform:`translate(${te/2}, ${te/2}) scale(${_}, ${_}) translate(-${e.width/2}, -${e.height/2})`},r.createElement(r.Fragment,null,q.map(((e,t)=>((e,t,a)=>{if("GUARDRAIL"===e.strokeDrawMode||"PREDRAWN"===e.strokeDrawMode)return!0;if("FREEHAND"===e.strokeDrawMode){if(a)return t&&e.numFailures>=2;if("ACTIVE_ONLY"===e.backgroundDisplayMode)return t;if("ALWAYS"===e.backgroundDisplayMode)return!0}return!1})(e,t===C,Y)?r.createElement("path",{className:u["unfilled-line"],d:e.path,key:t}):null)),W.map(((e,t)=>r.createElement("path",{className:u["filled-line"],d:e.path,key:t,pathLength:1,style:{strokeDashoffset:0}}))),q.slice(0,null!=C?C:q.length).map(((e,t)=>r.createElement("path",{className:u["filled-line"],d:e.path,key:t,pathLength:1,style:{strokeDashoffset:0}})))),void 0===K?null:r.createElement("path",{className:u["no-line"],d:K.path,ref:x})),void 0!==M&&void 0!==te?r.createElement(r.Fragment,null,r.createElement("path",{className:de?u["dashed-line"]:u["no-line"],d:null==K?void 0:K.path,transform:`translate(${te/2}, ${te/2}) scale(${_}, ${_}) translate(-${e.width/2}, -${e.height/2})`}),pe?null:ce(),de&&void 0!==M?r.createElement("image",{height:18,href:c,onMouseDown:e=>e.preventDefault(),transform:`translate(${M.endPoint.x}, ${M.endPoint.y}) rotate(${M.angleEnd}) translate(-7, -9)`,width:14}):null,(de||ue)&&null!==x.current?(ge=pe?f(0,x.current):M,void 0!==K&&null!==x.current?r.createElement("g",{className:pe?u["no-cursor"]:u.cursor,onMouseDown:e=>{e.preventDefault(),"FREEHAND"!==J&&(N.current=!0,ne(e.clientX,e.clientY))},transform:`translate(${ge.progressPoint.x}, ${ge.progressPoint.y})`},r.createElement("circle",{r:15}),x.current.getTotalLength()<10?r.createElement("circle",{className:u["white-dot"],r:6}):r.createElement("image",{height:16,href:d,onMouseDown:e=>e.preventDefault(),transform:`rotate(${ge.angle}) translate(-8, -8)`,width:16})):null):null,pe?ce():null):null)));var ge}},86155:(e,t,a)=>{"use strict";a.d(t,{ZP:()=>c,eG:()=>l});var s=a(30427),n=a(42659),r=a(17135),i=a(68564),o=a(18804);const l=s.P1(n.jv,n.iH,n.Jw,n.np,((e,t,a,s)=>{const n=(0,r.Zo)(),o=s.enableMicrophone,l=s.enableSpeaker,c=e.listenDisabledUntil,d=a.microphonePermission,u=e.speakDisabledUntil,p=l&&c<n,g=u>=n,m=o&&u<n,h=["ar","ca","cs","cy","da","de","el","en","eo","es","fi","fr","ga","gd","gn","he","hi","ht","hu","hv","id","it","ja","la","nl-NL","no-BO","nv","pl","pt","ro","ru","sv","sw","tlh","tr","uk","vi","zh","zu"].includes(t),_=["de","en","es","fr","it","pt","nl-NL","da","sv","tr","no-BO","uk","ru"].includes(t)&&"denied"!==d&&i.c;return{includeListening:p&&h,includeSpeaking:m&&_,isListenEnabled:p,isListenSupported:h,isSpeakDisabledTemporarily:g,isSpeakEnabled:m,isSpeakSupported:_,microphonePermission:d,showSpeakingExercisesSetting:i.c}})),c=()=>{const e=(0,o.tX)(),t=(0,o.Fx)(l);return Object.assign(Object.assign({},t),{resetListenDisabledTemporarily:()=>e({type:"ENABLE_LISTEN"}),resetSpeakDisabledTemporarily:()=>e({type:"ENABLE_SPEAK"})})}},8121:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var s=a(60042),n=a.n(s),r=a(27378),i=a(47725);const o=a.p+"images/china/8ac5f69a53362c09584230c85b567ef7.png",l=({inSplash:e})=>r.createElement("div",{className:n()("_2CEvq",{_2UmiF:e})},r.createElement("div",{className:"FwftD"},r.createElement(i.Z,{href:"http://beian.miit.gov.cn"},"京ICP备14061397号-1"),r.createElement("span",null," • "),r.createElement("img",{src:o}),r.createElement(i.Z,{href:"http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=11010102005866"},"京公网安备 11010102005866 号")))},16376:(e,t,a)=>{"use strict";a.d(t,{Z:()=>v});var s=a(60042),n=a.n(s),r=a(27378),i=a(80254),o=a(36083),l=a(47725),c=a(42659);const d="_1fESl _1G1lu",u="TNj94";var p=a(26886),g=a(8654),m=a(93746),h=a(18804);const _=["en","es","fr","de","it","pt","nl-NL","ja"],v=({className:e,disabled:t,onCarouselItemClick:a,trackingScreen:s})=>{const v=r.useRef(null),f=r.useRef([]),b=r.useRef(null),[S,y]=r.useState(),[E,I]=r.useState(0),{featureFlags:{linfra_hide_picker_web:k}}=(0,h.Fx)(c.Mb),w=r.useMemo((()=>{var e;return(null!==(e=m.Jl[m.h9])&&void 0!==e?e:[]).filter((e=>!(k&&(0,p.It)(e,m.h9))))}),[k]),T=_.filter((e=>w.includes(e))),C=i.jj([...T,...w]),R=(()=>{var e;for(let t=0;t<C.length;t++)if((null!==(e=null==S?void 0:S[t-1])&&void 0!==e?e:0)>=E)return t;return 0})(),L=null==S?void 0:S[S.length-1],O=()=>{var e;const t=null===(e=v.current)||void 0===e?void 0:e.getBoundingClientRect().width;return void 0===L||void 0===t?void 0:Math.max(L-t,0)},P=e=>{var t;return null!==(t=null==S?void 0:S[e-1])&&void 0!==t?t:0};return r.useLayoutEffect((()=>{var e,t;if(b.current){const a=b.current.getBoundingClientRect().left,s=[];for(let e=1;e<f.current.length;e++){const t=f.current[e];t&&(s[e-1]=t.getBoundingClientRect().left-a)}s[f.current.length-1]=s[f.current.length-2]+(null!==(t=null===(e=f.current[f.current.length-1])||void 0===e?void 0:e.getBoundingClientRect().width)&&void 0!==t?t:0),y(s)}}),[]),r.createElement("nav",{className:n()("fh7hk",e)},r.createElement("svg",{className:d,fill:"none",onClick:()=>{const e=O();if(void 0===e)return;const t=Math.max(P(R-2),0);I(t<E?t:e)},viewBox:"0 0 16 16"},r.createElement("path",{d:"M10 2L4 8L10 14",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"})),r.createElement("div",{className:"kuc9r",ref:v},r.createElement("ul",{className:"_1NFpv",ref:b,style:{transform:`translateX(-${E}px)`}},C.map(((e,n)=>{return r.createElement("li",{key:e,ref:e=>f.current[n]=e},(i=r.createElement(r.Fragment,null,r.createElement(o.Z,{className:"_1v6Jc",lang:e,size:36}),r.createElement("span",{className:"w9lql"},(0,g._i)(154,{language_name:(0,m.vY)(e)}))),t?r.createElement("span",{className:u},i):r.createElement(l.Z,{className:u,href:(0,p.og)(e),onClick:a,trackingScreen:s,trackingTarget:"flag"},i)));var i})))),r.createElement("svg",{className:d,fill:"none",onClick:()=>{const e=O();if(void 0===e)return;const t=Math.min(P(R+2),e);I(t>E?t:0)},viewBox:"0 0 16 16"},r.createElement("path",{d:"M6 2L12 8L6 14",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"})))}},98683:(e,t,a)=>{"use strict";a.d(t,{J:()=>f,Q:()=>b});var s=a(33467),n=a(9249),r=a(42659),i=a(80164),o=a(50548),l=a(8654),c=a(35160),d=a(2439),u=a(6545),p=a(32499),g=a(88868),m=a(18804),h=a(79465),_=a(16086),v=a(20028);const f=()=>{const e=(0,m.Fx)(i.y1);return(0,m.Fx)((e=>"alreadyHasSuper"===(0,i.gb)(e)))?(0,l._i)(34068):e?(0,l._i)(38413,{num:2}):(0,l._i)(34201)},b=({customStartStep:e=s.K.Packages,iapContext:t,onBeforeClose:a}={})=>{const l=(0,m.Fx)(i.y1),f=(0,u.ew)(),b=(0,o.k6)(),S=(0,m.Fx)((e=>(0,r.Mb)(e).ipCountry)),y=(0,m.Fx)(r.Lm),E=(0,o.TH)(),I=(0,m.Fx)(r.np),k=(0,m.tX)(),w=(0,m.CC)();return(s=!1)=>{const r="boolean"==typeof s&&s;if(y&&!(0,v.pN)(I))(0,d.j)(Object.assign({customStartStep:r?(0,p.$2)(e):e,didClickFreeTrial:l,onBeforeClose:a,trackingProps:{iap_context:null!=t?t:l?"plus_landing_page_trial":"plus_landing_page_no_trial"}},r?{defaultSubscriptionPlanType:p._r.FamilyPlan}:{}),k);else{const t=(0,_.Pc)()?"plus_landing_page_trial_user":"plus_landing_page_logged_out";(0,h.track)("premium_ad_click",{iap_context:t}),k({options:{allowLanguagelessUser:!0,closeModalOnLogin:!1,goBack:async s=>{switch(await Promise.all([k(n.ke()),k(n.Hm(S,f))]),(0,i.gb)(w.getState())){case"eligible":case"eligibleFreeTrial":(0,d.q)({customStartStep:e,didClickFreeTrial:l,onBeforeClose:a,restoreScrollPosition:!1,trackingProps:{iap_context:t}},k);break;case"alreadyHasSuper":null==s||s();break;case"ineligible":null==s||s(),b.push(g.B6)}},isSignIn:!1,limitRedirect:"ui-language-change",name:c.t.SignInUp,redirectPath:E.pathname||"/super",via:"plus_landing_page_start_free_trial"},type:"TOGGLE_MODAL"})}}}},14649:(e,t,a)=>{"use strict";a.d(t,{_:()=>o});var s=a(43464),n=a(79465),r=a(81621),i=a(20028);const o=()=>async(e,t)=>{const a=t(),{user:o,user:{fromLanguage:l,learningLanguage:c}}=a;if(c)try{const t=await s.I7.getAchievementsV3(o.id,l,c,(0,i.jq)(o),(0,r.rt)(o),(0,i.dE)(o),o.hasPlus);t.length>0?e({achievements:t,type:"UPDATE_USER_ACHIEVEMENTS_V3"}):s.I7.migrateToV3(o.id)}catch(e){(0,n.trackAndLogApiError)("load_v3_user_achievements_failed","Failed to load V3 user achievements",e)}}},53278:(e,t,a)=>{"use strict";a.d(t,{$l:()=>i,K_:()=>r,bf:()=>n});var s=a(80254);const n=e=>r([e]),r=e=>t=>{t({animations:e.map((e=>{var t;return Object.assign(Object.assign({},e),{id:null!==(t=e.id)&&void 0!==t?t:s.EL()})})),type:"QUEUE_ANIMATIONS"})},i=(e,t=[])=>a=>{const n=s.EL(),r=(e,t)=>{var a;return null!==(a=e.id)&&void 0!==a?a:`${n}_${t}`};a({animations:e.map(((e,a,s)=>Object.assign(Object.assign({},e),{blockers:0===a?t:[r(s[a-1],a-1)],id:r(e,a)}))),type:"QUEUE_ANIMATIONS"})}},94103:(e,t,a)=>{"use strict";a.d(t,{f:()=>l,p:()=>c});var s=a(53278),n=a(42659),r=a(43464),i=a(16970);const o=e=>e.flatMap((e=>e.groups.flatMap((e=>e.characters.flat())))),l=()=>async(e,t)=>{const a=t().characters,l=(0,n.Oz)(t());if(a.characterChart&&a.learningLanguage&&a.fromLanguage){const t=await r.zQ.getCharacterChart(a.learningLanguage,a.fromLanguage,(0,i.Hu)(a.learningLanguage,a.fromLanguage)?l.alphabetsPathProgressKey:void 0),n=o(a.characterChart.alphabets),c=o(t.alphabets).filter(((e,t)=>{const a=n[t];return null!==e&&null!==a&&e.strength>a.strength})),d=c[c.length-1];d&&e((0,s.bf)({character:d.character,name:"CHARACTER_SCROLL",transliteration:d.transliteration})),e({changedCharacters:c,stagedCharacterChart:t,type:"characters/STAGE_CHART_UPDATE"})}},c=()=>(e,t)=>{const a=t().characters.stagedCharacterChart,n=t().characters.changedCharacters;if(a&&n){const t=n.map((e=>({character:e.character,name:"CHARACTER_PROGRESS",transliteration:e.transliteration})));e((0,s.K_)(t)),e({characterChart:a,type:"characters/UPDATE_CHARACTER_CHART"})}}},50791:(e,t,a)=>{"use strict";a.d(t,{i:()=>r});var s=a(43464),n=a(79465);const r=()=>async e=>{try{e({config:await s.Vi.getConfig(),type:"UPDATE_CONFIG"})}catch(e){(0,n.trackAndLogApiError)("load_config_failed","Failed to load config",e)}}},14092:(e,t,a)=>{"use strict";a.d(t,{F:()=>i,Z:()=>o});var s=a(43464),n=a(93746),r=a(79465);const i=async(e,t,a,i)=>{await s._s.courseSubscribe(t,a,i);const o=(0,n.D3)(null!=a?a:n.h9);(0,r.track)("course subscribe",{from_language:o,learning_language:(0,n.D3)(t),logged_in:e})},o=async(e,t,a)=>{await s._s.courseUnsubscribe(e,t,a)}},61544:(e,t,a)=>{"use strict";a.d(t,{Fn:()=>u,GG:()=>i,HQ:()=>l,j1:()=>o,oh:()=>c,tD:()=>d,w7:()=>p});var s=a(42659),n=a(43464),r=a(81621);const i=()=>async(e,t)=>{const a=(0,s.np)(t());if(!(0,r.rt)(a))return;const i=(0,s.Mb)(t()),[o,l,c]=await Promise.all([n.i_.getFeed(a.id,a.fromLanguage,i),n.i_.getKudosAssets(i),n.i_.getKudosDrawer(a.id,a.fromLanguage,i)]);e({feed:o,type:"SET_FEED"}),e({assets:l,type:"SET_KUDOS_ASSETS"}),e({drawer:c,type:"SET_KUDOS_DRAWER"})},o=(e,t,a)=>async s=>{await n.i_.updateFeed(e,t,!1,a),await s(i())},l=(e,t,a)=>async s=>{await n.i_.sendKudos(e,t,a),await s(i())},c=e=>async t=>{await n.i_.unsendKudos(e),await t(i())},d=(e,t)=>async a=>{a({recommendationInfo:await n.i_.getFriendRecommendations(e,t),type:"SET_FOLLOW_SUGGESTIONS"})},u=(e,t)=>async a=>{const{filteredIds:s,rotatedIds:r}=await n.i_.updateFriendRecommendations(e,t);a({filteredIds:s,rotatedIds:r,type:"UPDATE_FOLLOW_SUGGESTIONS"})},p=(e,t)=>async a=>{await n.i_.deleteFriendRecommendation(e,t),a({deletedId:t,type:"DELETE_FOLLOW_SUGGESTION"})}},33:(e,t,a)=>{"use strict";a.d(t,{AG:()=>O,Ic:()=>I,Up:()=>E,b5:()=>y,kS:()=>R,lx:()=>C,mE:()=>k,pt:()=>T});var s=a(99369),n=a(80254),r=a(86155),i=a(9990),o=a(42659),l=a(73520),c=a(74462),d=a(93540),u=a(43464),p=a(17135),g=a(63301),m=a(94171),h=a(41831),_=a(68903),v=a(16689),f=a(51158),b=a(79465),S=a(55829);const y=()=>async(e,t)=>{var a,s,c,f,y,E,I,k,T;const C=t(),R=(0,o.np)(C),[O,P,A]=await Promise.all([u.JV.getQuestsData(R.id),u.JV.getQuestsSchema(R.fromLanguage),u.JV.getQuestProgress({timezone:R.timezone,uiLanguage:R.fromLanguage,userId:R.id})]),D=null!==(a=P.goals)&&void 0!==a?a:[],x=A.difficulty-1;e({payload:D,type:"SET_GOALS_SCHEMA"}),e({payload:A.goals.progress,type:"SET_GOALS_PROGRESS"}),e({payload:x,type:"SET_GOALS_DIFFICULTY"}),e({badges:P.badges,type:"SET_QUEST_BADGES"}),e({earnedBadges:null!==(s=A.badges.details)&&void 0!==s?s:[],type:"SET_EARNED_BADGES"});const N=(0,m.ed)(O),F=(0,g.ky)("debugFriendsQuestState");if(N){const t=n.HK(D,"goalId"),a=N.goalId,s=N.questState===S.S.ACTIVE?A.goals.details[a]:null===(f=null===(c=A.pastGoals)||void 0===c?void 0:c[0])||void 0===f?void 0:f.details;e(w({details:s,friendsQuestInfo:N,historicalStats:A.goals.historicalStats,schemaByGoalId:t}))}else e(F?{payload:(0,m.ET)(),type:"SET_FRIENDS_QUEST_DETAILS"}:{payload:void 0,type:"SET_FRIENDS_QUEST_DETAILS"});e(L(Date.now()));const{lastUpdated:M}=(0,l.oV)(C),U=(0,r.eG)(C),H=(0,d.HF)(C),j=null!==(I=null===(E=null===(y=(0,o.np)(C).streakData)||void 0===y?void 0:y.currentStreak)||void 0===E?void 0:E.length)&&void 0!==I?I:0,G=(0,o.np)(C).xpSummaries,{includeSpeaking:B,includeListening:V}=U,z={includeListening:V,includeSpeaking:B,learningLanguage:R.learningLanguage,path:H,streak:j,xpSummaries:G};if((0,g.ky)("debugRefreshDailyQuests")||!M||!(0,p.zk)((0,p.Gz)(M))){const t=(0,h.Ch)({assignedQuestGoalIds:[],questEligibilityParams:z,schema:D,slotType:"DAILY"}),a=(0,h.Ch)({assignedQuestGoalIds:t?[t]:[],questEligibilityParams:z,schema:D,slotType:"CORE"}),s=(0,h.Ch)({assignedQuestGoalIds:[t,a].filter(_.$K),questEligibilityParams:z,schema:D,slotType:"HARD"});e({payload:{coreQuest:a,dailyQuest:t,hardQuest:s,lastUpdated:Date.now()},type:"SET_DAILY_QUESTS"}),[a,t,s].forEach((e=>{e&&(0,b.track)("daily_quest_assigned",{daily_quest_difficulty:x,daily_quest_name:e})}))}const Z=null!==(k=(0,g.ky)("debugChooseSpecificMonthlyChallenge"))&&void 0!==k?k:(0,v.$A)(D);e({payload:{updates:0},type:"SET_MONTHLY_CHALLENGE_PROGRESS_UPDATE"}),e({payload:Z,type:"SET_MONTHLY_QUEST"}),e({monthlyQuestTheme:null===(T=P.themes)||void 0===T?void 0:T.filter((e=>e.themeId===Z))[0],type:"SET_MONTHLY_QUEST_THEME"}),e((0,i._P)(R.id))},E=()=>(e,t)=>{var a,s,n;const i=t(),c=(0,l.D_)(i),u=c.schema;if(u.length<1)return;const p=(0,l.oV)(i),g=(0,r.eG)(i),m=(0,d.HF)(i),v=null!==(n=null===(s=null===(a=(0,o.np)(i).streakData)||void 0===a?void 0:a.currentStreak)||void 0===s?void 0:s.length)&&void 0!==n?n:0,f=(0,o.np)(i).xpSummaries,{includeSpeaking:S,includeListening:y}=g,E={includeListening:y,includeSpeaking:S,path:m,streak:v,xpSummaries:f},{dailyQuest:I,coreQuest:k,hardQuest:w}=p,T=I&&(0,h.n0)(I,E)?I.goalId:(0,h.Ch)({assignedQuestGoalIds:[],questEligibilityParams:E,schema:u,slotType:"DAILY"}),C=k&&(0,h.n0)(k,E)?k.goalId:(0,h.Ch)({assignedQuestGoalIds:T?[T]:[],questEligibilityParams:E,schema:u,slotType:"CORE"}),R=w&&(0,h.n0)(w,E)?w.goalId:(0,h.Ch)({assignedQuestGoalIds:[C,T].filter(_.$K),questEligibilityParams:E,schema:u,slotType:"HARD"});e({payload:{coreQuest:C,dailyQuest:T,hardQuest:R,lastUpdated:Date.now()},type:"SET_DAILY_QUESTS"}),[C,T,R].forEach((e=>{e&&(0,b.track)("daily_quest_assigned",{daily_quest_difficulty:c.difficulty,daily_quest_name:e})}))},I=(e,t,a)=>{if(!a||!t||!(0,p.zk)((0,p.Gz)(a.timestamp)))return{updatedTotalProgress:t,updatedVisibleProgress:e.reduce(((e,a)=>(e[a.goalId]=t?t[a.goalId]:0,e)),{})};const n=(0,s.asMutable)(t),r=e.reduce(((e,s)=>{var n;return e[s.goalId]=Math.max(null!==(n=a.updates[s.goalId])&&void 0!==n?n:0,t?t[s.goalId]:0),e}),{});if(n)for(const e in r)Object.prototype.hasOwnProperty.call(r,e)&&(n[e]=r[e]);return{updatedTotalProgress:n,updatedVisibleProgress:r}},k=e=>(t,a)=>{const s=(0,l.ey)(a());if(!s||!(0,m.Vz)(Date.now(),s))return;const{metric:n,ownProgress:r,threshold:i,totalProgress:o}=s,c=Math.max(0,i-o);for(const a of e.metricUpdates)a.metric===n&&t({ownProgress:r+Math.min(a.quantity,c),totalProgress:o+Math.min(a.quantity,c),type:"SET_FRIENDS_QUEST_PROGRESS"})},w=({details:e,friendsQuestInfo:t,historicalStats:a,schemaByGoalId:s})=>n=>{var r;const i=t.goalId;n({payload:{acknowledged:t.acknowledged,friendProgress:e.socialProgress[0],goalId:i,metric:s[i].metric,ownProgress:e.progressIncrements.reduce(((e,t)=>e+t),0),questId:t.questId,questPoints:t.questPoints,status:t.questState,threshold:t.questThreshold,totalProgress:null!==(r=e.progress)&&void 0!==r?r:0,winStreak:(0,m.Fy)(a)},type:"SET_FRIENDS_QUEST_DETAILS"})},T=()=>async(e,t)=>{const a=t(),s=(0,o.np)(a),n=(0,l.xm)(a);try{const[t,a]=await Promise.all([u.JV.getQuestsData(s.id),u.JV.getQuestProgress({timezone:s.timezone,uiLanguage:s.fromLanguage,userId:s.id})]),r=(0,m.ed)(t);if(r){const t=a.goals.details[r.goalId];e(w({details:t,friendsQuestInfo:r,historicalStats:a.goals.historicalStats,schemaByGoalId:n})),e(L(Date.now()))}}catch(e){(0,f.Kp)("Failed to load new friends quest data",{ex:e})}},C=e=>(t,a)=>{const s=(0,l.ey)(a()),n=(0,o.dY)(a());if(!s)return;const{friendProgress:r,metric:i,threshold:c,totalProgress:d}=s;u.i_.postFriendsQuestNudge({eventType:i,nudgeType:e,recipientId:r.userId,remainingEvents:Math.max(0,c-d),userId:n}),(0,b.track)("send_nudge",{nudge_name:u.i_.NUDGE_TRACKING_NAMES[e],nudge_type:m.N7.includes(e)?"welcome":"nudge"}),t({nudgeType:e,timestamp:Date.now(),type:"SET_LAST_SENT_FRIENDS_QUEST_NUDGE"})},R=({purchasingId:e,receivingId:t})=>(a,s)=>{a((0,c.r0)(s())?{gems:-m.py,type:"UPDATE_USER_GEMS"}:{lingots:-m.PD,type:"UPDATE_USER_LINGOTS"}),a({timestamp:Date.now(),type:"SET_LAST_SENT_FRIENDS_QUEST_GIFT_TIMESTAMP"}),u.Vi.purchaseShopItemGift({itemName:m.xH,purchasingId:e,receivingId:t})},L=e=>(t,a)=>{e>=(0,l.D_)(a()).lastSeenNextFriendsQuestStart&&t({lastSeenTotalProgress:0,type:"SET_LAST_SEEN_FRIENDS_QUEST_TOTAL_PROGRESS"})},O=e=>t=>{u.i_.sendTriggeredKudos([m.wS],[e]),t({type:"SET_FRIENDS_QUEST_HIGH_FIVE_TIMESTAMP",value:Date.now()})}},71184:(e,t,a)=>{"use strict";a.d(t,{$:()=>p});var s=a(42659),n=a(74462),r=a(86233),i=a(43464),o=a(1),l=a(60752),c=a(35160),d=a(89260),u=a(79465);const p=e=>async(t,a)=>{var p,g,m,h,_,v;const f=(0,s.df)(a()),b=(0,n.q0)(a()),S=Math.max(0,b.hearts-1);if("session_mid"===e){const e=(0,s.lA)(a()),t=e.challengeStates[e.currentIndex],n=(0,d.TD)(e);(0,u.track)("health_lost",Object.assign({challenge_type:t.type,health_empty_level:null===(p=e.levelData)||void 0===p?void 0:p.levelIndex,health_empty_skill:null===(g=e.levelData)||void 0===g?void 0:g.level.id,health_total:S},n)),0===S&&(0,u.track)("health_empty",Object.assign({health_context:"session_mid"},n))}else{const e=(0,r.A9)(a());(0,u.track)("health_lost",{challenge_type:null===(h=null===(m=e.storySession)||void 0===m?void 0:m.challengeSession)||void 0===h?void 0:h.type,health_empty_level:null===(_=e.levelData)||void 0===_?void 0:_.levelIndex,health_empty_skill:null===(v=e.levelData)||void 0===v?void 0:v.level.id,health_total:S,type:"story"}),0===S&&(0,u.track)("health_empty",{health_context:"stories_session_mid",type:"story"})}if(!(0,o.is)(a().heartsState)){if(f){const e=await(0,l.b)();await e.add("submittableRequests",{type:"remove-heart"})}else i.Vi.removeHeart();t({currentTimestampMs:Date.now(),type:"DECREMENT_ONE_HEART"})}b.overrideShowHeartsIntro&&(t({options:{name:c.t.HeartsIntro,spotlightType:"heartsInSession"},type:"TOGGLE_MODAL"}),t({type:"SET_OVERRIDE_HEARTS_INTRO",value:!1}))}},9249:(e,t,a)=>{"use strict";a.d(t,{Hm:()=>l,ZK:()=>c,ke:()=>o,w4:()=>u,xD:()=>d});var s=a(14649),n=a(42659),r=a(43464),i=a(79465);const o=()=>async e=>{try{e({items:await r.Vi.getShopItems(),type:"SET_SHOP_ITEMS"})}catch(e){(0,i.trackAndLogApiError)("load_shop_items_failed","Failed to load shop items",e)}},l=(e,t)=>async a=>{try{const{currentPlan:s,subscriptionPlans:n}=await r.Vi.getSubscriptionPlans(e,t);a({currentPlan:s,subscriptionPlans:n,type:"SET_AVAILABLE_SUBSCRIPTION_PLANS"})}catch(e){(0,i.trackAndLogApiError)("load_subscription_plans_failed","Failed to load available subscription plans",e)}},c=async({dispatch:e,fromMilestone:t=!1,fromStories:a=!1,quantity:s=1,shopItems:n})=>{const r=n.shop.misc.streak_freeze;if(r)try{await e(d(r,"item_offer",!0,s)),a||e({fromMilestone:t,gift:"streakFreeze",quantity:s,type:"RECEIVE_GIFT"})}catch(e){(0,i.trackAndLogApiError)("streak_freeze_gifting_failed","Failed to gift the user a streak freeze",e,{fromMilestone:t,fromStories:a})}},d=(e,t,a=!1,o=1)=>async(l,c)=>{const d=(0,n.iH)(c()),u=a?{isFree:!0}:{};l({status:"START",type:"PURCHASE_ITEM"});try{const[n]=(await Promise.all(new Array(o).fill(null).map((()=>r.Vi.purchaseUserShopItem(e.id,Object.assign({learningLanguage:d},u)))))).map((e=>e.item));(0,i.track)("purchase_item",Object.assign({currency_type:e.currencyType,item_name:e.id,num_purchased:o,purchased_via:t},a?{is_free:!0}:{})),l({item:n,purchaseQuantity:o,status:"SUCCESS",type:"PURCHASE_ITEM"}),l(s._())}catch(e){(0,i.trackAndLogApiError)("purchase_failed","Failed to purchase item",e),l({status:"FAIL",type:"PURCHASE_ITEM"})}},u=e=>async t=>{try{t({item:await r.Vi.getUserShopItem(e),type:"REFRESH_USER_ITEM"})}catch(e){(0,i.trackAndLogApiError)("load_user_shop_item_failed","Failed to get user item",e)}}},83178:(e,t,a)=>{"use strict";a.d(t,{d:()=>i,z:()=>r});var s=a(6986),n=a(20028);const r=e=>(t,a)=>{const r=a().user,i=!("username"in r)&&"username"in e&&(!("id"in e)||r.id===e.id);(0,s.yI)(a().config,(0,n.jq)(e),i)&&t({name:"marketingOptIn",type:"CREATE_HOME_MESSAGE"})},i=e=>t=>{t({name:"streakRepairApplied",type:"CAN_SHOW_HOME_MESSAGE"}),t({length:e,type:"CREATE_STREAK_REPAIRED_HOME_MESSAGE"})}},9990:(e,t,a)=>{"use strict";a.d(t,{AO:()=>l,LQ:()=>i,MS:()=>o,S8:()=>u,_P:()=>d,lc:()=>c});var s=a(63301),n=a(11908),r=a(37111);const i=e=>t=>{if((0,n.No)(n.Qt.REDUX_AgeRestrictedLeaderboardsIntro)){const a=(0,n.rV)(n.Qt.REDUX_AgeRestrictedLeaderboardsIntro)[e];void 0!==a&&t({isEligible:a,type:"SET_CAN_SHOW_AGE_RESTRICTED_LEADERBOARDS_INTRO"})}},o=e=>t=>{if((0,n.No)(n.Qt.REDUX_DailyQuests)){const a=(0,n.rV)(n.Qt.REDUX_DailyQuests)[e];void 0!==a&&t({payload:a,type:"SET_DAILY_QUESTS"})}},l=e=>t=>{if((0,n.No)(n.Qt.REDUX_DarkMode)){const a=(0,n.rV)(n.Qt.REDUX_DarkMode)[e];void 0!==a&&(t({type:"DARK_MODE",value:"boolean"==typeof a?a?"on":"off":a}),t({name:"darkMode",type:"DISABLE_HOME_MESSAGE"}))}},c=e=>t=>{if((0,n.No)(n.Qt.REDUX_FriendsQuestNextStart)){const a=(0,n.rV)(n.Qt.REDUX_FriendsQuestNextStart)[e];void 0!==a&&t({lastSeenNextFriendsQuestStart:a,type:"SET_LAST_SEEN_NEXT_FRIENDS_QUEST_START"})}},d=e=>t=>{if((0,n.No)(n.Qt.REDUX_LastSeenMonthlyChallengeId)){const a=(0,n.rV)(n.Qt.REDUX_LastSeenMonthlyChallengeId)[e];void 0!==a&&t({monthlyChallengeId:a,type:"SET_LAST_SEEN_MONTHLY_CHALLENGE_ID"})}},u=(e,t)=>a=>{var i;(0,s.gQ)("debugForceStreakSocietyEntry")?a({inductedIntoStreakSociety:!0,type:"SET_STREAK_SOCIETY_INDUCTION_STATE"}):(null!=t?t:0)<r.jL[0]?a({inductedIntoStreakSociety:!1,type:"SET_STREAK_SOCIETY_INDUCTION_STATE"}):(0,n.No)(n.Qt.REDUX_StreakSocietyInduction)&&a({inductedIntoStreakSociety:null!==(i=(0,n.rV)(n.Qt.REDUX_StreakSocietyInduction)[e])&&void 0!==i&&i,type:"SET_STREAK_SOCIETY_INDUCTION_STATE"})}},83735:(e,t,a)=>{"use strict";a.d(t,{DR:()=>fe,RX:()=>ye,YK:()=>he,Z3:()=>ge,au:()=>Se,eX:()=>Ee,p_:()=>me,v1:()=>Ie,vP:()=>_e,wZ:()=>ve,yj:()=>pe});var s=a(99369),n=a(86155),r=a(14649),i=a(94103),o=a(33),l=a(71184),c=a(9249),d=a(77873),u=a(15879),p=a(53018),g=a(85394),m=a(90788),h=a(42659),_=a(73520),v=a(74462),f=a(93540),b=a(83936),S=a(27429),y=a(15307),E=a(43464),I=a(50498),k=a(97236),w=a(30033),T=a(95332),C=a(94778),R=a(18675),L=a(34830),O=a(17135),P=a(63301),A=a(6962),D=a(37971),x=a(59815),N=a(81149),F=a(94171),M=a(41831),U=a(1),H=a(68903),j=a(60752),G=a(97252),B=a(37825),V=a(99644),z=a(93890),Z=a(7432),$=a(23275),W=a(89065),q=a(71371),Q=a(44637),Y=a(84401),K=a(67280),J=a(90110),X=a(51158),ee=a(89260),te=a(53146),ae=a(51551),se=a(37111),ne=a(54448),re=a(79465),ie=a(34704),oe=a(11811),le=a(55829),ce=a(16086),de=a(97106);const ue=(e,t)=>async()=>{var a;if(await(0,I._v)(Q.UV),(null===(a=(0,h.is)(e()))||void 0===a?void 0:a.id)!==t)throw new x.$K},pe=()=>async(e,t)=>{const a=(0,h.Oz)(t()),s=(0,h.lA)(t()),n=(0,h.is)(t()),{challengeStates:r,currentIndex:i,sessionParams:o,status:l}=s,{challenges:c}=n,d=(0,O.Zo)();e({courseId:a.id,session:n,sessionParams:o,startTime:d,type:"START_SESSION"});const u=ue(t,n.id);if(l===D.c.CoachDuoSplash){await u();const t=c[i],a=r[i];e({status:(0,Q.ct)(t,a),type:"SET_PLAYER_STATUS"})}},ge=()=>async(e,t)=>{const a=(0,b.Rq)(t()),s=(0,h.lA)(t()),n=(0,h.hy)(t()),r=(0,h.is)(t()).id;e({type:"CLEAR_IN_LESSON_TIP"});const i=ue(t,r);switch(a){case"coachDuo":if(!s.coachDuo.model)break;e({model:s.coachDuo.model,timestamp:Date.now(),type:"COACH_DUO_SHOWN"}),e({status:D.c.CoachDuoSliding,type:"SET_PLAYER_STATUS"}),await i(),e({status:D.c.CoachDuo,type:"SET_PLAYER_STATUS"});break;case"smartTip":e({status:D.c.SmartTipSliding,type:"SET_PLAYER_STATUS"}),await i(),e({status:D.c.SmartTip,type:"SET_PLAYER_STATUS"});break;case"hardModeDuo":e({status:D.c.HardModeDuoSliding,type:"SET_PLAYER_STATUS"}),await i(),e({status:D.c.HardModeDuo,type:"SET_PLAYER_STATUS"});break;case"partialXpDuo":e({type:"SET_PARTIAL_XP_GIVEN",xpGiven:de.Ms}),e({status:D.c.PartialXpDuoSliding,type:"SET_PLAYER_STATUS"}),await i(),e({status:D.c.PartialXpDuo,type:"SET_PLAYER_STATUS"});break;case void 0:if(n)q.Z.start("session_end_grade"),e({status:s.status===D.c.CoachDuo||s.status===D.c.CoachDuoSplash?D.c.CoachDuoSubmitting:D.c.Submitting,type:"SET_PLAYER_STATUS"});else{e({type:"ADVANCE_SESSION"}),await i();const{challengeStates:a,currentIndex:s,inLessonTipResources:n,session:{challenges:r},sessionParams:o}=(0,h.lA)(t()),l=r[s],c=a[s];if(o.isGrammarSkill){const t=l.explanation?n[l.explanation.url]:void 0;t&&e({explanationResource:t,type:"SET_IN_LESSON_TIP"})}e({status:(0,Q.ct)(l,c),type:"SET_PLAYER_STATUS"})}break;default:(0,H.RJ)(a)}},me=e=>{let t;switch(e){case!0:t=k.Tc.CORRECT;break;case!1:t=k.Tc.INCORRECT;break;default:t=k.Tc.TEST}(0,k.GN)(t)},he=(e,t)=>async(a,s)=>{var n,r,i,o;const c=(0,h.lA)(s());let u=(0,h.is)(s());const p=(0,h.oe)(s()),g=(0,h.np)(s()),m=(0,S.eE)(s()),_=(0,h.mu)(s(),Date.now());a({status:D.c.Grading,type:"SET_PLAYER_STATUS"});const v=u.challenges[c.currentIndex],f=c.challengeStates[c.currentIndex],y=(0,b.Y_)(s()),I=Object.assign(Object.assign({},v),{skipped:e,timeTaken:v.startTime?t-v.startTime:void 0});let A;try{A=await(0,C.Q5)({challenge:I,challengeState:f,challengeToggleState:y,learningLanguage:(0,h.iH)(s()),session:(0,h.is)(s())})}catch(e){(0,X.vU)("Client-side grading failed",{ex:e}),(0,E.Hx)(e)&&(0,re.trackAndLogApiError)("grading_failed","All grading methods failed",e),A={correct:!0,guess:""}}(0,P.gQ)("gradeCorrect")&&(A.correct=!0);const x="experiment"===(0,N.j6)("gweb_mistake_progress_bar",void 0),F=A.correct,M=c.challengeIdSections.length,U=x?F?1:1===M?.25:2===M?0:-.5:F&&e?0:F?1:-.5,H=x?1:.97;if((0,k.Ap)(),a({challenge:Object.assign(Object.assign({},I),{gradingResult:A}),strengthFactor:U,strengthTarget:H,type:"UPDATE_GRADED_CHALLENGE"}),m&&!A.correct&&!e)switch(I.type){case oe.Sm.ListenSpeak:case oe.Sm.Speak:(null!==(r=null===(n=I.gradingResult)||void 0===n?void 0:n.numRetriesLeft)&&void 0!==r?r:T.Tu)<=1&&a((0,l.$)("session_mid"));break;case oe.Sm.WriteComprehension:break;default:a((0,l.$)("session_mid"))}u=(0,h.is)(s());const j=(0,L.S6)(s());if(j&&a({model:j,type:"SET_COACH_DUO_MODEL"}),(0,h.$4)(s())&&d.L({challenge:I,dispatch:a,gradingResult:A,player:c,session:u,skills:p,user:g}),(0,ee.l$)(u.type)){let e;try{const t=(0,ne.G)(u,(0,Q.GR)(c),null===(i=c.levelData)||void 0===i?void 0:i.level,_);e=await E.Vi.challengeCreate(t)}catch(e){return void(0,re.trackAndLogApiError)("grading_next_challenge_failed","Failed to load next challenge in an adaptive test",e)}(0,w.Aq)("session JSON: ",e);const t=parseInt(null!==(o=(0,P.ky)("length"))&&void 0!==o?o:"9999",10),n=e.challenges.length&&c.currentIndex<t-1?e.challenges[0]:void 0;a({challenges:n?[(0,C.Gs)({challenge:n})]:[],confidence:e.confidence,progressScore:e.progressScore,ttsAnnotations:e.ttsAnnotations,type:"EXTEND_SESSION"}),u=(0,h.is)(s()),me(A.correct)}else I.skipped&&f.hasBrokenTts||me(A.correct);(0,R.w)(u,g,c,A,e,I.timeTaken,y),(0,h.hy)(s())&&(a({timestamp:(0,O.Zo)(),type:"END_SESSION"}),u=(0,h.is)(s()),c.sessionParams.isFinalLevel&&u.failed?a({nativeAd:void 0,slideData:[{type:"finalLevelFailed"}],type:"SESSION_END_SLIDES"}):a(be()))},_e=({levelData:e,session:t,sessionParams:a,sessionPrefetchedTimestamp:s,sessionRouteParams:n,speakIneligibleReasons:r})=>(i,o)=>{var l;const c=(0,h.Oz)(o());if(t.type===oe.FF.PlacementTest&&!(null==c?void 0:c.placementTestAvailable))throw new x.w("Not allowed to retake placement test");[oe.FF.Lesson,oe.FF.LexemePractice,oe.FF.LexemeSkillLevelPractice].includes(t.type)&&i({type:"ENABLE_BONUS_POINTS"}),t.adaptiveChallenges&&(t.adaptiveChallenges=t.adaptiveChallenges.map((e=>(0,C.Gs)({challenge:e})))),(null===(l=t.adaptiveInterleavedChallenges)||void 0===l?void 0:l.challenges)&&(t.adaptiveInterleavedChallenges.challenges=t.adaptiveInterleavedChallenges.challenges.map((e=>(0,C.Gs)({challenge:e})))),t.challenges=t.challenges.map((e=>(0,C.Gs)({challenge:e}))),i({hasUserHearts:(0,v.MQ)(o()),levelData:e,session:t,sessionParams:a,sessionPrefetchedTimestamp:s,sessionRouteParams:n,shouldUseUserHeartsInLegendary:(0,B.Vp)(),speakIneligibleReasons:r,type:"CREATE_SESSION"})},ve=()=>(e,t)=>{const{player:a,player:{levelData:s,partialXpGiven:n,session:r,sessionParams:i,sessionSubmitting:o}}=t();if(!o){if(i.isFinalLevel&&n)return e({type:"END_SESSION_EARLY"}),e(ge()),e({timestamp:(0,O.Zo)(),type:"END_SESSION"}),e(be()),{shouldCancelRouteChange:!0};e({timestamp:(0,O.Zo)(),type:"END_SESSION"}),e({courseId:(0,h.Oz)(t()).id,isZombieMode:(0,h.df)(t()),levelId:null==s?void 0:s.level.id,session:r,sessionParams:i,type:"QUIT_SESSION"}),(0,Q.vx)({currentCourseHistory:(0,h.B8)(t()),hasXpBoost:(0,h.mu)(t(),Date.now()),path:(0,f.HF)(t()),player:a,transliterationSetting:(0,ie.hg)(t())})}return{shouldCancelRouteChange:!1}},fe=()=>(e,t)=>{const{player:{session:a,status:s}}=t();return void 0!==s&&void 0!==a?e(ve()):{shouldCancelRouteChange:!1}},be=()=>e=>(async()=>{e({type:"SESSION_SUBMIT_START"});try{await e((async(e,t)=>{var a,l,d,b,S,I,k,w,T;const C=(0,h.Mb)(t()),R=(0,h.Oz)(t()),L=(0,h.mu)(t(),Date.now()),D=(0,v.q0)(t()),H=(0,h.df)(t()),B=(0,h.lA)(t()),q=(0,h.is)(t()),X=(0,h.oe)(t()),ie=(0,h.np)(t()),ue=(0,ne.G)(q,(0,Q.GR)(B),null===(a=B.levelData)||void 0===a?void 0:a.level,L);let pe,ge,me;const he=(0,Q.Ks)(t()),_e=()=>{var e;return(null===(e=(0,h.is)(t()))||void 0===e?void 0:e.id)!==q.id},ve=()=>{if(_e())throw new x.$K},fe=()=>{if((0,h.Oz)(t()).id!==R.id)throw new x.Di};if(e({type:"CAN_SHOW_HOME_MESSAGE"}),H){if(!B.levelData)throw Error(`Session type ${ue.type} hasn't been implemented in Zombie mode`);const e=await(0,j.b)();if(await e.add("submittableRequests",{session:ue,sessionEndTrackingProperties:he,type:"session"}),ue.failed)pe=Object.assign(Object.assign({},q),{xpGain:0});else{const e=(0,Z.mI)(ue,B.levelData),t=(0,V._u)(ue.type,B.levelData,R.path),a=(0,V.g2)(ue,B.levelData,X);let n=(0,s.set)(R,"path",t);n=(0,s.set)(n,"placementTestAvailable",!1),n=(0,s.set)(n,"xp",n.xp+e.xp);const r=Object.assign(Object.assign({},n),{skills:n.skills.map((e=>e.map((e=>a[e]))))});me=(0,z.m3)(e,ie),pe=Object.assign(Object.assign({},q),{xpGain:e.xp}),ge={currentCourse:r,health:D,rewardBundles:ie.rewardBundles,streakData:me.streakData,xpGains:ie.xpGains?ie.xpGains.concat([e]):[e]}}}else{await u.SL;try{(0,re.track)("session_end_attempt",{});const e=new AbortController;pe=await E.Vi.sessionSubmit(ue,{onError:t=>{(0,re.trackAndLogApiError)("submit_session_failed","Failed to submit session",t),_e()&&e.abort()},signal:e.signal}),(0,re.track)("session_end",Object.assign(Object.assign(Object.assign({},he),pe.trackingProperties),{upload_timestamp:Date.now()})),ge=await E.Vi.userInfoPartial((0,ce.Jb)(),["currentCourse","health","rewardBundles","streakData{currentStreak,longestStreak,previousStreak}","xpGains"])}catch(e){throw(0,Q.gZ)(e,(0,ee.Xd)(ue.type)),e}ve(),fe()}(0,G._B)({courseId:R.id,isZombieMode:H,levelId:null===(l=B.levelData)||void 0===l?void 0:l.level.id,requestSession:ue,responseSession:pe,sessionParams:B.sessionParams,timestamp:Date.now(),type:"RECORDED_SESSION"})({dispatch:e}),ge&&(e({type:"UPDATE_USER",user:ge}),e({currentTimestampMs:Date.now(),heartsConfig:ge.health,type:"UPDATE_HEARTS_STATE"}));const be=(0,de.ab)(ie.timezoneOffset,ie.xpGains),Se=pe.xpGain>0&&0===be,ye=null!==(b=null===(d=ie.streakData.currentStreak)||void 0===d?void 0:d.length)&&void 0!==b?b:0;if(Se){const t=(0,O.Ux)();e({streakExtension:{timezoneOffsetMinutes:t.getTimezoneOffset(),utcIsoDateString:t.toISOString()},type:"UPDATE_STREAKS_EXTENDED_TIMES"})}if(Math.random()<(null!==(S=C.featureFlags.send_goals_progress)&&void 0!==S?S:0)){const t=Se&&0===ye,a=(0,M.Oj)(ue,{streakExtended:Se,streakStarted:t,timeSpent:B.sessionTime>0?B.sessionTime:q.endTime-q.startTime});if(H){const e=await(0,j.b)();await e.add("submittableRequests",{request:{batchUpdate:a,timestamp:(0,O.Ux)(),timezone:ie.timezone},type:"goals-progress"})}else E.JV.sendBatchUpdate(ie.id,a,(0,O.Ux)(),ie.timezone).catch((e=>(0,re.trackAndLogApiError)("update_goals_progress_failed","Failed to update goals progress",e)));const s={metricUpdates:[...a.metricUpdates,{metric:"XP",quantity:pe.xpGain}]};e((0,M.B_)(s)),e((0,o.mE)(s))}if(!H){let a=null===(I=ie.mistakeCountInfo)||void 0===I?void 0:I.mistakeCount;void 0!==a&&(a+=(0,ee.VC)(ue));const{includeListening:s,includeSpeaking:r}=(0,n.eG)(t());e((0,g.oQ)(R.id,a,s,r))}const Ee=B.sessionRouteParams.practiceType;if((0,Y.rK)(ue.type)&&(0,Y.gv)(Ee)&&e({courseId:R.id,sessionName:(0,Y.tL)(ue.type),type:"COMPLETE_PRACTICE_HUB_SESSION"}),H)me&&e({type:"SET_XP_SUMMARIES",xpSummaries:me.xpSummaries});else{const a=[e(c.Hm(C.ipCountry,(0,K.Ay)(ie.plusDiscounts,Date.now()))),e(r._()),e((0,g.DG)())];a.push((async()=>{var a,s;const n=null!==(s=null===(a=null==ge?void 0:ge.streakData.currentStreak)||void 0===a?void 0:a.length)&&void 0!==s?s:0;await e(c.ke());const r=(0,h.__)(t()),i=(0,ae.sz)(r,n),o=(0,ae.K)(n,r);(i||Se&&o>0)&&await c.ZK({dispatch:e,fromMilestone:!i,fromStories:!1,quantity:i?ae.SG:o,shopItems:r})})()),Se&&(ye+1)%se.mx==0&&a.push(e((0,g.J0)())),await Promise.all(a),ve(),fe()}const Ie=(0,h.Oz)(t()),ke=(0,_.oV)(t()),we=(0,_.D_)(t()),Te=(0,h.__)(t()),Ce=(0,h.np)(t()),Re=(0,v.q0)(t()),Le=(0,$.Bm)(Ie.path),Oe=B.levelData?(0,$.m8)(Ie.path,(e=>{var t;return e.id===(null===(t=B.levelData)||void 0===t?void 0:t.level.id)}),B.levelData):Le;B.levelData&&(0,$.Nc)(R.path,Ie.path,B.levelData)&&e({name:"pathSkipping",type:"CREATE_HOME_MESSAGE"}),(0,G.G9)(pe.xpGain)({dispatch:e,getState:t});const Pe=(0,M.VR)(ke,Ce),Ae=(0,_.Ap)(t());e((0,J.kl)({availableQuests:Pe,goals:we,items:Te,monthlyChallengeThreshold:Ae,user:Ce})),ue.type!==oe.FF.AlphabetLesson||H||e(i.f()),H||void 0===Te.inventory.society_streak_freeze_refill||(e({maxQuantity:se.TK,type:"REFILL_SOCIETY_STREAK_FREEZES"}),E.Vi.useUserShopItem("society_streak_freeze_refill")),q.type===oe.FF.GlobalPractice&&Re.hearts>D.hearts&&(0,re.track)("health_refill",{health_refill_method:"practice",health_total:Re.hearts});const De=t(),xe=(0,f.MK)(De);let Ne=(0,A.XN)({availableQuests:Pe,course:Ie,goals:(0,_.D_)(De),hasXpBoost:L,isDesktop:(0,h.$4)(De),items:Te,leaderboardPositionState:(0,G.tR)({getState:t}),leaderboards:{classroomLeaderboard:(0,G.mV)({getState:t}),leagues:(0,G.i2)({getState:t}),sessionEndData:(0,G.EF)({getState:t}),userReaction:(0,G.KK)({getState:t})},levelData:Oe,monthlyChallengeThreshold:(0,_.Ap)(De),path:Ie.path,player:(0,h.lA)(De),rewardedHearts:void 0===ge?0:ge.health.hearts-D.hearts,sectionType:null==xe?void 0:xe.type,streakExplainerState:(0,h.cQ)(De).streakExplainer,streakNudgeState:(0,h.cQ)(De).streakNudgeShown,student:(0,y.Bs)(De),unlockedAchievementsV3:m.XX(De),user:(0,h.np)(De)});if(!q.failed&&q.type===oe.FF.SectionTest){const{sectionIndex:t}=q;e({selectedPathSectionType:W.uu[(null!=t?t:0)+1],type:"SET_SELECTED_PATH_SECTION"})}const Fe=!q.failed&&q.type===oe.FF.SectionTest,Me=!q.failed&&Ie.pathSectioned.length>0&&q.type===oe.FF.UnitReview&&1===(null==Le?void 0:Le.unitNumber);(Fe||Me)&&e({shouldReturnToSections:!0,type:"SET_SHOULD_RETURN_TO_SECTIONS"}),(0,P.gQ)("debugSlides")||(e((0,p.z)(null!==(w=null===(k=Ce.streakData.currentStreak)||void 0===k?void 0:k.length)&&void 0!==w?w:0)),Ne=await(0,te.r)(Ne,{isZombieMode:H,useOnboardingBackend:!0===(null===(T=C.featureFlags)||void 0===T?void 0:T.web_use_onboarding_backend)}),ve(),fe());const Ue=(0,A.JW)(Ne,B),He=(0,A.I)(Ue);!(0,P.gQ)("debugSlides")&&He.some((e=>"streakSocietyWelcomeChest"===e.type))&&e((0,p.K)(Ce.learningLanguage)),(0,P.gQ)("debugSlides")||ue.type!==oe.FF.LevelReview&&(ue.type!==oe.FF.LexemePractice||"practice_level_review"!==B.sessionParams.lexemePracticeType)||H||!(0,U.GQ)(Ce)||"experiment"!==(0,N.j6)("gweb_capstone_xp_boost_reward_v2",void 0)||e((0,J.GH)({receivingBoost:(0,_.D_)(t()).pendingRewards.some((({reward:e})=>(0,J.be)(e))),user:Ce})),e({nativeAd:He.find((({type:e})=>"nativeAd"===e)),slideData:He.filter((({type:e})=>"nativeAd"!==e)),type:"SESSION_END_SLIDES"}),H||(0,G.Q0)({dispatch:e,getState:t,onlyIf:"no-active-leaderboard"});const je=(0,_.ey)(De);!H&&(null==je?void 0:je.status)!==le.S.ACTIVE&&(0,F.JD)(Date.now())&&e((0,o.pt)())}))}catch(t){e({error:t,type:"SESSION_SUBMIT_FAILED"})}e({type:"SESSION_SUBMIT_END"})})(),Se=()=>(e,t)=>{const a=(0,h.MY)(t());a&&(0,re.track)("challenge_difficulty_click",{challenge_type:a.type}),e({type:"TOGGLE_COMPLETE_REVERSE_TRANSLATION"})},ye=()=>(e,t)=>{const a=(0,h.jv)(t()),s=(0,h.MY)(t()),n=(0,h.is)(t());s&&(0,re.track)("challenge_difficulty_click",{challenge_type:s.type}),(0,re.track)("toggle_tap",Object.assign(Object.assign({},n.trackingProperties),{tap_enabled:a.typingEnabled})),e({type:"TOGGLE_TAP"})},Ee=({challengeType:e})=>t=>{t({challengeType:e,type:"USED_TYPE_TO_SELECT_TOKEN"}),Math.random()<.001&&(0,re.track)("type_to_select_token",{challenge_type:e,sampling_rate:.001})},Ie=()=>async(e,t)=>{var a,s,n,r,i,o;const l=null===(s=null===(a=(0,h.MY)(t()))||void 0===a?void 0:a.gradingResult)||void 0===s?void 0:s.numRetriesLeft,c=null===(n=(0,h.lA)(t()))||void 0===n?void 0:n.currentIndex;await(0,I._v)(3e3);const d=(0,h.lA)(t()).status,u=null===(i=null===(r=(0,h.MY)(t()))||void 0===r?void 0:r.gradingResult)||void 0===i?void 0:i.numRetriesLeft,p=null===(o=(0,h.lA)(t()))||void 0===o?void 0:o.currentIndex;d===D.c.SpeakRetryBlaming&&l===u&&c===p&&e({status:D.c.Guessing,type:"SET_PLAYER_STATUS"})}},46644:(e,t,a)=>{"use strict";a.d(t,{P:()=>p,_:()=>g});var s=a(42659),n=a(43464),r=a(17135),i=a(97252),o=a(88868),l=a(79465),c=a(81621),d=a(16086),u=a(20028);const p=(e,t,a=!1)=>async(p,g)=>{const m=(0,s.NT)(g()),h=(0,s.np)(g()),_=(0,i.Zr)({getState:g});if(!e&&!t)return;if(!a&&m&&(m.id===e||m.username===t))return m;p({type:"RESET_PROFILE"});const v=(()=>{var t;if("leagues"===(null==_?void 0:_.alias)){const a=null===(t=null==_?void 0:_.state.active)||void 0===t?void 0:t.cohort.rankings.find((t=>void 0!==e&&t.userId===e));if(void 0!==a)return{id:a.userId,isPrivate:!0,name:a.displayName,picture:a.avatarUrl,username:void 0}}})(),f=t?(await n.Vi.userSearch(t))[0]:e?await n.Vi.userProfileInfo(e).catch((e=>{var t;if((0,n.Hx)(e)&&404===(null===(t=e.response)||void 0===t?void 0:t.status)&&v)return v})):void 0;if(f&&"isPrivate"in f)return p({type:"LOAD_PRIVATE_PROFILE_USER",user:f}),f;f&&(f.streakData={currentStreak:{endDate:(0,r.zK)(0),length:f.streak,startDate:(0,r.zK)(0)},longestStreak:null,previousStreak:null});try{if(!f||void 0===f.username||!(0,c.rt)(f)&&(0,d.Jb)()!==f.id&&!(0,u.E4)(h)||(0,d.Pc)()&&h.blockerUserIds.includes(f.id))return v?(p({type:"LOAD_PRIVATE_PROFILE_USER",user:v}),v):((0,l.track)("page_not_found",{}),void await(0,o.Zs)(o.Oy,!0))}catch(e){return void await(0,o.Zs)(o.Oy,!0)}p({type:"LOAD_PROFILE_USER",user:f});const b=f.id,S=()=>{var e;return(null===(e=(0,s.NT)(g()))||void 0===e?void 0:e.id)===b};return(0,d.Pc)()?(async()=>{var e;const t=null!==(e=f.currentCourse)&&void 0!==e?e:f.courses.find((e=>e.id===f.currentCourseId));if(!t)return void p({achievements:{v2:[],v3:[]},type:"LOAD_ACHIEVEMENTS"});const a=await n.I7.getAchievementsV3(f.id,t.fromLanguage,t.learningLanguage,(0,u.jq)(h),(0,c.rt)(h),(0,u.dE)(h),f.hasPlus);S()&&p({achievements:{v2:[],v3:a},type:"LOAD_ACHIEVEMENTS"})})():p({achievements:{v2:[],v3:[]},type:"LOAD_ACHIEVEMENTS"}),(async()=>{const e=await n.Vi.getUserXPSummaries(b);if(!S())return;const t=e.map((({date:e,gainedXp:t})=>({time:e,xp:t})));p({summaries:t,type:"LOAD_PROFILE_XP"})})(),f},g=(e,t)=>async a=>{const s=await n.i_.getSocialProfile(e,5);a(t?{socialProfile:s,type:"LOAD_FIRST_PERSON_SOCIAL_PROFILE"}:{socialProfile:s,type:"LOAD_SOCIAL_PROFILE"})}},7924:(e,t,a)=>{"use strict";a.d(t,{VE:()=>l,nn:()=>o,uM:()=>c});var s=a(9249),n=a(42659),r=a(43464),i=a(79465);const o=(e,t,a,n)=>async o=>{var l;try{const c=await r.bu.joinClassroom(e);(0,i.track)("add_observer",{from_settings:t,with_classroom:!0}),o({classroom:c,type:"JOIN_CLASSROOM"}),o(s.ke()),o(s.Hm(a,n)),t||o({name:"schoolsJoinedClassroom",observerName:null!==(l=c.observer_name)&&void 0!==l?l:c.observer_username,type:"CREATE_HOME_MESSAGE"})}catch(e){(0,i.trackAndLogApiError)("join_classroom_failed","Failed to add teacher",e)}},l=e=>async t=>{try{await r.bu.leaveClassroom(e),(0,i.track)("remove_observer",{}),t({classroomId:e,type:"LEAVE_CLASSROOM"})}catch(e){(0,i.trackAndLogApiError)("leave_classroom_failed","Failed to leave classroom",e)}},c=(e,t)=>async(a,s)=>{const o=(0,n.np)(s());try{a({sessionActivities:await r.bu.getSessionActivitiesByUser(o.id,e,t),type:"UPDATE_SESSION_ACTIVITIES"})}catch(e){(0,i.trackAndLogApiError)("update_session_activities_failed","Failed to update Schools session activities",e)}}},77873:(e,t,a)=>{"use strict";a.d(t,{C:()=>d,L:()=>u});var s=a(83735),n=a(42659),r=a(17135),i=a(63301),o=a(30004),l=a(59096),c=a(79465);const d=e=>(t,a)=>{const r=(0,n.lA)(a()).smartTipToShow;if(void 0===r)throw Error("Cannot grade undefined Smart Tip.");if(void 0===r.startTime)throw Error("Smart Tip should have a start time when grading.");const i=(0,l.P9)(r)===r.guess;(0,c.track)("smart_tip_challenge_answered",{answered_correctly:i,rule_id:r.identifier,seconds_spent_on_screen:e-r.startTime}),t({correct:i,type:"UPDATE_GRADED_SMART_TIP"}),s.p_(i)},u=({challenge:e,dispatch:t,gradingResult:{blameType:a,gradingMetadata:s},player:n,session:c,skills:d,user:u})=>{if(!(0,l.RZ)(c.type,n.sessionParams))return;let p=(0,l.C8)(a,e,s,n,d,u);if(!p&&(0,i.gQ)("smartTip")){const e=(0,o.wQ)(["smartTip"],{exact:!1,predicate:({state:e})=>void 0!==e.data,type:"active"});e&&(p=Object.assign(Object.assign({},e),{trigger:{smart_tip:{id:e.identifier,variables:[]}}}))}void 0!==p&&t({smartTipResource:p,timestamp:(0,r.Zo)(),type:"SET_SMART_TIP_TO_SHOW"})}},15879:(e,t,a)=>{"use strict";a.d(t,{SC:()=>v,SL:()=>_,Vw:()=>f});var s=a(85394),n=a(42659),r=a(43464),i=a(50498),o=a(94786),l=a(68903),c=a(60752),d=a(41364),u=a(44637),p=a(51158),g=a(89260),m=a(79465),h=a(16086);let _;const v=e=>async()=>{try{const t=await(0,c.b)(),a=await t.getAllKeys("submittableRequests"),s=[];for(const n of a){const a=await t.get("submittableRequests",n);if(void 0!==a)switch(a.type){case"experiment-treatment":s.push(b(n,a.request,e).catch((e=>{(0,p.vU)("Failed to sync stored experiment treatment",{data:a.request,ex:e})})));break;case"goals-progress":case"remove-heart":case"reward":case"session":case"story":break;default:(0,l.RJ)(a)}}await Promise.all(s)}catch(e){(0,p.vU)("Failed to sync stored requests",{ex:e})}},f=e=>(0,d.p)("SYNC_STORED_PROGRESS")((async(t,a)=>{_=(async()=>{try{const t=await(0,c.b)(),a=await t.getAllKeys("submittableRequests");for(const s of a){const a=await t.get("submittableRequests",s);if(void 0!==a)switch(a.type){case"experiment-treatment":break;case"goals-progress":await S(s,a.request,e);break;case"remove-heart":await y(s,e);break;case"reward":await E(s,a.rewardRequest,e);break;case"session":await I(s,a.session,a.sessionEndTrackingProperties,e);break;case"story":await k(s,a.session,a.sessionEndTrackingProperties,a.storyCompleteTrackingProperties,a.storyId);break;default:(0,l.RJ)(a)}}}catch(e){(0,p.vU)("Failed to sync stored progress",{ex:e})}(0,n.eI)(a())||(0,n.df)(a())||await t((0,s.eY)())})(),await _,_=void 0})),b=async(e,t,a)=>{const s=await(0,c.b)();let n=!1;try{await(0,i.XD)((()=>r.Vi.treatUser((0,h.Jb)(),t.experimentName,{contexts:t.contexts,treated:!0})),{retries:1,signal:a}),n=!0}catch(e){(0,m.trackAndLogApiError)("treat_user_failed","Failed to treat user for experiment",e)}!n&&a.aborted||await s.delete("submittableRequests",e)},S=async(e,t,a)=>{const s=await(0,c.b)();let n=!1;try{await(0,i.XD)((()=>r.JV.sendBatchUpdate((0,h.Jb)(),t.batchUpdate,t.timestamp,t.timezone)),{retries:1,signal:a}),n=!0}catch(e){(0,m.trackAndLogApiError)("update_goals_progress_failed","Failed to update goals progress",e)}!n&&a.aborted||await s.delete("submittableRequests",e)},y=async(e,t)=>{const a=await(0,c.b)();let s=!1;try{await(0,i.XD)((()=>r.Vi.removeHeart()),{retries:1,signal:t}),s=!0}catch(e){(0,m.trackAndLogApiError)("remove_user_heart_failed","Failed to remove users' hearts",e)}!s&&t.aborted||await a.delete("submittableRequests",e)},E=async(e,t,a)=>{const s=await(0,c.b)();let n=!1;try{await(0,i.XD)((()=>r.Vi.consumeReward(t.userPartial,t.rewardId,t.pathLevelMetadata)),{retries:1,signal:a}),n=!0}catch(e){"path-chest"===t.source&&(0,m.trackAndLogApiError)("consume_path_chest_reward_failed","Failed to consume path chest reward",e)}!n&&a.aborted||await s.delete("submittableRequests",e)},I=async(e,t,a,s)=>{const n=await(0,c.b)();let i=!1;try{(0,m.track)("session_end_attempt",{});const e=await r.Vi.sessionSubmit(t,{onError:e=>{(0,m.trackAndLogApiError)("submit_session_failed","Failed to submit stored session",e)},signal:s});i=!0,(0,m.track)("session_end",Object.assign(Object.assign(Object.assign({},a),e.trackingProperties),{upload_timestamp:Date.now()}))}catch(e){(0,u.gZ)(e,(0,g.Xd)(t.type))}!i&&s.aborted||await n.delete("submittableRequests",e)},k=async(e,t,a,s,n)=>{const i=await(0,c.b)();try{const e=await r.Mw.postStoryComplete(n,t);(0,m.track)("session_end",Object.assign(Object.assign({},a),{upload_timestamp:Date.now()})),(0,m.track)("stories_story_complete",Object.assign(Object.assign({},s),e.trackingProperties))}catch(e){(0,m.trackAndLogApiError)("stories_story_complete","Story complete request failed",e),(0,u.gZ)(e,o.Q.Stories)}await i.delete("submittableRequests",e)}},53018:(e,t,a)=>{"use strict";a.d(t,{K:()=>d,z:()=>u});var s=a(85394),n=a(42659),r=a(43464),i=a(90110),o=a(37111),l=a(79465),c=a(97106);const d=e=>async(t,a)=>{await(0,i.OC)((0,n.__)(a()),"Streak Society Boost");try{await r.Vi.purchaseUserShopItem(c.zL.ITEM_NAME_30_MIN,{isFree:!0,learningLanguage:e})}catch(e){(0,l.trackAndLogApiError)("purchase_user_shop_item_failed",`Failed to purchase xp boost item ${c.zL.ITEM_NAME_30_MIN} while awarding streak society xp boost`,e)}await t((0,s.J0)())},u=e=>(t,a)=>{e>=o.fI&&!(0,n.Jw)(a()).inductedIntoStreakSociety&&(t({inductedIntoStreakSociety:!0,type:"SET_STREAK_SOCIETY_INDUCTION_STATE"}),t({showRedDot:!0,type:"SET_STREAK_SOCIETY_SHOW_RED_DOT"}))}},85394:(e,t,a)=>{"use strict";a.d(t,{rf:()=>Z,DG:()=>V,kS:()=>W,fN:()=>q,oQ:()=>K,Kb:()=>Q,TS:()=>Y,zv:()=>$,M$:()=>ee,J0:()=>J,eY:()=>B,DZ:()=>z});var s=a(80254),n=a(14649),r=a(42659),i=a(43464);var o=a(50791),l=a(61544),c=a(33),d=a(9249),u=a(83178),p=a(9990),g=a(46644),m=a(7924),h=a(15879),_=a(73520),v=a(83936),f=a(80164),b=a(17818),S=a(51827),y=a(70326),E=a(78939),I=a(54412),k=a(17135),w=a(63301),T=a(81149),C=a(15670),R=a(50548),L=a(60752),O=a(97252),P=a(93746),A=a(36914),D=a(71371),x=a(67280),N=a(88787),F=a(51158),M=a(88868),U=a(11908),H=a(79465),j=a(16086),G=a(20028);const B=({forNewTrialUser:e,onUserRetrieved:t,urlForStringsReload:a}={})=>async(h,_)=>{var v,f,b;try{const y=await i.Vi.userInfo((0,j.Jb)(),!0!==e),C=Date.now();null==t||t(y),(0,H.setDistinctId)(y.id),(0,S.N1)(y),h((0,u.z)(y));const R=(0,I.ej)(I.Vj.RedirectToPreview);(0,G.Sk)(y)?void 0===R&&(0,I.d8)(I.Vj.RedirectToPreview,"true"):"ENROLLED"===y.betaStatus?"true"!==R&&(0,I.d8)(I.Vj.RedirectToPreview,"true"):"true"!==R||(0,G.u)(y)||(0,I.nJ)(I.Vj.RedirectToPreview),y.learningLanguage||(0,M.v$)(window.location.pathname)||(y.courses.length>0&&h({type:"UPDATE_USER",user:y}),await(0,M.Zs)(`/welcome?${A.lE}=coursePicker`)),P.h9===y.fromLanguage||e||await(0,M.Zs)(a),(0,G.Go)(y)&&(0,w.R)(),h((0,p.AO)(y.id)),h((0,p.S8)(y.id,null===(v=y.streakData.currentStreak)||void 0===v?void 0:v.length)),h((0,p.LQ)(y.id)),h((0,p.lc)(y.id)),h((0,p.MS)(y.id)),h({type:"UPDATE_USER",user:y}),T.LK(),h({currentTimestampMs:C,heartsConfig:y.health,type:"UPDATE_HEARTS_STATE"}),document.hidden||"/reset_password"===window.location.pathname||(0,H.trackUserActive2022)({activity_trigger:"user_model_update"}),h(V());const L=_().notifications;let D=s.ZP.isEmpty(L);if(!D){const e=y.webNotificationIds||[],t=s.ZP.pluck(s.ZP.values(L),"id");D=!!s.ZP.difference(e,t).length}D||(0,H.track)("notification_bell_load",{has_unread_notifications:!1}),D&&(async()=>{try{const e=(await i.d0.getNotifications()).map((e=>Object.assign(Object.assign({},e),{id:`ev_${e.id}`,pretty_datetime:e.pretty_datetime.trim()})));(0,H.track)("notification_bell_load",{has_unread_notifications:s.ZP.where(e,{unseen:!0}).length>0}),h({notifications:s.ZP.indexBy(e,"id"),type:"SET_NOTIFICATIONS"})}catch(e){(0,H.trackAndLogApiError)("load_user_notifications_failed","Failed to load web notifications",e)}})(),h(J());const N=(0,r.Mb)(_()).ipCountry,F=(0,x.Ay)((0,r.np)(_()).plusDiscounts,Date.now());if(h(d.ke()),h(d.Hm(N,F)),y.trackingProperties.has_observer){(async()=>{try{const e=await i.bu.getUserClassrooms();h({classrooms:e,type:"UPDATE_CLASSROOMS"})}catch(e){(0,H.trackAndLogApiError)("load_user_classrooms_failed","Failed to load classrooms",e)}})();const e=Date.now(),t=e-1e3*(0,k.dz)({days:30});h(m.uM(t,e)),i.bu.autoFollowClassmates(y.id)}if("true"!==(0,I.ej)(I.Vj.Impersonate)){const e=(0,k.NP)();y.timezone!==e&&(console.log(`Changing time zone from ${y.timezone} to ${e}`),h(z({timezone:e})))}["fromLanguage","learningLanguage"].forEach((e=>{const t=y[e],a=`${U.Qt.LanguageTokens}.${t}`;(0,U.No)(a)||(async()=>{try{(0,U.LS)(a,await i._s.getLanguageTokens(t))}catch(e){(0,H.trackAndLogApiError)("load_user_language_tokens_failed","Failed to load language tokens",e)}})()}));const B=async()=>{try{const e=await i.bG.requestGradingConfig();(0,E.tc)(e)}catch(e){(0,H.trackAndLogApiError)("load_user_grading_config_failed","Failed to download client-side grading config.",e)}};(0,E.gE)()&&(e?B():await B()),h(o.i()),(0,O.Q0)({dispatch:h}),h(l.GG()),h(c.b5()),h(l.tD(y.id,window.duo.uiLanguage)),h(g._(y.id,!0)),h(n._()),h((async e=>{const t=await i.eB.getReportId();e({reportId:""===t?void 0:t,type:"SET_YEAR_IN_REVIEW_REPORT_ID"})})),h((f=y.id,b=y.fromLanguage,(e,t)=>{var a;(null===(a=(0,r.Mb)(t()).featureFlags)||void 0===a?void 0:a.web_fetch_avatars_info)||(e((e=>async t=>{t({payload:await i.Kz.getUserBuiltAvatar(e),type:"SET_BUILT_AVATAR_STATE"})})(f)),e(((e,t)=>async a=>{a({payload:await i.Kz.getAvatarBuilderConfig(e,t),type:"SET_AVATAR_BUILDER_CONFIG"})})(f,b)))}))}catch(e){(0,H.trackAndLogApiError)("load_user_failed","Failed to load user",e)}(0,H.startTracking)()},V=()=>async e=>{try{const t=await i.Vi.getUserXPSummaries((0,j.Jb)(),(0,k.zM)((0,k.RF)({days:365})));e({type:"SET_XP_SUMMARIES",xpSummaries:Object.fromEntries(t.map((e=>[(0,k.zK)(e.date),e])))})}catch(e){(0,H.trackAndLogApiError)("load_xp_summaries_failed","Failed to load xp summaries",e)}},z=(e,t=!0,a=!1)=>async(n,o)=>{var l,p;const g=Object.assign({trackingProperties:!0},e);delete g.currentPassword,"facebookToken"in e&&(g.email=!0,g.facebookId=!0,g.hasFacebookId=!0,g.name=!0,delete g.facebookToken),"googleToken"in e&&(g.email=!0,g.googleId=!0,g.hasGoogleId=!0,g.name=!0,delete g.googleToken),"googleIdToken"in e&&(g.email=!0,g.googleId=!0,g.hasGoogleId=!0,g.name=!0,delete g.googleIdToken),e.learningLanguage&&(g.courses=!0,g.currentCourse=!0),"password"in e&&(g.name=!0,g.username=!0,delete g.password),"timezone"in e&&(g.timezoneOffset=!0),"age"in e&&(g.adsConfig=!0,g.privacySettings=!0,delete g.age);const m=a?await C.e("SIGNUP"):null,h=s.ZP.keys(g).sort();if(e.picture instanceof File){try{await i.d0.uploadAvatar(e.picture),(0,H.track)("profile_picture_activity_result",{is_success:!0})}catch(e){(0,H.track)("profile_picture_activity_result",{is_success:!1})}delete e.picture}if(void 0!==e.password)try{const t=await i.Vi.checkPasswordQuality({context:a?i.Vi.PasswordContext.SIGN_UP:i.Vi.PasswordContext.CHANGE_PASSWORD,password:e.password,uiLanguage:window.duo.uiLanguage});if(!t.allowed)throw new y.Wj(!1,{password:t.reason})}catch(e){if(e instanceof y.Wj)throw e;console.error(e)}try{const t=await i.Vi.userUpdate((0,j.Jb)(),Object.assign(Object.assign({},e),{picture:e.picture}),h,m);if(n((0,u.z)(t)),"age"in e){const e=(0,r.Mb)(o()).ipCountry,t=(0,x.Ay)((0,f.I9)(o()),Date.now());n(d.ke()),n(d.Hm(e,t))}if(n({type:"UPDATE_USER",user:Object.assign(Object.assign({},s.ZP.object(h.map((e=>[e,null])))),t)}),e.privacySettings&&(0,H.track)("privacy_settings_update",{public_profile:!e.privacySettings.includes("DISABLE_SOCIAL")}),(0,r.np)(o()).learningLanguage){const{dailyQuest:t,coreQuest:a,hardQuest:s}=(0,_.oV)(o()),r=[null==t?void 0:t.metric,null==a?void 0:a.metric,null==s?void 0:s.metric];(!1===e.enableMicrophone&&r.includes("SPEAK_CHALLENGES")||!1===e.enableSpeaker&&r.includes("LISTEN_CHALLENGES"))&&n(c.Up())}}catch(e){const a=t&&(0,i.Hx)(e)?null===(p=null===(l=e.response)||void 0===l?void 0:l.data)||void 0===p?void 0:p.details:void 0;throw t?a?(0,y.lV)(a):{}:e}},Z=e=>async(t,a)=>{const s=(0,r.np)(a()).blockedUserIds||[];s.includes(e)||(await i.i_.block(e),t({type:"UPDATE_USER",user:{blockedUserIds:[e,...s]}}),t(g._((0,j.Jb)(),!0)))},$=e=>async(t,a)=>{const s=(0,r.np)(a()).blockedUserIds||[];s.includes(e)&&(await i.i_.unblock(e),t({type:"UPDATE_USER",user:{blockedUserIds:s.filter((t=>t!==e))}}))},W=(e="/")=>async t=>{await t(q()),await(0,M.Zs)(e)},q=()=>async(e,t)=>{await(async(e,t)=>{const a=(0,r.df)(t());await(0,H.track)("sign_out",{},!1),e({type:"LOGOUT"}),(0,G.Sk)((0,r.np)(t()))||(0,U.cl)(U.Qt.LoggedOutExperiments);try{const e=await(0,L.b)();await e.clear("prefetchedSessions"),await e.clear("submittableRequests")}catch(e){(0,F.Kp)(e)}try{await(0,N.r1)(a)}catch(e){(0,F.Kp)("Failed to unsubscribe from push notifications",{ex:e})}})(e,t),(0,r.df)(t())||await i.d0.logout(),(0,i.ub)()},Q=(e,t)=>async a=>{try{if(await a(((e,t)=>async a=>{await(0,y.pK)(e,t),await a(B({forNewTrialUser:!0})),a((async e=>{try{e({type:"UPDATE_USER",user:{currentCourse:(await i.Vi.userInfoPartial((0,j.Jb)(),["currentCourse"])).currentCourse}})}catch(e){(0,F.Kp)(e)}})),(0,H.track)("welcome",{})})(e,t)),t&&t!==P.h9){(0,I.d8)(I.Vj.ShouldTrackWelcome,"true");const e=A.BA.findIndex((e=>"coursePicker"===e))+1;await(0,M.Zs)(`/welcome?${A.lE}=${A.BA[e]}`)}else R.m8.push("/welcome")}catch(e){}},Y=({courseId:e,fromLanguage:t,learningLanguage:a,redirectToHome:s,resetScrollPosition:n})=>async(r,o)=>{const l=window.location.pathname===M.B6&&(0,v.N9)(o())({fromLanguageId:t,learningLanguageId:a});l&&D.Z.start("language_switch");const d={from_language:t,learning_language:a};e&&(d.course_id=e),(0,H.track)("switch_language",d),r({type:"SWITCH_COURSE"}),r({name:"skillTreeMigration",type:"CAN_SHOW_HOME_MESSAGE"}),s&&window.location.pathname!==M.B6&&R.m8.push(M.B6),n&&b.O.scrollTo(0,0),await h.SL;try{r({type:"UPDATE_USER",user:await i.Vi.userUpdate((0,j.Jb)(),{fromLanguage:t,learningLanguage:a},["courses","currentCourse","fromLanguage","learningLanguage"])}),r(c.Up()),l&&D.Z.finish("language_switch"),t!==P.h9&&await(0,M.Zs)()}catch(e){(0,H.trackAndLogApiError)("switch_course_failed","Failed to switch course",e)}finally{r({type:"SWITCH_COURSE_END"})}},K=(e,t,a,s)=>n=>{const r=(0,k.HR)(300);n(void 0===t?{mistakeCountInfo:void 0,type:"SET_MISTAKE_COUNT"}:{mistakeCountInfo:{courseId:e,expirationTime:r,includeListening:a,includeSpeaking:s,mistakeCount:t},type:"SET_MISTAKE_COUNT"}),n(X(e,r,a,s))},J=()=>async e=>{try{const t=await i.Vi.getUserInventory();e({inventory:s.ZP.indexBy(t,"itemName"),type:"UPDATE_INVENTORY"})}catch(e){(0,H.trackAndLogApiError)("load_user_inventory_failed","Failed to load user inventory",e)}},X=(e,t,a,s)=>async n=>{const r=await i.wO.getMistakeCount(e,a,s);n({mistakeCountInfo:{courseId:e,expirationTime:t+1,includeListening:a,includeSpeaking:s,mistakeCount:r},type:"SET_MISTAKE_COUNT"})},ee=e=>async t=>{const a=await i.Vi.updatePrivacySettings(e);t({type:"UPDATE_USER",user:{privacySettings:a}}),(0,H.track)("privacy_settings_update",{public_profile:!a.includes("DISABLE_SOCIAL")})}},37993:(e,t,a)=>{"use strict";a.d(t,{I:()=>h,R:()=>p});var s=a(99369),n=a(80254),r=a(68903),i=a(8718),o=a(77042),l=a(18513),c=a(20662),d=a(43094),u=a(79465);const p=["monthlyChallengeComplete","streakExplainer","streakSociety"],g={audio:{instructionId:0,playState:"PAUSE",seekTo:0,speed:1},baseXp:14,fromLanguage:void 0,learningLanguage:void 0,listenModeCharacterIds:[],masterVersion:!1,mode:"READ",speakingDisabledLineIndex:-1,storyAudioLoadState:"UNDEFINED",trackingProperties:{}},m=e=>setTimeout(e),h=(e=(0,s.from)(g),t)=>{var a,h,_,v,f,b,S,y,E,I,k,w,T,C,R,L,O,P,A,D,x,N,F,M,U,H,j,G,B,V,z,Z,$,W,q,Q,Y,K,J,X,ee,te,ae,se;switch(t.type){case"stories/UNLOAD_STORY":return e.audio&&"PLAY"===e.audio.playState&&(e=(0,s.merge)(e,{audio:(0,o.EU)({playState:"PAUSE"})(e.audio)})),e.storyElements&&(0,o.FG)(e.storyElements),(0,s.merge)(e,{audioPrefetchState:void 0,pendingAudio:void 0,storyAudioLoadState:"UNDEFINED",storyElements:void 0,storyId:void 0,storyRevision:void 0,storySession:void 0,trackingProperties:void 0});case"stories/SELECT_STORY":return(0,s.merge)(e,{masterVersion:t.masterVersion,storyId:t.storyId,storySession:void 0});case"stories/SET_STORY":return(0,s.merge)(e,{audioPrefetchState:t.audioPrefetchState,baseXp:t.baseXp,cefrLevel:t.cefrLevel,conversationModeListenCharacterIds:t.conversationModeListenCharacterIds,conversationModeSpeakCharacterIds:t.conversationModeSpeakCharacterIds,conversationModeSpeakLineIds:t.conversationModeSpeakLineIds,fallbackElements:t.fallbackElements,fromLanguage:t.storyFromLanguage,illustrations:t.illustrations,learningLanguage:t.storyLanguage,levelData:t.levelData,listenModeCharacterIds:t.listenModeCharacterIds,loadTime:t.startTime,mode:t.mode,multiPartInfo:t.multiPartInfo,showPromptsInTargetLanguage:t.showPromptsInTargetLanguage,speakingDisabledLineIndex:t.speakingDisabledLineIndex,storyAudioLoadState:"LOADING",storyElements:t.storyElements,storyFromLanguageName:t.fromLanguageName,storyId:t.storyId,storyRevision:t.storyRevision,storySession:void 0,trackingConstants:t.trackingConstants,trackingProperties:t.trackingProperties});case"stories/AUDIO_FOR_ELEMENT_PREFETCHED":return e.audioPrefetchState?(0,s.merge)(e,{audioPrefetchState:(0,s.merge)(e.audioPrefetchState,{[t.elementIndex]:!0})}):e;case"stories/UPDATE_STORY_AUDIO_FILE_LOAD_STATE":return(e=(0,s.merge)(e,{storyAudioLoadState:t.state})).pendingAudio&&(e=(0,s.merge)(e,{audio:e.pendingAudio,pendingAudio:void 0})),e;case"stories/START_STORY":{const n={elementIndex:(0,i.HD)(e),textIndex:0},r={completed:!1,furthestPosition:n,grammarCorrectionRequestStatus:"not-done",hintPosition:void 0,hintsUsed:[],maxScore:0,onboardingStep:void 0,score:0,selectedPosition:n,speakCount:0,startTime:null!==(a=e.loadTime)&&void 0!==a?a:Date.now(),status:"in-progress",storyCompleteRequestStatus:"ok",timeline:[{time:t.time/1e3,type:"line-start"}],viewedIntroCard:null===(h=e.storySession)||void 0===h?void 0:h.viewedIntroCard},l=null===(_=(e=(0,s.merge)(e,{storySession:r})).storyElements)||void 0===_?void 0:_[n.elementIndex],c=l&&(0,i.z_)(l);if(void 0===c)throw Error("Unexpected type for first element");const d=null!==(v=c.audioPrefix)&&void 0!==v?v:c.audio,u=(0,o.EU)({audioSyncModel:d,playState:"PLAY"})(e.audio),p="LOAD_SUCCESS"===e.storyAudioLoadState;return e=(0,s.merge)(e,{audio:p?u:e.audio,pendingAudio:p?void 0:u})}case"stories/AUTO_ADVANCE_STORY_POSITION":{const a=e.storySession,n=e.storyElements,r=null==n?void 0:n[t.position.elementIndex];if("HINT_ONBOARDING"===(null==r?void 0:r.type)&&0===(null==a?void 0:a.hintsUsed.length)&&(e=(0,s.merge)(e,{storySession:(0,s.merge)(a,{onboardingStep:"newUser"===r.onboardingType?"tap-translation-hint":void 0})})),(!(null==a?void 0:a.selectedPosition)||t.position.elementIndex>a.selectedPosition.elementIndex)&&r&&(0,i.P3)(r)){if(void 0===e.fromLanguage||void 0===e.learningLanguage)throw Error("From- or learning language cannot be undefined during story.");const a=(0,l.FE)(r,t.position.elementIndex,null!==(b=null===(f=e.storySession)||void 0===f?void 0:f.hintsUsed)&&void 0!==b?b:[],t.showLengthReducedMatchChallenge,e.fromLanguage,e.learningLanguage);e=(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{challengeSession:a})}),a&&(m((()=>(0,l.M6)(e,a))),e=(0,l.v5)(e))}return(0,d.DG)(e,t.position)}case"stories/AUDIO_STOPPED":return(0,s.merge)(e,{audio:Object.assign(Object.assign({},e.audio),{playState:"PAUSE"})});case"stories/SHOW_TRANSCRIPT_HINT":{const a=null===(S=e.storyElements)||void 0===S?void 0:S[t.position.elementIndex];return m((()=>(0,u.track)("LINE"===(null==a?void 0:a.type)?"stories_story_translation_hint":"stories_challenge_translation_hint",Object.assign(Object.assign(Object.assign({},e.trackingProperties),null==a?void 0:a.trackingProperties),{phrase:t.hint})))),(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{hintPosition:t.position,hintShownTime:t.time,hintText:t.hint,hintsUsed:[...null!==(E=null===(y=e.storySession)||void 0===y?void 0:y.hintsUsed)&&void 0!==E?E:[],{phrase:t.text,translation:t.hint}]})})}case"stories/DISMISS_HINT":{const a=e.storySession,n=200;return(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{hintPosition:void 0,hintText:void 0,hintsUsed:(null==a?void 0:a.hintShownTime)&&t.time-a.hintShownTime<n?a.hintsUsed.slice(a.hintsUsed.length-1):null==a?void 0:a.hintsUsed})})}case"stories/REPLAY_LINE_AUDIO":{const a=e.storySession,n=e.storyElements,r=n&&n[(0,d.lo)(n,t.elementIndex,!0)];if(!r||!["LINE","HEADER","FREEFORM_WRITING_EXAMPLE_RESPONSE","FREEFORM_WRITING"].includes(r.type))throw Error("Tried to replay an element of type other than line, header, or example response");if(!(null==a?void 0:a.furthestPosition)||!n)throw Error("No story session found when replaying audio");let l=1;t.elementIndex===(null==a?void 0:a.previousReplayElementIndex)&&(l=.6);const c=(()=>{var s,o;switch(r.type){case"LINE":return r.line.content.audioPrefix&&n&&(0,d.O$)(n,(null==a?void 0:a.furthestPosition.elementIndex)||0)===t.elementIndex+1&&!(null===(o=null===(s=e.storySession)||void 0===s?void 0:s.challengeSession)||void 0===o?void 0:o.completed)?r.line.content.audioPrefix:r.line.content.audio;case"HEADER":return r.learningLanguageTitleContent.audio;case"FREEFORM_WRITING_EXAMPLE_RESPONSE":return(0,i.Au)(r);case"FREEFORM_WRITING":if(!a.freeformChallengeSubmittedResponseTtsUrl||!a.freeformChallengeSubmittedResponseWithHints)throw Error("No TTS or hints for user's response!");return(0,i.Au)({content:a.freeformChallengeSubmittedResponseWithHints,ttsURL:a.freeformChallengeSubmittedResponseTtsUrl})}throw Error(`No audio for "${r.type}" element`)})();return m((()=>(0,u.track)("stories_audio_replay",Object.assign(Object.assign(Object.assign({},e.trackingProperties),r.trackingProperties),{first_replay:t.elementIndex!==a.previousReplayElementIndex,furthest_line:(0,d.D5)(a.furthestPosition.elementIndex,n)})))),(0,s.merge)(e,{audio:(0,o.EU)({audioSyncModel:c,playState:"PLAY",speed:l})(e.audio),storySession:(0,s.merge)(a,{previousReplayElementIndex:t.elementIndex,selectedPosition:{elementIndex:t.elementIndex,textIndex:void 0}})})}case"stories/ADVANCE_STORY_POSITION":{e=(0,s.merge)(e,{audio:(0,s.merge)(e.audio,{playError:!1})}),e=(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{hintPosition:void 0})});const a=(e=(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{timeline:[...null!==(k=null===(I=e.storySession)||void 0===I?void 0:I.timeline)&&void 0!==k?k:[],{time:t.time/1e3,type:"line-start"}]})})).storyElements;if(!a)throw Error("No story element list found");const n=null===(w=e.storySession)||void 0===w?void 0:w.furthestPosition.elementIndex,r=t.position.elementIndex,u=a[r],p=a[(0,d.lo)(a,r,void 0!==(null===(T=e.storySession)||void 0===T?void 0:T.freeformChallengeSubmittedResponseTtsUrl))];(!n||r>n)&&(e=(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{challengeSession:void 0})}));const g="LINE"===u.type&&e.storyElements&&"CONVERSATION"===e.mode&&-1===e.speakingDisabledLineIndex&&"SPEAK"===(0,c.gu)({conversationModeSpeakCharacterIds:null!==(C=e.conversationModeSpeakCharacterIds)&&void 0!==C?C:[],conversationModeSpeakLineIds:null!==(R=e.conversationModeSpeakLineIds)&&void 0!==R?R:[],line:u.line,lineIndex:(0,i.IG)(u),listenModeCharacterIds:[],mode:e.mode,nextElement:a[r+1]});if(u&&(0,i.P3)(u)||g){if(void 0===e.fromLanguage||void 0===e.learningLanguage)throw Error("From- or learning language cannot be undefined during story.");const a=(0,l.FE)(u,r,null!==(O=null===(L=e.storySession)||void 0===L?void 0:L.hintsUsed)&&void 0!==O?O:[],t.showLengthReducedMatchChallenge,e.fromLanguage,e.learningLanguage);e=(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{challengeSession:a})}),a&&(m((()=>(0,l.M6)(e,a))),e=(0,l.v5)(e))}const h="LINE"===(null==u?void 0:u.type)?t.position:Object.assign(Object.assign({},t.position),{textIndex:"LINE"===(null==p?void 0:p.type)?p.line.content.text.length-1:0});e=(0,d.DG)(e,h);const _=a[h.elementIndex],v=(0,i.z_)(_);if(v){const a=null!==(P=v.audioPrefix)&&void 0!==P?P:v.audio;e=(0,s.set)(e,"audio",(0,o.EU)({audioSyncModel:a,playState:"PLAY",seekTo:(0,d.SU)(a,null!==(A=h.textIndex)&&void 0!==A?A:0),speed:t.playbackRate})(e.audio))}return e}case"stories/SELECT_MULTIPLE_CHOICE":{let a;if(!e.storySession)throw Error("No story session found");const n=e.storySession.furthestPosition,r=e.storySession.challengeSession;if("multiple-choice"!==(null==r?void 0:r.type))throw Error("Unexpected challenge type");const c=(0,s.set)(e.storySession,"challengeSession",(r=>{var i;const l=[...r.selectedIndices,t.index],c=void 0!==r.additionalCorrectAnswerIndices&&r.additionalCorrectAnswerIndices.length>0,d=c?r.additionalCorrectAnswerIndices.every((e=>l.includes(e)))&&l.includes(r.correctAnswerIndex):l.includes(r.correctAnswerIndex),u=null===(i=e.storyElements)||void 0===i?void 0:i[n.elementIndex-1];d&&"LINE"===(null==u?void 0:u.type)&&u.line.content.audioSuffix&&(a=(0,o.EU)({audioSyncModel:u.line.content.audioSuffix,playState:"PLAY"}));const p={mistakeCount:t.index===r.correctAnswerIndex||c&&r.additionalCorrectAnswerIndices.includes(t.index)?r.mistakeCount:r.mistakeCount+1,selectedIndices:l};return(0,s.merge)(r,p)})(r));e=(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,c)}),a&&(e=(0,s.set)(e,"audio",a(e.audio))),(0,i.Xq)(r.correctAnswerIndex,t.index,r.selectedIndices,r.additionalCorrectAnswerIndices)&&(e=(0,l.Q5)(e),m((()=>(0,l.S5)(e))));const d=null===(D=e.storySession)||void 0===D?void 0:D.challengeSession;return m((()=>(0,u.track)("stories_select_multiple_choice",Object.assign(Object.assign(Object.assign({},e.trackingProperties),r.trackingProperties),{select_method:t.selectMethod,success:!!d&&0===d.mistakeCount})))),e}case"stories/SELECT_PHRASE":{if("select-phrases"!==(null===(N=null===(x=e.storySession)||void 0===x?void 0:x.challengeSession)||void 0===N?void 0:N.type))throw Error("Unexpected type");const a=null===(F=e.storySession)||void 0===F?void 0:F.challengeSession,n=t.optionIndex===a.correctAnswerIndex?0:1;e=(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{challengeSession:(0,s.merge)(e.storySession.challengeSession,{mistakeCount:e.storySession.challengeSession.mistakeCount+n,selectedIndices:[...e.storySession.challengeSession.selectedIndices,t.optionIndex]})})}),t.optionIndex===a.correctAnswerIndex&&(e=(0,l.Q5)(e),m((()=>(0,l.S5)(e))));const r=null===(M=e.storySession)||void 0===M?void 0:M.challengeSession;return m((()=>(0,u.track)("stories_select_multiple_choice",Object.assign(Object.assign(Object.assign({},e.trackingProperties),a.trackingProperties),{select_method:t.selectMethod,success:!!r&&0===r.mistakeCount})))),e}case"stories/SELECT_MATCH_TOKEN":{if("match"!==(null===(H=null===(U=e.storySession)||void 0===U?void 0:U.challengeSession)||void 0===H?void 0:H.type))throw Error("Challenge type is incorrect. It should be 'match'.");const a=e.storySession.challengeSession,r=n.cx(a.tokens,{status:"selected"}),i=a.tokens[r],o=a.tokens[t.index];if(t.index===r)e=(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{challengeSession:(0,s.merge)(a,{tokens:a.tokens.map(((e,a)=>a===t.index?(0,s.set)(e,"status","initial"):e))})})});else if(i&&i.language!==o.language){const n=a.dictionary[`from:${i.text}`],c=o.text===n?"correct":"incorrect",d=a.tokens.map(((e,a)=>a===t.index||a===r?(0,s.set)(e,"status",c):e)),u="correct"===c&&d.every((e=>"correct"===e.status));e=(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{challengeSession:(0,s.merge)(a,{mistakeCount:a.mistakeCount+("incorrect"===c?1:0),tokens:d})})}),u&&(e=(0,l.Q5)(e),m((()=>(0,l.S5)(e))))}else e=(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{challengeSession:(0,s.merge)(a,{tokens:a.tokens.map(((e,a)=>a===t.index?(0,s.set)(e,"status","selected"):a===r||"incorrect"===e.status?(0,s.set)(e,"status","initial"):e))})})});return e}case"stories/SELECT_ARRANGE_PHRASE":{const a=null===(j=e.storySession)||void 0===j?void 0:j.challengeSession;if("arrange"!==(null==a?void 0:a.type))throw Error("Unexpected type");const n=null===(G=e.storySession)||void 0===G?void 0:G.furthestPosition,r=n?null===(B=e.storyElements)||void 0===B?void 0:B[n.elementIndex]:void 0;if("ARRANGE"!==(null==r?void 0:r.type))throw Error("Unexpected challenge type");if(r.selectablePhrases[t.index]===r.selectablePhrases[r.phraseOrder[a.arrangedPhrases]]){const n=[...a.phraseOrder];t.index!==r.phraseOrder[a.arrangedPhrases]&&(n[a.arrangedPhrases]=t.index,n[n.indexOf(t.index)]=r.phraseOrder[a.arrangedPhrases]);const i=a.arrangedPhrases+1;return e=(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{challengeSession:(0,s.merge)(a,{arrangedPhrases:i,phraseOrder:n,selectedIncorrectIndices:[]})})}),i>=r.selectablePhrases.length&&(e=(0,l.Q5)(e),m((()=>(0,l.S5)(e)))),e}return(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{challengeSession:(0,s.merge)(a,{mistakeCount:a.selectedIncorrectIndices.includes(t.index)?a.mistakeCount:a.mistakeCount+1,selectedIncorrectIndices:[...a.selectedIncorrectIndices.filter((e=>e!==t.index)),t.index]})})})}case"stories/SET_STORY_COMPLETE_REQUEST_STATUS":return(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{storyCompleteRequestStatus:t.status})});case"stories/SET_GRAMMAR_CORRECTION_REQUEST_STATUS":return(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{grammarCorrectionRequestStatus:t.status,grammarCorrectionTimeTaken:t.timeTaken})});case"stories/COMPLETE_STORY":return(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{challengeSession:void 0,nextMode:(0,s.from)(t.nextMode),onboardingStep:void 0,pendingStoryEndSections:(0,s.from)(t.storyEndSections),status:"story-end",storyCompleteRequestStatus:"ok",visibleStoryEndSections:(0,s.from)([])})});case"stories/SHOW_NEXT_STORY_END_SECTION":{if(!(null===(V=e.storySession)||void 0===V?void 0:V.furthestPosition))return e;if((0,d.DG)(e,e.storySession.furthestPosition),!e.storySession.pendingStoryEndSections)return e;if(e.storySession.pendingStoryEndSections.length<t.increment)return(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{status:"completed"})});const a=e.storySession.pendingStoryEndSections[t.increment-1],n=e.storySession.pendingStoryEndSections.slice(t.increment);m((()=>{var t,s,n,r,i,o;(null===(s=null===(t=e.storySession)||void 0===t?void 0:t.pendingStoryEndSections)||void 0===s?void 0:s.length)&&(0,u.track)("stories_show_end_section",{end_section_position:null!==(r=null===(n=e.storySession.visibleStoryEndSections)||void 0===n?void 0:n.length)&&void 0!==r?r:0,end_section_type:a.type,total_end_sections:(null!==(o=null===(i=e.storySession.visibleStoryEndSections)||void 0===i?void 0:i.length)&&void 0!==o?o:0)+e.storySession.pendingStoryEndSections.length})}));const i=void 0!==e.storySession.fullscreenStoryEndSection,o=(0,r.p)(p)(a.type)?a:void 0;return(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{fullscreenStoryEndSection:o,pendingStoryEndSections:n,status:0===n.length?"completed":"story-end",useImmediateScrolling:i,visibleStoryEndSections:[...null!==(z=e.storySession.visibleStoryEndSections)&&void 0!==z?z:[],a]})})}case"stories/SET_EDITING_TEXT":return(null===(Z=e.storySession)||void 0===Z?void 0:Z.challengeSession)?(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{challengeSession:(0,s.merge)(e.storySession.challengeSession,{answer:t.text})})}):e;case"stories/SET_CORRECTED_TEXT":return"freeform-writing"!==(null===(W=null===($=e.storySession)||void 0===$?void 0:$.challengeSession)||void 0===W?void 0:W.type)?e:(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{challengeSession:(0,s.merge)(e.storySession.challengeSession,{answer:t.correctedText,fetchedCorrection:t.correctedText}),freeformChallengeCorrectedResponse:t.correctedText,freeformChallengeCorrectionId:t.correctionId,freeformChallengeCorrectionModel:t.model,freeformChallengeCorrectionModelVersion:t.modelVersion,freeformChallengeOriginalResponse:t.originalText})});case"stories/RE_EDIT_TEXT":return(null===(q=e.storySession)||void 0===q?void 0:q.challengeSession)?(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{challengeSession:(0,s.merge)(e.storySession.challengeSession,{allowEditAfterGrammarCheck:!0})})}):e;case"stories/DISMISS_CORRECTION":{const a=null===(Q=e.storySession)||void 0===Q?void 0:Q.challengeSession;return"freeform-writing"!==(null==a?void 0:a.type)?e:(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{challengeSession:(0,s.merge)(a,{answer:t.text,numberOfCorrectionsDismissed:a.numberOfCorrectionsDismissed+1})})})}case"stories/START_CHALLENGE":{const a=null===(Y=e.storySession)||void 0===Y?void 0:Y.challengeSession;return a&&"freeform-writing"===a.type?(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{challengeSession:(0,s.merge)(a,{startTime:t.startTime})})}):e}case"stories/DID_SCROLL_DURING_FREEFORM_CHALLENGE":{const t=null===(K=e.storySession)||void 0===K?void 0:K.challengeSession;return t&&"freeform-writing"===t.type?(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{challengeSession:(0,s.merge)(t,{didScroll:!0})})}):e}case"stories/TYPE_TEXT_SUBMIT":return e=(0,l.vX)(e,t.gradingResult),e=(0,l.Q5)(e),m((()=>(0,l.S5)(e))),e;case"stories/FREEFORM_WRITING_SUBMIT":return e=(0,l.Om)(e),e=(0,l.Q5)(e),m((()=>(0,l.S5)(e))),(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{freeformChallengeSubmittedResponseWithHints:t.responseWithHints,responseTtsStatus:"done"})});case"stories/ONBOARDING_HINT_VIEWED":return(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{onboardingStep:void 0})});case"stories/ANSWER_POINT_TO_PHRASE":{const a=null===(J=e.storySession)||void 0===J?void 0:J.challengeSession;if("point-to-phrase"!==(null==a?void 0:a.type))throw Error("Unexpected type");const r=a.correctAnswerIndex,o=a.additionalCorrectAnswerIndices,c=t.partIndex===a.correctAnswerIndex||(null==o?void 0:o.includes(t.partIndex));return e=(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{challengeSession:(0,s.merge)(a,{mistakeCount:a.mistakeCount+(c?0:1),selectedIndices:n.G0(a.selectedIndices,[t.partIndex])})})}),(0,i.Xq)(r,t.partIndex,a.selectedIndices,o)&&(e=(0,l.Q5)(e),m((()=>(0,l.S5)(e)))),e}case"stories/SET_AUDIO_ERROR":return(0,s.setIn)(e,["audio","playError"],!0);case"stories/SET_LINE_AUDIO_DURATION":return(0,s.setIn)(e,["audio","duration"],t.duration);case"stories/SKIP_CHALLENGE":{const t=null===(X=e.storySession)||void 0===X?void 0:X.challengeSession;if("freeform-writing"!==(null==t?void 0:t.type))throw Error("Attempted to skip unskippable challenge");return(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{challengeSession:(0,s.merge)(t,{skipped:!0})})})}case"stories/SET_HOOTS_USER_PROPERTIES":return(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{freeformUserProperties:t.properties})});case"stories/FREEFORM_WRITING_SET_TTS_URL":if("freeform-writing"!==(null===(te=null===(ee=e.storySession)||void 0===ee?void 0:ee.challengeSession)||void 0===te?void 0:te.type))throw Error("Unexpected challenge type");return(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{freeformChallengeSubmittedResponseTtsUrl:t.url})});case"stories/FREEFORM_WRITING_PREPARE_SUBMIT":return(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{responseTtsStatus:"in-progress"})});case"stories/USED_KEYBOARD_FOR_MATCH_CHALLENGE":return(0,s.setIn)(e,["storySession","usedKeyboardForMatchChallenge"],!0);case"stories/GRADE_SPEAK_LINE":{const a=null===(ae=e.storySession)||void 0===ae?void 0:ae.challengeSession;if("speak"!==(null==a?void 0:a.type))throw Error(`Unexpected speak challenge on ${null==a?void 0:a.type}`);return e=(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{challengeSession:(0,s.merge)(a,{mistakeCount:t.correct||t.skipped?0:1,skipped:t.skipped})})}),e=(0,l.Q5)(e),m((()=>(0,l.S5)(e))),e}case"DISABLE_SPEAK":{if(void 0===e.storySession)return e;const t=e.storyElements,a=null===(se=e.storySession)||void 0===se?void 0:se.furthestPosition.elementIndex,n=t&&a?t[a]:void 0;if("LINE"!==(null==n?void 0:n.type))throw Error(`Unexpected switch to fall back ${null==n?void 0:n.type}`);const r=e.fallbackElements;if(!r)throw Error("No fallback elements");if(!t)throw Error("No elements");const o=(0,i.IG)(n),l=(0,i.BT)(o,t),c=t.slice(0,l),d=(0,i.BT)(o,r),u=[...c,...r.slice(d,r.length)];return(0,s.merge)(e,{speakingDisabledLineIndex:o,storyElements:u})}case"stories/VIEWED_INTRO_CARD":return(0,s.setIn)(e,["storySession","viewedIntroCard"],!0)}return e}},90788:(e,t,a)=>{"use strict";a.d(t,{$Z:()=>i,XX:()=>o});var s=a(30427),n=a(84389);const r=e=>e.achievementsV3,i=s.P1(r,(e=>e.achievements||[])),o=s.P1(r,(e=>{const t=e.achievements||[],a=e.sessionStartAchievements||[];if(a.length>0){const e=(0,n.ET)(a);return t.filter((t=>{const a=e[t.name];return a&&a.tier!==t.tier})).slice(0,1)}}))},42659:(e,t,a)=>{"use strict";a.d(t,{$4:()=>Z,B8:()=>z,Bk:()=>$,Ch:()=>P,Cm:()=>le,EQ:()=>g,EU:()=>E,Ec:()=>X,Fl:()=>ee,Fp:()=>Y,J6:()=>pe,Jw:()=>F,KD:()=>de,LR:()=>be,Lm:()=>Q,M6:()=>ye,MY:()=>B,Mb:()=>d,NR:()=>he,NT:()=>J,Oz:()=>V,Rv:()=>p,S1:()=>Se,SJ:()=>v,Sg:()=>m,Ss:()=>T,Xr:()=>y,Y2:()=>me,Y4:()=>te,YW:()=>f,__:()=>I,aQ:()=>ne,bE:()=>S,bR:()=>l,cQ:()=>M,dE:()=>u,dY:()=>re,df:()=>q,dz:()=>K,eI:()=>fe,ep:()=>b,ez:()=>_,fI:()=>w,fn:()=>oe,gg:()=>ie,gl:()=>_e,hp:()=>R,hy:()=>j,iH:()=>C,iM:()=>G,ii:()=>c,is:()=>H,jv:()=>o,lA:()=>A,mk:()=>h,mu:()=>ge,nI:()=>Ee,np:()=>U,oe:()=>x,r8:()=>se,rF:()=>L,rx:()=>ve,uZ:()=>ae,vw:()=>W,w0:()=>D,wW:()=>N,yV:()=>O,yk:()=>ce});var s=a(30427),n=a(63301),r=a(94171),i=a(97106);const o=e=>e.browserSettings,l=e=>e.ui.canShowAgeRestrictedLeaderboardsIntro,c=e=>e.charactersPersisted,d=e=>e.config,u=e=>e.courses,p=e=>e.user.fromLanguage,g=e=>e.ui.homeMessagingClientState,m=e=>void 0!==e.ui.drawer&&void 0!==e.ui.modal,h=e=>void 0!==e.ui.drawer||void 0!==e.ui.modal,_=e=>e.ui.isInventoryFresh,v=e=>void 0!==e.ui.modal,f=e=>e.ui.online,b=e=>void 0!==e.ui.secondaryModal,S=e=>e.ui.isShopItemsFresh,y=e=>e.ui.isUserModelFresh,E=e=>e.uiPersisted.streakSocietyNewRewardAvailable,I=e=>e.items,k=e=>e.profile,w=e=>e.uiPersisted.skippedLevelInfo,T=e=>{var t;return null===(t=e.leaderboards.leagues)||void 0===t?void 0:t.state},C=e=>e.user.learningLanguage,R=({},e)=>e.location,L=e=>e.ui.modal,O=e=>e.notifications,P=e=>e.paymentMethods,A=e=>e.player,D=e=>e.animations,x=e=>e.skills,N=e=>e.subscriptions,F=e=>e.ui,M=e=>e.uiPersisted,U=e=>e.user,H=s.P1(A,(e=>e.session)),j=s.P1(A,H,((e,t)=>t&&(e.currentIndex===t.challenges.length-1||e.endedEarly||"sessionHearts"===e.heartsType&&t.heartsLeft<=0))),G=s.P1(H,(e=>{var t;return null!==(t=null==e?void 0:e.challenges.filter((e=>{var t;return null===(t=e.gradingResult)||void 0===t?void 0:t.correct})))&&void 0!==t?t:[]})),B=s.P1(A,H,((e,t)=>null==t?void 0:t.challenges[e.currentIndex])),V=s.P1(u,U,((e,t)=>{var a,s;if(!t.currentCourseId)return;const n=e[t.currentCourseId];if((null!==(s=null===(a=n.pathSectioned)||void 0===a?void 0:a.length)&&void 0!==s?s:0)>0&&(void 0===n.path||0===n.path.length)){const e=n.pathSectioned.flatMap((e=>e.units));return Object.assign(Object.assign({},n),{path:e})}return e[t.currentCourseId]})),z=s.P1((e=>e.courseHistories),V,((e,t)=>e[t.id])),Z=s.P1(F,(e=>e.viewportWidth>=700)),$=s.P1(F,(e=>e.viewportWidth<530)),W=s.P1(F,(e=>!!e.purchasingItem)),q=s.P1((e=>e.brb.zombie.status),(e=>(0,n.gQ)("debugZombieMode")||"enabled"===e)),Q=s.P1(U,(e=>!!e.id)),Y=s.P1(F,(e=>e.popoverId)),K=s.P1(k,(e=>e.privateProfile)),J=s.P1(k,(e=>e.user)),X=s.P1(k,(e=>e.followers)),ee=s.P1(k,(e=>e.following)),te=s.P1(k,(e=>e.socialProfile)),ae=s.P1(k,(e=>e.firstPersonSocialProfile)),se=s.P1(k,(e=>e.achievements)),ne=s.P1(k,(e=>e.xpEvents)),re=s.P1(U,(e=>e.id)),ie=s.P1(d,(e=>{var t,a,s,n;return"CN"===e.ipCountry&&null!==(a=null===(t=e.featureFlags)||void 0===t?void 0:t.disable_avatars_cn)&&void 0!==a&&a||null!==(n=null===(s=e.featureFlags)||void 0===s?void 0:s.disable_avatars_global)&&void 0!==n&&n})),oe=(s.P1(z,(e=>e.numSessionsWithMistakes)),s.P1(I,(e=>e.inventory.premium_subscription))),le=s.P1(oe,(e=>null==e?void 0:e.subscriptionInfo)),ce=s.P1(I,(e=>e.inventory.immersive_subscription)),de=(s.P1(I,(e=>e.inventory.gold_subscription)),e=>(0,i.h0)(e.items.inventory)),ue=s.P1([de,I],((e,t)=>{var a;return e?null===(a=t.inventory[e])||void 0===a?void 0:a.purchaseDate:void 0})),pe=s.P1([de,ue],((e,t)=>void 0!==t&&void 0!==e&&void 0!==i.$Z[e]?1e3*t+i.$Z[e]:void 0)),ge=s.P1([pe,(e,t)=>t],((e,t)=>void 0!==e&&e>=t)),me=s.P1(I,(e=>{var t,a;return null!==(a=null!==(t=e.inventory.premium_subscription)&&void 0!==t?t:e.inventory.gold_subscription)&&void 0!==a?a:e.inventory.immersive_subscription})),he=s.P1(I,(e=>{var t;return null!==(t=e.inventory.premium_subscription)&&void 0!==t?t:e.inventory.gold_subscription})),_e=s.P1(A,(e=>{var t,a;return null!==(a=null===(t=e.sessionParams)||void 0===t?void 0:t.isGrammarSkill)&&void 0!==a&&a})),ve=e=>e.user.gemsConfig,fe=e=>!!e.stories.storySession||!!e.player.session,be=e=>!!e.items.inventory[r.xH],Se=s.P1(M,(e=>e.streakSocietyRewardClaimed)),ye=s.P1(M,(e=>e.streakSocietyInductionSlideShownTime)),Ee=s.P1(I,(e=>{var t,a,s,n;return(null!==(a=null===(t=e.inventory.streak_freeze)||void 0===t?void 0:t.quantity)&&void 0!==a?a:0)+(null!==(n=null===(s=e.inventory.society_streak_freeze)||void 0===s?void 0:s.quantity)&&void 0!==n?n:0)}))},73520:(e,t,a)=>{"use strict";a.d(t,{Ap:()=>I,B$:()=>g,Cu:()=>h,D_:()=>o,EL:()=>d,MI:()=>w,Rc:()=>S,TE:()=>v,Ti:()=>E,W1:()=>b,ey:()=>u,gD:()=>y,jK:()=>m,kK:()=>_,oO:()=>f,oV:()=>c,uL:()=>k,x2:()=>p,xm:()=>l});var s=a(30427),n=a(80254),r=a(41831),i=a(16689);const o=e=>e.goals,l=s.P1(o,(e=>n.HK(e.schema,"goalId"))),c=s.P1(o,l,((e,t)=>({coreQuest:e.coreQuest?t[e.coreQuest]:void 0,dailyQuest:e.dailyQuest?t[e.dailyQuest]:void 0,difficulty:e.difficulty,hardQuest:e.hardQuest?t[e.hardQuest]:void 0,lastUpdated:e.lastUpdated}))),d=s.P1(o,(e=>e.progress)),u=s.P1(o,(e=>e.friendsQuest.details)),p=s.P1(o,(e=>e.friendsQuest.highFiveTimestamp)),g=s.P1(o,(e=>e.friendsQuest.lastSentGiftTimestamp)),m=s.P1(o,(e=>e.friendsQuest.lastSentNudge)),h=s.P1(u,(e=>null==e?void 0:e.winStreak)),_=s.P1(o,(e=>e.lastSeenNextFriendsQuestStart)),v=s.P1(o,(e=>e.monthlyQuestTheme)),f=s.P1(o,(e=>n.HK(e.badges,"badgeId"))),b=s.P1(o,(e=>e.monthlyQuest)),S=s.P1(o,f,((e,t)=>n.MR(e.earnedBadges,"earnedTimestamp").reverse().map((e=>Object.assign(Object.assign({},t[e.badgeId]),e))).filter((t=>void 0!==e.schema.find((e=>e.badgeId===t.badgeId)))))),y=s.P1(o,(e=>{var t;const a=e.schema,s=e.monthlyQuest;return null===(t=a.find((e=>e.goalId===s)))||void 0===t?void 0:t.badgeId})),E=s.P1(o,d,l,((e,t,a)=>[e.coreQuest,e.dailyQuest,e.hardQuest].filter((s=>{if(s&&t){const n=a[s];return t[s]>=(0,r.ng)(e.difficulty,n)}return!1})).length)),I=s.P1(o,l,((e,t)=>{var a;return e.monthlyQuest?null===(a=t[e.monthlyQuest])||void 0===a?void 0:a.threshold:30})),k=s.P1(o,d,I,((e,t,a)=>!(!e.monthlyQuest||!t)&&t[e.monthlyQuest]>=a)),w=s.P1(f,y,((e,t)=>t?(0,i.br)(e[t]):void 0))},74462:(e,t,a)=>{"use strict";a.d(t,{LG:()=>d,MQ:()=>c,q0:()=>i,r0:()=>o,su:()=>l});var s=a(30427),n=a(42659),r=a(1);const i=e=>e.heartsState,o=e=>(0,r.GQ)(e.user,e.heartsState),l=s.P1([n.np,i,n.Y2,n.Oz],((e,t,a,s)=>(0,r.Ef)(e,t,a,s))),c=s.P1([l],(e=>"free"===e)),d=s.P1([i,c],((e,t)=>t&&(0,r.is)(e)))},51399:(e,t,a)=>{"use strict";a.d(t,{L_:()=>r,S2:()=>i,Ug:()=>o,po:()=>l,wG:()=>c});var s=a(30427),n=a(42659);const r=e=>e.leaderboards.classroomLeaderboard,i=e=>e.leaderboards.leagues,o=s.P1([n.np,i,r],((e,t,a)=>e.classroomLeaderboardsEnabled?a:t)),l=e=>e.leaderboards.streaks,c=s.P1(n.cQ,o,(({leaderboardPositionState:e},t)=>{var a,s;return(null==e?void 0:e.cohortId)===(null===(s=null===(a=null==t?void 0:t.state.active)||void 0===a?void 0:a.cohort)||void 0===s?void 0:s.id)?e:void 0}))},50231:(e,t,a)=>{"use strict";a.d(t,{Kh:()=>L,oG:()=>P,av:()=>A,fx:()=>O,WB:()=>D});var s=a(30427),n=a(80254),r=a(42659),i=a(93540),o=a(15307),l=a(80164),c=a(35160),d=a(63301),u=a(20041),p=a(16970),g=a(54412),m=a(17135),h=a(1),_=a(37825),v=a(64865),f=a(25447),b=a(23275),S=a(67280),y=a(88787),E=a(88868),I=a(51551),k=a(81621),w=a(20028);const T={charactersTabCallout:({user:e})=>(0,p.S9)(e.learningLanguage,e.fromLanguage)&&!("ja"===e.learningLanguage&&"en"===e.fromLanguage),convertLingotsToGemsWeb:({user:e})=>(0,h.Pp)(e),darkMode:({homeMessagingClientStatePersisted:e,user:t})=>{var a;return!(null===(a=e.darkMode)||void 0===a?void 0:a.dontShow)&&!(0,w.pN)(t)},dogfoodingPreview:e=>(({homeMessagingClientState:e})=>e.dogfoodingPreview)(e)&&(0,w.u)(e.user)&&window.location.host!==E.Vb&&window.location.host!==E.a_&&void 0===(0,g.ej)(g.Vj.RedirectToPreview),dynamic:()=>!0,emailVerified:({isDesktop:e,user:t})=>t.persistentNotifications.includes(u.Qd.emailVerified)&&e&&!(0,w.pN)(t),guidebookCallout:({path:e,user:t})=>{var a;if(!e)return!1;const{unitIndex:s}=null!==(a=(0,b.Bm)(e))&&void 0!==a?a:{};return void 0!==s&&!!e[s].guidebook&&t.sessionCount>=3},immersivePlusPromo:({homeMessagingClientState:e,isDesktop:t,user:a})=>e.immersivePlusPromo&&t&&!(0,w.pN)(a),kudosOffer:({kudosDrawer:e,kudosAssets:t})=>!!e&&"OFFER"===e.notificationType&&void 0!==t[e.kudosIcon]&&void 0!==t[e.actionIcon],kudosReceive:({kudosDrawer:e,kudosAssets:t})=>!!e&&"RECEIVE"===e.notificationType&&void 0!==t[e.actionIcon],leaderboardsIntro:({sessionsToUnlockLeagues:e,user:t})=>t.persistentNotifications.includes(u.Qd.leaderboardsIntro)&&0===e,legendaryRebrandGoldColor:({path:e})=>(0,_.lZ)(e),maintenanceBreak:()=>!1,marketingOptIn:({homeMessagingClientState:e})=>e.marketingOptIn,mobileWebToAppConversion:({isDesktop:e,homeMessagingClientState:t})=>t.mobileWebToAppConversion&&(0,v.WV)(e),newYearsDiscount:({homeMessagingClientStatePersisted:e,user:t})=>{var a;const s=Date.now(),n=(0,k.yS)(t),r=(0,S.p4)(t.plusDiscounts,s);return r&&void 0===(null===(a=e.newYearsDiscount)||void 0===a?void 0:a.lastShown)&&(n||r.expirationTime-s<=2*m.Mb)},pathChange:({currentCourse:e,homeMessagingClientState:t,path:a})=>{var s;return!!a&&t.pathChange&&(null===(s=e.pathDetails)||void 0===s?void 0:s.clientNotifications.some((e=>"pathChange"===(0,f.c)(e).id)))},pathMigration:({currentCourse:e,homeMessagingClientState:t,path:a})=>{var s;return!!a&&t.pathMigration&&(null===(s=e.pathDetails)||void 0===s?void 0:s.clientNotifications.some((e=>"pathMigration"===(0,f.c)(e).id)))},pathSectionsCallout:({path:e})=>!!e,pathSkipping:({homeMessagingClientStatePersisted:e})=>e.pathSkipping,plusBadge:({homeMessagingClientState:e,user:t})=>t.hasPlus&&e.plusBadge,plusBadgeFamily:({homeMessagingClientState:e,user:t})=>t.hasPlus&&e.plusBadgeFamily,plusBadgeMigration:({homeMessagingClientStatePersisted:e,user:t})=>t.hasPlus&&e.plusBadgeMigration,reactivatedWelcome:({homeMessagingClientState:e,user:t})=>!(0,w.pN)(t)&&e.reactivatedWelcome,resurrectedWelcome:({homeMessagingClientState:e,user:t})=>!(0,w.pN)(t)&&e.resurrectedWelcome,schoolsJoinedClassroom:({homeMessagingClientState:e})=>!!e.schoolsJoinedClassroom,shakeToReportAlert:({user:e})=>(0,w.ms)(e),skillTreeMigration:({user:e})=>e.persistentNotifications.includes(u.Qd.skillTreeMigration),streakFreezeRecurringOffer:({homeMessagingClientState:e,items:t,user:a})=>{var s,n;const r=(0,h.GQ)(a),i=(null!==(n=null===(s=a.streakData.currentStreak)||void 0===s?void 0:s.length)&&void 0!==n?n:0)>=3,o=(r?a.gemsConfig.gems:a.lingots)>=(0,I.Fk)(r),l=t.shop.misc.streak_freeze,c=l&&l.id in t.inventory;return e.streakFreezeRecurringOffer&&i&&o&&!c},streakFreezeUsed:({items:e,user:t})=>{var a,s,n,r;const i=(0,h.GQ)(t);if(!t.persistentNotifications.includes(u.Qd.streakFreezeUsed))return!1;const o=(null!==(s=null===(a=t.streakData.currentStreak)||void 0===a?void 0:a.length)&&void 0!==s?s:0)>1,l=(i?t.gemsConfig.gems:t.lingots)>=(0,I.Fk)(i),c=e.shop.misc.streak_freeze,d=null!==(r=null===(n=e.inventory.streak_freeze)||void 0===n?void 0:n.quantity)&&void 0!==r?r:0;return o&&l&&c&&d<2},streakRepairApplied:({homeMessagingClientStatePersisted:e,isDesktop:t})=>e.streakRepairApplied&&t,streakRepairOffer:({isDesktop:e,shouldOfferSuperDuolingo:t,user:a})=>e&&!a.hasPlus&&a.streakRepairOffer&&t,superPreviewEndingCallout:({homeMessagingClientState:{superPreviewEndingCallout:e}})=>!!e,turningNotificationsOn:e=>(({homeMessagingClientState:e})=>e.turningNotificationsOn)(e)&&(0,y.Hd)()&&"default"===Notification.permission,v2Intro:({currentCourse:e,user:t})=>{var a;return(null===(a=e.pathDetails)||void 0===a?void 0:a.clientNotifications.some((e=>"v2_intro"===(0,f.c)(e).id)))||t.creationDate<=1656979200},webToAppConversion:({homeMessagingClientState:e,isDesktop:t,user:a})=>!(0,w.pN)(a)&&e.webToAppConversion&&t,webToAppConversionAggressive:e=>void 0!==(0,v.TI)()&&(({homeMessagingClientState:e,isDesktop:t,user:a})=>!(0,w.pN)(a)&&e.webToAppConversionAggressive&&t)(e)},C=T;const R=s.zB({config:r.Mb,currentCourse:r.Oz,homeMessagingClientState:r.EQ,homeMessagingClientStatePersisted:e=>e.uiPersisted.homeMessagingClientState,isDesktop:r.$4,isShopItemsFresh:r.bE,isUserModelFresh:r.Xr,isZombieMode:r.df,items:r.__,kudosAssets:e=>e.friends.assets,kudosDrawer:e=>e.friends.drawer,path:i.HF,shouldOfferSuperDuolingo:l.tE,student:o.Bs,user:r.np}),L=s.P1(R,((e,t)=>t),((e,t)=>{var a,{isUserModelFresh:s,isZombieMode:n,path:r,shouldOfferSuperDuolingo:i,user:o}=e,l=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]])}return a}(e,["isUserModelFresh","isZombieMode","path","shouldOfferSuperDuolingo","user"]);return o.id&&s&&!n&&void 0!==r&&void 0!==i?[(a=Object.assign({isUserModelFresh:s,path:r,sessionsToUnlockLeagues:t,shouldOfferSuperDuolingo:i,user:o},l),u.Iu.filter((e=>(0,d.ky)("debugHomeMessage")===e||C[e](a)))),!0]:[[],!1]}),{memoizeOptions:{resultEqualityCheck:n.Xy}}),O=s.P1(r.w0,r.Jw,((e,t)=>e.some((e=>e.blocksHomeMessages))&&(!t.toast||!t.toastIsUhmManaged)||t.drawer&&!t.drawerIsUhmManaged||t.modal&&!t.modalIsUhmManaged||t.toast&&!t.toastIsUhmManaged?void 0:t.homeMessage)),P=s.P1(O,r.Jw,((e,t)=>void 0===e?void 0:t.homeMessageData)),A=s.P1(r.Jw,(e=>{var t;return(null===(t=e.modal)||void 0===t?void 0:t.name)===c.t.HomeMessage?e.modal.homeMessage:void 0})),D=s.P1(r.Jw,(e=>e.modalIsUhmManaged||e.drawerIsUhmManaged||e.toastIsUhmManaged))},93540:(e,t,a)=>{"use strict";a.d(t,{DN:()=>L,Eh:()=>F,F8:()=>j,HF:()=>k,Iw:()=>O,MK:()=>P,T4:()=>G,Ti:()=>x,YM:()=>H,Zw:()=>M,cb:()=>N,iv:()=>D,md:()=>A,r6:()=>U});var s=a(30427),n=a(42659),r=a(93718),i=a(63301),o=a(99644),l=a(23275),c=a(89065),d=a(41631);const u=e=>{const t=(0,l.Bm)(e);return"alphabet_gate"===(null==t?void 0:t.level.type)&&(e=(0,o.yY)(e,!1,t)),e.map((e=>Object.assign(Object.assign({},e),{levels:e.levels.filter((e=>"alphabet_gate"!==e.type))})))},p=(e,t)=>{const a=(0,l.Bm)(e);if("alphabet_gate"===(null==a?void 0:a.level.type)){const{gateId:s}=a.level.pathLevelClientData;if(t.includes(s))return(0,o.yY)(e,!1,a)}return e},g=(e,t)=>{const a=(0,l.Bm)(e);return a&&a.level.id===t.levelId&&!t.shouldReturnToSkippedLevel?(0,o.yY)(e,!1,a,!0):t.shouldReturnToSkippedLevel&&a?(0,o.uP)(a,e,t.levelId):e},m=e=>{const t=(0,l.Bm)(e);return"chest"===(null==t?void 0:t.level.type)&&(e=(0,o.yY)(e,!1,t)),e.map((e=>Object.assign(Object.assign({},e),{levels:e.levels.filter((e=>"chest"!==e.type))})))},h=s.P1(n.Oz,(e=>void 0!==(null==e?void 0:e.pathSectioned)&&e.pathSectioned.length>0?e.pathSectioned.flatMap((e=>e.units)):null==e?void 0:e.path)),_=s.P1(n.Oz,(e=>null==e?void 0:e.pathSectioned)),v=s.P1(n.Mb,(e=>!0===e.featureFlags.web_hide_alphabet_gates&&!(0,i.gQ)("debugAlphabetGates"))),f=s.P1(n.Mb,r.N,((e,t)=>!0===e.featureFlags.web_hide_path_rewards||!t)),b=s.P1(n.ii,n.Oz,((e,t)=>{var a;return void 0===t?[]:null!==(a=e.skippedAlphabetGateIds[t.id])&&void 0!==a?a:[]})),S=s.P1(h,v,((e,t)=>t&&e?u(e):e)),y=s.P1(S,f,((e,t)=>t&&e?m(e):e)),E=s.P1(y,b,((e,t)=>void 0===e?e:p(e,t))),I=s.P1(E,n.fI,((e,t)=>void 0===e||void 0===t?e:g(e,t))),k=s.P1(I,(e=>e)),w=s.P1(_,v,((e,t)=>t&&e?e.map((e=>Object.assign(Object.assign({},e),{units:u(e.units)}))):e)),T=s.P1(w,f,((e,t)=>t&&e?e.map((e=>Object.assign(Object.assign({},e),{units:m(e.units)}))):e)),C=s.P1(T,b,((e,t)=>void 0===e?e:e.map((e=>Object.assign(Object.assign({},e),{units:p(e.units,t)}))))),R=s.P1(C,n.fI,((e,t)=>void 0===e||void 0===t?e:e.map((e=>Object.assign(Object.assign({},e),{units:g(e.units,t)}))))),L=s.P1(R,(e=>e)),O=s.P1(L,(e=>{var t,a;return null!==(a=null!==(t=null==e?void 0:e.find((e=>"active"===e.status)))&&void 0!==t?t:null==e?void 0:e[e.length-1])&&void 0!==a?a:void 0})),P=s.P1(L,O,(e=>e.ui.selectedPathSectionType),((e,t,a)=>{var s,n;return null!==(n=null!==(s=null==e?void 0:e.find((e=>e.type===a)))&&void 0!==s?s:t)&&void 0!==n?n:void 0})),A=s.P1(L,(e=>void 0===e?{}:Object.fromEntries(e.flatMap((e=>e.units.map((t=>[t.unitIndex,e]))))))),D=s.P1((e=>e.ui.shouldReturnToSections),(e=>e)),x=s.P1(L,P,((e,t)=>{var a;if(void 0===e||void 0===t)return;const s=(0,c.SJ)(t.type),n=s===d.t.DAILY_REFRESH&&e[e.length-1].type!==d.t.DAILY_REFRESH;return t.type===s||n?void 0:null!==(a=e.find((e=>e.type===s)))&&void 0!==a?a:e.find((e=>e.type===d.t.CHAMPION))})),N=s.P1(k,(e=>e?(0,l.Bm)(e):void 0)),F=s.P1(k,(e=>e?(0,l.d$)(e):void 0)),M=s.P1(L,(e=>e?Object.fromEntries(e.map((e=>[e.index,e.units[0].levels.find((e=>"unit_test"===e.state))]))):{})),U=s.P1(k,(e=>!!e&&e.every((e=>e.levels.every((e=>(0,l.Wc)(e.state)||void 0!==e.dailyRefreshInfo)))))),H=s.P1(n.df,k,((e,t)=>!e&&t&&t[0].levels[0].finishedSessions>0)),j=s.P1(k,(e=>void 0===e?{}:Object.fromEntries(e.map((e=>[e.unitIndex,e.unitNumber]))))),G=s.P1(N,k,P,(e=>e.ui.visibleUnitIndex),((e,t,a,s)=>{var n;if(!t)return;const r=(null!==(n=null==e?void 0:e.unitNumber)&&void 0!==n?n:1)-1;return a&&a.units.length>0?a.units[null!=s?s:r]:t[null!=s?s:r]}))},93718:(e,t,a)=>{"use strict";a.d(t,{N:()=>i});var s=a(30427),n=a(42659),r=a(90110);const i=s.P1(n.Lm,n.np,((e,t)=>{var a;if(!e)return;const s=(0,r.Zp)(t,"PATH_CHEST");return null===(a=null==s?void 0:s.rewards)||void 0===a?void 0:a.find((e=>!e.consumed))}))},83936:(e,t,a)=>{"use strict";a.d(t,{N9:()=>g,Rq:()=>h,WM:()=>m,Y_:()=>u,_C:()=>p});var s=a(30427),n=a(42659),r=a(40387),i=a(95332),o=a(16970),l=a(63301),c=a(37971),d=a(44637);const u=s.P1(n.jv,n.MY,n.$4,n.gl,n.iH,n.is,((e,t,a,s,n,r)=>t&&r?(0,i.eK)({browserSettings:e,challenge:t,isDesktop:a,isGrammar:s,learningLanguage:n,session:r}):{canToggleTyping:!1,isToggledToTyping:!1})),p=s.P1(n.Ss,(e=>void 0===e?void 0:e.numSessionsRemainingToUnlock)),g=s.P1(n.np,n.dE,((e,t)=>{const a=(e.courses||[]).map((e=>t[e])).map((e=>`${e.learningLanguage}_${e.fromLanguage}`));return e=>a.includes(`${e.learningLanguageId}_${e.fromLanguageId}`)})),m=s.P1(n.Mb,(e=>e.clientExperiments)),h=s.P1(n.lA,n.hy,((e,t)=>{var a,s;if(!e.session)return;if(e.sessionParams.isFinalLevel){const[t,n]=(0,d.Dk)(e);return![c.c.PartialXpDuo,c.c.PartialXpDuoSliding].includes(e.status)&&void 0!==t&&t<e.challengeIdSections.length-1&&n===(null!==(s=null===(a=e.challengeIdSections[t])||void 0===a?void 0:a.length)&&void 0!==s?s:0)-1?"partialXpDuo":void 0}const n=[c.c.CoachDuo,c.c.CoachDuoSliding,c.c.SmartTip,c.c.SmartTipBlaming,c.c.SmartTipSliding,c.c.HardModeDuo,c.c.HardModeDuoSliding];let i=n.indexOf(e.status)<n.indexOf(c.c.CoachDuo)&&e.coachDuo.model&&!t;const u=n.indexOf(e.status)<n.indexOf(c.c.SmartTip)&&e.smartTipToShow&&!t,p=n.indexOf(e.status)<n.indexOf(c.c.HardModeDuo)&&((0,l.gQ)("hardModeDuo")||(0,r.IF)(e)||(0,o.Yt)(e));return i&&!u&&p&&(i=!1),i?"coachDuo":u?"smartTip":p?"hardModeDuo":void 0}))},27429:(e,t,a)=>{"use strict";a.d(t,{XL:()=>c,eE:()=>p,ek:()=>d,ix:()=>u});var s=a(30427),n=a(42659),r=a(74462),i=a(93540),o=a(23275),l=a(89260);const c=s.P1(i.DN,i.HF,i.cb,n.hp,((e,t,a,s)=>{var n;if(!s)return;const{pathType:r,scopeType:i,unitOrSectionNumber:c,lessonType:d,levelNumber:u}=(0,l.mi)(s.pathname);if("lesson"!==r)return;void 0!==e&&e.length>0&&(t=e.flatMap((e=>e.units)));const p=e=>{var a,s;return(null===(a=null==t?void 0:t[e.unitIndex])||void 0===a?void 0:a.levels[e.levelIndex])?Object.assign(Object.assign({},e),{level:null===(s=t[e.unitIndex])||void 0===s?void 0:s.levels[e.levelIndex],unitNumber:t[e.unitIndex].unitNumber}):void 0},g=c?parseInt(c,10)-1:void 0;if("section"===i&&e&&t){if(void 0===g)return;const a=(0,o.E0)(e[g].units[0]),s=e[g].units[0].unitIndex;if(-1===a)return;return{level:null===(n=t[s])||void 0===n?void 0:n.levels[a],levelIndex:a,unitIndex:s,unitNumber:t[s].unitNumber}}const m=u?parseInt(u,10)-1:void 0;if("lesson"===r&&void 0!==t)switch(d){case"legendary":if(void 0===g)return;if(void 0===m)return;return p({levelIndex:m,unitIndex:g});case"level":if(void 0===g||void 0===m)return;return p({levelIndex:m,unitIndex:g});case"test":if(void 0===g)return;return p({levelIndex:(0,o.E0)(t[g]),unitIndex:g});default:return a}})),d=s.P1(i.cb,c,((e,t)=>void 0!==t&&void 0!==e&&e.unitIndex===t.unitIndex&&e.levelIndex===t.levelIndex)),u=s.P1(r.r0,n.lA,((e,t)=>{var a,s;if(void 0===t.sessionRouteParams)return!1;const n="legendary"===(null===(a=t.sessionRouteParams)||void 0===a?void 0:a.type)?"legendary":"regular",r=null===(s=t.levelData)||void 0===s?void 0:s.level;return e&&!!r&&!(0,o.qM)(r,n)})),p=s.P1(u,r.MQ,((e,t)=>e&&t))},21791:(e,t,a)=>{"use strict";a.d(t,{L:()=>_,Q:()=>h});var s=a(30427),n=a(22772),r=a(42659),i=a(93540),o=a(95351),l=a(89260),c=a(80820),d=a(11811);const u=r.$4,p=e=>e.sessionCache.keys,g=(e,t,a,s,n,r)=>i=>{if(!a&&!s)return!0;if("chest"===i.level.type)return!0;const u=(0,o.K)({currentCourseHistory:e,levelData:i,sessionType:d.FF.LevelReview});let p=!1;if("skill"===i.level.type){const{skillId:e}=i.level.pathLevelClientData;p=(0,l.Uj)(r,e)}const g=(0,c.gL)({generatorIdsOfRecentMistakes:null==u?void 0:u.map((e=>e.generatorId)),includeSmartTips:t&&"story"!==i.level.type,isExplanationSeen:p,pathLevel:i.level});return n.includes(g)},m=s.P1(r.B8,u,r.df,p,r.np,((e,t,a,s,n)=>g(e,t,a,!0,s,n))),h=s.P1(r.B8,u,r.df,p,r.np,((e,t,a,s,n)=>g(e,t,a,!1,s,n))),_=s.P1(i.cb,i.HF,m,((e,t,a)=>{if(void 0===t)return 0;let s=0;for(const r of(0,n.getRemainingSessions)(t,e)){if(!a(r))break;s++}return s}))},86233:(e,t,a)=>{"use strict";a.d(t,{$2:()=>f,A9:()=>d,Dk:()=>y,Ib:()=>I,Jz:()=>m,Ow:()=>L,RR:()=>h,Rv:()=>p,Uy:()=>_,VR:()=>v,WT:()=>C,Zy:()=>R,fM:()=>k,iH:()=>u,jH:()=>b,ml:()=>E,pl:()=>g,uR:()=>T,yL:()=>S,yo:()=>w});var s=a(30427),n=a(42659),r=a(74462),i=a(37825),o=a(8718),l=a(18513),c=a(43094);const d=e=>e.stories,u=s.P1(d,(e=>e.learningLanguage)),p=s.P1(d,(e=>e.fromLanguage)),g=s.P1(d,(e=>e.trackingProperties)),m=s.P1(d,(e=>{var t,a;return null!==(a=null===(t=e.storySession)||void 0===t?void 0:t.speakCount)&&void 0!==a?a:0})),h=s.P1(d,(e=>{var t;return null===(t=e.storySession)||void 0===t?void 0:t.challengeSession})),_=s.P1(d,(e=>e.storySession)),v=(s.P1(d,(e=>-1!==e.speakingDisabledLineIndex)),s.P1(d,(e=>{var t;const a=e.storyElements,s=null===(t=e.storySession)||void 0===t?void 0:t.furthestPosition.elementIndex;return a&&s?a[s]:void 0}))),f=s.P1(d,(e=>{var t;return null===(t=e.storySession)||void 0===t?void 0:t.furthestPosition})),b=s.P1(d,(e=>{var t;return null===(t=e.storySession)||void 0===t?void 0:t.status})),S=s.P1(d,(e=>(0,o.C7)(e.storyElements))),y=s.P1(d,(e=>{var t,a;const s=null===(t=e.storySession)||void 0===t?void 0:t.selectedPosition,n=e.storyElements,r=void 0!==(null===(a=e.storySession)||void 0===a?void 0:a.freeformChallengeSubmittedResponse);return s&&n?(0,c.lo)(n,s.elementIndex,r):0})),E=s.P1(d,(e=>{var t;return e.storyElements&&(null===(t=e.storySession)||void 0===t?void 0:t.furthestPosition)&&(0,c.O$)(e.storyElements,e.storySession.furthestPosition.elementIndex)})),I=s.P1(E,d,((e,t)=>{var a;return e?null===(a=null==t?void 0:t.storyElements)||void 0===a?void 0:a[e]:void 0})),k=s.P1(_,(e=>null==e?void 0:e.pendingStoryEndSections)),w=s.P1((e=>e.stories.storyElements),(e=>{var t;return null===(t=e.stories.storySession)||void 0===t?void 0:t.furthestPosition}),(e=>{var t;return null===(t=e.stories.storySession)||void 0===t?void 0:t.selectedPosition}),(e=>{var t;return null===(t=e.stories.storySession)||void 0===t?void 0:t.challengeSession}),(e=>{var t;return null===(t=e.stories.storySession)||void 0===t?void 0:t.status}),(e=>{var t,a;return"in-progress"===(null===(t=e.stories.storySession)||void 0===t?void 0:t.storyCompleteRequestStatus)||"in-progress"===(null===(a=e.stories.storySession)||void 0===a?void 0:a.grammarCorrectionRequestStatus)}),(e=>{var t;return null===(t=e.stories.storySession)||void 0===t?void 0:t.onboardingStep}),(e=>e.stories.audio.playError),((e,t,a,s,n,r,i,l)=>{var d;if(l)return!0;if(r)return!1;if("completed"===n)return!1;if("story-end"===n)return!0;if(void 0===t||void 0===e||void 0===a)return!1;if("tap-translation-hint"===i)return!1;if(null==s?void 0:s.completed)return!0;if("type-text"===(null==s?void 0:s.type)&&!s.completed&&s.answer.length>0)return!0;if("freeform-writing"===(null==s?void 0:s.type)&&!s.completed&&s.fetchedCorrection)return!0;if(s&&!s.completed)return!1;const u=e[t.elementIndex],p=null===(d=(0,o.z_)(u))||void 0===d?void 0:d.text.length;if("DUO_POPUP"===u.type)return!0;const g=!!(void 0===p||void 0!==t.textIndex&&t.textIndex>=p-1),m=e[t.elementIndex+1],h=!(0,o.z$)(m)&&"CHALLENGE_PROMPT"!==u.type,_=(0,c.lo)(e,t.elementIndex,!0),v=e[_],f="LINE"===v.type?v.line.content.text.length:0,b="LINE"===e[t.elementIndex].type?t:{elementIndex:_,textIndex:f-1};return(0,c.Nh)(a,b)||g&&h})),T=s.P1((e=>{var t;return null===(t=e.stories.storySession)||void 0===t?void 0:t.challengeSession}),(e=>"freeform-writing"===(null==e?void 0:e.type)&&!e.completed&&(0,l.Bv)(e))),C=s.P1(_,(e=>{var t;return null===(t=null==e?void 0:e.visibleStoryEndSections)||void 0===t?void 0:t.slice(-1)[0]})),R=s.P1(r.r0,d,n.hp,((e,t,a)=>!(a&&(0,i.M_)(a.pathname)&&!(0,i.Vp)())&&e&&!!t.storySession)),L=s.P1(R,r.MQ,((e,t)=>e&&t))},15307:(e,t,a)=>{"use strict";a.d(t,{Bs:()=>u,FF:()=>h,GP:()=>v,Yk:()=>m,jG:()=>S,pA:()=>b,x0:()=>p});var s=a(30427),n=a(99369),r=a(42659),i=a(93540),o=a(43464),l=a(68903),c=a(23275),d=a(12125);const u=e=>e.student,p=s.P1(r.Oz,(e=>{var t;return null===(t=null==e?void 0:e.assignments)||void 0===t?void 0:t.filter((t=>{const a=t.fromLanguageId===e.fromLanguage&&t.learningLanguageId===e.learningLanguage,s=t.type===o.bu.AssignmentType.SKILL&&null!==t.skillId&&null!==t.crownLevel,n=t.type!==o.bu.AssignmentType.SKILL;return a&&(s||n)}))})),g=s.P1(i.HF,(e=>{if(void 0===e)return;const t={},a={};return e.forEach((e=>{const{levels:s,unitIndex:n,unitNumber:r}=e;s.forEach(((e,s)=>{const i={level:e,levelIndex:s,unitIndex:n,unitNumber:r};switch(e.type){case"skill":{const{skillId:a}=e.pathLevelClientData;void 0===t[a]&&(t[a]=[]),t[a].push(i);break}case"story":{const{storyId:t}=e.pathLevelClientData;a[t]=i;break}}}))})),{skill:t,story:a}})),m=s.P1(p,g,((e,t)=>{if(void 0===e||void 0===t)return;const a={};return e.forEach((e=>{const{assignmentId:s,type:n}=e;switch(n){case o.bu.AssignmentType.SKILL:{const{crownLevel:n,skillId:r}=e;null!==n&&null!==r&&r in t.skill&&(a[s]=t.skill[r][n]);break}case o.bu.AssignmentType.STORY:e.storyId in t.story&&(a[s]=t.story[e.storyId]);break;case o.bu.AssignmentType.XP:case o.bu.AssignmentType.UNIT:break;default:throw(0,l.RJ)(n),Error(`Unexpected assignment type: ${n}`)}})),a})),h=s.P1(m,p,((e,t)=>{if(void 0===e||void 0===t)return;const a=t.filter((e=>(0,d.R0)(e.status)));return(0,n.asMutable)(a).sort(((t,a)=>{if(t.status===a.status){if(t.dueDateTs===a.dueDateTs){if(o.bu.CONTENT_SPECIFIC_ASSIGNMENT_TYPES.includes(t.type)&&o.bu.CONTENT_SPECIFIC_ASSIGNMENT_TYPES.includes(a.type)){const s=e[t.assignmentId],n=e[a.assignmentId];return(0,c.Nk)(s,n)}return t.openDateTs-a.openDateTs}return"missed"===t.status&&"missed"===a.status?a.dueDateTs-t.dueDateTs:t.dueDateTs-a.dueDateTs}return"missed"===t.status&&"active"===a.status?1:-1}))})),_=s.P1(h,(e=>{if(void 0===e)return;const t=e.filter((e=>[o.bu.AssignmentType.SKILL,o.bu.AssignmentType.STORY].includes(e.type)));return 0!==t.length?0===t.length?void 0:t:void 0})),v=s.P1(_,(e=>{if(void 0!==e)return e[0]})),f=s.P1(i.MK,_,m,((e,t,a)=>{if(void 0===e||void 0===a||void 0===t)return;const s=[e.units[0].unitIndex,e.units[e.units.length-1].unitIndex];return t.find((e=>{const t=a[e.assignmentId].unitIndex;return t>=s[0]&&t<=s[1]}))})),b=s.P1(m,v,((e,t)=>void 0===e||void 0===t?void 0:e[t.assignmentId])),S=s.P1(m,f,((e,t)=>void 0===e||void 0===t?void 0:e[t.assignmentId]))},80164:(e,t,a)=>{"use strict";a.d(t,{I3:()=>h,I9:()=>y,Oi:()=>g,QK:()=>b,SS:()=>_,W:()=>I,dT:()=>m,gb:()=>E,jD:()=>v,tE:()=>f,y1:()=>S});var s=a(30427),n=a(42659),r=a(51827),i=a(63301),o=a(68903),l=a(25062),c=a(74541),d=a(32499),u=a(16086),p=a(20028);const g=s.P1(n.__,(e=>{var t;return null===(t=e.subscriptions)||void 0===t?void 0:t.isLoaded})),m=s.P1(n.__,(e=>{var t;return null===(t=e.subscriptions)||void 0===t?void 0:t.subscriptionPlans})),h=(s.P1(n.__,(e=>{var t;return(null===(t=e.subscriptions)||void 0===t?void 0:t.isLoaded)?e.subscriptions.currentPlan:void 0})),s.P1(m,(e=>null==e?void 0:e.find((e=>e.isFamilyPlan))))),_=s.P1(m,(e=>null==e?void 0:e.find((e=>e.planType===d._r.TwelveMonth)))),v=(s.P1(_,n.Mb,((e,t)=>e?(0,d.eh)(e,null==t?void 0:t.ipCountry):void 0)),s.P1(h,n.Mb,((e,t)=>e?(0,d.eh)(e,null==t?void 0:t.ipCountry):void 0)),s.P1(n.__,(e=>{var t,a,s;return null!==(a=null===(t=e.inventory.premium_subscription)||void 0===t?void 0:t.familyPlanInfo)&&void 0!==a?a:null===(s=e.inventory.gold_subscription)||void 0===s?void 0:s.familyPlanInfo})),s.P1(n.__,n.np,d.Wt)),f=s.P1(n.__,n.np,d.X0),b=s.P1(n.__,f,((e,t)=>{var a,s,n,r;return(0,i.gQ)("mockFreeTrialEligible")?"eligible"===(null===(a=(0,i.ky)("mockFreeTrialEligible"))||void 0===a?void 0:a.toLowerCase()):(null===(s=e.subscriptions)||void 0===s?void 0:s.isLoaded)?(t||e.inventory.immersive_subscription)&&(null===(r=null===(n=e.subscriptions)||void 0===n?void 0:n.subscriptionPlans)||void 0===r?void 0:r.some((e=>e.isFreeTrial))):void 0})),S=(s.P1(n.__,(e=>(0,r._H)(e))),s.P1(n.Mb,n.__,((e,t)=>(0,u.Pc)()?(0,r.BY)(t):e.ipCountry?(0,l.kk)(e.ipCountry):void 0)),s.P1(b,(e=>!1!==e))),y=s.P1(n.np,(e=>e.plusDiscounts)),E=s.P1(n.np,n.Lm,f,b,n.Y2,v,((e,t,a,s,n,r)=>{if(!t||(0,p.pN)(e))return"eligibleFreeTrial";const i=(0,c.l1)(n,"alreadyHasSuper","alreadyHasMax");if(i)return i;switch(a){case!0:return s?"eligibleFreeTrial":"eligible";case!1:return r?"eligibleToRedeem":"ineligible";case void 0:return;default:return void(0,o.RJ)(a)}})),I=s.P1(m,(e=>{var t;const a=null==e?void 0:e.find((e=>e.planType===d._r.TwelveMonth&&!e.isFamilyPlan&&e.isNewYears));return null!==(t=null==a?void 0:a.productId.includes("us_usd"))&&void 0!==t&&t}))},54089:(e,t,a)=>{"use strict";var s=a(39852),n=a(51158),r=a(79465);window.duo.enableSentry&&n.D_(),n.YJ((e=>{var t,a,s,n;return r.track("chunk_download_failure",{offline:!navigator.onLine,path:null!==(n=null===(s=/\n\((error: )?(.*?)\)$/.exec(null!==(a=null===(t=e.body.trace)||void 0===t?void 0:t.exception.message)&&void 0!==a?a:""))||void 0===s?void 0:s.slice(-1)[0])&&void 0!==n?n:""})})),n._b((e=>{var t,a,s,n,i;["Cannot load facebook SDK","Cannot load google SDK","Cannot load google sign in SDK"].includes(null===(t=e.body.trace)||void 0===t?void 0:t.exception.message)||(null===(s=null===(a=e.body.trace)||void 0===a?void 0:a.exception.message)||void 0===s?void 0:s.startsWith("Request failed with status code "))||r.track("app_crash",{crash_message:null===(n=e.body.trace)||void 0===n?void 0:n.exception.message,crash_type:null===(i=e.body.trace)||void 0===i?void 0:i.exception.class,rollbar_uuid:e.uuid})})),n.S1(),(0,s.JE)(),console.log(`On commit https://github.com/duolingo/duolingo-web/commit/${window.duo.version}`);var i=a(67899),o=(a(74971),a(91575),a(27378)),l=a(31542),c=a(92883),d=a(80715),u=a(3620),p=a(99369),g=a(80254),m=a(84389);const h=(0,p.from)({brb:{status:"disabled"},zombie:{status:"disabled"}});var _=a(34704),v=a(64591);const f=(0,p.from)({coachEnabled:!0,completeReverseTranslationTypingEnabled:!1,darkMode:"off",listenDisabledUntil:0,prefersReducedMotion:!1,speakDisabledUntil:0,transliterationsSettings:{"ja<en":Object.assign(Object.assign({},_.lL.romaji),{enabled:!0}),"zh<en":Object.assign(Object.assign({},_.lL.pinyin_all),{enabled:!0})},typingEnabled:!1}),b={activeAlphabetId:void 0,changedCharacters:void 0,characterChart:void 0,fromLanguage:void 0,learningLanguage:void 0,stagedCharacterChart:void 0},S={skippedAlphabetGateIds:{}},y=JSON.parse('{"ageRestrictionLimit":13,"clientExperiments":{},"courses":{"ar":["en","fr","de","sv"],"cs":["en"],"de":["en","es","fr"],"el":["en"],"en":["es","fr","de","it","pt","nl-NL","ga","da","sv","tr","eo","no-BO","uk","ru","pl","cy"],"es":["en","fr","pt","de","it","ca"],"fr":["de","en","es","it"],"hi":["en"],"hu":["en"],"id":["en"],"it":["fr","en"],"ja":["en"],"ko":["en"],"nl-NL":["en"],"pl":["en"],"pt":["de","en","es","fr"],"ro":["en"],"ru":["en","de","fr","es"],"tr":["en","de"],"uk":["en"],"vi":["en"],"zh":["en"]},"dictionaryHost":"d2.duolingo.com","featureFlags":{},"speechHost":"speech.duolingo.com"}');var E=a(63301),I=a(17135),k=a(68903);const w=({history:e,updateTimestamp:t,values:a})=>e.filter((e=>t<e.expirationTimestamp)).filter((e=>!(0,k.cY)(a,e.value))),T=(0,I.dz)({days:28}),C=({challenges:e,history:t,levelId:a,updateTimestamp:s})=>{const n=e.filter((e=>void 0!==e.challengeGeneratorIdentifier)).map((e=>({generatorIdentifier:e.challengeGeneratorIdentifier})));return(({additionalData:e,history:t,ttl:a,unique:s,updateTimestamp:n,values:r})=>{let i=[...t,...r.map(((t,s)=>Object.assign(Object.assign({},(null==e?void 0:e[s])?{additionalData:null==e?void 0:e[s]}:{}),{expirationTimestamp:n+a,value:t})))].filter((e=>n<e.expirationTimestamp));if(s){const e=[];i.sort(((e,t)=>t.expirationTimestamp-e.expirationTimestamp)).forEach((t=>{(0,k.cY)(e.map((e=>e.value)),t.value)||e.push(t)})),i=e}return i.sort(((e,t)=>e.expirationTimestamp-t.expirationTimestamp))})({additionalData:a?n.map((()=>({levelId:a}))):void 0,history:t,ttl:T,unique:!0,updateTimestamp:s,values:n})},R=({challenges:e,history:t,updateTimestamp:a})=>{const s=e.filter((e=>void 0!==e.challengeGeneratorIdentifier)).map((e=>({generatorIdentifier:e.challengeGeneratorIdentifier})));return w({history:t,updateTimestamp:a,values:s})};var L=a(11811);const O=(e=(0,p.from)({globalPlacementSessionStarts:0,globalPracticeSessionEnds:0,globalPracticeSessionStarts:0,mistakeHistory:[],numSessionsWithMistakes:0}),t)=>{var a,s;switch(t.type){case"QUIT_SESSION":{const{isZombieMode:a,levelId:s,sessionParams:{generatorIdentifiersOfRecentMistakes:n},session:r,session:{challenges:i,startTime:o}}=t;return r.type!==L.FF.Lesson&&r.type!==L.FF.LexemePractice||a||(e=(0,p.set)(e,"mistakeHistory",C({challenges:i.filter((e=>{var t;return!1===(null===(t=e.gradingResult)||void 0===t?void 0:t.correct)})),history:e.mistakeHistory,levelId:s,updateTimestamp:o}))),n&&!a&&(e=(0,p.set)(e,"mistakeHistory",R({challenges:i.filter((e=>{var t;return!0===(null===(t=e.gradingResult)||void 0===t?void 0:t.correct)})),history:e.mistakeHistory,updateTimestamp:o}))),e}case"START_SESSION":{const{sessionParams:{generatorIdentifiersOfRecentMistakes:s},session:n,startTime:r}=t;return n.type===L.FF.GlobalPractice&&(e=(0,p.set)(e,"globalPracticeSessionStarts",e.globalPracticeSessionStarts+1)),n.type===L.FF.PlacementTest&&(e=(0,p.set)(e,"globalPlacementSessionStarts",(null!==(a=e.globalPlacementSessionStarts)&&void 0!==a?a:0)+1)),s&&(e=(0,p.set)(e,"mistakeHistory",(({challenges:e,generatorIdentifiers:t,history:a,updateTimestamp:s})=>{const n=e.filter((e=>void 0!==e.challengeGeneratorIdentifier)).map((e=>e.challengeGeneratorIdentifier)),r=t.filter((e=>!(0,k.cY)(n,e))).map((e=>({generatorIdentifier:e})));return w({history:a,updateTimestamp:s,values:r})})({challenges:n.challenges,generatorIdentifiers:s,history:e.mistakeHistory,updateTimestamp:r}))),e}case"RECORDED_SESSION":{const{levelId:a,requestSession:n,requestSession:{challenges:r,endTime:i},sessionParams:{generatorIdentifiersOfRecentMistakes:o}}=t;if(n.type===L.FF.GlobalPractice&&(e=(0,p.set)(e,"globalPracticeSessionEnds",e.globalPracticeSessionEnds+1)),n.type===L.FF.Lesson){const n=r.filter((e=>!1===e.correct));n.length>0&&(e=(0,p.set)(e,"numSessionsWithMistakes",(null!==(s=e.numSessionsWithMistakes)&&void 0!==s?s:0)+1)),t.isZombieMode||(e=(0,p.set)(e,"mistakeHistory",C({challenges:n,history:e.mistakeHistory,levelId:a,updateTimestamp:i})))}return o&&!t.isZombieMode&&(e=(0,p.set)(e,"mistakeHistory",R({challenges:r.filter((e=>void 0!==e.correct)),history:e.mistakeHistory,updateTimestamp:i}))),e}default:return e}};var P=a(89065);const A=(e,t,a)=>{const s=e.filter((e=>!t.includes(e.userId))),n=s.filter((e=>a.includes(e.userId)));return s.filter((e=>!a.includes(e.userId))).concat(n)},D=["health_refill_partial_1","health_refill_partial_2","health_refill_partial_3","health_refill_partial_4","health_refill","health_refill_reactive","health_refill_discounted","health_segment"],x=(e,t)=>e?1e3*e+t:void 0;var N=a(51551),F=a(37971),M=a(94778),U=a(56043),H=a(95332),j=a(7113);const G=[L.FF.Lesson,L.FF.LevelReview,L.FF.GlobalPractice,L.FF.LexemePractice,L.FF.LexemeSkillLevelPractice],B=(e,t)=>{const a=(0,j.w)(e.prompt).map(((e,a)=>({isBlank:a>=t.blankStartIndex&&a<t.blankEndIndex,text:e}))),s={challengeGeneratorIdentifier:e.challengeGeneratorIdentifier,challengeResponseTrackingProperties:{},character:e.character,explanation:e.explanation,id:e.id,indicatorType:L.A.PastMistake,metadata:e.metadata,newWords:void 0,solutionTranslation:e.solutionTranslation,trackingProperties:{},type:L.Sm.PartialListen};return Object.assign(Object.assign({},s),{displayTokens:a,grader:e.grader,prompt:e.prompt,slowTts:e.slowTts,tts:e.tts,type:L.Sm.PartialListen})},V=(e,t,a)=>{const s=e.map(((e,t)=>({isBlank:t===a.blankIndex,text:e}))),n={challengeGeneratorIdentifier:t.challengeGeneratorIdentifier,challengeResponseTrackingProperties:{},character:t.character,explanation:t.explanation,id:t.id,indicatorType:L.A.PastMistake,metadata:t.metadata,newWords:void 0,solutionTranslation:t.solutionTranslation,trackingProperties:{},type:L.Sm.PartialReverseTranslate},r={grader:t.grader};return Object.assign(Object.assign(Object.assign({},n),r),{displayTokens:s,prompt:t.prompt,slowTts:t.slowTts,tts:t.tts,type:L.Sm.ListenComplete})},z=(e,t,a)=>{const s=e.map(((e,t)=>({isBlank:t===a.blankIndex,text:e}))),n={challengeGeneratorIdentifier:t.challengeGeneratorIdentifier,challengeResponseTrackingProperties:{},character:t.character,explanation:t.explanation,id:t.id,indicatorType:L.A.PastMistake,metadata:t.metadata,newWords:void 0,solutionTranslation:t.solutionTranslation,trackingProperties:{},type:L.Sm.PartialReverseTranslate},r={grader:t.grader};return Object.assign(Object.assign(Object.assign({},n),r),{displayTokens:s,prompt:t.prompt,tokens:t.tokens,type:L.Sm.CompleteReverseTranslation})},Z=(e,t)=>{const a=(0,j.w)(e.correctSolutions[0]).map(((e,a)=>({isBlank:a>=t.blankStartIndex&&a<t.blankEndIndex,text:e}))),s={challengeGeneratorIdentifier:e.challengeGeneratorIdentifier,challengeResponseTrackingProperties:{},character:e.character,explanation:void 0,id:e.id,indicatorType:L.A.PastMistake,metadata:e.metadata,newWords:void 0,solutionTranslation:e.solutionTranslation,trackingProperties:{},type:L.Sm.PartialReverseTranslate};return Object.assign(Object.assign({},s),{displayTokens:a,grader:e.grader,prompt:e.prompt,tokens:e.tokens,type:L.Sm.PartialReverseTranslate})};var $=a(23275),W=a(44637),q=a(84401),Q=a(89260),Y=a(97106);const K=(0,p.from)({challengeIdSections:[],challengeStates:[],coachDuo:{allCharacters:[],allShowReasons:[],currentCorrectStreak:0,currentIncorrectStreak:0},completedWithHeartsRemaining:!1,confidence:0,currentInLessonStreak:0,currentIndex:0,enableBonusPoints:!1,endedEarly:!1,heartsType:"unlimitedHearts",inLessonTipResources:{},inLessonTipShowing:!1,isFinalLevel:!1,key:0,maxHearts:0,maxInLessonStreak:0,mistakesReplacementChallengeIndex:0,numInLessonTipOpens:0,numTimesTransliterationToggled:0,receivedGifts:{fromMilestone:!1,quantity:0,streakFreeze:!1},recycledMistakeIndexToOriginalMistakeIndex:{},session:void 0,sessionParams:void 0,sessionPrefetchedTimestamp:void 0,sessionRouteParams:void 0,sessionSubmitError:void 0,sessionSubmitted:!1,sessionSubmitting:!1,sessionTime:0,shownSmartTipIds:[],slideData:[],status:void 0,strength:0});var J=a(16086);const X=(0,p.from)({keys:[]}),ee=(e,t)=>void 0===e.time[e.time.length-1][1]?(0,p.setIn)(e,["time",e.time.length-1,1],t):e;var te=a(37993),ae=a(35160);const se=(0,p.from)({availableModals:[],b2bPricingData:void 0,canShowAgeRestrictedLeaderboardsIntro:!0,canShowHomeMessage:!0,drawer:void 0,drawerIsUhmManaged:!1,engagementOverride:void 0,homeMessage:void 0,homeMessageData:void 0,homeMessagingClientState:{dogfoodingPreview:!0,maintenanceBreak:!0,turningNotificationsOn:!0},inductedIntoStreakSociety:!1,isDimmedOverlayOpen:!1,isInventoryFresh:!1,isLoggingOut:!1,isModalReallyOpen:!1,isRequestingNotificationPermission:!1,isShopItemsFresh:!1,isSwitchingCourse:!1,isUserModelFresh:!1,microphonePermission:void 0,modal:void 0,modalIsUhmManaged:!1,modalShouldWaitForOverlay:!1,online:!0,purchasingItem:!1,secondaryModal:void 0,shouldUnmount:!1,spotlightType:void 0,toast:void 0,toastIsUhmManaged:!1,viewportHeight:window.innerHeight,viewportWidth:window.innerWidth,visibleUnitIndex:void 0});var ne=a(6661);const re=(0,k.p)(["pathSkipping","plusBadgeMigration"]);var ie=a(20041),oe=a(59096);const le=e=>({discountType:e.discountType,expirationTime:e.secondsUntilExpiration>0?(0,I.HR)(e.secondsUntilExpiration):0}),ce=e=>!(0,k.gB)(e,["adsConfig","experiments","referralInfo","trackingProperties"]);var de=a(18804);const ue=(e=>{const t=g.XP(e);return(a=(0,p.from)({}),s)=>t.reduce(((t,n)=>(0,p.set)(t,n,e[n](a[n],s))),a)})({achievementsV3:(e=(0,p.from)({}),t)=>{switch(t.type){case"PLAYER_INIT":e=(0,p.set)(e,"sessionStartAchievements",e.achievements);break;case"UPDATE_USER_ACHIEVEMENTS_V3":{const a=(0,m.H2)(t.achievements);e=(0,p.set)(e,"achievements",a);break}}return e},animations:(e=(0,p.from)([]),t)=>{switch(t.type){case"QUEUE_ANIMATIONS":e=e.concat(t.animations);break;case"DEQUEUE_ANIMATION":e=e.filter((e=>e.id!==t.id))}return e},avatars:(e=(0,p.from)({builderConfig:void 0}),t)=>{switch(t.type){case"SET_AVATAR_BUILDER_CONFIG":e=(0,p.set)(e,"builderConfig",t.payload);break;case"SET_BUILT_AVATAR_STATE":e=(0,p.set)(e,"builtAvatar",t.payload)}return e},brb:(e=h,t)=>{switch(t.type){case"brb/DISABLED":e=(0,p.setIn)(e,[t.mode,"resetAt"],void 0),e=(0,p.setIn)(e,[t.mode,"status"],"disabled");break;case"brb/ENABLED":e=(0,p.setIn)(e,[t.mode,"resetAt"],t.resetAt),e=(0,p.setIn)(e,[t.mode,"status"],"enabled");break;case"brb/IGNORED":e=(0,p.setIn)(e,[t.mode,"ignoreUntil"],t.ignoreUntil),e=(0,p.setIn)(e,[t.mode,"resetAt"],void 0),e=(0,p.setIn)(e,[t.mode,"status"],"disabled")}return e},browserSettings:(e=f,t)=>{switch(t.type){case"DARK_MODE":e=(0,p.set)(e,"darkMode",t.value);break;case"DISABLE_LISTEN":e=(0,p.set)(e,"listenDisabledUntil",t.listenDisabledUntil);break;case"DISABLE_REDUCED_MOTION":e=(0,p.set)(e,"prefersReducedMotion",!1);break;case"DISABLE_SPEAK":e=(0,p.set)(e,"speakDisabledUntil",t.speakDisabledUntil);break;case"ENABLE_LISTEN":e=(0,p.set)(e,"listenDisabledUntil",0);break;case"ENABLE_REDUCED_MOTION":e=(0,p.set)(e,"prefersReducedMotion",!0);break;case"ENABLE_SPEAK":e=(0,p.set)(e,"speakDisabledUntil",0);break;case"TOGGLE_COACH":e=(0,p.set)(e,"coachEnabled",!e.coachEnabled);break;case"TOGGLE_COMPLETE_REVERSE_TRANSLATION":e=(0,p.set)(e,"completeReverseTranslationTypingEnabled",!e.completeReverseTranslationTypingEnabled);break;case"TOGGLE_TAP":e=(0,p.set)(e,"typingEnabled",!e.typingEnabled);break;case"SET_TRANSLITERATIONS_SETTINGS":e=(0,v.FL)(e,["transliterationsSettings",(0,_.LP)(t.learningLanguage,t.fromLanguage)],t.setting)}return e},characters:(e=(0,p.from)(b),t)=>{switch(t.type){case"characters/UPDATE_CHARACTER_CHART":return(0,p.set)(e,"characterChart",t.characterChart);case"characters/SET_CHARACTER_CHART":return(0,p.merge)(e,{activeAlphabetId:t.activeAlphabetId,characterChart:t.characterChart,fromLanguage:t.fromLanguage,learningLanguage:t.learningLanguage});case"characters/SET_ACTIVE_TAB":return(0,p.set)(e,"activeAlphabetId",t.activeAlphabetId);case"characters/STAGE_CHART_UPDATE":return(0,p.merge)(e,{changedCharacters:t.changedCharacters,stagedCharacterChart:t.stagedCharacterChart})}return e},charactersPersisted:(e=(0,p.from)(S),t)=>{var a;if("characters/SKIP_ALPHABET_GATE"===t.type){const s=null!==(a=e.skippedAlphabetGateIds[t.courseId])&&void 0!==a?a:[];return(0,p.setIn)(e,["skippedAlphabetGateIds",t.courseId],[...s,t.gateId])}return e},config:(e=(0,p.from)(y),t)=>("UPDATE_CONFIG"===t.type&&(e=(0,E.gQ)("debugIpCountry")?Object.assign(Object.assign({},t.config),{ipCountry:(0,E.ky)("debugIpCountry")}):t.config),e),courseHistories:(e=(0,p.from)({}),t)=>{switch(t.type){case"QUIT_SESSION":case"START_SESSION":case"RECORDED_SESSION":{const{courseId:a}=t;return(0,p.set)(e,a,O(e[a],t))}case"UPDATE_USER":{const{user:a}=t;return a.courses&&(e=g.Ry(a.courses.map((a=>[a.id,O(e[a.id],t)])))),e}default:return e}},courses:(e=(0,p.from)({}),t)=>{switch(t.type){case"UPDATE_USER":{const{currentCourse:s,courses:n}=t.user;if(n&&(e=(0,p.from)(g.Ry(n.map((e=>[e.id,e]))))),s){let t=0;e=(0,p.set)(e,s.id,Object.assign(Object.assign({},s),{path:s.path.map((e=>Object.assign(Object.assign({},e),{unitNumber:e.unitIndex+1}))),pathSectioned:s.pathSectioned.map((e=>{const a=Object.assign(Object.assign({},e),{status:(0,P.df)(e),type:(0,P.U_)(e),units:e.units.map((e=>Object.assign(Object.assign({},e),{unitNumber:e.unitIndex-t+1})))});return t+=e.units.length,a})),skills:(a=s.skills,a.reduce(((e,t)=>(e.push(t.map((e=>e.id))),e)),[]))}))}break}}var a;return e},debug:(e=(0,p.from)({warnings:[]}),t)=>{switch(t.type){case"debug/ADD_UNIQUE_DEBUG_WARNING":e.warnings.some((e=>e.type===t.warning.type))||(e=(0,p.update)(e,"warnings",(e=>e.concat([t.warning]))));break;case"debug/PAGE_LOAD":e=(0,p.set)(e,"pageLoadTime",t.timestamp)}return e},friends:(e=(0,p.from)({assets:{},drawer:null,feed:null,recommendationInfo:null}),t)=>{switch(t.type){case"SET_FEED":e=(0,p.set)(e,"feed",t.feed);break;case"SET_KUDOS_ASSETS":e=(0,p.set)(e,"assets",t.assets);break;case"SET_KUDOS_DRAWER":e=(0,p.set)(e,"drawer",t.drawer);break;case"SET_FOLLOW_SUGGESTIONS":e=(0,p.set)(e,"recommendationInfo",t.recommendationInfo);break;case"UPDATE_FOLLOW_SUGGESTIONS":{if(null===e.recommendationInfo)break;const a=Object.assign(Object.assign({},e.recommendationInfo),{recommendations:A(e.recommendationInfo.recommendations,t.filteredIds,t.rotatedIds)});e=(0,p.set)(e,"recommendationInfo",a);break}case"DELETE_FOLLOW_SUGGESTION":{if(null===e.recommendationInfo)break;const a=Object.assign(Object.assign({},e.recommendationInfo),{recommendations:e.recommendationInfo.recommendations.filter((e=>e.userId!==t.deletedId))});e=(0,p.set)(e,"recommendationInfo",a);break}}return e},goals:(e=(0,p.from)({badges:[],coreQuest:void 0,dailyQuest:void 0,difficulty:0,earnedBadges:[],friendsQuest:{details:void 0,lastSeenTotalProgress:0},hardQuest:void 0,lastSeenMonthlyChallengeId:"",lastSeenNextFriendsQuestStart:0,lastUpdated:void 0,monthlyChallengeProgressUpdate:0,monthlyQuest:void 0,monthlyQuestTheme:void 0,pendingRewards:[],progress:void 0,progressUpdate:void 0,schema:[]}),t)=>{switch(t.type){case"ACKNOWLEDGE_FRIENDS_QUEST_COMPLETE":e=(0,p.setIn)(e,["friendsQuest","details","acknowledged"],!0);break;case"SET_FRIENDS_QUEST_DETAILS":e=(0,p.setIn)(e,["friendsQuest","details"],t.payload);break;case"SET_FRIENDS_QUEST_HIGH_FIVE_TIMESTAMP":e=(0,p.setIn)(e,["friendsQuest","highFiveTimestamp"],t.value);break;case"SET_FRIENDS_QUEST_PROGRESS":e=(0,p.setIn)(e,["friendsQuest","details","ownProgress"],t.ownProgress),e=(0,p.setIn)(e,["friendsQuest","details","totalProgress"],t.totalProgress);break;case"SET_GOALS_SCHEMA":e=(0,p.set)(e,"schema",t.payload);break;case"SET_GOALS_DIFFICULTY":e=(0,p.set)(e,"difficulty",t.payload);break;case"SET_GOALS_PROGRESS":e=(0,p.set)(e,"progress",t.payload);break;case"SET_GOALS_PROGRESS_UPDATE":e=(0,p.set)(e,"progressUpdate",t.payload);break;case"SET_MONTHLY_CHALLENGE_PROGRESS_UPDATE":e=(0,p.set)(e,"monthlyChallengeProgressUpdate",t.payload.updates);break;case"SET_LAST_SEEN_FRIENDS_QUEST_TOTAL_PROGRESS":e.friendsQuest&&(e=(0,p.setIn)(e,["friendsQuest","lastSeenTotalProgress"],t.lastSeenTotalProgress));break;case"SET_LAST_SENT_FRIENDS_QUEST_GIFT_TIMESTAMP":e.friendsQuest&&(e=(0,p.setIn)(e,["friendsQuest","lastSentGiftTimestamp"],t.timestamp));break;case"SET_LAST_SENT_FRIENDS_QUEST_NUDGE":e.friendsQuest&&(e=(0,p.setIn)(e,["friendsQuest","lastSentNudge"],{nudgeType:t.nudgeType,timestamp:t.timestamp}));break;case"SET_LAST_SEEN_NEXT_FRIENDS_QUEST_START":e=(0,p.set)(e,"lastSeenNextFriendsQuestStart",t.lastSeenNextFriendsQuestStart);break;case"SET_LAST_SEEN_MONTHLY_CHALLENGE_ID":e=(0,p.set)(e,"lastSeenMonthlyChallengeId",t.monthlyChallengeId);break;case"SET_PENDING_DAILY_QUEST_REWARDS":e=(0,p.set)(e,"pendingRewards",t.dailyQuestRewards);break;case"SET_DAILY_QUESTS":e=(0,p.set)(e,"coreQuest",t.payload.coreQuest),e=(0,p.set)(e,"dailyQuest",t.payload.dailyQuest),e=(0,p.set)(e,"hardQuest",t.payload.hardQuest),e=(0,p.set)(e,"lastUpdated",t.payload.lastUpdated);break;case"SET_MONTHLY_QUEST":e=(0,p.set)(e,"monthlyQuest",t.payload);break;case"SET_MONTHLY_QUEST_THEME":e=(0,p.set)(e,"monthlyQuestTheme",t.monthlyQuestTheme);break;case"SET_QUEST_BADGES":e=(0,p.set)(e,"badges",t.badges);break;case"SET_EARNED_BADGES":e=(0,p.set)(e,"earnedBadges",t.earnedBadges)}return e},heartsState:(e=(0,p.from)({eligibleForFreeRefill:!1,healthEnabled:!1,hearts:5,maxHearts:5,nextHeartRefillTimestampMs:void 0,overrideFreeHeartRefillLeft:0,overrideShowHeartsIntro:!1,secondsPerHeartSegment:18e3,unlimitedHeartsAvailable:!1}),t)=>{switch(t.type){case"UPDATE_HEARTS_STATE":{const a=t.heartsConfig.secondsUntilNextHeartSegment,s=Object.assign(Object.assign({},t.heartsConfig),{nextHeartRefillTimestampMs:x(a,t.currentTimestampMs),overrideFreeHeartRefillLeft:e.overrideFreeHeartRefillLeft,overrideShowHeartsIntro:e.overrideShowHeartsIntro});e=(0,p.merge)(e,s);break}case"INCREMENT_HEARTS":{const a=Math.min(e.hearts+t.amount,e.maxHearts),s=a===e.maxHearts?void 0:e.secondsUntilNextHeartSegment,n=void 0===s?void 0:e.nextHeartRefillTimestampMs;e=(0,p.merge)(e,{hearts:a,nextHeartRefillTimestampMs:n,secondsUntilNextHeartSegment:s});break}case"DECREMENT_ONE_HEART":{const a=e.hearts===e.maxHearts,s=Math.max(0,e.hearts-1);e=(0,p.set)(e,"hearts",s),a&&(e=(0,p.merge)(e,{nextHeartRefillTimestampMs:x(e.secondsPerHeartSegment,t.currentTimestampMs),secondsUntilNextHeartSegment:e.secondsPerHeartSegment}));break}case"HEARTS_REFILL":e=(0,p.merge)(e,{hearts:e.maxHearts,nextHeartRefillTimestampMs:void 0,secondsUntilNextHeartSegment:void 0});break;case"stories/COMPLETE_STORY":case"SESSION_SUBMIT_END":e=(0,p.merge)(e,{overrideFreeHeartRefillLeft:Math.max(0,e.overrideFreeHeartRefillLeft-1)});break;case"PURCHASE_ITEM":{if("SUCCESS"!==t.status)break;let a=0;switch(t.item.itemName){case"health_refill_reactive":case"health_refill_discounted":case"health_refill":a=e.maxHearts;break;case"health_refill_partial_1":a=1;break;case"health_refill_partial_2":a=2;break;case"health_refill_partial_3":a=3;break;case"health_refill_partial_4":a=4}if(a>0){const t=Math.min(e.maxHearts,e.hearts+a);e=(0,p.merge)(e,{hearts:t,nextHeartRefillTimestampMs:t===e.maxHearts?void 0:e.nextHeartRefillTimestampMs,secondsUntilNextHeartSegment:t===e.maxHearts?void 0:e.secondsUntilNextHeartSegment})}break}case"SET_OVERRIDE_HEARTS_INTRO":e=(0,p.set)(e,"overrideShowHeartsIntro",t.value);break;case"SET_EXISTING_USER_HEARTS_CONFIG":e=(0,p.merge)(e,{overrideFreeHeartRefillLeft:3,overrideShowHeartsIntro:!0})}return e},items:(e=(0,p.from)({inventory:{},shop:{in_app_purchase:[],isLoaded:!1,misc:{}},subscriptions:{currentPlan:void 0,isLoaded:!1,subscriptionPlans:void 0}}),t)=>{var a,s;switch(t.type){case"PURCHASE_ITEM":{if("SUCCESS"!==t.status)break;const{item:a}=t;if(D.some((e=>e===a.itemName)))break;"streak_freeze"!==a.itemName?e=(0,p.setIn)(e,["inventory",a.itemName],a):t.purchaseQuantity&&(e=(0,p.setIn)(e,["inventory","streak_freeze","quantity"],e.inventory.streak_freeze?e.inventory.streak_freeze.quantity+t.purchaseQuantity:t.purchaseQuantity));break}case"REFILL_SOCIETY_STREAK_FREEZES":if(void 0===e.inventory.society_streak_freeze_refill){(0,n.Kp)("Tried to refill society streak freezes without the required item in inventory.",{data:e.inventory});break}e=void 0===(e=void 0===e.inventory.society_streak_freeze?(0,p.merge)(e,{inventory:Object.assign(Object.assign({},e.inventory),{society_streak_freeze:{itemName:"society_streak_freeze",purchaseDate:Date.now(),purchaseId:"",purchasePrice:0,quantity:t.maxQuantity},society_streak_freeze_refill:void 0})}):(0,p.setIn)(e,["inventory","society_streak_freeze","quantity"],t.maxQuantity)).inventory.streak_freeze?(0,p.merge)(e,{inventory:Object.assign(Object.assign({},e.inventory),{streak_freeze:{itemName:"streak_freeze",purchaseDate:Date.now(),purchaseId:"",purchasePrice:0,quantity:N.SG}})}):(0,p.setIn)(e,["inventory","streak_freeze","quantity"],N.SG);break;case"REFRESH_USER_ITEM":{const a=t.item;e=(0,p.set)(e,"inventory",Object.assign(Object.assign({},e.inventory),{[a.itemName]:a}));break}case"SET_AVAILABLE_SUBSCRIPTION_PLANS":e=(0,p.set)(e,"subscriptions",{currentPlan:t.currentPlan,isLoaded:!0,subscriptionPlans:t.subscriptionPlans});break;case"SET_SHOP_ITEMS":{const a={in_app_purchase:[],isLoaded:!1,misc:{}};t.items.forEach((e=>{switch(e.type){case"misc":a[e.type][e.id]=e;break;case"in_app_purchase":a[e.type].push(e);break;default:(0,k.RJ)(e)}})),a.isLoaded=!0,e=(0,p.set)(e,"shop",a);break}case"UPDATE_INVENTORY":e=(0,p.set)(e,"inventory",t.inventory);break;case"REMOVE_AN_AVAILABLE_SUBSCRIPTION_PLAN":{const n=null===(s=null===(a=e.subscriptions)||void 0===a?void 0:a.subscriptionPlans)||void 0===s?void 0:s.filter((e=>e.productId!==t.planProductId));e=(0,p.setIn)(e,["subscriptions","subscriptionPlans"],n);break}}return e},leaderboards:(e=(0,p.from)({}),t)=>{var a,s,n;switch(t.type){case"CLEAR_LEAGUES_ENDED":e=(0,p.setIn)(e,["leagues","state","ended"],[]);break;case"CLEAR_CLASSROOM_LEADERBOARD_ENDED":e=(0,p.setIn)(e,["classroomLeaderboard","state","ended"],[]);break;case"LEADERBOARD_SESSION_END_SHOWN":{const a=(()=>{var a,s;return"leaderboardMoveUpPrompt"===t.slideType?e.sessionEndData&&t.cohortId===e.sessionEndData.moveUpPrompts.cohortId?e.sessionEndData.moveUpPrompts.numShown+1:1:null!==(s=null===(a=e.sessionEndData)||void 0===a?void 0:a.moveUpPrompts.numShown)&&void 0!==s?s:0})();e=(0,p.set)(e,"sessionEndData",{lastShownDate:t.shownDate,moveUpPrompts:{cohortId:t.cohortId,numShown:a}});break}case"UPDATE_LEADERBOARDS":if(void 0!==t.leagues){const a=t.leagues,s=a.state.numSessionsRemainingToUnlock,n=e.leagues?e.leagues.state.numSessionsRemainingToUnlock:void 0,r=(0,p.setIn)(a,["state","numSessionsRemainingToUnlock"],void 0===n||void 0===s?s:Math.max(0,Math.min(n,s)));e=(0,p.set)(e,"leagues",r)}void 0!==t.classroomLeaderboard&&(e=(0,p.set)(e,"classroomLeaderboard",t.classroomLeaderboard));break;case"SET_USER_REACTION":e=(0,p.setIn)(e,["userReaction"],t.reaction);break;case"RECORDED_SESSION":void 0!==(null===(a=e.leagues)||void 0===a?void 0:a.state.numSessionsRemainingToUnlock)&&(null===(s=e.leagues)||void 0===s?void 0:s.state.numSessionsRemainingToUnlock)>=1&&(e=(0,p.setIn)(e,["leagues","state","numSessionsRemainingToUnlock"],e.leagues.state.numSessionsRemainingToUnlock-1));break;case"LEAVE_CLASSROOM":(null===(n=e.classroomLeaderboard)||void 0===n?void 0:n.classroomId)===t.classroomId&&(e=(0,p.set)(e,"classroomLeaderboard",void 0));break;case"SET_LEADERBOARD_STREAKS":e=(0,p.set)(e,"streaks",t.streaks)}return e},notifications:(e=(0,p.from)({}),t)=>{switch(t.type){case"MARK_NOTIFICATIONS_READ":e=g.Xc(e,(e=>Object.assign(Object.assign({},e),{unseen:!1})));break;case"SET_NOTIFICATIONS":e=t.notifications;break;case"UPDATE_FOLLOW_NOTIFICATION":e=g.Xc(e,(e=>e.id===t.notificationId?Object.assign(Object.assign({},e),{is_following:t.isFollowing}):e))}return e},paymentMethods:(e=(0,p.from)([]),t)=>("REFRESH_USER_PAYMENT_METHODS"===t.type&&(e=t.paymentMethods),e),player:(e=K,t)=>{var a,s,r,i,o,l,c;switch(e=((e,t)=>{switch(t.type){case"SET_SMART_TIP_TO_SHOW":e=(0,p.set)(e,"shownSmartTipIds",[t.smartTipResource.identifier,...e.shownSmartTipIds]),e=(0,p.set)(e,"smartTipToShow",t.smartTipResource);break;case"UPDATE_GRADED_SMART_TIP":e=(0,p.set)(e,"status",F.c.SmartTipBlaming),e=(0,p.setIn)(e,["smartTipToShow","gradingResult"],{correct:t.correct})}return e})(e,t),t.type){case"PLAYER_INIT":e=(0,p.set)(e,"via",t.via);break;case"PLAYER_REMOUNT":e=(0,p.set)(e,"key",e.key+1);break;case"PLAYER_RESET":e=K;break;case"RECEIVE_GIFT":e=(0,p.setIn)(e,["receivedGifts",t.gift],!0),e=(0,p.setIn)(e,["receivedGifts","quantity"],e.receivedGifts.quantity+t.quantity),e=(0,p.setIn)(e,["receivedGifts","fromMilestone"],t.fromMilestone);break;case"CLEAR_IN_LESSON_TIP":return(0,p.merge)(e,{inLessonTip:void 0,inLessonTipShowing:!1});case"CREATE_SESSION":{const{levelData:s,session:n,sessionParams:r,sessionPrefetchedTimestamp:i,sessionRouteParams:o,shouldUseUserHeartsInLegendary:l,speakIneligibleReasons:c}=t,d=n.challenges[e.currentIndex],u=(0,M.BY)({challenge:d}),g=!r.isFinalLevel&&n.beginner?4:3,m=n.type,h=null!==(a=(()=>{var e,t,a;switch(r.type){case L.FF.Lesson:return r.isFinalLevel?F.c.FinalLevelDuo:r.showGrammarSkillSplash?F.c.GrammarSkillSplash:void 0;case L.FF.Legendary:case L.FF.LegendaryLevel:case L.FF.LegendaryLexemePractice:return F.c.LegendaryDuo;case L.FF.LevelReview:return F.c.CapstoneReviewSplash;case L.FF.LexemePractice:return"lexeme"===(null===(e=n.sessionContext)||void 0===e?void 0:e.contextType)&&(null===(a=null===(t=n.sessionContext)||void 0===t?void 0:t.focusedLexemes)||void 0===a?void 0:a.length)>0&&s&&!(0,$.Wc)((0,$.xV)(s.level))?F.c.VisiblePersonalizationSplash:s&&(0,$.$)(s.level)?F.c.CapstoneReviewSplash:void 0;case L.FF.ListeningPractice:case L.FF.SpeakingPractice:case L.FF.SpecifiedMatchPractice:case L.FF.TargetPractice:case L.FF.UnitRewind:return F.c.PracticeHubDuo;case L.FF.MistakesReview:return F.c.MistakesReviewDuo;case L.FF.PlacementTest:return F.c.PlacementSplash;case L.FF.SectionTest:return F.c.SectionTestSplash;case L.FF.UnitReview:return void 0===(null==s?void 0:s.level.dailyRefreshInfo)?F.c.UnitReviewSplash:void 0;case L.FF.UnitTest:return F.c.UnitTestSplash;default:return}})())&&void 0!==a?a:(0,W.ct)(d,u),_=r.isFinalLevel&&!l||(0,Q.LJ)(m)&&!(0,Q.l$)(m),v=_?"sessionHearts":t.hasUserHearts?"userHearts":"unlimitedHearts";e=(0,p.merge)(e,{challengeIdSections:(0,Q.oT)(n.challenges,r.isFinalLevel?2:1),challengeStates:[u],heartsType:v,levelData:s,maxHearts:g,session:Object.assign(Object.assign({},n),{heartsLeft:_?g:0}),sessionParams:r,sessionPrefetchedTimestamp:i,sessionRouteParams:o,speakIneligibleReasons:c,status:h});break}case"EXTEND_SESSION":{e=(0,p.setIn)(e,["session","challenges"],[...e.session.challenges,...t.challenges]),e=(0,p.setIn)(e,["session","ttsAnnotations"],Object.assign(Object.assign({},e.session.ttsAnnotations),t.ttsAnnotations));const a=(0,p.asMutable)(e.challengeIdSections,{deep:!0});a[a.length-1].push(...t.challenges.map((e=>e.id))),e=(0,p.merge)(e,{challengeIdSections:a,confidence:t.confidence,progressScore:t.progressScore,status:F.c.Blaming});break}case"CHALLENGE_GUESS_CHANGE":e=e.status===F.c.SmartTip?(0,p.setIn)(e,["smartTipToShow","guess"],t.value):(0,p.setIn)(e,["challengeStates",e.currentIndex,"guess"],t.value);break;case"CHALLENGE_HAS_BROKEN_TTS":e=(0,p.setIn)(e,["challengeStates",e.currentIndex,"hasBrokenTts"],!0);break;case"CHALLENGE_STARTED":e=e.status===F.c.SmartTip?(0,p.setIn)(e,["smartTipToShow","startTime"],t.timestamp):(0,p.setIn)(e,["session","challenges",e.currentIndex,"startTime"],t.timestamp);break;case"CHALLENGE_WORLD_CHARACTER_SHOWN":e=(0,p.setIn)(e,["session","challenges",e.currentIndex,"worldCharacterShown"],t.wasShown);break;case"COACH_DUO_SHOWN":e=(0,p.updateIn)(e,["coachDuo","allCharacters"],(e=>[...e,t.model.template.character])),e=(0,p.updateIn)(e,["coachDuo","allShowReasons"],(e=>[...e,t.model.showReason]));break;case"CONTINUE_CURRENT_CHALLENGE":{const t=e.session.challenges[e.currentIndex],a=e.challengeStates[e.currentIndex],s=(0,M.uu)({challenge:t,challengeState:a});e=(0,p.setIn)(e,["challengeStates",e.currentIndex],s),e=(0,p.set)(e,"status",(0,M.j4)({challenge:t,challengeState:s})?F.c.Guessing:F.c.Showing);break}case"REPLACE_WITH_ADAPTIVE_CHALLENGES":{const a=(0,p.asMutable)(e.challengeIdSections,{deep:!0}),s=(0,p.asMutable)(e.session.challenges);let n=0,r=0;s.forEach(((i,o)=>{const l=o-e.currentIndex-1;if(l>=0&&l<t.challenges.length){const i=t.challenges[o-e.currentIndex-1];s[o]=i,a[n][r]=i.id}r<e.challengeIdSections[n].length?r++:(n++,r=0)})),e=(0,p.setIn)(e,["session","challenges"],s),e=(0,p.set)(e,"challengeIdSections",a);break}case"ADVANCE_SESSION":{const t=e.currentIndex+1;e=(0,p.setIn)(e,["challengeStates",t],(0,M.BY)({challenge:e.session.challenges[t]})),e=(0,p.setIn)(e,["coachDuo","model"],void 0),e=(0,p.set)(e,"currentIndex",t),e=(0,p.set)(e,"smartTipToShow",void 0),e=(0,p.set)(e,"status",F.c.Sliding);break}case"DISABLE_LISTEN":case"DISABLE_SPEAK":{if(void 0===e.session)return e;const a="DISABLE_LISTEN"===t.type?(0,Q.tq)():(0,Q.bc)();e=(0,p.setIn)(e,["session","adaptiveChallenges"],null===(s=e.session.adaptiveChallenges)||void 0===s?void 0:s.filter((e=>!a.includes(e.type))));const n=[],r=[],i=[];(0,W.L1)(e,(({challenge:t,challengeIndex:s,sectionIndex:o})=>{var l,c,d;const u=null!==(c=null===(l=e.session.adaptiveInterleavedChallenges)||void 0===l?void 0:l.speakOrListenReplacementIndices[s])&&void 0!==c?c:null;if((s<=e.currentIndex||!a.includes(t.type))&&(n.push(t),r[o]=r[o]||[],r[o].push(t.id),i.push(null!=u?u:null)),s>=e.currentIndex&&null!==u&&a.includes(t.type)){const t=null===(d=e.session.adaptiveInterleavedChallenges)||void 0===d?void 0:d.challenges[u];t&&(n.push(t),r[o]=r[o]||[],r[o].push(t.id),i.push(u))}return!1})),e=(0,p.setIn)(e,["session","challenges"],n),(e=(0,p.set)(e,"challengeIdSections",r)).session.adaptiveInterleavedChallenges&&(e=(0,p.setIn)(e,["session","adaptiveInterleavedChallenges","speakOrListenReplacementIndices"],i));break}case"ENABLE_BONUS_POINTS":e=(0,p.set)(e,"enableBonusPoints",!0);break;case"END_SESSION":{const{enableBonusPoints:a,endedEarly:s,maxInLessonStreak:n,progressScore:r,session:{heartsLeft:i},sessionParams:{isFinalLevel:o}}=e,l="sessionHearts"===e.heartsType&&i<=0,c=!s&&!l;e=(0,p.set)(e,"completedWithHeartsRemaining",c);const d={enableBonusPoints:a,endTime:t.timestamp,failed:!e.partialXpGiven&&l,maxInLessonStreak:n,progressScore:r,shouldLearnThings:!o||c,xpPromised:(0,Y.xc)(e)};e=(0,v.$f)(e,["session"],d);break}case"END_SESSION_EARLY":e=(0,p.set)(e,"endedEarly",!0);break;case"LOAD_IN_LESSON_TIP_RESOURCE":return(0,p.setIn)(e,["inLessonTipResources",t.url],t.explanationResource);case"QUIT_SESSION":e=(0,p.set)(e,"numTimesTransliterationToggled",0);break;case"SESSION_END_SLIDES":e=(0,p.set)(e,"nativeAd",t.nativeAd),e=(0,p.set)(e,"sessionSubmitted",!0),e=(0,p.set)(e,"slideData",t.slideData);break;case"SESSION_SUBMIT_END":e=(0,p.set)(e,"sessionSubmitting",!1);break;case"SESSION_SUBMIT_FAILED":e=(0,p.set)(e,"sessionSubmitError",t.error);break;case"SESSION_SUBMIT_START":e=(0,p.set)(e,"sessionSubmitting",!0);break;case"SET_COACH_DUO_MODEL":e=(0,p.setIn)(e,["coachDuo","model"],t.model);break;case"SET_IN_LESSON_TIP":return(0,p.set)(e,"inLessonTip",t.explanationResource);case"SET_PARTIAL_XP_GIVEN":e=(0,p.set)(e,"partialXpGiven",t.xpGiven);break;case"SET_PLAYER_STATUS":e=(0,p.set)(e,"status",t.status);break;case"SET_SELECTED_STREAK_GOAL":{const a=e.slideData[t.slideIndex];"earlyStreakMilestonePrompt"===a.type&&(e=(0,p.setIn)(e,["slideData",t.slideIndex],Object.assign(Object.assign({},a),{selectedStreakGoal:t.selectedStreakGoal})));break}case"SET_SESSION_TIME":e=(0,p.set)(e,"sessionTime",t.sessionTime);break;case"SET_TRANSLITERATIONS_SETTINGS":e=(0,p.set)(e,"numTimesTransliterationToggled",e.numTimesTransliterationToggled+1);break;case"SHOW_HINT":{if(void 0===e.challengeStates[e.currentIndex])break;const a=e.challengeStates[e.currentIndex].hintsShown;e=(0,p.setIn)(e,["challengeStates",e.currentIndex,"hintsShown"],void 0===a?[t.token]:[...a,t.token]);break}case"SPEECH_RECOGNIZER_FAILED":e=(0,p.setIn)(e,["challengeStates",e.currentIndex,"recognizerFailed"],!0);break;case"START_SESSION":{const{startTime:a}=t,{challengeStates:s,currentIndex:r,session:i,sessionParams:o,status:l}=e,c=i.challenges[r];(0,q.rK)(i.type)&&i.challenges.length<10&&(0,n.Kp)("Practice hub session has fewer than 10 exercises",{data:{session:i,sessionParams:o}}),e=(0,p.setIn)(e,["coachDuo","model"],void 0),e=(0,p.setIn)(e,["session","startTime"],a),e=(0,p.set)(e,"status",l===F.c.CoachDuoSplash?F.c.Sliding:(0,W.ct)(c,s[r]));break}case"RECORDED_SESSION":e=(0,v.FL)(e,["session"],t.responseSession);break;case"TOGGLE_IN_LESSON_TIP":return(0,p.merge)(e,{inLessonTipShowing:t.shouldShow,numInLessonTipOpens:e.numInLessonTipOpens+(t.shouldShow?1:0)});case"UPDATE_GRADED_CHALLENGE":{if(e.status===F.c.Grading&&!(0,Q.l$)(e.session.type)){const a=null!==(i=null===(r=t.challenge.gradingResult)||void 0===r?void 0:r.numRetriesLeft)&&void 0!==i?i:0,s=null!==(l=null===(o=t.challenge.gradingResult)||void 0===o?void 0:o.numStrokesLeft)&&void 0!==l?l:0;e=(0,Q.bc)().includes(t.challenge.type)&&a>0?(0,p.set)(e,"status",F.c.SpeakRetryBlaming):t.challenge.type===L.Sm.CharacterWrite&&s>0&&!t.challenge.skipped?(0,p.set)(e,"status",F.c.CharacterWriteRetryBlaming):(0,p.set)(e,"status",F.c.Blaming)}e=(0,v.FL)(e,["session","challenges",e.currentIndex],t.challenge);const a=null===(c=t.challenge.gradingResult)||void 0===c?void 0:c.correct,s=t.challenge.skipped,d=()=>{s||(a?(e=(0,p.setIn)(e,["coachDuo","currentCorrectStreak"],e.coachDuo.currentCorrectStreak+1),e=(0,p.setIn)(e,["coachDuo","currentIncorrectStreak"],0)):(e=(0,p.setIn)(e,["coachDuo","currentCorrectStreak"],0),e=(0,p.setIn)(e,["coachDuo","currentIncorrectStreak"],e.coachDuo.currentIncorrectStreak+1)))};if("sessionHearts"!==e.heartsType||a||(e=(0,p.setIn)(e,["session","heartsLeft"],e.session.heartsLeft-1)),e.session.type===L.FF.PlacementTest||e.session.type===L.FF.SectionTest||e.session.type===L.FF.UnitTest||e.status===F.c.SpeakRetryBlaming)d();else if(!(0,Q.LJ)(e.session.type)){const r=e.session.challenges[e.currentIndex],i=e.challengeStates[e.currentIndex],[o,l]=(0,W.Dk)(e);if(void 0===o||void 0===l)throw Error("Could not find current challenge in challengeIdSections; this is a bug.");if(!a&&!i.hasBrokenTts){const t=e.challengeIdSections[o].length,{challengeIndex:a}=(0,W.L1)(e,(({sectionChallengeIndex:e,sectionIndex:a})=>a===o&&e===t-1));if(void 0===a)throw Error("This should never happen.");const s=(()=>{if((0,Q.HI)(e.session.type)&&"unlimitedHearts"===e.heartsType&&void 0!==e.session.mistakesReplacementChallenges){const t=e.session.mistakesReplacementChallenges[e.mistakesReplacementChallengeIndex];return e=(0,p.setIn)(e,["session","mistakesReplacementChallenges",e.session.mistakesReplacementChallenges.length],r),e=(0,p.set)(e,"mistakesReplacementChallengeIndex",e.mistakesReplacementChallengeIndex+1),t}return(0,Q.HI)(e.session.type)&&"unlimitedHearts"===e.heartsType&&void 0===e.session.mistakesReplacementChallenges&&(0,n.Kp)("Legendary session with unlimited hearts has no mistakesReplacementChallenges"),G.includes(e.session.type)?((e,t)=>{const a=(()=>{switch(e.type){case L.Sm.Listen:return(e=>{var t;const a=(0,U.TK)(e.prompt,null===(t=e.gradingResult)||void 0===t?void 0:t.guess,.6);if("all"===a.rangeType)return e;if("one"===a.rangeType){const t=(0,j.w)(e.prompt);return V(t,e,a)}return B(e,a)})(e);case L.Sm.PartialReverseTranslate:return(e=>{const t=e.displayTokens.map((e=>e.text)).join(""),a=(0,j.w)(t),s=(e=>{var t,a;const s=e.displayTokens,n=null!==(a=null===(t=e.gradingResult)||void 0===t?void 0:t.guess)&&void 0!==a?a:"",r=s[1].isBlank,i=s[0].isBlank,o=e.displayTokens.filter(((t,a)=>!t.isBlank&&a>0&&a<e.displayTokens.length-1)).map((e=>e.text)).join(""),l=r?`${n}${o}`:`${o}${n}`;return`${i?"":s[0].text}${l}${s[s.length-1].text}`})(e),n=(0,U.TK)(t,s,.6);return"one"===n.rangeType?z(a,e,n):e})(e);case L.Sm.Translate:return(0,H.Dw)(e,t)&&!(0,H.vv)(e)?(e=>{var t;const a=(0,U.TK)(e.correctSolutions[0],null===(t=e.gradingResult)||void 0===t?void 0:t.guess,.6);if("all"===a.rangeType)return e;if("one"===a.rangeType){const t=(0,j.w)(e.correctSolutions[0]);return z(t,e,a)}return Z(e,a)})(e):e;default:return e}})(),s=g.CE((0,v.Xh)(a),"gradingResult","skipped");return s.indicatorType=L.A.PastMistake,s})(r,e.sessionParams.learningLanguage):r})(),i=g.CE(s,"gradingResult","skipped"),l=(0,p.asMutable)(e.session.challenges,{deep:!0});l.splice(a+1,0,i),e=(0,p.setIn)(e,["recycledMistakeIndexToOriginalMistakeIndex",a+1],e.currentIndex),e=(0,p.setIn)(e,["session","challenges"],l);const c=(0,p.asMutable)(e.challengeIdSections,{deep:!0});c[o].push(r.id),e=(0,p.set)(e,"challengeIdSections",c)}const c=e.challengeIdSections.length,u=e.challengeIdSections[o].length,m=o+(l===u-1?1:0);let h=e.strength;const _=(o+1)/c-h,f=u-l,b=t.strengthFactor*_/f;h=Math.max(m/c,e.strength+b),h>t.strengthTarget&&(h=1),e=(0,p.set)(e,"strength",h),d();const S=s?0:1;e=(0,p.set)(e,"currentInLessonStreak",a?e.currentInLessonStreak+S:0),e=(0,p.set)(e,"maxInLessonStreak",Math.max(e.currentInLessonStreak,e.maxInLessonStreak))}break}}return e},profile:(e=(0,p.from)({}),t)=>{var a;switch(t.type){case"RESET_PROFILE":e={firstPersonSocialProfile:e.firstPersonSocialProfile};break;case"LOAD_ACHIEVEMENTS":{const{v2:a,v3:s}=t.achievements;e=(0,p.set)(e,"achievements",{v2:a,v3:(0,m.H2)(s)});break}case"LOAD_PRIVATE_PROFILE_USER":e=(0,p.set)(e,"privateProfile",t.user);break;case"LOAD_PROFILE_USER":e=(0,p.set)(e,"user",t.user);break;case"LOAD_PROFILE_XP":e=(0,p.set)(e,"xpEvents",t.summaries);break;case"LOAD_PROFILE_FOLLOWERS":e=(0,p.set)(e,"followers",t.followersData);break;case"LOAD_PROFILE_FOLLOWING":e=(0,p.set)(e,"following",t.followingData);break;case"LOAD_SOCIAL_PROFILE":e=(0,p.set)(e,"socialProfile",t.socialProfile);break;case"LOAD_FIRST_PERSON_SOCIAL_PROFILE":e=(0,p.set)(e,"firstPersonSocialProfile",t.socialProfile);break;case"UPDATE_USER":try{if((0,J.Jb)()===(null===(a=e.user)||void 0===a?void 0:a.id)){const a=(0,p.merge)(e.user,t.user,{deep:!0});e=(0,p.set)(e,"user",a)}}catch(e){}}return e},sessionCache:(e=X,t)=>{switch(t.type){case"sessionCache/INITIALIZE":e=(0,p.set)(e,"keys",t.keys);break;case"sessionCache/ADD":e=(0,p.set)(e,"keys",e.keys.concat(t.key));break;case"sessionCache/REMOVE":e=(0,p.set)(e,"keys",e.keys.filter((e=>e!==t.key)))}return e},sessionEnd:(e=(0,p.from)({slides:[]}),t)=>{var a,s,n;const r=e.slides.length-1;switch(t.type){case"sessionEnd/CTA_CLICK":r>-1&&(e=(0,p.setIn)(e,["slides",r,"action"],"cta"));break;case"sessionEnd/DISMISSED":r>-1&&(e=(0,p.setIn)(e,["slides",r,"action"],null!==(a=e.slides[r].action)&&void 0!==a?a:"dismiss"));break;case"sessionEnd/READY":e.nativeAd&&(e=(0,p.setIn)(e,["nativeAd","status"],"can-track")),e.nativeAd&&(e=(0,p.set)(e,"nativeAd",ee(e.nativeAd,t.timestamp))),r>-1&&(e=(0,p.setIn)(e,["slides",r,"status"],"can-track"),e=(0,p.setIn)(e,["slides",r],ee(e.slides[r],t.timestamp)));break;case"sessionEnd/RESET":e=(0,p.set)(e,"nativeAd",void 0),e=(0,p.set)(e,"slides",[]);break;case"sessionEnd/SLIDE_HIDDEN":"nativeAd"===t.slide.type&&e.nativeAd&&(e=(0,p.set)(e,"nativeAd",ee(e.nativeAd,t.timestamp)));break;case"sessionEnd/SLIDE_SHOWN":"nativeAd"===t.slide.type?e=(0,p.set)(e,"nativeAd",{slide:t.slide,status:"pending",time:[...null!==(n=null===(s=e.nativeAd)||void 0===s?void 0:s.time)&&void 0!==n?n:[],[t.timestamp]],tracking:t.tracking}):(r>-1&&(e=(0,p.setIn)(e,["slides",r,"status"],"can-track"),e=(0,p.setIn)(e,["slides",r],ee(e.slides[r],t.timestamp))),e=(0,p.set)(e,"slides",[...e.slides,{slide:t.slide,status:"pending",time:[[t.timestamp]],tracking:t.tracking}]));break;case"sessionEnd/TRACKED":e.nativeAd&&t.slides.some((e=>"nativeAd"===e.type))&&(e=(0,p.setIn)(e,["nativeAd","status"],"tracked")),e.slides.forEach(((a,s)=>{t.slides.includes(a.slide)&&(e=(0,p.setIn)(e,["slides",s,"status"],"tracked"))}))}return e},skills:(e=(0,p.from)({}),t)=>{switch(t.type){case"UPDATE_USER":{const{currentCourse:a}=t.user;if(a){const{fromLanguage:t,learningLanguage:s,skills:n}=a,r=n;e=g.Ry(r.map(((e,a)=>e.map((e=>[e.id,Object.assign(Object.assign({accessible:!1,decayed:!1,finishedLessons:0,finishedLevels:0,indicatingNewContent:!1,levels:0,strength:0},e),{fromLanguage:t,learningLanguage:s,row:a,urlName:encodeURIComponent(e.urlName)})])))).flat())}break}}return e},stories:te.I,student:(e=(0,p.from)({classrooms:[],sessionActivities:[]}),t)=>{switch(t.type){case"JOIN_CLASSROOM":if(-1!==e.classrooms.findIndex((e=>e.classroom_id===t.classroom.classroom_id)))break;e=(0,p.set)(e,"classrooms",[...e.classrooms,t.classroom]);break;case"LEAVE_CLASSROOM":e=(0,p.set)(e,"classrooms",e.classrooms.filter((e=>e.classroom_id!==t.classroomId)));break;case"UPDATE_CLASSROOMS":e=(0,p.set)(e,"classrooms",t.classrooms);break;case"UPDATE_SESSION_ACTIVITIES":e=(0,p.set)(e,"sessionActivities",t.sessionActivities)}return e},subscriptions:(e=(0,p.from)({}),t)=>{switch(t.type){case"SET_SUBSCRIPTIONS":e=(0,p.from)(t.subscriptions);break;case"ADD_SUBSCRIPTION":e=(0,p.set)(e,`${t.followedUser.id}`,t.followedUser);break;case"REMOVE_SUBSCRIPTION":{const a=g.XP(e).filter((e=>e!==`${t.userId}`)).map((t=>e[t]));e=(0,p.from)(g.HK(a,"id"));break}}return e},ui:(e=se,t)=>{var a;switch(t.type){case"APP_OFFSET":e=(0,p.set)(e,"appOffset",t.value);break;case"CAN_SHOW_HOME_MESSAGE":if(t.name&&(!0===e.canShowHomeMessage||Array.isArray(e.canShowHomeMessage)&&e.canShowHomeMessage.includes(t.name)))break;e=(0,p.set)(e,"canShowHomeMessage",!t.name||(Array.isArray(e.canShowHomeMessage)?[...e.canShowHomeMessage,t.name]:[t.name]));break;case"COME_ONLINE":e=(0,p.set)(e,"online",!0);break;case"CREATE_HOME_MESSAGE":switch(t.name){case"marketingOptIn":case"plusBadge":case"plusBadgeFamily":e=(0,p.setIn)(e,["homeMessagingClientState",t.name],!0);break;case"schoolsJoinedClassroom":e=(0,p.setIn)(e,["homeMessagingClientState",t.name],{observerName:t.observerName})}break;case"DIMMED_OVERLAY_CLOSED":e=(0,p.set)(e,"isDimmedOverlayOpen",!1);break;case"DIMMED_OVERLAY_OPENED":e=(0,p.set)(e,"isDimmedOverlayOpen",!0);break;case"DISABLE_HOME_MESSAGE":case"DISMISS_HOME_MESSAGE":"DISMISS_HOME_MESSAGE"===t.type&&("dogfoodingPreview"!==t.name&&(e=(0,p.set)(e,"canShowHomeMessage",!1)),e=(0,p.set)(e,"homeMessage",void 0),e=(0,p.set)(e,"homeMessageData",void 0)),e=(0,p.setIn)(e,["homeMessagingClientState",t.name],void 0);break;case"ENGAGEMENT_OVERRIDE":e=(0,p.set)(e,"engagementOverride",t.value);break;case"GO_OFFLINE":e=(0,p.set)(e,"online",!1);break;case"LOGOUT":e=(0,p.set)(e,"isLoggingOut",!0);break;case"MICROPHONE_PERMISSION":e=(0,p.set)(e,"microphonePermission",t.value);break;case"MODAL_CLOSED":e=(0,p.set)(e,"isModalReallyOpen",!1);break;case"MODAL_MOUNTED":e=(0,p.set)(e,"availableModals",[...e.availableModals,t.name]);break;case"MODAL_OPENED":e=(0,p.set)(e,"isModalReallyOpen",!0);break;case"MODAL_UNMOUNTED":(null===(a=(e=(0,p.set)(e,"availableModals",e.availableModals.filter((e=>e!==t.name)))).modal)||void 0===a?void 0:a.name)===t.name&&(e=(0,p.set)(e,"modal",void 0),e=(0,p.set)(e,"modalIsUhmManaged",!1),e=(0,p.set)(e,"isModalReallyOpen",!1));break;case"HOME_MESSAGE_MEETS_TIME_CRITERION":e=(0,p.setIn)(e,["homeMessagingClientState",t.name],!0);break;case"PURCHASE_ITEM":switch(t.status){case"FAIL":case"SUCCESS":e=(0,p.set)(e,"purchasingItem",!1);break;case"START":e=(0,p.set)(e,"purchasingItem",!0)}break;case"RESIZE_WINDOW":e=(0,p.merge)(e,{viewportHeight:t.height,viewportWidth:t.width});break;case"SET_CAN_SHOW_AGE_RESTRICTED_LEADERBOARDS_INTRO":e=(0,p.set)(e,"canShowAgeRestrictedLeaderboardsIntro",t.isEligible);break;case"SET_HOME_MESSAGE":e=(0,p.set)(e,"homeMessage",t.name),e=(0,p.set)(e,"homeMessageData",t.data);break;case"SET_POPOVER":e=(0,p.merge)(e,{popoverId:t.id});break;case"SET_HOME_PAGE_POPOVER":e=(0,p.merge)(e,{homePagePopoverId:void 0!==t.id&&void 0!==t.section?`${t.section}/${t.id}`:void 0});break;case"SET_SELECTED_PATH_SECTION":e=(0,p.set)(e,"selectedPathSectionType",t.selectedPathSectionType);break;case"SET_SHOULD_RETURN_TO_SECTIONS":e=(0,p.set)(e,"shouldReturnToSections",t.shouldReturnToSections);break;case"SET_SPOTLIGHT_FOR_MODAL":e=(0,p.set)(e,"spotlightType",t.spotlightType);break;case"SET_STREAK_SOCIETY_INDUCTION_STATE":e=(0,p.set)(e,"inductedIntoStreakSociety",t.inductedIntoStreakSociety);break;case"SET_VISIBLE_UNIT_INDEX":e=(0,p.set)(e,"visibleUnitIndex",t.index);break;case"RECORDED_SESSION":e=(0,p.setIn)(e,["homeMessagingClientState","resurrectedWelcome"],void 0),e=(0,p.setIn)(e,["homeMessagingClientState","reactivatedWelcome"],void 0);break;case"SWITCH_COURSE":e=(0,p.set)(e,"isSwitchingCourse",!0);break;case"SWITCH_COURSE_END":e=(0,p.set)(e,"isSwitchingCourse",!1);break;case"TOGGLE_DRAWER":t.options?(e=(0,p.merge)(e,{drawer:t.options,drawerIsUhmManaged:!0===t.isUhmManaged,secondaryModal:void 0,spotlightType:t.options.spotlightType,toast:void 0,toastIsUhmManaged:!1}),t.keepFullscreenModal||(e=(0,p.merge)(e,{modal:void 0,modalIsUhmManaged:!1}))):e=(0,p.merge)(e,{drawer:void 0,drawerIsUhmManaged:!1,spotlightType:void 0});break;case"TOGGLE_MODAL":if(t.options){if(!e.availableModals.includes(t.options.name)&&t.options.name!==ae.t.HomeMessage)break;if(!1===t.replaceExisting&&e.modal)break;e=(0,p.merge)(e,{drawer:void 0,drawerIsUhmManaged:!1,modal:t.options,modalIsUhmManaged:!0===t.isUhmManaged,modalShouldWaitForOverlay:!e.isDimmedOverlayOpen,secondaryModal:void 0,spotlightType:t.options.spotlightType,toast:void 0,toastIsUhmManaged:!1})}else e=(0,p.merge)(e,{modal:void 0,modalIsUhmManaged:!1,secondaryModal:void 0,spotlightType:void 0});break;case"TOGGLE_SECONDARY_MODAL":if(void 0===t.options){e=(0,p.merge)(e,{secondaryModal:void 0});break}if(!e.availableModals.includes(t.options.name))break;e=(0,p.merge)(e,{drawer:void 0,drawerIsUhmManaged:!1,isDimmedOverlayOpen:!1,secondaryModal:t.options});break;case"TOGGLE_REQUEST_NOTIFICATION_PERMISSION":e=(0,p.set)(e,"isRequestingNotificationPermission",t.isVisible);break;case"TOGGLE_TOAST":e=t.options?(0,p.merge)(e,{drawer:void 0,drawerIsUhmManaged:!1,modal:void 0,modalIsUhmManaged:!1,toast:t.options,toastIsUhmManaged:!0===t.isUhmManaged}):(0,p.merge)(e,{toast:void 0,toastIsUhmManaged:!1});break;case"SET_SHOP_ITEMS":e=(0,p.set)(e,"isShopItemsFresh",!0);break;case"UNMOUNT":e=(0,p.set)(e,"shouldUnmount",!0);break;case"UPDATE_B2B_PRICING_DATA":e=(0,p.set)(e,"b2bPricingData",t.b2bPricingData);break;case"UPDATE_INVENTORY":e=(0,p.set)(e,"isInventoryFresh",!0);break;case"UPDATE_USER":e=(0,p.set)(e,"isUserModelFresh",!0)}return e},uiPersisted:(e=(0,p.from)({homeMessagingClientState:{},plusBannerShown:{count:0},reportedProfileUserIds:[],sessionEndPlusAdShown:{count:0},streakExtendedTimesLastSevenDays:[]}),t)=>{var a,s,n,r,i,o,l,c,d,u,g,m,h,_,v,f,b,S,y,E,k,w,T,C;switch(t.type){case"CREATE_HOME_MESSAGE":re(t.name)&&(e=(0,p.setIn)(e,["homeMessagingClientState",t.name],!0));break;case"CREATE_STREAK_REPAIRED_HOME_MESSAGE":e=(0,p.setIn)(e,["homeMessagingClientState","streakRepairApplied"],{expirationTime:(0,I.mm)(),length:t.length});break;case"DISABLE_HOME_MESSAGE":switch(t.name){case"darkMode":e=(0,p.setIn)(e,["homeMessagingClientState",t.name,"dontShow"],!0);break;case"streakRepairApplied":e=(0,p.setIn)(e,["homeMessagingClientState",t.name],void 0)}break;case"DISMISS_HOME_MESSAGE":if(re(t.name))e=(0,p.setIn)(e,["homeMessagingClientState",t.name],!1);else switch(t.name){case"darkMode":e=(0,p.setIn)(e,["homeMessagingClientState",t.name,"dontShow"],!0);break;case"reactivatedWelcome":case"resurrectedWelcome":e=(0,p.setIn)(e,["homeMessagingClientState",t.name,"lastClosed"],t.timestamp);break;case"streakRepairApplied":e=(0,p.setIn)(e,["homeMessagingClientState",t.name],void 0);break;case"newYearsDiscount":e=(0,p.setIn)(e,["homeMessagingClientState","newYearsDiscount"],{lastShown:t.timestamp})}break;case"HOME_MESSAGE_SHOWN":switch(t.name){case"mobileWebToAppConversion":case"pathChange":case"pathMigration":e=(0,p.setIn)(e,["homeMessagingClientState",t.name,"lastShown"],t.timestamp);break;case"streakFreezeRecurringOffer":case"webToAppConversion":case"webToAppConversionAggressive":{const a="webToAppConversionAggressive"===t.name?"webToAppConversion":t.name;e=(0,p.setIn)(e,["homeMessagingClientState",a,"lastShown"],t.timestamp),e=(0,p.updateIn)(e,["homeMessagingClientState",a,"shows"],(e=>(null!=e?e:0)+1));break}}"sidebar"===t.uiType&&e.sidebarHomeMessage&&(e=(0,p.setIn)(e,["sidebarHomeMessage","count"],e.sidebarHomeMessage.count+1),e=(0,p.setIn)(e,["sidebarHomeMessage","timestamp"],t.timestamp));break;case"PURCHASE_ITEM":"SUCCESS"===t.status&&"streak_freeze"===t.item.itemName&&(e=(0,p.setIn)(e,["homeMessagingClientState","streakFreezeRecurringOffer"],{shows:0}));break;case"UPDATE_USER":(null===(a=t.user.streakData)||void 0===a?void 0:a.currentStreak)&&t.user.streakData.currentStreak.length<3&&(e=(0,p.setIn)(e,["homeMessagingClientState","streakFreezeRecurringOffer"],{shows:0}));break;case"USED_TYPE_TO_SELECT_TOKEN":e=(0,p.setIn)(e,["typeToSelect","used"],!0);break;case"SET_LEADERBOARD_POSITION_STATE":e=(0,p.set)(e,"leaderboardPositionState",t.leaderboardPositionState);break;case"PLUS_BANNER_SHOWN":e=(0,p.set)(e,"plusBannerShown",{count:(null!==(n=null===(s=e.plusBannerShown)||void 0===s?void 0:s.count)&&void 0!==n?n:0)+1,lastShown:t.timestamp});break;case"SAVE_REPORTED_PROFILE_USER_ID":{const a=null!==(r=e.reportedProfileUserIds)&&void 0!==r?r:[];e=(0,p.set)(e,"reportedProfileUserIds",[t.profileUserId,...a.slice(0,32)]);break}case"SESSION_END_PLUS_AD_SHOWN":e=(0,p.set)(e,"sessionEndPlusAdShown",{count:(null!==(o=null===(i=e.sessionEndPlusAdShown)||void 0===i?void 0:i.count)&&void 0!==o?o:0)+1,lastShown:t.timestamp});break;case"SET_STREAK_PANEL_LAST_STREAK_MESSAGE_SHOWN":e=(0,p.set)(e,"streakPanelLastStreakMessageShown",{messageId:t.messageId,utcIsoDateString:t.utcIsoDateString});break;case"SET_STREAK_SOCIETY_REWARD_AVAILABLE":e=(0,p.set)(e,"streakSocietyNewRewardAvailable",t.newRewardAvailable);break;case"SET_STREAK_SOCIETY_REWARD_CLAIMED":e=(0,p.set)(e,"streakSocietyRewardClaimed",{reward:t.reward,timestamp:t.timestamp});break;case"SET_STREAK_SOCIETY_SHOW_RED_DOT":e=(0,p.set)(e,"streakSocietyShowRedDot",t.showRedDot);break;case"STREAK_EXPLAINER_ENTRY_POINT_SHOWN":e=(0,p.set)(e,"streakExplainer",{count:null!==(c=null===(l=e.streakExplainer)||void 0===l?void 0:l.count)&&void 0!==c?c:0,entryPointLastShown:t.timestamp});break;case"STREAK_EXPLAINER_SHOWN":e=(0,p.set)(e,"streakExplainer",{count:(null!==(u=null===(d=e.streakExplainer)||void 0===d?void 0:d.count)&&void 0!==u?u:0)+1,entryPointLastShown:null===(g=e.streakExplainer)||void 0===g?void 0:g.entryPointLastShown});break;case"STREAK_NUDGE_SHOWN":e=(0,p.set)(e,"streakNudgeShown",{count:t.resurrectionTimestamp===(null===(m=e.streakNudgeShown)||void 0===m?void 0:m.resurrectionTimestamp)?(null!==(_=null===(h=e.streakNudgeShown)||void 0===h?void 0:h.count)&&void 0!==_?_:0)+1:1,lastShown:t.timestamp,resurrectionTimestamp:t.resurrectionTimestamp});break;case"STREAK_SOCIETY_INDUCTION_SLIDE_SHOWN":e=(0,p.set)(e,"streakSocietyInductionSlideShownTime",t.timestamp);break;case"SET_SKIPPED_LEVEL":e=t.levelId||(null===(v=e.skippedLevelInfo)||void 0===v?void 0:v.levelId)?(0,p.set)(e,"skippedLevelInfo",{levelId:null!==(S=null!==(f=t.levelId)&&void 0!==f?f:null===(b=e.skippedLevelInfo)||void 0===b?void 0:b.levelId)&&void 0!==S?S:"",shouldReturnToSkippedLevel:t.shouldReturnToSkippedLevel}):(0,p.set)(e,"skippedLevelInfo",void 0);break;case"SUPER_PREVIEW_ENDING_CALLOUT_SHOWN":e=(0,p.setIn)(e,["homeMessagingClientState","superPreviewEndingCallout"],{lastShown:t.shownTimestampInMs,lastShownPurchaseId:t.superPreviewPurchaseId});break;case"SUPER_VIDEO_PROMO_SHOWN":e=(0,p.set)(e,"superVideoPromoShown",{count:(null!==(E=null===(y=e.superVideoPromoShown)||void 0===y?void 0:y.count)&&void 0!==E?E:0)+1,hasSeenFamilyPlan:null!==(w=t.isFamilyPlan||(null===(k=e.superVideoPromoShown)||void 0===k?void 0:k.hasSeenFamilyPlan))&&void 0!==w&&w,hasSeenNewYears:null!==(C=t.isNewYears||(null===(T=e.superVideoPromoShown)||void 0===T?void 0:T.hasSeenNewYears))&&void 0!==C&&C,lastShownTimestamp:t.timestamp});break;case"TOGGLE_DRAWER":case"TOGGLE_MODAL":t.options&&t.isUhmManaged&&(e=(0,p.set)(e,"sidebarHomeMessage",void 0));break;case"TOGGLE_SIDEBAR_HOME_MESSAGE":e=t.messageName?(0,p.set)(e,"sidebarHomeMessage",{count:0,lastShown:void 0,messageName:t.messageName}):(0,p.set)(e,"sidebarHomeMessage",void 0);break;case"UPDATE_STREAKS_EXTENDED_TIMES":{const a=[...e.streakExtendedTimesLastSevenDays,t.streakExtension],s=(0,ne.kD)(t.streakExtension,I.ee,a);e=(0,p.set)(e,"streakExtendedTimesLastSevenDays",s)}}return e},user:(e=(0,p.from)({coachRecords:{},explanationsSeen:{},gemsConfig:{gems:0,gemsPerSkill:0,useGems:!1},lingots:0,recentlySeenSmartTips:{},sessionsCompleted:0,streakData:{currentStreak:null,longestStreak:null,previousStreak:null}}),t)=>{var a,s,n,r,i,o,l,c,d,u,m,h,_;switch(t.type){case"MARK_NOTIFICATIONS_READ":e=(0,p.set)(e,"webNotificationIds",[]);break;case"DISABLE_HOME_MESSAGE":case"DISMISS_HOME_MESSAGE":ie.Qd[t.name]?e=(0,p.set)(e,"persistentNotifications",g.zu(e.persistentNotifications,ie.Qd[t.name])):("streakRepairOffer"===t.name&&(e=(0,p.set)(e,"streakRepairOffer",void 0)),"DISMISS_HOME_MESSAGE"===t.type&&"immersivePlusPromo"===t.name&&(e=(0,p.set)(e,"premiumExpirationTimestampSeconds",void 0)));break;case"ACTIVATE_SUPER":e=(0,p.set)(e,"premiumExpirationTimestampSeconds",t.premiumExpirationTimestampSeconds);break;case"ADD_SUPER_DISCOUNT":e=(0,p.setIn)(e,["plusDiscounts"],[le(t.apiDiscount),...e.plusDiscounts]);break;case"REMOVE_SUPER_DISCOUNT":e=(0,p.setIn)(e,["plusDiscounts"],e.plusDiscounts.filter((e=>e.discountType!==t.discountType)));break;case"EXPLANATION_SHOWN":e=(0,p.setIn)(e,["explanationsSeen",t.explanationSkillId],t.timestamp);break;case"PURCHASE_ITEM":if("SUCCESS"!==t.status)break;e=e.gemsConfig.useGems?(0,p.setIn)(e,["gemsConfig","gems"],e.gemsConfig.gems-t.item.purchasePrice*(null!==(a=t.purchaseQuantity)&&void 0!==a?a:1)):(0,p.set)(e,"lingots",e.lingots-t.item.purchasePrice*(null!==(s=t.purchaseQuantity)&&void 0!==s?s:1));break;case"SET_STREAK_GOAL":e=(0,p.set)(e,"selectedStreakGoal",t.streakGoal);break;case"UPDATE_EXPERIMENT_RECORD":{const a=e.experiments[t.name];a&&(e=(0,v.$f)(e,["experiments",t.name],{condition:null!==(n=t.condition)&&void 0!==n?n:a.condition,contexts:t.context&&!a.contexts.includes(t.context)?[...a.contexts,t.context].sort():a.contexts,treated:t.treated}));break}case"REFRESH_PRACTICE_HUB":e=(0,v.$f)(e,["practiceHubInfo",t.courseId],t.practiceHubCourseInfo);break;case"COMPLETE_PRACTICE_HUB_FEATURED_STORY":e=(0,p.setIn)(e,["practiceHubInfo",t.courseId,"featuredStory","completed"],!0);break;case"COMPLETE_PRACTICE_HUB_SESSION":if(void 0===(null===(r=e.practiceHubInfo)||void 0===r?void 0:r[t.courseId]))throw Error("Tried to update practice hub session completion status in redux without practice hub data.");e=(0,p.setIn)(e,["practiceHubInfo",t.courseId,"sessions",t.sessionName,"completed"],!0);break;case"FAMILY_PLAN_REPORT_VISITED":e=(0,p.set)(e,"familyPlanWeeklyReportLastVisited",t.timestamp);break;case"MISTAKES_VISITED":if(void 0===(null===(i=e.practiceHubInfo)||void 0===i?void 0:i[t.courseId]))throw Error("Tried to update mistakes visited timestamp in redux without practice hub course info.");e=(0,p.setIn)(e,["practiceHubInfo",t.courseId,"timestampMistakesLastVisited"],t.timestamp);break;case"PRACTICE_HUB_VISITED":if(void 0===(null===(o=e.practiceHubInfo)||void 0===o?void 0:o[t.courseId]))throw Error("Tried to update practice hub tab visited timestamp in redux without practice hub course info.");e=(0,p.setIn)(e,["practiceHubInfo",t.courseId,"timestampTabLastVisited"],t.timestamp);break;case"WORDS_LIST_VISITED":{const a=null===(l=e.practiceHubInfo)||void 0===l?void 0:l[t.courseId];(null==a?void 0:a.wordsList)&&(e=(0,p.setIn)(e,["practiceHubInfo",t.courseId,"wordsList","lastVisitLexemeCount"],a.wordsList.currentLexemeCount));break}case"WORDS_LIST_UPDATE_CURRENT_COUNT":(null===(c=e.practiceHubInfo)||void 0===c?void 0:c[t.courseId])&&(e=(0,p.setIn)(e,["practiceHubInfo",t.courseId,"wordsList","currentLexemeCount"],t.lexemeCount));break;case"RECORDED_SESSION":e=(0,p.set)(e,"lastSessionFinished",t.timestamp/1e3),e=(0,p.set)(e,"sessionCount",e.sessionCount+1),e=(0,p.set)(e,"sessionsCompleted",e.sessionsCompleted+1);break;case"UPDATE_USER_LINGOTS":e=(0,p.setIn)(e,["lingots"],e.lingots+t.lingots);break;case"UPDATE_USER_GEMS":e=(0,p.setIn)(e,["gemsConfig","gems"],e.gemsConfig.gems+t.gems);break;case"CONSUME_DAILY_GOAL_REWARD":{const t=(0,p.asMutable)(e.rewardBundles).map((e=>"DAILY_GOAL_DOUBLE"===e.rewardBundleType?(0,p.updateIn)(e,["rewards",0,"consumed"],(()=>!0)):e));e=(0,p.set)(e,"rewardBundles",t);break}case"CONSUME_DAILY_QUEST_REWARD":{const a=e.rewardBundles.map((e=>{const a=e.rewards.map((e=>e.id===t.rewardId?Object.assign(Object.assign({},e),{consumed:!0}):e));return Object.assign(Object.assign({},e),{rewards:a})}));e=(0,p.set)(e,"rewardBundles",a);break}case"CONSUME_FRIENDS_QUEST_GEMS":{const t=(0,p.asMutable)(e.rewardBundles).map((e=>"FRIENDS_QUEST_GEMS"===e.rewardBundleType?(0,p.setIn)(e,["rewards",0,"consumed"],!0):e));e=(0,p.set)(e,"rewardBundles",t);break}case"CONSUME_FRIENDS_QUEST_XP_BOOST":{const t=(0,p.asMutable)(e.rewardBundles).map((e=>"FRIENDS_QUEST_XP_BOOST"===e.rewardBundleType?(0,p.setIn)(e,["rewards",0,"consumed"],!0):e));e=(0,p.set)(e,"rewardBundles",t);break}case"COACH_DUO_SHOWN":{const a=t.model.showReason,s=null===(d=e.coachRecords)||void 0===d?void 0:d[a],n=void 0===s?0:(0,I.zk)((0,I.zM)(s.lastShown))?s.timesShownToday:0,r={lastShown:t.timestamp/1e3,timesShownToday:n+1};e=(0,p.setIn)(e,["coachRecords",a],r);break}case"RESET_COACH":e=(0,p.set)(e,"coachRecords",{});break;case"SET_MISTAKE_COUNT":(void 0===e.mistakeCountInfo||void 0===t.mistakeCountInfo||t.mistakeCountInfo.expirationTime>e.mistakeCountInfo.expirationTime)&&(e=(0,p.set)(e,"mistakeCountInfo",t.mistakeCountInfo));break;case"SET_SMART_TIP_TO_SHOW":{const a=Object.assign({},e.recentlySeenSmartTips);g.XP(a).forEach((e=>{a[e]<t.timestamp&&delete a[e]})),e=(0,p.set)(e,"recentlySeenSmartTips",a);const s=t.smartTipResource,n=(0,oe.r8)(s),r=t.timestamp+(null!==(u=s.policy.minimumTimeBetweenShows)&&void 0!==u?u:oe.U);e=(0,p.setIn)(e,["recentlySeenSmartTips",n],r);break}case"SET_SHOULD_TRACK_FIRST_PATH":e=(0,p.set)(e,"shouldTrackSeeFirstPath",!0);break;case"RESET_SHOULD_TRACK_FIRST_PATH":e=(0,p.set)(e,"shouldTrackSeeFirstPath",void 0);break;case"LEAVE_CLASSROOM":e=(0,p.set)(e,"classroomLeaderboardsEnabled",!1);break;case"SET_XP_SUMMARIES":e=(0,p.set)(e,"xpSummaries",t.xpSummaries);break;case"UPDATE_USER":{const a=t.user,{currentCourse:s,courses:n,health:r,plusDiscounts:i}=a,o=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]])}return a}(a,["currentCourse","courses","health","plusDiscounts"]),l=(0,v.Xh)(o);if(n&&(l.courses=n.map((e=>e.id))),s&&(l.currentCourseId=s.id),i){const t=Date.now();l.plusDiscounts=[...null!==(h=null===(m=e.plusDiscounts)||void 0===m?void 0:m.filter((e=>e.expirationTime>t&&(0,k.gB)(e.discountType,L.y1))))&&void 0!==h?h:[],...i.map((e=>le(e)))]}(null===(_=l.lastStreak)||void 0===_?void 0:_.isAvailableForRepair)&&!(null==e?void 0:e.streakRepairOffer)?l.streakRepairOffer={expirationTime:(0,I.HR)(172800),length:l.lastStreak.length}:l.lastStreak&&!l.lastStreak.isAvailableForRepair&&(l.streakRepairOffer=void 0),e=((e,t)=>{for(const[a,s]of Object.entries(t)){const t="object"==typeof s&&null!=s&&!Array.isArray(s)&&void 0!==e[a]&&ce(a)?(0,p.merge)(e[a],s,{deep:!0}):s;e=(0,p.set)(e,a,t)}return e})(e,l),l.adsConfig&&(e=(0,p.set)(e,"adsConfig",l.adsConfig));break}}return e},yearInReview:(e=(0,p.from)({}),t)=>("SET_YEAR_IN_REVIEW_REPORT_ID"===t.type&&(e=(0,p.set)(e,"yearInReviewReportId",t.reportId)),e)});var pe=a(86540),ge=a(54412),me=a(80388),he=a(50548),_e=a(53229),ve=a(43633),fe=a(89803),be=a(71371),Se=a(12301),ye=a(88868),Ee=a(3800),Ie=a(20028);let ke;Ee.h&&console.log("Showing only plain info"),document.documentElement.lang=window.duo.uiLanguage,"true"!==(0,ge.ej)(ge.Vj.RedirectToPreview)||window.location.host===ye.Vb||window.location.host===ye.a_||E.NY()||(0,ye.Zs)((0,ye.gg)(window.location.href),!0),["join.duolingo.com","www-internal.duolingo.com"].includes(window.location.host)&&(0,ye.Zs)(window.location.href.replace(window.location.host,ye.Z2));try{ke=(0,J.Jb)()}catch(e){}Se.q.initialize((()=>({jotai:{},redux:(0,de.Gl)()})),(e=>void 0===ke?"No user credentials found":e.redux.user.id!==ke?"User credentials mismatch":void 0));const we=(0,de.xC)({persister:Se.q.bindSubstate("redux"),rootReducer:(e=(0,de.Gl)(),t)=>("RESET_STATE"===t.type&&(e=(0,de.Gl)()),ue(e,t))});(0,ve.gh)({persister:Se.q.bindSubstate("jotai"),reduxStore:we}),(0,Ie.Go)(we.getState().user)&&E.R(),(()=>{const e=(0,ge.ej)(ge.Vj.JWT);e&&((0,ge.nJ)(ge.Vj.JWT),(0,ge.d8)(ge.Vj.JWT,e,!0,!(0,me.J9)()))})(),(0,fe.vi)();const Te=["/","/learn"].includes(window.location.pathname);if(ke)console.log("User is logged in"),Te&&be.Z.start("splash_to_home");else{console.log("User is not logged in"),Te&&be.Z.start("splash_to_intro");const e=(0,ge.ej)(ge.Vj.LoggedOutUUID);e&&r.setDistinctId(e),(0,i.dl)()}const Ce=(0,_e.Lm)();r.canSetCampaignInfo(Ce)&&r.setCampaignInfo(Ce),r.track("app_open",{}),r.trackUserActive2022({activity_trigger:"app_foregrounded"}),(0,ge.ej)(ge.Vj.ShouldTrackWelcome)&&(r.track("welcome",{}),(0,ge.nJ)(ge.Vj.ShouldTrackWelcome)),(0,l.render)(o.createElement(d.zt,{store:we},o.createElement(u.F0,{history:he.m8},o.createElement(c.B6,null,o.createElement(pe.xq,null)))),document.getElementById("root"))},86540:(e,t,a)=>{"use strict";a.d(t,{xq:()=>pi,vH:()=>jr,HL:()=>ln,dr:()=>Hr});var s=a(27378),n=a(3620),r=a(40412),i=a(61714),o=a(80254),l=a(3583),c=a(79129),d=a(85207),u=a(59073),p=a(59815),g=a(51158),m=a(11908),h=a(18804),_=a(79465);class v extends s.Component{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}async componentDidCatch(e,t){if(console.warn("RedirectingErrorBoundary caught an error"),!(0,p.Wp)(e)){const a=(0,g.vU)(e,{data:Object.assign(Object.assign({},t),{isFromRedirectingErrorBoundary:!0})});await(0,_.track)("app_crash",{crash_message:e.message,crash_type:e.name,rollbar_uuid:null==a?void 0:a.uuid},!1)}(0,p.Wp)(e)||((0,m.cl)(m.Qt.State),this.props.dispatch({type:"UNMOUNT"}))}render(){return this.state.hasError?null:this.props.children}}const f=e=>{const t=(0,h.tX)();return s.createElement(v,Object.assign({dispatch:t},e))};var b=a(62183),S=a(51900),y=a(36011);const E=e=>{switch(e){case"heartsInSession":return 25;case"gemsInHomepage":return 30;default:return 0}},I=({spotlightType:e})=>{const t=s.useContext(y.Mk),[a,n]=s.useState(),r=s.useCallback((()=>{const a=(()=>{var a,s,n,r;switch(e){case"heartsInSession":return null===(s=null===(a=null==t?void 0:t.getHeartsStatInLessonRef)||void 0===a?void 0:a.call(t))||void 0===s?void 0:s.getBoundingClientRect();case"gemsInHomepage":return null===(r=null===(n=null==t?void 0:t.getGemsHomepageRef)||void 0===n?void 0:n.call(t))||void 0===r?void 0:r.getBoundingClientRect();default:return}})();if(a)return{cx:a.x+a.width/2,cy:a.y+a.height/2,height:window.innerHeight,r:Math.max(a.width,a.height)/2+E(e),width:window.innerWidth}}),[e,t]),i=s.useCallback((()=>{n(r())}),[n,r]);return s.useLayoutEffect((()=>{n(r())}),[]),s.useEffect((()=>(null==t||t.addCallback(e,r),()=>{null==t||t.removeCallback(e,r)})),[r,t,e]),s.useEffect((()=>(window.addEventListener("resize",i),()=>window.removeEventListener("resize",i))),[i]),void 0===a?s.createElement(S.Z,null):s.createElement(b.Z,Object.assign({direction:"down",isVisible:!0,zIndex:300},a))};var k=a(17818),w=a(50548),T=a(88868);const C=()=>{const e=(0,w.k6)(),t=(0,w.TH)(),a=s.useRef(),n=[T.B6,"/leaderboard","/shop"].includes(t.pathname)?"manual":"auto";return s.useLayoutEffect((()=>{window.history.scrollRestoration=n}),[n]),s.useLayoutEffect((()=>{if(t.pathname!==a.current){const a=[T.B6,"/leaderboard"].includes(t.pathname),s="POP"===e.action;a||s||k.O.scrollTo(0,0)}a.current=t.pathname})),null};var R=a(44451),L=a(43464),O=a(80388),P=a(17135);const A=e=>{const t=(0,h.tX)(),a=(0,h.Fx)((t=>t.brb[e].ignoreUntil)),n=(0,h.Fx)((t=>t.brb[e].resetAt)),r=(0,h.Fx)((t=>t.brb[e].status)),i=s.useRef(),l=s.useRef(r);i.current=async s=>{if(void 0!==a&&Date.now()<a)return;if("enabled"===r&&"visible"!==document.visibilityState)return;const i=(0,O.J9)()||(0,m.rV)(m.Qt.DisableBigRedButton)?"disabled":"brb"===e?await L.bG.getBrbStatus():await L.bG.getZombieStatus();s.aborted||(r!==i?"enabled"===i?(console.warn(`Enabling ${"brb"===e?"maintenance":"Zombie"} mode.`),t({mode:e,resetAt:Date.now()+1e3*(0,P.dz)({hours:5,minutes:o.MX(0,5)}),type:"brb/ENABLED"})):(console.warn(`Disabling ${"brb"===e?"maintenance":"Zombie"} mode.`),t({mode:e,type:"brb/DISABLED"})):void 0!==n&&Date.now()>=n&&(console.warn(`Disabling ${"brb"===e?"maintenance":"Zombie"} mode automatically after 5 hours.`),t({ignoreUntil:Date.now()+1e3*(0,P.dz)({hours:12}),mode:e,type:"brb/IGNORED"})))},l.current=r,s.useEffect((()=>{const e=new AbortController,t=e.signal,a=async()=>{var e;t.aborted||(await(null===(e=i.current)||void 0===e?void 0:e.call(i,t)),setTimeout(a,1e3*o.MX(30,"enabled"===l.current?300:60)))};return a(),()=>e.abort()}),[])};var D=a(58034),x=a(42659),N=a(39852),F=a(16086);var M=a(15746),U=a(88787);var H=a(27429);let j=Date.now();const G=3e5,B=["mousedown","keydown","touchstart"];var V=a(50791),z=a(15879),Z=a(85394);var $=a(39325),W=a(87539);var q=a(8654),Q=a(35160);const Y=()=>s.createElement(W.Z,{className:"_2fUdB",closeStyle:"hidden",customStyle:Q.W.Custom,modalName:Q.t.ChangeUiLanguage},(({onDismiss:e,modalOptions:{languageName:t,onSwitchLanguage:a}})=>s.createElement(s.Fragment,null,s.createElement("div",{className:"_31Q1X"},(0,q._i)(18428,{language_name:t})),s.createElement("div",{className:"_3-cmG"},(0,q._i)(21141,{language_name:t})),s.createElement($.Z,{className:"c_t7A",color:"macaw",onClick:()=>{e(),a()},variant:"solid"},(0,q._i)(30820,{language_name:t})),s.createElement($.Z,{className:"ee1sn",color:"macaw",onClick:e,variant:"text"},(0,q._i)(23427)))));var K=a(15094),J=a(47725),X=a(43670),ee=a(60042),te=a.n(ee),ae=a(77727);var se=a(30033);const ne=({[se.m5]:e,autoComplete:t,autoFocus:a,disabled:n,error:r,linkComponent:i,onBlur:o,onChange:l,onResetError:c,placeholder:d,suggestedUsernames:u,tooltip:p,type:g,value:m})=>{const h=s.useRef(null),v=r?(null==u?void 0:u.length)?s.createElement("span",null,r,u.map((e=>s.createElement("span",{key:e}," ",s.createElement($.Z,{className:"_3tqFH",onClick:()=>{l(e),null==c||c()},type:"button"},e))))):r:s.createElement("span",{className:"tgCQX"},p);return s.useEffect((()=>{var e;a&&(null===(e=h.current)||void 0===e||e.focus())}),[]),s.createElement(ae.Z,Object.assign({},(0,se._q)(e),{autoComplete:t,className:te()("_3MNft",_.FULL_STORY_EXCLUDE),hasError:void 0!==r,helperText:v,linkComponent:i,onBlur:o,onChange:e=>l(e.target.value),placeholder:d,ref:h,state:n?"disabled":"enabled",type:g,value:m}))};var re=a(67173);const ie=({children:e})=>e?s.createElement("div",Object.assign({},(0,se._q)(re.V.InvalidFormField),{className:"_1G8OV _14ezr"}),e):null,oe=({children:e})=>{const t=s.Children.toArray(e).filter((e=>!!e)).map(((e,t)=>s.createElement(ie,{key:t},e)));return t.length?s.createElement("div",{className:"_2pLas _14ezr"},t):null};var le=a(25132),ce=a(14649);const de=a.p+"images/ded9ca9461387f30221b67f627227388.svg";var ue=a(90778),pe=a(45437),ge=a(20750),me=a(9115),he=a(13567);const _e={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","juicy-bee":"rgb(var(--color-bee))","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","z-index-modal":"310","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210","modal-wrapper":"_3gyBG","right-controls":"_3Kwrp",modal:"_2z95t",table:"_3jeu0","link-container":"_8oBzi","link-container-stacked":"_2Jpfm _8oBzi","account-icon":"_3zB0T",button:"_2oW4v",header:"_2xBMb",title:"_2GC65","signin-error-message":"fJChu","last-login-name":"_2-N6b","blue-link":"_3WxKE _2__FI _1I0jE _3yAjN","blue-link-body":"_24PjM _2__FI _1I0jE _3yAjN","created-with-social-title":"_3SARz _2GC65","created-with-social-body":"_5vH8Z",google:"xijNL _1-mWU",facebook:"_3U3Uo _3kyUU","require-google-button":"_1_jR6 _1-mWU",footer:"_29viM","terms-and-privacy":"_29ZQh","no-account":"_1hKmP","no-account-link":"oRujQ",hr:"_7pBya","hr-bar":"_2_JcM","hr-text":"_36kWA _3yAjN","google-sign-in-up-header":"zKlGX","google-sign-in-up-title":"_2i91r","google-sign-in-up-subtitle":"_2IFvx"};var ve=a(17383),fe=a(70326),be=a(41679),Se=a(8649),ye=a(67574),Ee=a(67899),Ie=a(53229),ke=a(97252),we=a(36914),Te=a(71371),Ce=a(6986),Re=a(81621),Le=a(20028),Oe=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]])}return a};const Pe=({dispatch:e,errors:t,focusPasswordField:a=!1,identifier:n,onIdentifierChange:r,onPasswordChange:i,password:o,showEmailField:l,submitting:c,via:d})=>s.createElement("div",{className:_e.table},l?s.createElement(ne,Object.assign({autoComplete:"email",disabled:!!c,error:t.identifier,onChange:r,placeholder:(0,q.H8)(14299),type:"text",value:n},(0,se._q)(re.V.EmailInput))):null,s.createElement(ne,Object.assign({autoComplete:"current-password",autoFocus:a,disabled:!!c,error:t.password,linkComponent:s.createElement(J.Z,Object.assign({},(0,se._q)(re.V.ForgotPassword),{href:"/forgot_password",onClick:()=>{(0,_.track)("sign_in_tap",{target:"forgot_password",via:d}),e({options:void 0,type:"TOGGLE_MODAL"})},tabIndex:-1}),(0,q._i)(18857)),onChange:i,placeholder:(0,q.H8)(18716),type:"password",value:o},(0,se._q)(re.V.PasswordInput)))),Ae=({age:e,ageRestricted:t,hideAge:a,isUGCDisabled:n,email:r,errors:i,name:o,onAgeBlur:l,onAgeChange:c,onEmailChange:d,onNameChange:u,onPasswordChange:p,onResetError:g,onUsernameBlur:m,onUsernameChange:h,password:_,submitting:v,username:f})=>s.createElement("div",{className:_e.table},a?null:s.createElement(ne,Object.assign({disabled:!!v,error:i.age,onBlur:l,onChange:c,placeholder:(0,q.H8)(15038),tooltip:(0,q._i)(19089),type:"text",value:e},(0,se._q)(re.V.AgeInput))),n?null:t?s.createElement(ne,Object.assign({autoComplete:"username",disabled:!!v,error:i.username,onBlur:m,onChange:h,onResetError:g,placeholder:(0,q.H8)(17475),suggestedUsernames:i.suggestedUsernames,type:"text",value:f},(0,se._q)(re.V.UsernameInput))):s.createElement(ne,Object.assign({autoComplete:"name",disabled:!!v,error:i.name,onChange:u,placeholder:(0,q.H8)(6101),type:"text",value:o},(0,se._q)(re.V.FullNameInput))),s.createElement(ne,Object.assign({autoComplete:"email",disabled:!!v,error:i.email,onChange:d,placeholder:t?(0,q.H8)(24103):(0,q.H8)(2928),type:"email",value:r},(0,se._q)(re.V.EmailInput))),s.createElement(ne,Object.assign({autoComplete:"new-password",disabled:!!v,error:i.password,onChange:p,placeholder:(0,q.H8)(18716),type:"password",value:_},(0,se._q)(re.V.PasswordInput)))),De=({onClick:e,platform:t,submitting:a})=>s.createElement($.Z,Object.assign({className:_e[t],disabled:!1!==a&&a!==t,onClick:"google"===t?void 0:e,submitting:a===t,type:"button",unstyledDisabled:!0,variant:"stroke"},"facebook"===t?(0,se._q)(re.V.LoginWithFacebook):(0,se._q)(re.V.LoginWithGoogle)),s.createElement("img",{className:_e["account-icon"],src:"facebook"===t?de:ge}),(0,q._i)("facebook"===t?17511:11701),"google"===t?s.createElement(le.Z,{onClick:e}):null),xe=e=>{var{errors:t,header:a,lastLoginType:n,name:r="",onFacebookClick:i,onGoogleClick:o,onUseAnotherAccount:l,picture:c=Re.tU,registerButton:d,signInErrors:u,submitting:p,title:g,via:m}=e,h=Oe(e,["errors","header","lastLoginType","name","onFacebookClick","onGoogleClick","onUseAnotherAccount","picture","registerButton","signInErrors","submitting","title","via"]);return s.createElement("div",null,s.createElement("div",null,a?s.createElement("div",{className:_e.header},a):null,s.createElement("h1",{className:_e.title},g),s.createElement(X.Z,{size:"medium",user:{id:0,name:r,picture:c}}),s.createElement("div",{className:_e["last-login-name"]},r),s.createElement("div",Object.assign({},(0,se._q)(re.V.UseAnotherAccount),{className:_e["blue-link"],onClick:l}),s.createElement("span",null,(0,q._i)(2745)))),"email"===n?s.createElement("div",null,s.createElement(Pe,Object.assign({errors:u?{}:t,showEmailField:!1,submitting:p,via:m},h)),u,d):"social"===n?s.createElement("p",{className:_e["link-container-stacked"]},s.createElement(De,{onClick:i,platform:"facebook",submitting:p}),s.createElement(De,{onClick:o,platform:"google",submitting:p})):null)},Ne=({isSignIn:e,onGoogleClick:t,renderHeader:a,renderSubtitle:n,renderTitle:r,submitting:i})=>{var o;return s.createElement("div",null,s.createElement("div",{className:_e["google-sign-in-up-header"]},void 0===a?null:s.createElement("div",{className:_e["google-sign-in-up-header"]},a(e)),s.createElement("h1",{className:_e["google-sign-in-up-title"]},null!==(o=null==r?void 0:r(e))&&void 0!==o?o:(0,q._i)(43395)),n?s.createElement("p",{className:_e["google-sign-in-up-subtitle"]},n(e)):null),s.createElement($.Z,{className:_e["require-google-button"],submitting:"google"===i,type:"button",variant:"stroke"},s.createElement("img",{className:ve.Z["account-icon"],src:ge}),s.createElement("span",{className:ve.Z["account-text"]},(0,q._i)(1327)),s.createElement(le.Z,{onClick:t})))},Fe=({name:e,picture:t,platform:a,onFacebookClick:n,onGoogleClick:r,onUseAnotherAccount:i,submitting:o})=>{const l="dark"===(0,K.F)();return s.createElement("div",null,s.createElement("div",null,s.createElement("h1",{className:_e["created-with-social-title"]},(0,q._i)("facebook"===a?23083:693)),s.createElement(X.Z,{size:"large",user:{id:0,name:e,picture:t}}),s.createElement("div",{className:_e["last-login-name"]},e)),s.createElement("div",{className:_e["created-with-social-body"]},s.createElement($.Z,Object.assign({},"facebook"===a?(0,se._q)(re.V.ContinueWithFacebook):(0,se._q)(re.V.ContinueWithGoogle),{className:ve.Z[`${a}-solid`],onClick:"facebook"===a?n:void 0,submitting:o===a,type:"button",variant:"solid"}),s.createElement("img",{className:ve.Z["account-icon"],src:"facebook"===a?l?ue:pe:l?me:he}),s.createElement("span",{className:ve.Z["account-text"]},(0,q._i)("facebook"===a?15620:1327)),"google"===a?s.createElement(le.Z,{onClick:r}):null),s.createElement("div",{className:_e["blue-link-body"],onClick:i},s.createElement("span",null,(0,q._i)(2745)))))},Me=e=>{var t,{errors:a,isFamilyPlan:n,ipCountry:r,isSignIn:i,onFacebookClick:o,onGoogleClick:l,renderHeader:c,renderTitle:d,registerButton:u,signInErrors:p,submitting:g}=e,m=Oe(e,["errors","isFamilyPlan","ipCountry","isSignIn","onFacebookClick","onGoogleClick","renderHeader","renderTitle","registerButton","signInErrors","submitting"]);return s.createElement("div",null,void 0===c?null:s.createElement("div",{className:_e.header},c(i)),s.createElement("h1",{className:_e.title},null!==(t=null==d?void 0:d(i))&&void 0!==t?t:i?(0,q._i)(43395):(0,q._i)(14145)),i?s.createElement(Pe,Object.assign({errors:p?{}:a,submitting:g},m)):s.createElement(Ae,Object.assign({errors:a,submitting:g},m)),p,u,!i&&(0,we.m8)(r)?null:s.createElement(s.Fragment,null,s.createElement("div",{className:_e.hr},s.createElement("div",{className:_e["hr-bar"]}),s.createElement("div",{className:_e["hr-text"]},(0,q._i)(18747)),s.createElement("div",{className:_e["hr-bar"]})),s.createElement("p",{className:_e["link-container"]},s.createElement(De,{onClick:o,platform:"facebook",submitting:g}),s.createElement(De,{onClick:l,platform:"google",submitting:g}))))};class Ue extends s.Component{constructor(){super(...arguments),this.state={ageRestricted:!1,alternateView:null,errors:{},fields:{age:"",email:"",identifier:"",name:"",password:"",username:""},isUsernameVerified:!1,loginAttempts:{count:0,emailSent:!1,lastEmailUsed:"",showEmailSentNotification:!1},submitting:!1,useImprovedErrorMessages:!1},this.memoizeUsernameValidate=o.HP(fe.rV),this.mounted=!1,this.emailSignup=async(e,t)=>{const{dispatch:a,modalOptions:{allowLanguagelessUser:s}}=this.props,{ageRestricted:n}=this.state,r={};if(e.email.trim()||(r.email=(0,q.H8)(11696)),e.password.trim()||(r.password=(0,q.H8)(5030)),t||e.age.trim()||(r.age=(0,q.H8)(15012)),!o.xb(r))return Promise.reject(new fe.Wj(!1,r));const i=Object.assign(Object.assign({},e),{age:e.age,name:n?null:e.name,username:n?e.username:null});if((0,F.Pc)())try{await a((0,Z.DZ)(i,!1,!0)),this.trackSuccessfulSignUp()}catch(e){this.handleSignUpFail(e)}else{s||(0,g.Kp)("Forced to create languageless user account despite being asked not to.");try{await(0,fe.$C)(i),await a((0,Z.eY)()),this.trackSuccessfulSignUp()}catch(e){this.handleSignUpFail(e)}}},this.trackSuccessfulSignUp=()=>{const{dispatch:e,modalOptions:{limitRedirect:t,via:a}}=this.props;(0,_.track)("register",{successful:!0,through:"email",via:a}),(0,Ee.SX)({event:"sign_up"}),this.handleGeneralSuccess(!1,t),(async()=>{await e(ce._()),(0,ke.Q0)({dispatch:e})})()},this.handleUseAnotherAccount=()=>{const{modalOptions:{via:e}}=this.props;(0,_.track)("sign_in_tap",{target:"use_another_account",via:e}),this.clearAlternateView()},this.handleSignUpFail=e=>{var t,a;const{modalOptions:{via:s}}=this.props;if((0,_.track)("register",{successful:!1,through:"email",via:s}),e instanceof fe.Wj)throw e;const n=(0,L.Hx)(e)&&(null===(a=null===(t=e.response)||void 0===t?void 0:t.data)||void 0===a?void 0:a.details);throw n?(0,fe.lV)(n):new fe.Wj(!1,{})},this.facebookSignup=async()=>{const{dispatch:e,history:t,modalOptions:{allowLanguagelessUser:a,isSignIn:s,limitRedirect:n,redirectPath:r=T.B6,trackingProps:i,via:o}}=this.props;this.setState({errors:{},submitting:"facebook"});try{(0,_.track)(s?"sign_in_tap":"registration_tap",Object.assign({target:"facebook",via:o},i));const l=await(0,be.k3)({allowLanguagelessUser:a,dispatch:e,history:t,onLoginSuccess:this.handleLoginSuccess,redirectPath:r,via:o});this.handleGeneralSuccess(l,n)}catch(e){this.setState({submitting:!1}),s||this.handleRegisterFailure("facebook")}},this.clearAlternateView=()=>{this.setState({alternateView:null}),(0,Ce.ub)()},this.googleSignup=async()=>{const{dispatch:e,modalOptions:{allowLanguagelessUser:t,isSignIn:a,limitRedirect:s,redirectPath:n=T.B6,trackingProps:r,via:i},history:o}=this.props;this.setState({errors:{},submitting:!1});try{(0,_.track)(a?"sign_in_tap":"registration_tap",Object.assign({target:"google",via:i},r));const l=await(0,ye.F)({allowLanguagelessUser:t,dispatch:e,history:o,onLoginSuccess:this.handleLoginSuccess,redirectPath:n,setSubmitting:()=>this.setState({submitting:"google"}),via:i});this.handleGeneralSuccess(l,s)}catch(e){this.setState({errors:{social:(0,q.H8)(19737)},submitting:!1,useImprovedErrorMessages:!0}),a||this.handleRegisterFailure("google")}},this.handleAgeChange=()=>{this.setState({ageRestricted:parseInt(this.state.fields.age,10)<this.props.config.ageRestrictionLimit})},this.validateUsername=async()=>{if(!this.state.fields.username||!this.state.ageRestricted)return!0;const e=this.state.fields.username;try{if(await this.memoizeUsernameValidate(e),this.mounted)return this.setState((t=>{if(e===t.fields.username){const e=t.errors,{username:a}=e;return{errors:Oe(e,["username"]),isUsernameVerified:!0}}return null})),!0}catch(t){if(t instanceof fe.Wj)return this.mounted&&this.setState((a=>e===a.fields.username?{errors:t.errorFields,useImprovedErrorMessages:t.useImprovedErrorMessages}:null)),!1;throw t}},this.handleResetUsernameError=()=>{this.setState((e=>{const t=e.errors,{username:a}=t;return{errors:Oe(t,["username"]),isUsernameVerified:!0}}))},this.handleFieldChange=(e,t)=>{this.setState((a=>({fields:Object.assign(Object.assign({},a.fields),{[e]:t}),isUsernameVerified:"username"!==e&&a.isUsernameVerified})))},this.handleGeneralSuccess=(e,t)=>{const{history:a,modalOptions:{closeModalOnLogin:s=!0,goBack:n,isSignIn:r}}=this.props;r||(0,_.track)("registration_tap",{}),this.mounted&&!r&&s&&this.finishSignInOrSignUp(),r&&(e||t||a.push("/welcome")),(!e||"no-redirects"!==t&&"no-update"!==t)&&(null==n||n(s?void 0:()=>this.finishSignInOrSignUp()))},this.finishSignInOrSignUp=()=>{const{dispatch:e}=this.props;e({options:void 0,type:"TOGGLE_MODAL"})},this.handleLogin=async e=>{const{dispatch:t,history:a,isOnline:s,modalOptions:{closeModalOnLogin:n=!0,goBack:r,redirectPath:i=T.B6,trackingProps:o,via:l,limitRedirect:c}}=this.props,{alternateView:d}=this.state,u=d&&"welcomeBack"===d.type&&this.prefilledLoginData&&this.prefilledLoginData.email?{identifier:this.prefilledLoginData.email,password:e.password}:e;this.setState({loginAttempts:Object.assign(Object.assign({},this.state.loginAttempts),{showEmailSentNotification:!1})}),await(0,_.track)("sign_in_tap",Object.assign({target:"sign_in",via:l},o));try{await(0,fe.IS)(u,s),await t((0,Z.eY)({onUserRetrieved:e=>{(0,Ce.oV)("email",e)}})),n&&t({options:void 0,type:"TOGGLE_MODAL"}),c||(0,T.KE)(window.location.pathname)||a.push(i),null==r||r(n?void 0:()=>{t({options:void 0,type:"TOGGLE_MODAL"})})}catch(e){if(s&&u.identifier.trim()){const e=await(0,Ce.gT)(u.identifier);if(e&&(e.hasFacebook||e.hasGoogle)){const t=e.hasGoogle?"google":"facebook";return(0,_.track)("sign_in_load",Object.assign({screen:`sign_in_with_${t}`,via:l},o)),void this.setState({alternateView:{name:e.name,picture:e.picture,platform:t,type:"createdWithSocial"},submitting:!1})}}throw e}},this.handleLoginSuccess=()=>{const{dispatch:e,history:t,modalOptions:{closeModalOnLogin:a=!0,limitRedirect:s,redirectPath:n=T.B6}}=this.props;a&&e({options:void 0,type:"TOGGLE_MODAL"}),s||(0,T.KE)(window.location.pathname)||t.push(n)},this.handleRegisterFailure=e=>{const{modalOptions:{via:t}}=this.props;(0,_.track)("registration_tap",{target:"create_account"}),(0,_.track)("register",{successful:!1,through:e,via:t})},this.handleSubmit=async e=>{const{modalOptions:{hideAge:t,isSignIn:a}}=this.props;if(e.preventDefault(),!this.state.ageRestricted||this.state.isUsernameVerified||await this.validateUsername()){this.setState({errors:{},submitting:"email"});try{a?(Te.Z.start("login_success_or_fail"),await this.handleLogin(this.state.fields)):(Te.Z.start("registration_success_or_fail"),(0,_.track)("registration_tap",{target:"create_account"}),await this.emailSignup(this.state.fields,!0===t))}catch(e){if(this.setState({submitting:!1}),!(e instanceof fe.Wj))throw e;this.setState({errors:e.errorFields,useImprovedErrorMessages:e.useImprovedErrorMessages})}finally{a?Te.Z.finish("login_success_or_fail"):Te.Z.finish("registration_success_or_fail")}}},this.handleToggleForm=()=>{const{dispatch:e,modalOptions:t}=this.props,{isSignIn:a,trackingProps:s,via:n}=t;a?(0,_.track)("sign_in_tap",Object.assign({target:"sign_up",via:n},s)):(0,_.track)("registration_tap",{target:"sign_in"}),e({options:Object.assign(Object.assign({},t),{isSignIn:!a}),type:"TOGGLE_MODAL"})}}componentDidMount(){(0,be.L8)();const{history:e,modalOptions:{disableWelcomeBack:t,isFamilyPlan:a,isSignIn:s,trackingProps:n,via:r,limitRedirect:i}}=this.props;if(this.mounted=!0,s){this.prefilledLoginData=(0,Ce.MG)();const e=!t&&s&&!a&&!!this.prefilledLoginData;if(e){if("email"===this.prefilledLoginData.type)(0,_.track)("sign_in_load",Object.assign({screen:"email_prefilled",via:r},n));else if("social"===this.prefilledLoginData.type){const e=this.prefilledLoginData.hasGoogle&&this.prefilledLoginData.hasFacebook?"google_and_facebook":this.prefilledLoginData.hasGoogle?"google":"facebook";(0,_.track)("sign_in_load",Object.assign({screen:`sign_in_with_${e}`,via:r},n))}}else(0,_.track)("sign_in_load",Object.assign({screen:"sign_in_modal",via:r},n));this.setState({alternateView:e?{title:(0,q.H8)(1086),type:"welcomeBack"}:null})}else(0,_.track)("registration_load",{screen:"sign_in_modal"});const o=(0,Ie.Lm)();"true"!==o.isLoggingIn&&"no-update"!==i&&e.replace({pathname:window.location.pathname,search:(0,Ie.Vp)(Object.assign(Object.assign({},o),{isLoggingIn:!0}))})}componentWillUnmount(){this.mounted=!1;const{history:e,modalOptions:{isSignIn:t,onBeforeClose:a,via:s,limitRedirect:n}}=this.props;t?(0,_.track)("sign_in_tap",{target:"dismiss",via:s}):(0,_.track)("registration_tap",{target:"dismiss"}),null==a||a();const r=(0,Ie.Lm)(),{isLoggingIn:i}=r,o=Oe(r,["isLoggingIn"]);"true"===i&&"no-update"!==n&&e.replace({pathname:window.location.pathname,search:(0,Ie.Vp)(o)})}render(){const{config:{ipCountry:e},dispatch:t,isDesktop:a,modalOptions:{allowLanguagelessUser:n,closeModalOnLogin:r=!0,goBack:i,hideAge:o=!1,isFamilyPlan:l,isSignIn:c,limitRedirect:d,redirectPath:u,removeSignUp:p,renderHeader:g,renderSubtitle:m,renderTitle:h,requireGoogle:v,trackingProps:f,via:b}}=this.props,{ageRestricted:S,alternateView:y,errors:E,fields:I,submitting:k,useImprovedErrorMessages:w}=this.state,T=(0,Re.P_)(this.props.config),C=c&&y&&"welcomeBack"===y.type,R=C&&y.title||"",L=c&&y&&"createdWithSocial"===y.type,O=L&&y,P=C?1032:c?35497:11927,A=s.createElement($.Z,Object.assign({},(0,se._q)(re.V.RegisterButton),{className:_e.button,disabled:C?void 0:!1!==k&&"email"!==k,key:P,submitting:"email"===k,type:"submit",unstyledDisabled:!C,variant:"solid"}),(0,q._i)(P)),D=c&&w&&(E.password||E.identifier||E.connectivity||E.social)?s.createElement(oe,null,E.identifier,E.password,E.connectivity,E.social):null,x=(()=>v?s.createElement(Ne,{isSignIn:c,onGoogleClick:this.googleSignup,renderHeader:g,renderSubtitle:m,renderTitle:h,submitting:k}):C&&this.prefilledLoginData?s.createElement(xe,{dispatch:t,errors:E,header:null==g?void 0:g(!0),identifier:I.identifier,lastLoginType:this.prefilledLoginData.type,name:this.prefilledLoginData.name,onFacebookClick:this.facebookSignup,onGoogleClick:this.googleSignup,onIdentifierChange:e=>this.handleFieldChange("identifier",e),onPasswordChange:e=>this.handleFieldChange("password",e),onUseAnotherAccount:this.handleUseAnotherAccount,password:I.password,picture:this.prefilledLoginData.picture,registerButton:A,signInErrors:D,submitting:k,title:R,via:b}):L?s.createElement(Fe,{name:O.name,onFacebookClick:this.facebookSignup,onGoogleClick:this.googleSignup,onUseAnotherAccount:this.handleUseAnotherAccount,picture:O.picture,platform:O.platform,submitting:k}):s.createElement(Me,{age:I.age,ageRestricted:S,dispatch:t,email:I.email,errors:E,focusPasswordField:!1,hideAge:o,identifier:I.identifier,ipCountry:e,isFamilyPlan:l,isSignIn:c,isUGCDisabled:T,name:I.name,onAgeBlur:this.handleAgeChange,onAgeChange:e=>this.handleFieldChange("age",e),onEmailChange:e=>this.handleFieldChange("email",e),onFacebookClick:this.facebookSignup,onGoogleClick:this.googleSignup,onIdentifierChange:e=>this.handleFieldChange("identifier",e),onNameChange:e=>this.handleFieldChange("name",e),onPasswordChange:e=>this.handleFieldChange("password",e),onResetError:this.handleResetUsernameError,onUsernameBlur:this.validateUsername,onUsernameChange:e=>this.handleFieldChange("username",e),password:I.password,registerButton:A,renderHeader:g,renderTitle:h,showEmailField:!0,signInErrors:D,submitting:k,username:I.username,via:b}))(),N=c?(0,q._i)(19234):(0,q._i)(9109);return s.createElement(s.Fragment,null,a?s.createElement("div",{className:_e["right-controls"]},p?null:s.createElement($.Z,Object.assign({},(0,se._q)(re.V.SignUpButton),{color:"macaw",onClick:this.handleToggleForm,variant:"stroke"}),N)):null,s.createElement("form",{className:_e.modal,method:"POST",noValidate:!0,onSubmit:this.handleSubmit},x,s.createElement("div",{className:_e.footer},s.createElement("div",{className:_e["terms-and-privacy"]},(0,q._i)(18519)),s.createElement("div",{className:_e["terms-and-privacy"]},(0,q._i)(42488)),a?null:c?s.createElement("div",{className:_e["no-account"]},(0,q._i)(11114),s.createElement("span",Object.assign({},(0,se._q)(re.V.SignUpLink),{className:_e["no-account-link"],onClick:()=>{(0,_.track)("sign_in_tap",Object.assign({target:"sign_up",via:b},f)),t({options:{allowLanguagelessUser:n,closeModalOnLogin:r,goBack:i,isSignIn:!1,limitRedirect:d,name:Q.t.SignInUp,redirectPath:u,renderHeader:g,renderSubtitle:m,renderTitle:h,via:b},type:"TOGGLE_MODAL"})}}),(0,q._i)(19234))):s.createElement("div",{className:_e["no-account"]},(0,q._i)(6220),s.createElement("span",{className:_e["no-account-link"],onClick:()=>{(0,_.track)("registration_tap",{target:"sign_in"}),t({options:{allowLanguagelessUser:n,closeModalOnLogin:r,goBack:i,isSignIn:!0,limitRedirect:d,name:Q.t.SignInUp,redirectPath:u,renderHeader:g,renderSubtitle:m,renderTitle:h,via:b},type:"TOGGLE_MODAL"})}},(0,q._i)(3830))))))}}const He=()=>{const e=(0,h.Fx)(x.Mb),t=(0,h.Fx)(x.$4),a=(0,h.Fx)(x.YW),n=(0,h.Fx)(x.np),r=(0,h.tX)(),i=(0,w.k6)();return s.useEffect((()=>{(0,F.Pc)()&&!(0,Le.pN)(n)||(0,Se.d)()}),[n]),s.createElement(W.Z,{className:_e["modal-wrapper"],isFullscreen:!0,modalName:Q.t.SignInUp,onDismiss:({modalOptions:e})=>{var t;const a=(0,Ie.vl)(window.location.search);"no-update"!==e.limitRedirect&&i.replace({search:(0,Ie.Vp)(o.CE(a,["sign-in","sign-up","register"]))}),null===(t=e.onCloseButtonClick)||void 0===t||t.call(e),r({options:void 0,type:"TOGGLE_MODAL"})}},(({modalOptions:n,onDismiss:o})=>s.createElement(Ue,{config:e,dispatch:r,history:i,isDesktop:t,isOnline:a,modalOptions:n,onDismiss:o})))};var je=a(98071),Ge=a(9979),Be=a(81149),Ve=a(68903),ze=a(1398);const Ze=(0,ze.Z)((()=>a.e(7384).then(a.bind(a,82791)))),$e=(0,ze.Z)((()=>a.e(2732).then(a.bind(a,27510)))),We=(0,ze.Z)((()=>a.e(3589).then(a.bind(a,83377)))),qe=(0,ze.Z)((()=>a.e(969).then(a.bind(a,30969)))),Qe=(0,ze.Z)((()=>Promise.all([a.e(9981),a.e(230)]).then(a.bind(a,46809)))),Ye=(0,ze.Z)((()=>Promise.all([a.e(9981),a.e(3970)]).then(a.bind(a,75924)))),Ke=(0,ze.Z)((()=>Promise.all([a.e(9981),a.e(9387)]).then(a.bind(a,4040)))),Je=(0,ze.Z)((()=>a.e(7495).then(a.bind(a,94871)))),Xe=(0,ze.Z)((()=>a.e(9559).then(a.bind(a,59858)))),et=(0,ze.Z)((()=>a.e(7733).then(a.bind(a,40736)))),tt=(0,ze.Z)((()=>Promise.all([a.e(4705),a.e(8284)]).then(a.bind(a,75281)))),at=(0,ze.Z)((()=>Promise.all([a.e(4705),a.e(1030)]).then(a.bind(a,66672)))),st=(0,ze.Z)((()=>Promise.all([a.e(9981),a.e(9933)]).then(a.bind(a,59996)))),nt=(0,ze.Z)((()=>a.e(9494).then(a.bind(a,91779)))),rt=({modal:e})=>{const[,t]=s.useState(0),a=s.useRef(),n=(e=>{switch(e){case"convertLingotsToGemsWeb":return Ze;case"kudosOffer":case"kudosReceive":return et;case"legendaryRebrandGoldColor":return $e;case"marketingOptIn":return qe;case"pathChange":return"experiment"===(0,Be.j6)("path_web_path_change_notifications_v2",void 0)?We:void 0;case"reactivatedWelcome":return st;case"resurrectedWelcome":return Ye;case"streakFreezeRecurringOffer":return Ke;case"streakFreezeUsed":return Je;case"streakRepairOffer":return Xe;case"turningNotificationsOn":return Qe;case"v2Intro":return;case"webToAppConversion":return tt;case"webToAppConversionAggressive":return at;case"newYearsDiscount":return nt;case void 0:return;default:throw(0,Ve.RJ)(e),Error()}})(null!=e?e:a.current);return s.useEffect((()=>{if(void 0===e&&void 0!==a.current){const e=setTimeout((()=>{a.current=void 0,t((e=>e+1))}),Ge.nN);return()=>clearTimeout(e)}void 0!==e&&(a.current=e)}),[e]),n?s.createElement(je.Z,null,s.createElement(n,{isModal:!0})):null};var it=a(18201);const ot=({drawer:e})=>{const[t,a]=s.useState(0),n=s.useRef(),r=s.useRef(),i=(0,it.Z)(null!=e?e:n.current);return s.useEffect((()=>{void 0!==e&&e===n.current&&void 0===r.current&&a((e=>e+1)),n.current=null!=e?e:n.current,r.current=e})),i?s.createElement(s.Suspense,{fallback:null},s.createElement(i,{key:t})):null},lt=(0,ze.Z)((()=>a.e(555).then(a.bind(a,70555)))),ct=({toast:e})=>{const[t,a]=s.useState(0),n=s.useRef(),r=s.useRef(),i=(e=>{switch(e){case"emailVerified":return lt;case void 0:return;default:throw(0,Ve.RJ)(e),Error()}})(null!=e?e:n.current);return s.useEffect((()=>{void 0!==e&&e===n.current&&void 0===r.current&&a((e=>e+1)),n.current=null!=e?e:n.current,r.current=e})),i?s.createElement(s.Suspense,{fallback:null},s.createElement(i,{isToast:!0,key:t})):null};var dt=a(77888),ut=a(93890),pt=a(50231),gt=a(63301),mt=a(28818),ht=a(89803),_t=a(4517);const vt=(0,ze.Z)((()=>a.e(2146).then(a.bind(a,66592)))),ft={getConditionAndTreat:Be.j6},bt=({children:e})=>{const t=(0,h.tX)(),a=(0,h.Fx)((e=>e.ui.appOffset)),n=(0,h.Fx)((e=>e.browserSettings.darkMode)),r=(0,h.Fx)((e=>e.ui.drawer)),p=(0,h.Fx)(x.df),m=(0,h.Fx)(pt.av),v=(0,h.Fx)((e=>e.ui.spotlightType)),b=(0,h.Fx)((e=>e.ui.toast)),E=(0,h.Fx)(x.Lm),k=(0,h.Fx)((e=>e.ui.viewportHeight)),L=(0,h.Fx)((e=>"enabled"===e.brb.brb.status)),$=(0,h.Fx)((e=>(0,x.Sg)(e))),W=(0,h.Fx)((e=>(0,x.ep)(e))),q=(0,h.Fx)((e=>e.ui.isModalReallyOpen&&($||W))),Q=(0,h.Fx)((e=>void 0!==e.ui.drawer||void 0!==e.ui.modal&&e.ui.isModalReallyOpen||e.ui.isRequestingNotificationPermission)),K=(0,dt.Z)(),J=(0,M.Z)();(0,R.Z)(),A("brb"),A("zombie"),(0,D.Z)(),(()=>{const e=(0,h.CC)(),t=(0,w.k6)(),a=(0,w.TH)(),[n]=s.useState(Date.now());s.useEffect((()=>{let s=a;const r=t.listen((a=>{(0,N.si)(s,a);let r=a.pathname;const i=new URLSearchParams(a.search);if((0,T.fu)(r))return console.log("Path owned by old web; refreshing"),(0,g.um)("Path owned by old web; refreshing",{data:{nextPathname:r,prevPathname:s.pathname}}),void(0,T.Zs)();if((Date.now()-n)/P.zq>72)return console.log("Window too old; refreshing"),void(0,T.Zs)();if((0,F.Pc)()){let a=!1;const s=(0,x.Lm)(e.getState()),n=(0,x.iH)(e.getState());!s||n||(0,T.v$)(r)||(console.log(`Redirecting "${r}" to "/welcome" to select learning language`),r="/welcome",a=!0),i.has("isLoggingIn")&&(i.delete("isLoggingIn"),a=!0),a&&t.replace({pathname:r,search:i.toString()})}s=a}));return()=>{r()}}),[])})(),(()=>{const e=(0,h.Fx)(x.df),[t]=s.useState((()=>new AbortController));s.useEffect((()=>{let e=!1;return"serviceWorker"in navigator&&(async()=>{if(await navigator.serviceWorker.register("/gcm-service-worker.js"),!e&&!t.signal.aborted)try{await U.S1(t.signal)}catch(e){console.warn(e)}})(),()=>{e=!0}}),[]),s.useEffect((()=>{e&&t.abort("Zombie mode activated")}),[e])})(),(({disabled:e})=>{const t=s.useRef(),a=(0,w.TH)(),n=(0,h.Fx)((e=>e.ui.engagementOverride)),r=(0,h.Fx)((e=>(0,H.ek)(e,{location:a})));s.useEffect((()=>{const a=()=>{if(!e){const e=Date.now(),a=e-j;j=e,_.accumulateTime(a,t.current,r)}},s=o.P2(a,1e3,{trailing:!0});return n!==t.current&&(a(),t.current=n),document.addEventListener("mousedown",s),document.addEventListener("keydown",s),document.addEventListener("touchstart",s),()=>{document.removeEventListener("mousedown",s),document.removeEventListener("keydown",s),document.removeEventListener("touchstart",s)}}),[e,n,r]),s.useEffect((()=>{const t=o.P2((()=>{if(!e){const e={};let t=0;Object.entries(_.totalTimes).forEach((([a,s])=>{"deepest_node_learning"!==a&&(t+=s),e[`engagement_type_${a}`]=Math.floor(s/1e3)})),e.total_time_spent=Math.floor(t/1e3),_.track("time_spent",e),_.resetTime()}}),6e4,{trailing:!0});return document.addEventListener("mousedown",t),document.addEventListener("keydown",t),document.addEventListener("touchstart",t),()=>{document.removeEventListener("mousedown",t),document.removeEventListener("keydown",t),document.removeEventListener("touchstart",t)}}),[e])})({disabled:L||p&&!E}),(()=>{const e=s.useRef((0,P.Ml)()),t=s.useRef((0,P.Ml)()),[a,n]=s.useState((0,F.Pc)()),[r,i]=s.useState((0,F.Pc)());s.useEffect((()=>{const t=()=>{setTimeout((()=>{_.trackUserActive2022({activity_trigger:"user_interaction"})&&(e.current=(0,P.Ml)())}),500)},s=o.P2(t,G,{trailing:!1}),r=()=>{(0,P.Ml)()!==e.current&&t()},i=()=>{a!==(0,F.Pc)()&&(n((0,F.Pc)()),t())};return B.forEach((e=>{document.addEventListener(e,s),document.addEventListener(e,r),document.addEventListener(e,i)})),()=>{B.forEach((e=>{document.removeEventListener(e,s),document.removeEventListener(e,r),document.removeEventListener(e,i)}))}}),[a]),s.useEffect((()=>{const e=()=>{setTimeout((()=>{_.trackUserActive2022({activity_trigger:"app_foregrounded"})&&(t.current=(0,P.Ml)())}),500)},a=o.P2(e,G,{trailing:!1}),s=()=>{(0,P.Ml)()!==t.current&&e()},n=()=>{r!==(0,F.Pc)()&&(i((0,F.Pc)()),s())};return document.addEventListener("visibilitychange",s),document.addEventListener("visibilitychange",a),document.addEventListener("visibilitychange",n),()=>{document.removeEventListener("visibilitychange",s),document.removeEventListener("visibilitychange",a),document.removeEventListener("visibilitychange",n)}}),[r])})(),(({disabled:e})=>{const t=(0,h.tX)(),a=(0,h.CC)();s.useEffect((()=>{if(!e){const e=(0,O.nC)((()=>{try{(0,F.Jb)()}catch(t){return void clearInterval(e)}const s=a.getState();(0,x.eI)(s)||void 0!==z.SL||(t((0,Z.eY)()),t((0,V.i)()))}),36e5);return()=>clearInterval(e)}}),[e])})({disabled:L||p});const[X,ee]=s.useState(L||p&&!E);return s.useLayoutEffect((()=>{if(void 0!==a)return document.documentElement.style.setProperty("--app-offset",`${a}px`),()=>{document.documentElement.style.removeProperty("--app-offset")}}),[a]),s.useLayoutEffect((()=>{if(J)return document.documentElement.setAttribute("reduced-motion",""),()=>document.documentElement.removeAttribute("reduced-motion")}),[J]),s.useLayoutEffect((()=>{if(void 0!==k&&!CSS.supports("(width: 1dvh)"))return document.documentElement.style.setProperty("--viewport-height",`${k}px`),()=>{document.documentElement.style.removeProperty("--viewport-height")}}),[k]),s.useEffect((()=>{if((0,F.Pc)()&&!p){const e=new AbortController;return t((0,z.SC)(e.signal)),t((0,z.Vw)(e.signal)),()=>{e.abort("Zombie mode activated")}}(0,_.startTracking)()}),[p]),s.useEffect((()=>{L||p||t((0,V.i)())}),[L,p]),s.useEffect((()=>{p&&E&&t(((e,t)=>{const a=(0,x.__)(t()),s=(0,x.np)(t()),n=(0,P.Zo)(),r=(0,ut.zK)(n,a,s),i=(0,ut.KA)(n,r,s),o=(0,ut.ul)(r,a,s);e({type:"UPDATE_USER",user:{streakData:i.streakData}}),e({type:"SET_XP_SUMMARIES",xpSummaries:i.xpSummaries});for(const t of o)e({item:t,type:"REFRESH_USER_ITEM"})}))}),[]),s.useEffect((()=>{(0,_.track)("web_supported_features",{web_features:window.duo.supportedFeatures})}),[]),s.useEffect((()=>{if(L||p&&!E)return ee(!0),()=>{(0,T.Zs)()}}),[L,p,E]),s.useEffect((()=>{p&&(0,_.track)("zombie_mode_activated",{num_offline_lessons_available:K})}),[p]),s.useEffect((()=>{if(Q)return t({type:"DIMMED_OVERLAY_OPENED"}),()=>{t({type:"DIMMED_OVERLAY_CLOSED"})}}),[Q]),s.useEffect((()=>{const e=()=>t({type:"GO_OFFLINE"}),a=()=>t({type:"COME_ONLINE"});return window.addEventListener("offline",e),window.addEventListener("online",a),()=>{window.removeEventListener("offline",e),window.removeEventListener("online",a)}}),[]),s.useEffect((()=>{const e=o.Ds((()=>t({height:window.innerHeight,type:"RESIZE_WINDOW",width:window.innerWidth})),250);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),s.useEffect((()=>(window.addEventListener("beforeunload",ht.u6),window.addEventListener("unload",ht.u6),()=>{window.removeEventListener("beforeunload",ht.u6),window.removeEventListener("unload",ht.u6)})),[]),(0,ke.ro)(),X?s.createElement(s.Suspense,{fallback:null},s.createElement(vt,null)):s.createElement(f,null,s.createElement(mt.wq,null,s.createElement(i.aH,{client:_t.E},s.createElement(gt.tc,null),s.createElement(gt.vU,null),s.createElement(l.Z.Provider,{value:ft},s.createElement(c.Z.Provider,{value:J},s.createElement(d.Z,{theme:(0,gt.gQ)("darkMode")||"on"===n?"dark":"off"===n?"light":void 0},s.createElement(y.ZP,null,s.createElement(C,null),e,s.createElement(u.Z,{animateOnMount:Q,isVisible:Q},void 0===v?s.createElement(S.Z,Object.assign({},(0,se._q)(re.V.DrawerBackdrop))):s.createElement(I,{spotlightType:v})),s.createElement(u.Z,{animateOnMount:q,isVisible:q},s.createElement(S.Z,{portalToOverlays:!0,secondaryOverlayType:$?"drawer":"modal"})),s.createElement(Y,null),s.createElement(He,null),s.createElement(ot,{drawer:null==r?void 0:r.name}),s.createElement(rt,{modal:m}),s.createElement(ct,{toast:b}))))))))};var St=a(31801);const yt=({data:e})=>(e["@context"]=e["@context"]||"http://schema.org",s.createElement("script",{type:"application/ld+json"},JSON.stringify(e,null,"\t"))),Et=({crumbs:e})=>{const t={"@type":"BreadcrumbList",itemListElement:e.map(((e,t)=>({"@type":"ListItem",item:{"@id":e.url.toString(),name:e.label},position:t+1})))};return s.createElement(yt,{data:t})};var It=a(92883),kt=a(75025),wt=a(29264);const Tt=e=>{const{dispatch:t,trackingScreen:a="unknown",via:n}=e;return s.createElement($.Z,Object.assign({},(0,se._q)(re.V.HaveAccount),{className:"_3mSsk _32wa0",onClick:()=>{(0,_.track)("click",{screen:a,target:"has_account"}),(0,_.track)("splash_tap",{target:"has_account"}),t({options:{allowLanguagelessUser:!0,isSignIn:!0,name:Q.t.SignInUp,via:n},type:"TOGGLE_MODAL"})},variant:"stroke"}),(0,q._i)(20690))};var Ct=a(36083);const Rt=({learningLanguageId:e})=>{const t=e?s.createElement(Ct.Z,{className:"EZsOD",lang:e,size:88}):null;return s.createElement("div",{className:"_2quRS"},s.createElement("div",{className:"_2eTYC"}),t)},Lt="_2O-uQ _1fbst whuSQ _2gwtT _1nlVc _2fOC9 t5wFJ _3dtSu _25Cnc _3yAjN UCrz7 yTpGk",Ot={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","juicy-bee":"rgb(var(--color-bee))","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","z-index-modal":"310","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210",body:"_3luhU",footer:"_1rngG","_space-background":"_3KIcy","splash-wrap-inner":"_1hu_Q","_splash-header-base":"_3caMw","full-height":"_2nXGb","splash-header":"_2acB3","splash-header-wrap":"_1BN7f _3KIcy _3caMw","cta-container":"_2EGPE",tagline:"_3O3n_","splash-cta":"y-jI2 _108yV","login-panel-wrap":"_3i7zl","enter-details":"_1qZIh","content-section":"tWCS0","content-section-divider":"_2Md15","_content-wrap":"_3kl9M","_content-wrap-row":"e9OtP _3kl9M","content-wrap-row-left":"xLxBr e9OtP _3kl9M","content-wrap-row-right":"_3Av0M e9OtP _3kl9M","content-wrap-column":"Zow_K _3kl9M","_content-img":"Fl05m","_content-img-left":"_3ImTO","_content-img-right":"_8vZkc",h2:"_3p4DF",h3:"_36neC","duo-img":"_1j6Qx Fl05m _3ImTO","efficacy-img":"SL1JE Fl05m _3ImTO _1G1lu","plus-duo-img":"_2z2Ho Fl05m _3ImTO _1G1lu","super-duo-img":"WAqiw Fl05m _3ImTO _1G1lu","travel-img":"_21aAk Fl05m _8vZkc _1G1lu","school-img":"_2q0Gn Fl05m _3ImTO _1G1lu","english-test-img":"_2yC9S Fl05m _8vZkc _1G1lu","content-description":"_1DaKS","content-description-small":"_2lUYH",link:"_3o6kp","play-video-icon":"_2Q7iD","gamification-columns":"_1BUvo","gamification-column":"_3K63u","gamification-img":"_1s8zG","gamification-img-top":"_1vP83 _1s8zG","small-content-wrap":"kyf6a","small-content-text-wrap":"_1P3Id",_icon:"mdluY","check-icon":"nJYqI mdluY","crown-icon":"_2zd6Y mdluY","streak-icon":"_2tSmF mdluY","profile-icon":"FyJvW mdluY","app-button-container":"_3dFuc","app-button":"_2UM48","blue-link":"_3_bRR _2__FI _1I0jE _3yAjN","footer-wrap":"_19Eld _3KIcy","footer-header":"_31SsW","footer-tagline":"_69h83","footer-cta":"_2aq1o _108yV","hidden-on-mobile":"_9LtiF","splash-bottom":"_2rb1t",arrow:"_3mXhY d98MI _2jNpf","language-carousel":"_6YjJZ","logged-out-logo":"aHPNg"};class Pt extends s.Component{constructor(){super(...arguments),this.renderCourseHatchingForm=()=>{const{course:e,email:t,isEmailInputVisible:a,errorString:n,newlySubscribed:r,onEmailChange:i,onNotifyMeClick:o,onSubscribeClick:l}=this.props,{learningLanguageName:c,subscriberCount:d,userSubscribed:u}=e,p=u||r;return a?s.createElement("div",{className:"pguY_"},s.createElement("div",{className:"tF1i1"},s.createElement("input",{className:"IMg9F",onChange:e=>i(e.target.value),placeholder:(0,q.H8)(3980),value:t}),s.createElement("button",{className:"wa4cN _2O-uQ _1fbst whuSQ _2gwtT _1nlVc _2fOC9 t5wFJ _3dtSu _25Cnc _3yAjN UCrz7 yTpGk",onClick:l},(0,q._i)(19532))),s.createElement("div",{className:"_2WMsJ"},n)):s.createElement("div",null,p?s.createElement("span",{className:Lt},(0,q._i)(11141)):s.createElement("button",{className:Lt,onClick:o},(0,q._i)(9753)),s.createElement("div",{className:"_38yEk _2kE-G"},(0,q._i)(12826,{learning_language_name:c,num_users:d.toLocaleString()})))},this.renderHatchedForm=()=>{const{dispatch:e,isRegistering:t,onStartLearningClick:a,topElementRef:n}=this.props;return s.createElement("div",null,s.createElement("div",{className:"_2SQ3H",ref:n},s.createElement($.Z,{className:Ot["splash-cta"],color:"owl",disabled:t,onClick:a,variant:"solid"},(0,q._i)(7709))),s.createElement("div",null,s.createElement(Tt,{dispatch:e,via:"course_page"})))},this.renderCTA=()=>{const{course:e,courseHatching:t,isDesktop:a,isEmailInputVisible:n}=this.props,{estimatedBetaDateString:r="",fromLanguageName:i,learningLanguageName:o}=e,l=t?(0,q._i)(8291,{from_language_name:i,learning_language_name:o}):(0,q._i)(a?18929:13834,{learning_language_name:o}),c=t&&r&&!n;return s.createElement("div",{className:Ot["cta-container"],key:"cta-container"},c?s.createElement("h2",{className:"_2ooXi"},(0,q._i)(7261,{beta_launch_date:r})):null,s.createElement("div",{className:Ot.headings},s.createElement("h1",{className:Ot.tagline},l)),s.createElement("div",{className:"_3Lgvp",onClick:e=>e.stopPropagation()},t?this.renderCourseHatchingForm():this.renderHatchedForm()))},this.renderHeroElement=()=>s.createElement(s.Suspense,{fallback:null},s.createElement(Rt,{learningLanguageId:this.props.course.learningLanguageId}))}render(){return s.createElement("div",{className:te()(Ot["splash-header-wrap"],Ot["full-height"])},s.createElement("div",{className:Ot["splash-header"]},this.renderHeroElement(),this.renderCTA()))}}const At=Pt;var Dt=a(14092);class xt extends s.Component{constructor(){super(...arguments),this.state={email:"",errorString:"",isEmailInputVisible:!1,isRegistering:!1,newlySubscribed:!1},this.onSubscribeClick=async()=>{const{course:e}=this.props,{learningLanguageId:t,fromLanguageId:a}=e;try{await(0,Dt.F)(!1,t,a,this.state.email),this.setState({isEmailInputVisible:!1,newlySubscribed:!0})}catch(e){this.setState({errorString:(0,q.H8)(11696)})}},this.onStartLearningClick=async()=>{const{course:e,dispatch:t}=this.props,{learningLanguageId:a,fromLanguageId:s}=e;Te.Z.start("trial_user_creation"),this.setState({isRegistering:!0}),await Promise.all([(0,_.track)("click",{screen:"course_splash",target:"get_started"}),(0,_.track)("course_splash_tap",{target:"get_started"})]),t((0,Z.Kb)(a,s))}}render(){const{clientExperiments:e,course:t,courseHatching:a,dispatch:n,isDesktop:r,topElementRef:i}=this.props,{email:o,errorString:l,isEmailInputVisible:c,isRegistering:d,newlySubscribed:u}=this.state;return s.createElement(At,{clientExperiments:e,course:t,courseHatching:a,dispatch:n,email:o,errorString:l,isDesktop:r,isEmailInputVisible:c,isRegistering:d,newlySubscribed:u,onEmailChange:e=>this.setState({email:e}),onNotifyMeClick:()=>this.setState({isEmailInputVisible:!0}),onStartLearningClick:this.onStartLearningClick,onSubscribeClick:this.onSubscribeClick,topElementRef:i})}}const Nt=xt,Ft=({children:e})=>{const t=s.createElement("div",{className:Ot["content-section-divider"]}),a=s.Children.toArray(e),n=(a.length,a.filter((e=>!!e)).map(((e,a)=>s.createElement(s.Fragment,{key:a},0!==a?t:null,e,null))));return s.createElement("div",{className:Ot["splash-content-wrap"]},n)};var Mt=a(8121);const Ut=a.p+"images/5c2cfda26cf9f55f51622d89f44fb5ad.svg",Ht={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","juicy-bee":"rgb(var(--color-bee))","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","z-index-modal":"310","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210","footer-language-wrap":"_3CeMJ","footer-site-language-header":"_1OTYG","footer-ui-language-item":"_2WUal","footer-ui-language-link":"_9CAMy",icon:"ItYzw"},jt={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","juicy-bee":"rgb(var(--color-bee))","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","z-index-modal":"310","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210","width-tablet":"768px","footer-language-wrap":"IwiM9","footer-site-language-header":"_1RXV1","footer-ui-language":"_3iodW","footer-ui-language-item":"_30ib7","footer-ui-language-link":"_1FJ6K",icon:"h5DCm"};var Gt=a(93746);const Bt=o.ZP.keys(Gt.Jl),Vt=({isRedesign:e})=>{const t=e?jt:Ht;return s.createElement("div",{className:t["footer-language-wrap"]},s.createElement("div",null,s.createElement("div",{className:t["footer-site-language-header"]},(0,q._i)(18889)),s.createElement("ul",{className:t["footer-ui-language"]},Bt.map((e=>s.createElement("li",{className:t["footer-ui-language-item"],key:e},s.createElement(J.Z,{className:t["footer-ui-language-link"],href:`//${(0,Gt.D3)(e)}.duolingo.com`},(0,Gt.lx)(e))))))),s.createElement("img",{className:t.icon,src:Ut}))};var zt=a(81928);const Zt={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","juicy-bee":"rgb(var(--color-bee))","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","z-index-modal":"310","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210","site-map-wrap":"_2-Hvl","site-map":"_1KUWD","column-header":"SP0EV",column:"_3wvOu",spacer:"_2vpsV"},$t={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","juicy-bee":"rgb(var(--color-bee))","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","z-index-modal":"310","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210","width-tablet":"768px","width-desktop":"1080px",column:"_13DLk","column-header":"twbwU","site-map":"_3TNCA"},Wt=()=>{const e=(()=>{switch(window.duo.uiLanguage){case"zh-CN":return"zs";case"zh-TW":return"zt";default:return(0,Gt.D3)(Gt.h9)}})();return qt(e)?e:void 0},qt=(0,Ve.p)(["de","en","es","fr","hi","hu","id","it","ja","ko","pt","ru","th","tr","uk","vi","zs","zt"]);var Qt=a(64865),Yt=a(95975),Kt=a(77747);const Jt=(0,a(419).Q)(window.duo.uiLanguage),Xt=parseFloat($t["width-desktop"]),ea=parseFloat($t["width-tablet"]),ta=({isRedesign:e})=>{const t=(0,h.Fx)((e=>e.ui.viewportWidth)),a=e?$t:Zt,n=Wt(),r="en"===window.duo.uiLanguage,{featureFlags:i}=(0,h.Fx)(x.Mb);s.useEffect((()=>{(0,_.track)("web_to_app_store_load",{via:"site_map"})}),[]);const o=s.createElement("div",null,s.createElement("div",{className:a["column-header"]},(0,q._i)(29912)),s.createElement("ul",null,s.createElement("li",null,s.createElement(J.Z,Object.assign({},(0,se._q)(re.V.CoursesLink),{href:"/courses"}),(0,q._i)(20631))),s.createElement("li",null,s.createElement(J.Z,{href:"/info"},(0,q._i)(17103))),s.createElement("li",null,s.createElement(J.Z,{href:"/approach"},(0,q._i)(6695))),s.createElement("li",null,s.createElement(J.Z,{href:"/efficacy"},(0,q._i)(29913))),s.createElement("li",null,s.createElement(J.Z,{href:"https://careers.duolingo.com/about"},(0,q._i)(11435))),s.createElement("li",null,s.createElement(J.Z,{href:"https://research.duolingo.com"},(0,q._i)(6746))),s.createElement("li",null,s.createElement(J.Z,{href:"https://careers.duolingo.com"},(0,q._i)(5919))),s.createElement("li",null,s.createElement(J.Z,{href:"https://design.duolingo.com"},(0,q._i)(29914))),s.createElement("li",null,s.createElement(J.Z,{href:"https://store.duolingo.com/"},(0,q._i)(15428))),s.createElement("li",null,s.createElement(J.Z,{href:"https://press.duolingo.com"},(0,q._i)(18072))),s.createElement("li",null,s.createElement(J.Z,{href:"https://investors.duolingo.com"},(0,q._i)(30107))),s.createElement("li",null,s.createElement(J.Z,{href:"/contact"},(0,q._i)(23037))))),l=s.createElement("div",null,s.createElement("div",{className:a["column-header"]},(0,q._i)(17225)),s.createElement("ul",null,s.createElement("li",null,s.createElement(J.Z,{href:"/"},(0,q._i)(23227))),(0,O.J9)()?null:s.createElement("li",null,s.createElement(J.Z,{href:"https://schools.duolingo.com"},(0,q._i)(13199))),s.createElement("li",null,s.createElement(J.Z,{href:`https://englishtest.duolingo.com/${null!=n?n:""}`},"Duolingo English Test")),"en"===window.duo.uiLanguage?s.createElement(s.Fragment,null,s.createElement("li",null,s.createElement(J.Z,{href:"https://www.duolingo.com/abc",isRoutableUrl:()=>!1},"Duolingo ABC")),s.createElement("li",null,s.createElement(J.Z,{href:"https://www.duolingo.com/math",isRoutableUrl:()=>!1},"Duolingo Math"))):null,s.createElement("li",null,s.createElement(J.Z,{href:Yt.$},(0,q._i)(3735))),(0,Kt.Ak)(i)?s.createElement("li",null,s.createElement(J.Z,{href:"/business",onClick:()=>(0,_.trackRedirection)(window.location.href,"/business","soft")},"Duolingo for Business")):null,s.createElement("li",null,s.createElement(J.Z,{href:"/super"},(0,q._i)(36712))),s.createElement("li",null,s.createElement(J.Z,{href:"/gift"},(0,q._i)(41073))))),c=s.createElement("div",null,s.createElement("div",{className:a["column-header"]},(0,q._i)(18971)),s.createElement("ul",null,s.createElement("li",null,s.createElement(J.Z,{href:(0,Qt.Ir)({via:"site_map"}),onClick:()=>{(0,_.track)("web_to_app_store_tap",{target:"google_or_China",via:"site_map"})}},(0,q._i)(7946))),s.createElement("li",null,s.createElement(J.Z,{href:(0,Qt.fy)({via:"site_map"}),onClick:()=>{(0,_.track)("web_to_app_store_tap",{target:"apple",via:"site_map"})}},(0,q._i)(24192))),"en"===window.duo.uiLanguage?s.createElement("li",null,s.createElement(J.Z,{href:"https://apps.apple.com/app/duolingo-abc-learn-to-read/id1440502568?pt=1374442&ct=Site%20map&mt=8"},"Duolingo ABC (iOS)")):null)),d=s.createElement("div",null,s.createElement("div",{className:a["column-header"]},(0,q._i)(29915)),s.createElement("ul",null,s.createElement("li",null,s.createElement(zt.Z,Object.assign({},(0,se._q)(re.V.FaqLink)),(0,q._i)(12338))),(0,O.J9)()?null:s.createElement("li",null,s.createElement(J.Z,{href:"https://duolingoschools.zendesk.com/hc/en-us"},(0,q._i)(6932))),s.createElement("li",null,s.createElement(J.Z,{href:"https://englishtest.duolingo.com/faq"},(0,q._i)(20482,{test_name:"Duolingo English Test"}))),s.createElement("li",null,s.createElement(J.Z,{href:"https://status.duolingo.com/"},(0,q._i)(12464))))),u=s.createElement("div",null,s.createElement("div",{className:a["column-header"]},(0,q._i)(29916)),s.createElement("ul",null,s.createElement("li",null,s.createElement(J.Z,{href:"/guidelines"},(0,q._i)(29917))),s.createElement("li",null,s.createElement(J.Z,{href:"/terms"},(0,q._i)(22838))),s.createElement("li",null,s.createElement(J.Z,{href:"/privacy"},(0,q._i)(19704))),r?s.createElement("li",null,s.createElement(J.Z,{href:"/privacy#california"},'Respecting your "do not sell my personal information" rights')):null)),p=s.createElement("div",null,s.createElement("div",{className:a["column-header"]},(0,q._i)(16166)),s.createElement("ul",null,s.createElement("li",null,s.createElement(J.Z,{href:null!==T.Ql&&void 0!==T.Ql?T.Ql:"https://blog.duolingo.com"},(0,q._i)(14615))),(0,O.J9)()?null:s.createElement(s.Fragment,null,s.createElement("li",null,s.createElement(J.Z,{href:Jt.instagram.link},(0,q._i)(616))),s.createElement("li",null,s.createElement(J.Z,{href:Jt.facebook.link},(0,q._i)(17511))),s.createElement("li",null,s.createElement(J.Z,{href:Jt.twitter.link},(0,q._i)(5061))),s.createElement("li",null,s.createElement(J.Z,{href:"https://www.youtube.com/user/duolingo"},"YouTube")))));return e?t>=Xt?s.createElement("div",{className:$t["site-map"]},s.createElement("div",{className:$t.column},o),s.createElement("div",{className:$t.column},l),s.createElement("div",{className:$t.column},c),s.createElement("div",{className:$t.column},d),s.createElement("div",{className:$t.column},u,p)):t>=ea?s.createElement("div",{className:$t["site-map"]},s.createElement("div",{className:$t.column},o,d),s.createElement("div",{className:$t.column},l,u),s.createElement("div",{className:$t.column},c,p)):s.createElement("div",{className:$t["site-map"]},s.createElement("div",{className:$t.column},o,l,c,d,u,p)):s.createElement("div",{className:Zt["site-map-wrap"]},s.createElement("div",{className:Zt["site-map"]},s.createElement("div",{className:Zt.column},o),s.createElement("div",{className:Zt.column},l),s.createElement("div",{className:Zt.column},c),s.createElement("div",{className:Zt.column},d),s.createElement("div",{className:Zt.column},u,s.createElement("div",{className:Zt.spacer}),p)))},aa=()=>s.createElement("div",{className:Ot["footer-wrap"]},s.createElement("div",{className:Ot.footer},s.createElement(ta,null),s.createElement(Vt,null),(0,O.J9)()?s.createElement(Mt.Z,null):null)),sa=e=>{const{className:t,dispatch:a,fromLanguageId:n,isRegistering:r,learningLanguageId:i,label:o=7709}=e;return s.createElement($.Z,{className:te()(t,"_1aO_u _108yV _2dZP2"),color:"owl",disabled:r,onClick:async()=>{Te.Z.start("trial_user_creation"),await Promise.all([(0,_.track)("click",{which:"course splash page get started topbar"}),(0,_.track)("course_splash_tap",{target:"get_started"})]),a((0,Z.Kb)(i,n))},variant:"solid"},(0,q._i)(o))};var na=a(84119),ra=a(74597);const ia=({headingResource:e,trackingScreen:t,via:a})=>s.createElement("section",{className:Ot["content-section"]},s.createElement("div",{className:Ot["content-wrap-row-right"]},s.createElement("div",{className:Ot["content-text"]},s.createElement("h2",{className:Ot.h2},(0,q._i)(e)),s.createElement("div",{className:Ot["content-description"]},(0,q._i)(12387)),s.createElement("div",{className:Ot["app-button-container"]},s.createElement(na.Z,{className:Ot["app-button"],href:ra.Z.desktop?(0,q.H8)(22504,void 0,{addRightToLeftMark:!1}):(0,Qt.fy)({via:a}),onClick:()=>{(0,_.track)("click",{screen:t,target:"mobile_download_ios"}),(0,_.track)("click",{which:"mobile download ios"}),(0,_.track)("web_to_app_store_tap",{target:"apple",via:a})},style:"snow-always-light",type:"apple",via:a}),s.createElement(na.Z,{className:Ot["app-button"],href:ra.Z.desktop?(0,Qt.A)({utmCampaign:"splash",utmContent:"download_button"}):(0,Qt.Ir)({via:a}),onClick:()=>{(0,_.track)("click",{screen:t,target:"mobile_download_android"}),(0,_.track)("click",{which:"mobile download android"}),(0,_.track)("web_to_app_store_tap",{target:"google_or_China",via:a})},style:"snow-always-light",type:(0,O.J9)()?"china":"google"}))),s.createElement("div",{className:Ot["travel-img"]}))),oa=({description:e,iconClassName:t,onClick:a,title:n})=>s.createElement("div",{className:Ot["small-content-wrap"],onClick:a},s.createElement("div",{className:t}),s.createElement("div",{className:Ot["small-content-text-wrap"]},s.createElement("h3",{className:Ot.h3},n),s.createElement("div",{className:Ot["content-description-small"]},e))),la=({learningLanguageName:e})=>s.createElement("section",{className:Ot["content-section"]},s.createElement("div",{className:Ot["content-wrap-column"]},s.createElement("div",{className:Ot["gamification-img-top"]}),s.createElement("h2",{className:Ot.h2},(0,q._i)(17123,{learning_language_name:e})),s.createElement("div",{className:Ot["gamification-columns"]},s.createElement("div",{className:Ot["gamification-column"]},s.createElement(oa,{description:(0,q._i)(32749,{href:"/efficacy"},{preprocess:e=>(0,q.to)(e,Ot.link)}),iconClassName:Ot["streak-icon"],onClick:e=>{var t;"a"===(null===(t=e.target.tagName)||void 0===t?void 0:t.toLowerCase())&&(0,_.track)("duolingo_landing_efficacy_cta",{})},title:(0,q._i)(32748)}),s.createElement(oa,{description:(0,q._i)(29907),iconClassName:Ot["check-icon"],title:(0,q._i)(29906)})),s.createElement("div",{className:Ot["gamification-img"]}),s.createElement("div",{className:Ot["gamification-column"]},s.createElement(oa,{description:(0,q._i)(29909),iconClassName:Ot["crown-icon"],title:(0,q._i)(29908)}),s.createElement(oa,{description:(0,q._i)(29911),iconClassName:Ot["profile-icon"],title:(0,q._i)(29910)}))))),ca=({learningLanguageName:e,trackingScreen:t})=>s.createElement("section",{className:Ot["content-section"]},s.createElement("div",{className:Ot["content-wrap-row-left"]},s.createElement("div",{className:Ot["duo-img"]}),s.createElement("div",{className:Ot["content-text"]},s.createElement("h2",{className:Ot.h2},(0,q._i)(3721,{learning_language_name:e})),s.createElement("div",{className:Ot["content-description"]},s.createElement(J.P,{trackingScreen:t,trackingTarget:"proof"},(0,q._i)(20266,{learning_language_name:e})," ",(0,q._i)(17300)))))),da=({trackingScreen:e})=>s.createElement("section",{className:Ot["content-section"]},s.createElement("div",{className:Ot["content-wrap-row-left"]},s.createElement("div",{className:Ot["school-img"]}),s.createElement("div",{className:Ot["content-text"]},s.createElement("h2",{className:Ot.h2},(0,q._i)(13199)),s.createElement("div",{className:Ot["content-description"]},(0,q._i)(29898)),s.createElement(J.Z,{className:Ot["blue-link"],href:"https://schools.duolingo.com",onClick:()=>(0,_.track)("click",{which:"web splash schools"}),trackingScreen:e,trackingTarget:"schools"},(0,q._i)(14816)))));var ua=a(480);const pa=()=>s.createElement("section",{className:Ot["content-section"]},s.createElement("div",{className:Ot["content-wrap-row-left"]},s.createElement("img",{className:Ot["super-duo-img"],src:ua}),s.createElement("div",{className:Ot["content-text"]},s.createElement("h2",{className:Ot.h2},(0,q._i)(38674)),s.createElement("div",{className:Ot["content-description"]},(0,q._i)(38675)),s.createElement(J.Z,Object.assign({},(0,se._q)(re.V.LearnWithPlus),{className:Ot["blue-link"],href:T.wl}),(0,q._i)(38676)))));var ga=a(83936),ma=a(68709);const ha=({course:e,courseHatching:t,dispatch:a,isDesktop:n,showTopbarButtons:r,topElementRef:i})=>{const{fromLanguageId:o,learningLanguageId:l,learningLanguageName:c}=e,d=(0,h.Fx)(ga.WM),u=s.createElement(Ft,null,s.createElement(ca,{dispatch:a,learningLanguageName:c,trackingScreen:"course_splash"}),s.createElement(la,{learningLanguageName:c}),s.createElement(pa,null),s.createElement(ia,{headingResource:1150,trackingScreen:"course_splash",via:"course_splash"}),(0,O.J9)()?null:s.createElement(da,{trackingScreen:"course_splash"}));return s.createElement(s.Fragment,null,s.createElement(kt.Z,{content:(0,q.H8)(6807,{learning_language_name:c})}),s.createElement(It.ql,null,s.createElement("title",null,`${(0,q.H8)(3053,{learning_language_name:c})} - ${(0,q.H8)(23227)}`),s.createElement("body",{className:Ot.body})),s.createElement(wt.Z,{dispatch:a,isSplashPage:!0,showButtons:r,trackingScreen:"course_splash",via:"course_splash"},s.createElement(sa,{className:te()(r?ma.Z["hidden-on-mobile"]:ma.Z["hidden-everywhere"]),dispatch:a,fromLanguageId:o,isRegistering:!1,label:18550,learningLanguageId:l})),s.createElement(Nt,{clientExperiments:d,course:e,courseHatching:t,dispatch:a,isDesktop:n,topElementRef:i}),u,s.createElement(aa,null))};var _a=a(26886);const va=({history:e,location:t,match:{params:a}})=>{const n=(0,h.tX)(),r=(0,h.Fx)(x.Mb),i=(0,h.Fx)(x.$4),[o,l]=s.useState(),[c,d]=(0,St.Z)();if(s.useEffect((()=>{let s=!0;(0,ht.Bf)(t,"course_splash");const{fromLanguageId:n=Gt.h9,learningLanguageId:r}=a;(async()=>{const e=await L._s.courseShow(r,n);s&&(l(e),(0,_.track)("course splash",{course_id:`${e.learningLanguageId}<-${e.fromLanguageId}`,logged_in:!1}))})();const i=(0,_a.og)(r,n);return t.pathname!==i&&e.push({pathname:i,search:t.search}),()=>{s=!1}}),[]),!o)return null;const{fromLanguageId:u,learningLanguageId:p,phase:g}=o,m=g===Gt.AP.Active&&!(0,_a.s7)(r,u,!1,p,g);return s.createElement(s.Fragment,null,s.createElement(ha,{course:o,courseHatching:m,dispatch:n,isDesktop:i,showTopbarButtons:!c,topElementRef:d}),s.createElement(Et,{crumbs:[{label:(0,q.H8)(23227),url:new URL(`${window.location.protocol}//${window.location.host}`)},{label:(0,q.H8)(20631),url:new URL(`${window.location.protocol}//${window.location.host}/courses`)}]}))};var fa=a(13325),ba=a(80715),Sa=a(55107),ya=a(33096);const Ea={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","juicy-bee":"rgb(var(--color-bee))","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","z-index-modal":"310","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210",wrap:"_3l_Dd","language-chooser-header":"_1Ii2h","from-language-chooser-list":"_1N6uu","from-language-item":"_2IaY3","from-language-flag":"_3g9Q_","from-language-bottom":"kkmpJ","white-stroke-transparent":"_3r8CI _1fbst whuSQ _2gwtT _1nlVc _2fOC9 t5wFJ _3dtSu _25Cnc _3yAjN UCrz7 yTpGk","loading-container":"_1JZrk"},Ia={de:4,es:0,fr:3,pt:1,ru:2},ka=({availableCourses:e,isNavigating:t,isSelectingFromLanguage:a,onChooseAnotherCourseClick:n,onFromLanguageClick:r,onSelectCourse:i,selectedLearningLanguage:l,uiLanguageId:c})=>{let d=!1;const u=e.filter((e=>{const{fromLanguageId:t,learningLanguageId:a}=e;return t===c||"en"===c&&"en"===a&&!d&&(d=!0,!0)})).map((e=>{const{learningLanguageId:t}=e;return"en"===c&&"en"===t?Object.assign(Object.assign({},e),{numLearners:479e4,numLearnersString:`${4.79.toPrecision(3)}M`}):e}));return s.createElement("div",{className:Ea.wrap},s.createElement("h1",{className:Ea["language-chooser-header"],key:"header"},a?l?"What language do you speak?":(0,q._i)(16916):(0,q._i)(13091)),t?s.createElement("div",{className:Ea["loading-container"]},s.createElement(fa.Z,{theme:"light",type:"screen"})):s.createElement(s.Fragment,null,a?s.createElement("ul",{className:Ea["from-language-chooser-list"]},o.MR(e.filter((({learningLanguage:e})=>!l||e===l)),(e=>e.fromLanguage in Ia?Ia[e.fromLanguage]:1/0)).map((({fromLanguageId:e})=>s.createElement("li",{className:Ea["from-language-item"],key:e,onClick:t=>r(t,e)},s.createElement(Ct.Z,{className:Ea["from-language-flag"],lang:e,size:40}),(0,Gt.lx)(e))))):s.createElement("ul",{className:ya.Z["course-card-container"]},o.MR(u,(e=>-e.numLearners)).map((e=>{const t="en"===c&&"en"===e.learningLanguageId;return s.createElement(Sa.Z,{className:Ea["choose-language"],course:e,"data-language":(0,Gt.D3)(e.learningLanguageId),headingTag:"h2",key:"en"===c&&"en"===e.learningLanguageId?"english-placeholder":e.learningLanguageId,onSelectCourse:a=>{i(e,t,a)},style:"transparent-always-light"})}))),a?s.createElement("div",{className:Ea["from-language-bottom"]},s.createElement("p",null,"Don’t see the language you speak? We’re still working on an English course for you. Coming soon!"),s.createElement("button",{className:Ea["white-stroke-transparent"],onClick:n},"Choose another course")):null))};class wa extends s.Component{constructor(){super(...arguments),this.state={isNavigating:!1,isSelectingFromLanguage:!1},this.onFromLanguageClick=async({},e)=>{const{dispatch:t,location:a}=this.props,s=window.performance.now();if(this.state.selectedLearningLanguage)(0,_.track)("course_picker_tap",{from_language:(0,Gt.D3)(e),learning_language:"en",target:"course",via:"onboarding"}),k.O.scrollTo(0,0),this.setState({isNavigating:!0}),(0,Ie.vl)(a.search).short?await(0,T.Zs)(`//${e}.duolingo.com/welcome/${this.state.selectedLearningLanguage}?short=1`):(Te.Z.start("trial_user_creation",{startTime:s}),t((0,Z.Kb)(this.state.selectedLearningLanguage,e)));else{await(0,_.track)("ui_picker_screen_tap",{});const t=`//${"zh"===e?"zh-CN":e}.duolingo.com/register`;await(0,T.Zs)(t)}},this.onChooseAnotherCourseClick=()=>{this.setState({isSelectingFromLanguage:!1,selectedLearningLanguage:void 0})},this.onSelectCourse=(e,t)=>{const{dispatch:a,history:s,location:n,trackingScreen:r}=this.props,i=window.performance.now();(0,_.track)("click",{screen:r,target:"flag"}),(0,_.track)("course_selected",{learning_language:(0,Gt.D3)(e.learningLanguageId),ui_language:(0,Gt.D3)(Gt.h9)}),a({type:"SET_SHOULD_TRACK_FIRST_PATH"}),(0,_.track)("course_picker_tap",{from_language:(0,Gt.D3)(Gt.h9),learning_language:(0,Gt.D3)(e.learningLanguageId),target:"course",via:"onboarding"}),t?this.setState({isSelectingFromLanguage:!0,selectedLearningLanguage:e.learningLanguageId}):(k.O.scrollTo(0,0),this.setState({isNavigating:!0,selectedLearningLanguage:e.learningLanguageId}),(0,Ie.vl)(n.search).short?s.push(`/welcome/${e.learningLanguageId}?short=1`):(Te.Z.start("trial_user_creation",{startTime:i}),this.props.dispatch((0,Z.Kb)(e.learningLanguageId))))}}componentDidMount(){(0,_.track)("course_picker_load",{ui_language:Gt.h9,via:"onboarding"})}render(){const{availableCourses:e}=this.props,{isNavigating:t,isSelectingFromLanguage:a,selectedLearningLanguage:n}=this.state;return s.createElement(ka,{availableCourses:e,isNavigating:t,isSelectingFromLanguage:a,onChooseAnotherCourseClick:this.onChooseAnotherCourseClick,onFromLanguageClick:this.onFromLanguageClick,onSelectCourse:this.onSelectCourse,selectedLearningLanguage:n,uiLanguageId:Gt.h9})}}const Ta=(0,n.EN)((0,ba.$j)()(wa)),Ca=({children:e})=>s.createElement("div",{className:te()(Ot["splash-header-wrap"],Ot["full-height"])},s.createElement("div",{className:Ot["splash-header"]},e));var Ra=a(13707);const La=()=>{var e;const t=(0,h.tX)(),{featureFlags:{linfra_hide_picker_web:a}}=(0,h.Fx)(x.Mb),n=null!==(e=(0,Ra.Z)("courseList",(()=>L._s.courseList(!0===a))))&&void 0!==e?e:[],r=s.useMemo((()=>n.filter((({phase:e})=>e>Gt.AP.Active))),[n]);return s.useEffect((()=>{(0,_.track)("screen_load",{screen:"course_picker"})}),[]),s.createElement("div",{className:Ot["splash-wrap"]},s.createElement("div",{className:Ot["splash-wrap-inner"]},s.createElement(kt.Z,{content:(0,q.H8)(1100)}),s.createElement(It.ql,null,s.createElement("title",null,`${(0,q.H8)(15785)} - ${(0,q.H8)(23227)}`),s.createElement("body",{className:Ot.body})),s.createElement(wt.Z,{dispatch:t,isSplashPage:!0,showButtons:!1,trackingScreen:"course_picker",via:"onboarding"}),s.createElement(Ca,null,s.createElement(Ta,{availableCourses:r,trackingScreen:"course_picker"}))))},Oa=()=>{const e=(0,h.tX)(),t=(0,w.k6)(),a=(0,w.TH)(),r=(0,F.Pc)()||window.duo.coursePickerRedesign;s.useEffect((()=>{const e=(0,Ie.vl)(a.search);if("/referred"===a.pathname)if(r){const a=e.inviter_id;a?t.replace(`/u/${a}?via=referral`):t.replace(T.B6)}else{(0,_.track)("referral click",{});const t=e.user_invite;t&&(async()=>{await L.xr.trackSplashLoad(t),(0,m.LS)(m.Qt.InviteCode,t)})()}else r&&((0,_.trackRedirection)(window.location.href,"/welcome","soft"),t.replace({pathname:"/welcome",search:a.search}))}),[r]);const i=(0,n.$B)("/register/:languageId"),o=!r&&null!==i;return s.useEffect((()=>{if(o){const{params:{languageId:a}}=i;(0,Gt.jO)(a)?e((0,Z.Kb)(a)):t.replace("/")}}),[o]),r?null:o?s.createElement(fa.Z,{type:"screen-white"}):s.createElement(La,null)};var Pa=a(22498),Aa=a(75671);const Da="CA8O7 _2ciGU _1DGat",xa=()=>{const[e,t]=s.useState(!0);return s.useEffect((()=>{e&&((0,_.track)("android_banner_load",{}),(0,_.track)("web_to_app_store_load",{via:"Android_banner"}))}),[e]),e?s.createElement("div",{className:"_15MEM"},s.createElement("div",{className:"_2BbZ4 _96iJP _1TSHz _1G1lu"}),s.createElement("div",{className:"pZc1g"},s.createElement("div",null,s.createElement("div",{className:"_3xdYT"},(0,q._i)(20861)),s.createElement("span",{className:"_33TRp"},"4.5"),s.createElement("span",{className:Da}),s.createElement("span",{className:Da}),s.createElement("span",{className:Da}),s.createElement("span",{className:Da}),s.createElement("span",{className:"nqTry _2ciGU _1DGat"},s.createElement("span",{className:"_7EH26 CA8O7 _2ciGU _1DGat",style:{width:"50%"}})),s.createElement("span",{className:"_2HDbl"},"15,300,000+")),s.createElement("div",{className:"_1E3JA"},s.createElement("span",{className:"_2Jt9X _1DGat"}),s.createElement(J.Z,{className:"qdLIR",href:(0,Qt.A)({isAndroidBanner:!0,utmCampaign:"splash_mobile_banner",utmContent:"mobile_banner"}),onClick:()=>{(0,_.track)("click",{which:"mobile banner android"}),(0,_.track)("android_banner_tap",{target:"install"}),(0,_.track)("web_to_app_store_tap",{target:"google_or_China",via:"Android_banner"})},target:"_blank"},(0,q._i)(4441))),s.createElement("button",{className:"N3mdh _2kfEr _1nlVc _2fOC9 UCrz7 t5wFJ _1DGat",onClick:()=>{(0,_.track)("android_banner_tap",{target:"dismiss"}),t(!1)}}))):null};var Na=a(42158);const Fa=()=>{const e=(0,Ie.vl)().via;return s.useEffect((()=>{(0,_.track)("china_apk_banner_load",{})}),[]),s.createElement("div",{className:"_3Dcul"},s.createElement("img",{className:"_11VYN",src:Na}),s.createElement("div",null,s.createElement("div",{className:"_23wYk"},"下载多邻国 APP 开始免费学习")),s.createElement("div",{className:"_2Qvim",onClick:()=>{ra.Z.android?(0,Qt.ci)(`splash-banner-${e}`):(0,T.Zs)(`${Qt.JN}?adjust_label=${e}`,!0)}},"去下载"))},Ma=({logo:e,name:t,sameAs:a,url:n})=>{const r={"@type":"Organization",logo:e,name:t,sameAs:a,url:n};return s.createElement(yt,{data:r})},Ua=a.p+"images/f2a2e608c854822ad2563a09595e7827.png",Ha=({sameAs:e})=>s.createElement(Ma,{logo:Ua,name:"Duolingo",sameAs:e,url:"https://www.duolingo.com/"});var ja=a(76578);const Ga=s.createContext(void 0),Ba=s.createContext((()=>{})),Va=({children:e})=>{const[t,a]=s.useState({}),n=s.useCallback(((e,t)=>a((a=>Object.assign(Object.assign({},a),{[e]:t})))),[]),r=(()=>{let e,a;for(const[s,n]of Object.entries(t))(void 0===e||n<=e)&&(e=n,a=s);return a})();return s.createElement(Ba.Provider,{value:n},s.createElement(Ga.Provider,{value:r},e))},za=a.p+"images/splash/lottie/23ab11cb1e1a9aff54facdf57833373d.svg",Za=a.p+"images/splash/lottie/08ec8d0260c55c054e1b97bcbc96ea0f.svg",$a=a.p+"images/splash/lottie/833a22b2834050d139f266a29899bb00.svg",Wa=a.p+"images/splash/lottie/9d3c2c99dd19996319a372f79b2ed3c1.svg",qa=a.p+"lottie/splash/aea5aff1143a9410b81448245ad7c839.json",Qa=a.p+"lottie/splash/71b01cd301b53ec9879f2d06eb85f5db.json",Ya=a.p+"lottie/splash/82f26795696242931a7b905b4918eb1e.json",Ka=a.p+"lottie/splash/e97b1cde32a58c629a0193eea36ddaab.json",Ja="_2OCiu _1G1lu";var Xa=a(29134);const es=()=>{const e=s.useRef(null),[t,a]=s.useState(!1),n=s.useCallback((()=>{var s;t||(null===(s=e.current)||void 0===s||s.style.setProperty("visibility","hidden"),a(!0))}),[]);return{hidePlaceholder:t,onEnterFrame:n,ref:e}},ts=e=>{const[t,a]=s.useState(e);return e&&!t&&a(!0),t},as=(e,{onCleanup:t,onInvisible:a}={})=>{const n=s.useRef(),r=s.useRef(null),[i,o]=(0,St.Z)();return s.useLayoutEffect((()=>{n.current=e})),s.useLayoutEffect((()=>{if(!i)return;const e=()=>{var e,t;const a=null===(e=r.current)||void 0===e?void 0:e.getBoundingClientRect();if(a){const e=new DOMRect(0,0,window.innerWidth,window.innerHeight);null===(t=n.current)||void 0===t||t.call(n,{rootBounds:e,targetRect:a})}};return e(),k.O.addEventListener("scroll",e),()=>{k.O.removeEventListener("scroll",e),null==t||t()}}),[i]),s.useLayoutEffect((()=>{!1===i&&(null==a||a())}),[i]),s.useCallback((e=>{r.current=e,o(e)}),[])},ss=(e,t=!0)=>{const a=s.useContext(Ga),n=s.useContext(Ba),[r,i]=(0,St.Z)(),o=as((t=>{const a=t.rootBounds.height/2,s=t.targetRect.top<a&&t.targetRect.bottom>a?0:Math.min(Math.abs(t.targetRect.top-a),Math.abs(t.targetRect.bottom-a));n(e,s)})),l=s.useCallback((e=>{o(e),i(e)}),[]),c=a===e&&!0===r&&t;return{isPlaying:c,ref:l,shouldRender:ts(c)}},ns=({animation:e,cta:t,flip:a,loopSegment:n,placeholder:r,text:i,title:o})=>{const l=(0,M.Z)(),{hidePlaceholder:c,onEnterFrame:d,ref:u}=es(),p=(0,Xa.Z)(void 0,(()=>l?Promise.resolve(void 0):L.bG.getLottieAnimation(e)),[e,l]),{isPlaying:g,ref:m,shouldRender:h}=ss(e);return s.createElement("section",{className:a?"_3tCBZ _2Jrob":"_2Jrob"},s.createElement("div",{className:"_26S9T"},s.createElement("h2",{className:"yxlyl"},o),s.createElement("p",{className:"_1rVTs"},i),t),s.createElement("div",{className:"_1HZAy",ref:m},s.createElement("img",{alt:"",className:Ja,ref:u,src:r,style:{visibility:c?"hidden":"visible"}}),p&&h?s.createElement(s.Suspense,{fallback:null},s.createElement(Pa.Z,{animationData:p,className:Ja,isPlaying:g,loop:!0,loopSegment:n,onEnterFrame:d,renderSubframes:!1})):null))},rs=()=>s.createElement("section",{className:"_1V6jw"},s.createElement(ns,{animation:qa,loopSegment:[291,450],placeholder:za,text:(0,q._i)(43079,{url:"/efficacy"},{preprocess:e=>(0,q.to)(e,"SYNM9")}),title:(0,q._i)(43080)}),s.createElement(ns,{animation:Qa,flip:!0,loopSegment:[190,532],placeholder:Za,text:(0,q._i)(43082),title:(0,q._i)(43081)}),s.createElement(ns,{animation:Ya,loopSegment:[200,300],placeholder:$a,text:(0,q._i)(43087),title:(0,q._i)(43086)}),s.createElement(ns,{animation:Ka,flip:!0,loopSegment:[188,376],placeholder:Wa,text:(0,q._i)(43085),title:(0,q._i)(43084)}));var is=a(65445);const os=({children:e})=>s.createElement("span",{className:"Eg_1d"},e),ls=a.p+"images/splash/lottie/41a326f8a1a43ee68ef5ea35988fd87b.svg",cs=a.p+"images/splash/lottie/9f63957bf97d10730813cbb715a0baa0.svg",ds=a.p+"images/splash/lottie/268877aef1bcca8a53f24b746483346c.svg",us=a.p+"images/splash/lottie/1dacb3e2a288440001755c6a30e5ec60.svg",ps=a.p+"lottie/splash/44a604a8b57fe256f299aee33fa976a1.json",gs=a.p+"lottie/splash/d69c05e332d40f318009fefd85bfcd43.json",ms=a.p+"lottie/splash/76f61a943cfc8aa61dd79aea33db7a62.json",hs=a.p+"lottie/splash/6ffec1cd2fa38b8106598e250d1b990b.json";const _s=e=>{var{children:t}=e,a=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]])}return a}(e,["children"]);return s.createElement(J.Z,Object.assign({className:te()((0,is.y)({variant:"stroke"}),"_1nWQH _2zs7L")},a),s.createElement(os,null,t))},vs=()=>{const e=Wt();return s.createElement("section",{className:"UgILs"},s.createElement(ns,{animation:ps,cta:s.createElement(_s,{href:`https://englishtest.duolingo.com/${null!=e?e:""}`,onClick:()=>(0,_.track)("click",{which:"web splash det"}),trackingScreen:"splash",trackingTarget:"det"},(0,q._i)(43090)),loopSegment:[0,115],placeholder:ls,text:(0,q._i)(43091),title:(0,q._i)(43092)}),s.createElement(ns,{animation:gs,cta:s.createElement(_s,{href:"https://schools.duolingo.com",onClick:()=>(0,_.track)("click",{which:"web splash schools"}),trackingScreen:"splash",trackingTarget:"schools"},(0,q._i)(43097)),flip:!0,loopSegment:[0,308],placeholder:cs,text:(0,q._i)(43098),title:(0,q._i)(43099)}),s.createElement(ns,{animation:ms,cta:s.createElement(_s,{href:"/abc",onClick:()=>(0,_.track)("click",{which:"web splash abc"}),trackingScreen:"splash",trackingTarget:"abc"},(0,q._i)(43093)),loopSegment:[240,480],placeholder:ds,text:(0,q._i)(43094),title:(0,q._i)(43095)}),s.createElement(ns,{animation:hs,cta:s.createElement(_s,{href:"https://www.duolingo.com/math",isRoutableUrl:()=>!1,onClick:()=>(0,_.track)("click",{which:"web splash math"}),trackingScreen:"splash",trackingTarget:"math"},(0,q._i)(43101)),flip:!0,loopSegment:[0,360],placeholder:us,text:(0,q._i)(43102),title:(0,q._i)(43103)}))},fs=a.p+"images/splash/lottie/890eb76de9a395b182c1c28322721405.svg",bs=a.p+"lottie/splash/9b9c41cb3a201cad24a2f18f90f4d564.json",Ss=a.p+"lottie/splash/98fa4e2fa26d365936333da24aba7e36.json",ys="_33QFb",Es="_2mH4c",Is=({isHoveringGetStarted:e,onRegisterClick:t})=>{const a=s.useRef(null),[n,r]=s.useState(0),[i,o]=s.useState(!1),[l,c]=s.useState(!1),d=s.useContext(Ga),u=s.useContext(Ba),p=(0,M.Z)(),g=ts(d===Ss),{hidePlaceholder:m,onEnterFrame:h,ref:_}=es(),v=(0,Xa.Z)(void 0,(()=>L.bG.getLottieAnimation(Ss)),[]),f=(0,Xa.Z)(void 0,(()=>p?Promise.resolve(void 0):L.bG.getLottieAnimation(bs)),[p]),b=as((e=>{const t=(0,ja.bA)(e.targetRect.top,e.rootBounds.bottom,e.rootBounds.bottom-e.targetRect.height,0,45,!0);S.isAnimating()?S.update(t):S.start(n,t),u(Ss,e.targetRect.top>e.rootBounds.bottom?1/0:-1)}),{onCleanup:()=>u(Ss,1/0)}),S=(0,Aa.Z)((e=>r(e.done?e.target:e.current)),{clamp:!0});return s.useEffect((()=>{if((i||e)&&!p){const e=setTimeout((()=>c(!0)),100);return()=>{clearTimeout(e),c(!1)}}}),[i,e,p]),s.createElement("section",{className:"KZvum"},s.createElement("div",{className:ys}),s.createElement("div",{className:"_2SvHl"},s.createElement("div",{className:"_3uJ25"},s.createElement("h1",{className:"_2n_pR"},(0,q._i)(43100)),s.createElement(J.Z,{className:te()((0,is.y)({variant:"solid"}),"QB6AF _108yV"),href:"/register",onClick:t,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),ref:a,trackingScreen:"splash",trackingTarget:"get_started"},s.createElement(os,null,(0,q._i)(18550)))),s.createElement("div",{className:"_2Hwnx"},s.createElement("span",{className:Es,ref:_,style:{visibility:m?"hidden":"visible"}},s.createElement("img",{alt:"",className:"_3s4Sa",src:fs})),f&&g?s.createElement(s.Suspense,{fallback:null},s.createElement(Pa.Z,{animationData:f,className:Es,isPlaying:d===Ss,loop:!0,onEnterFrame:h,renderSubframes:!1})):null,v?s.createElement(s.Suspense,{fallback:null},s.createElement(Pa.Z,{animationData:v,className:Es,isPlaying:!0,loop:l,mainSegment:l?[46,62]:[n,n+1],renderSubframes:!1})):null,s.createElement("div",{className:"_3ANQ1"}),s.createElement("div",{className:"_2WKsX",ref:b}))),s.createElement("div",{className:ys}))},ks=()=>s.createElement("footer",{className:"_1tcmF"},s.createElement(ta,{isRedesign:!0}),s.createElement("hr",{className:"_1lupA"}),s.createElement(Vt,{isRedesign:!0}),(0,O.J9)()?s.createElement(Mt.Z,{inSplash:!0}):null);var ws=a(16494),Ts=a(69755),Cs=a(16376);const Rs=a.p+"images/china/apkDownload/5ef61d69c243695da18ce19c73f94070.svg",Ls=a.p+"images/china/21b33a54c8c2740c65ee912c85192032.png",Os=a.p+"images/china/9848d6e63324acbd351ada20dc172d48.png",Ps=a.p+"images/china/af0b5b34d654273593e11499dc7bc3fa.png",As=a.p+"images/splash/f92d5f2f7d56636846861c458c0d0b6c.svg",Ds=a.p+"images/splash/lottie/a774fe14d71e450d59a9bc4ed5d210c9.png",xs=a.p+"images/splash/lottie/ded26f174e26ad19d0a35cad7747c28c.png",Ns=a.p+"images/splash/lottie/a02afa2792b8778d69101554fa0fbadd.png",Fs=a.p+"images/splash/lottie/56afa7d9803ab5e57d99b4e4e0cd8932.png",Ms=a.p+"lottie/splash/50bda50231c0bce1584e982cebfe8f33.json",Us="qxl3N zpDJB _1G1lu",Hs="768px",js=s.forwardRef((({className:e,style:t},a)=>s.createElement("svg",{className:e,ref:a,style:t,viewBox:"0 0 1080 1080",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},s.createElement("defs",null,s.createElement("mask",{id:"splash/HeroImage_cn","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_a"})),s.createElement("mask",{id:"splash/HeroImage_cl","mask-type":"alpha"},s.createElement("g",{filter:"url(#splash/HeroImage_b)"},s.createElement("use",{xlinkHref:"#splash/HeroImage_c"}))),s.createElement("mask",{id:"splash/HeroImage_ck","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_d"})),s.createElement("mask",{id:"splash/HeroImage_cj","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_e"})),s.createElement("mask",{id:"splash/HeroImage_ch","mask-type":"alpha"},s.createElement("g",{filter:"url(#splash/HeroImage_f)"},s.createElement("use",{xlinkHref:"#splash/HeroImage_g"}))),s.createElement("mask",{id:"splash/HeroImage_cf","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_h"})),s.createElement("mask",{id:"splash/HeroImage_cd","mask-type":"alpha"},s.createElement("g",{filter:"url(#splash/HeroImage_i)"},s.createElement("use",{xlinkHref:"#splash/HeroImage_j"}))),s.createElement("mask",{id:"splash/HeroImage_cc","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_k"})),s.createElement("mask",{id:"splash/HeroImage_cb","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_l"})),s.createElement("mask",{id:"splash/HeroImage_bZ","mask-type":"alpha"},s.createElement("g",{filter:"url(#splash/HeroImage_m)"},s.createElement("use",{xlinkHref:"#splash/HeroImage_n"}))),s.createElement("mask",{id:"splash/HeroImage_bX","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_o"})),s.createElement("mask",{id:"splash/HeroImage_bV","mask-type":"alpha"},s.createElement("g",{filter:"url(#splash/HeroImage_p)"},s.createElement("use",{xlinkHref:"#splash/HeroImage_q"}))),s.createElement("mask",{id:"splash/HeroImage_bU","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_r"})),s.createElement("mask",{id:"splash/HeroImage_bT","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_s"})),s.createElement("mask",{id:"splash/HeroImage_bR","mask-type":"alpha"},s.createElement("g",{filter:"url(#splash/HeroImage_t)"},s.createElement("use",{xlinkHref:"#splash/HeroImage_u"}))),s.createElement("mask",{id:"splash/HeroImage_bH","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_v"})),s.createElement("mask",{id:"splash/HeroImage_bG","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_w"})),s.createElement("mask",{id:"splash/HeroImage_bE","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_x"})),s.createElement("mask",{id:"splash/HeroImage_bD","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_y"})),s.createElement("mask",{id:"splash/HeroImage_bB","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_z"})),s.createElement("mask",{id:"splash/HeroImage_bA","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_A"})),s.createElement("mask",{id:"splash/HeroImage_by","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_B"})),s.createElement("mask",{id:"splash/HeroImage_bx","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_C"})),s.createElement("mask",{id:"splash/HeroImage_bu","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_D"})),s.createElement("mask",{id:"splash/HeroImage_bv","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_E"})),s.createElement("mask",{id:"splash/HeroImage_br","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_F"})),s.createElement("mask",{id:"splash/HeroImage_bs","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_G"})),s.createElement("mask",{id:"splash/HeroImage_bo","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_H"})),s.createElement("mask",{id:"splash/HeroImage_bp","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_I"})),s.createElement("mask",{id:"splash/HeroImage_bl","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_J"})),s.createElement("mask",{id:"splash/HeroImage_bm","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_K"})),s.createElement("mask",{id:"splash/HeroImage_bh","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_L"})),s.createElement("mask",{id:"splash/HeroImage_bd","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_M"})),s.createElement("mask",{id:"splash/HeroImage_aZ","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_N"})),s.createElement("mask",{id:"splash/HeroImage_aX","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_O"})),s.createElement("mask",{id:"splash/HeroImage_aW","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_P"})),s.createElement("mask",{id:"splash/HeroImage_aV","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_Q"})),s.createElement("mask",{id:"splash/HeroImage_aT","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_R"})),s.createElement("mask",{id:"splash/HeroImage_aS","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_S"})),s.createElement("mask",{id:"splash/HeroImage_aR","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_T"})),s.createElement("mask",{id:"splash/HeroImage_aP","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_U"})),s.createElement("mask",{id:"splash/HeroImage_aO","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_V"})),s.createElement("mask",{id:"splash/HeroImage_aN","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_W"})),s.createElement("mask",{id:"splash/HeroImage_aL","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_X"})),s.createElement("mask",{id:"splash/HeroImage_aK","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_Y"})),s.createElement("mask",{id:"splash/HeroImage_aJ","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_Z"})),s.createElement("mask",{id:"splash/HeroImage_aG","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_aa"})),s.createElement("mask",{id:"splash/HeroImage_aF","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_ab"})),s.createElement("mask",{id:"splash/HeroImage_aE","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_ac"})),s.createElement("mask",{id:"splash/HeroImage_aC","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_ad"})),s.createElement("mask",{id:"splash/HeroImage_az","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_ae"})),s.createElement("mask",{id:"splash/HeroImage_ay","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_af"})),s.createElement("mask",{id:"splash/HeroImage_ax","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_ag"})),s.createElement("mask",{id:"splash/HeroImage_av","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_ah"})),s.createElement("mask",{id:"splash/HeroImage_as","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_ai"})),s.createElement("mask",{id:"splash/HeroImage_ar","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_aj"})),s.createElement("mask",{id:"splash/HeroImage_aq","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_ak"})),s.createElement("mask",{id:"splash/HeroImage_ao","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_al"})),s.createElement("clipPath",{id:"splash/HeroImage_am"},s.createElement("path",{d:"M0 0h1080v1080H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_cg"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_cm"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_ci"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_bY"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_ce"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_ca"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_bQ"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_bW"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_bS"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_bP"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_bO"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_bN"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_bM"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_bL"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_bK"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_bJ"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_bI"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_bF"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_bC"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_bz"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_bw"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_bt"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_bq"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_bn"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_bk"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_bg"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_bi"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_bc"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_be"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_aY"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_ba"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_aU"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_aQ"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_aM"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_aI"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_aB"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_aH"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_aD"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_au"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_aA"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_aw"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_an"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_at"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_ap"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("path",{fill:"#FFF",d:"M417.282-239.018c9.82 103.73 232.12-521.78 246.127-392.97 2.29 21.056-1.03 35.089-25.598 34.308C579.475-599.534-474.306-352.811-542.757-356c-19.992-.931-32.638-5.554-41.553-20.711-57.369-97.54 273.023 350.483 372.968 190.244 6.619-10.613 112.579-70.911 115.818-79.402 5.292-13.87 22.173-23.063 48.437-23.234 104.499-.682 314.125-10.343 409.022-13.477 30.279-1 52.529 33.796 55.347 63.562z",transform:"matrix(-.5494 -.086 .086 -.5494 1622.22 780.829)",style:{display:"block"},id:"splash/HeroImage_q"}),s.createElement("path",{fill:"#DB8D74",d:"M431.079 338.492c3.758 36.37-5.144 49.227-17.954 80.525-12.513 30.467-2.174 59.613 23.296 67.222 31.828 9.736 59.328-3.404 73.764-46.726 13.09-38.962 18.125-69.661 11.792-114.595-11.209-78.484-96.913-44.208-90.898 13.574z",transform:"rotate(22.5 -131.847 3549.945)",style:{display:"block"},id:"splash/HeroImage_o"}),s.createElement("path",{fill:"#FFCBA3",d:"M214.911-406.123c-15.719-8.703-43.885-4.032-56.858 18.506-12.413 21.56-5.358 48.218 16.487 61.532 3.993 2.525 9.48 5.777 14.104 8.034 10.375-14.704 50.055-68.302 41.022-79.374-3.887-2.632-14.755-8.698-14.755-8.698z",transform:"rotate(11.503 -2472.413 5637.844) scale(1.08627)",style:{display:"block"},id:"splash/HeroImage_B"}),s.createElement("path",{fill:"#B23232",d:"m193.505-387.295.753 1.713c1.624 3.285.26 7.256-3.048 8.869-3.307 1.613-7.306.258-8.93-3.027l-.753-1.714c-1.624-3.285-.259-7.255 3.048-8.869 3.308-1.613 7.305-.257 8.93 3.028z",transform:"rotate(11.503 -2556.067 5682.86) scale(1.08627)",style:{display:"block"},id:"splash/HeroImage_C"}),s.createElement("path",{fill:"#50C800",d:"M-33.852-109.247H99.656c34.191 0 59.6 37.853 53.498 65.49-7.182 32.531-25.38 89.14-34.27 121.621-9.079 33.172-29.752 47.586-59.572 47.586-29.82 0-103.203-.074-132.006-.074-48.143 0-64.347-41.105-54.652-78.558 8.428-32.56 21.554-73.657 30.392-103.537 8.412-28.439 33.749-52.528 63.102-52.528z",transform:"rotate(-1 33645.183 -81234.865) scale(1.08)",style:{display:"block"},id:"splash/HeroImage_J"}),s.createElement("path",{fill:"#FFC7B8",d:"M663.878-74.736c-15.712-9.442-22.917-13.352-38.271-16.411-38.11-7.593-88.912 7.908-135.03 34.11-14.809 8.414-17.146 16.657-16.116 28.315 1.835 20.775 2.533 25.712 4.202 47.463.713 9.292 10.388 17.692 21.305 27.403 17.895 15.918 49.393 36.287 71.847 49.786 14.447 8.685 24.747-7.705 35.576-16.302 11.976-9.507 23.382-23.529 44.664-28.959 6.523-1.664 13.248-.917 18.267-5.161 21.003-17.763 36.226-38.226 45.549-58.626 5.74-12.561.103-23.389-10.439-31.393-21.023-15.962-32.09-24.538-41.554-30.225z",transform:"rotate(-44.75 1759.676 -945.154) scale(.77853)",style:{display:"block"},id:"splash/HeroImage_N"}),s.createElement("path",{fill:"#CC348D",d:"M745.232-224.137c-.304-28.44 22.505-51.741 50.945-52.045 28.44-.304 51.741 22.506 52.045 50.946.304 28.44-22.505 51.74-50.945 52.044-28.44.304-51.741-22.505-52.045-50.945z",transform:"rotate(-155 1413.888 80.768) scale(1.2)",style:{display:"block"},id:"splash/HeroImage_X"}),s.createElement("path",{fill:"#0084C2",d:"M732.862-124.382c4.759-25.473 29.266-42.264 54.739-37.505s42.265 29.265 37.506 54.738-29.266 42.265-54.739 37.506-42.265-29.266-37.506-54.739z",transform:"matrix(1.15 0 0 1.15 829.652 633.365)",style:{display:"block"},id:"splash/HeroImage_Y"}),s.createElement("path",{fill:"#FFF",d:"M412.599 78.212c-6.132 3.04-7.257 9.111-7.45 10.036l-2.078 9.955c-.804 3.852 1.678 7.626 5.543 8.43l7.348 1.528c7.924 1.648 15.683-3.417 17.331-11.313.495-2.371 3.308-16.424 3.308-16.424s-16.193-6.083-24.002-2.212zm-14.702-3.734c3.902 5.915 3.593 9.268 3.279 11.761-.411 3.262-1.961 10.655-1.961 10.655-.863 4.124-4.939 6.767-9.102 5.904l-7.271-1.508c-8.179-1.696-13.434-9.638-11.738-17.74.661-3.158 3.897-16.189 3.897-16.189s19.186 1.492 22.896 7.117z",transform:"matrix(0 0 -.03402 .6491 1636.956 664.083)",style:{display:"block"},id:"splash/HeroImage_aj"}),s.createElement("path",{fill:"#FFF",d:"M412.599 78.212c-6.132 3.04-7.257 9.111-7.45 10.036l-2.078 9.955c-.804 3.852 1.678 7.626 5.543 8.43l7.348 1.528c7.924 1.648 15.683-3.417 17.331-11.313.495-2.371 3.308-16.424 3.308-16.424s-16.193-6.083-24.002-2.212zm-14.702-3.734c3.902 5.915 3.593 9.268 3.279 11.761-.411 3.262-1.961 10.655-1.961 10.655-.863 4.124-4.939 6.767-9.102 5.904l-7.271-1.508c-8.179-1.696-13.434-9.638-11.738-17.74.661-3.158 3.897-16.189 3.897-16.189s19.186 1.492 22.896 7.117z",transform:"matrix(0 0 -.03402 .6491 1636.956 664.083)",style:{display:"block"},id:"splash/HeroImage_ak"}),s.createElement("filter",{id:"splash/HeroImage_b",filterUnits:"objectBoundingBox",x:"0%",y:"0%",width:"100%",height:"100%"},s.createElement("feComponentTransfer",{in:"SourceGraphic"},s.createElement("feFuncA",{type:"table",tableValues:"1.0 0.0"}))),s.createElement("filter",{id:"splash/HeroImage_f",filterUnits:"objectBoundingBox",x:"0%",y:"0%",width:"100%",height:"100%"},s.createElement("feComponentTransfer",{in:"SourceGraphic"},s.createElement("feFuncA",{type:"table",tableValues:"1.0 0.0"}))),s.createElement("filter",{id:"splash/HeroImage_i",filterUnits:"objectBoundingBox",x:"0%",y:"0%",width:"100%",height:"100%"},s.createElement("feComponentTransfer",{in:"SourceGraphic"},s.createElement("feFuncA",{type:"table",tableValues:"1.0 0.0"}))),s.createElement("filter",{id:"splash/HeroImage_m",filterUnits:"objectBoundingBox",x:"0%",y:"0%",width:"100%",height:"100%"},s.createElement("feComponentTransfer",{in:"SourceGraphic"},s.createElement("feFuncA",{type:"table",tableValues:"1.0 0.0"}))),s.createElement("filter",{id:"splash/HeroImage_p",filterUnits:"objectBoundingBox",x:"0%",y:"0%",width:"100%",height:"100%"},s.createElement("feComponentTransfer",{in:"SourceGraphic"},s.createElement("feFuncA",{type:"table",tableValues:"1.0 0.0"}))),s.createElement("filter",{id:"splash/HeroImage_t",filterUnits:"objectBoundingBox",x:"0%",y:"0%",width:"100%",height:"100%"},s.createElement("feComponentTransfer",{in:"SourceGraphic"},s.createElement("feFuncA",{type:"table",tableValues:"1.0 0.0"}))),s.createElement("linearGradient",{id:"splash/HeroImage_bj",spreadMethod:"pad",gradientUnits:"userSpaceOnUse"},s.createElement("stop",null),s.createElement("stop",null),s.createElement("stop",null)),s.createElement("linearGradient",{id:"splash/HeroImage_bf",spreadMethod:"pad",gradientUnits:"userSpaceOnUse"},s.createElement("stop",null),s.createElement("stop",null),s.createElement("stop",null)),s.createElement("linearGradient",{id:"splash/HeroImage_bb",spreadMethod:"pad",gradientUnits:"userSpaceOnUse",x1:"542.181",y1:"38.77",x2:"594.279",y2:"167.238"},s.createElement("stop",{offset:"0%",stopColor:"#FFA75F"}),s.createElement("stop",{offset:"50%",stopColor:"#FFB78B"}),s.createElement("stop",{offset:"100%",stopColor:"#FFC7B8"}))),s.createElement("g",{clipPath:"url(#splash/HeroImage_am)"},s.createElement("g",{clipPath:"url(#splash/HeroImage_an)",transform:"matrix(-1 0 0 1 1916 -23.5)",style:{display:"block"}},s.createElement("g",{style:{display:"block"}},s.createElement("path",{fill:"#58CC02",d:"M1681.457 320.208c-12.538 54.456-106.878 481.498-125.468 564.221-1.022 4.548-2.148 9.037-3.462 13.395-3.404 11.291-8.068 21.697-15.445 29.926-9.958 11.108-24.858 18.25-48.274 18.25-36.776 0-292.497-6.849-327.725-6.849-12.383 0-22.016-6.309-27.946-16.038-.378-.621-21.615-38.648-21.921-39.316-4.748-10.373-6.57-22.86-2.947-37.253 24.84-98.693 119.597-486.725 137.44-565.604 1.885-8.335 4.816-16.412 8.7-23.828 4.404-8.409 10.033-15.969 16.751-22.095 10.802-9.849 24.42-15.99 40.293-15.99h287.02c14.334 0 25.578 5.972 33.13 15.054.879 1.057 41.935 44.299 42.713 45.436 7.746 11.319 10.439 26.367 7.141 40.691z"}),s.createElement("path",{stroke:"#58CC02",strokeWidth:13,d:"M1681.457 320.208c-12.538 54.456-106.878 481.498-125.468 564.221-1.022 4.548-2.148 9.037-3.462 13.395-3.404 11.291-8.068 21.697-15.445 29.926-9.958 11.108-24.858 18.25-48.274 18.25-36.776 0-292.497-6.849-327.725-6.849-12.383 0-22.016-6.309-27.946-16.038-.378-.621-21.615-38.648-21.921-39.316-4.748-10.373-6.57-22.86-2.947-37.253 24.84-98.693 119.597-486.725 137.44-565.604 1.885-8.335 4.816-16.412 8.7-23.828 4.404-8.409 10.033-15.969 16.751-22.095 10.802-9.849 24.42-15.99 40.293-15.99h287.02c14.334 0 25.578 5.972 33.13 15.054.879 1.057 41.935 44.299 42.713 45.436 7.746 11.319 10.439 26.367 7.141 40.691z",fill:"none"}),s.createElement("path",{fill:"#FFF",d:"M1641.23 278.067c-12.538 54.456-110.709 481.142-129.299 563.865-7.243 32.232-19.721 61.572-67.181 61.572-36.776 0-268.552.149-303.78.149-26.121 0-40.009-28.074-32.701-57.109 24.84-98.693 119.597-486.725 137.44-565.604 7.46-32.977 31.29-61.913 65.744-61.913h287.02c32.614 0 49.232 30.916 42.757 59.04z"}),s.createElement("path",{stroke:"#9DEEC7",strokeWidth:13,d:"M1641.23 278.067c-12.538 54.456-110.709 481.142-129.299 563.865-7.243 32.232-19.721 61.572-67.181 61.572-36.776 0-268.552.149-303.78.149-26.121 0-40.009-28.074-32.701-57.109 24.84-98.693 119.597-486.725 137.44-565.604 7.46-32.977 31.29-61.913 65.744-61.913h287.02c32.614 0 49.232 30.916 42.757 59.04z",fill:"none"}))),s.createElement("g",{clipPath:"url(#splash/HeroImage_bk)",transform:"matrix(-1 0 0 1 1976 -43.5)",style:{display:"block"}},s.createElement("g",{mask:"url(#splash/HeroImage_bl)",style:{display:"block"}},s.createElement("path",{fill:"#50C800",d:"m1384.254 457.488 144.166-2.516c36.921-.645 65.072 39.751 59.004 69.71-7.142 35.263-25.726 96.735-34.714 131.976-9.178 35.992-31.23 51.946-63.43 52.508-32.201.562-111.444 1.865-142.547 2.408-51.986.908-70.259-43.173-60.496-83.8 8.487-35.318 21.887-79.943 30.867-112.375 8.548-30.868 35.453-57.358 67.15-57.911z"}),s.createElement("path",{fill:"#8EE000",d:"M1561.288 610.003c5.14-18.424 9.149-32.246 12.886-49.66 3.568-16.632-8.951-34.893-14.28-40.087 2.625-9.372 5.548-28.175-2.12-30.679-7.667-2.503-19.31 12.632-19.36 12.608 6.479-26.997-4.97-29.835-14.024-22.352-11.258 9.304-31.789 30.28-50.203 45.6-18.414 15.319-44.513 9.774-56.255-3.465-12.569-14.171-21.69-33.818-30.832-44.844-9.141-11.025-22.11 12.33-22.073 26.459-.074.026-2.176-2.997-6.706-8.786-6.639-8.486-17.043-2.969-20.442 18.304-22.656 11.602-30.359 28.738-33.886 39.968 0 0-9.316 26.5-10.08 52.761-.697 23.909 23.058 47.663 49.675 47.198 25.124-.438 51.666-11.467 60.284-31.583 8.62-.2 34.442-.72 39.136-.802 2.71 17.3 23.039 35.96 53.251 35.433 42.027-.733 60.884-31.21 65.029-46.073z"}),s.createElement("path",{fill:"#FFF",d:"M1372.718 525.2c25.155-.44 36.313 18.16 32.401 40.82-1.734 10.045-3.06 16.729-5.032 24.966-5.905 24.68-27.477 41.984-50.74 42.39-22.946.4-38.26-18.48-33.444-40.92 1.942-9.048 4.616-20.095 6.057-25.906 5.61-22.632 25.603-40.911 50.758-41.35zm148.365 3.654c25.205-.44 36.386 18.197 32.466 40.901-1.738 10.066-3.067 16.764-5.043 25.017-5.917 24.73-27.53 42.067-50.84 42.474-22.991.401-38.337-18.516-33.511-41.001 1.946-9.066 4.626-20.134 6.07-25.958 5.622-22.676 25.652-40.993 50.858-41.433z"}),s.createElement("path",{fill:"#4B4B4B",d:"M1501.191 552.847c-9.21-3.833-19.202.694-21.317 11.598-2.336 12.036-4.934 21.96-5.068 27.345-.182 7.335 2.82 20.21 16.097 20.09 11.704-.106 17.471-5.756 19.785-13.142 2.508-8.011 4.222-19.361 4.774-22.707-6.088.219-11.338-1.782-14.592-6.448-3.87-5.55-1.08-12.408.321-16.736zm-122.218-5.06c-9.273-3.672-18.7 1.455-21.175 12.386-2.423 10.702-2.986 15.003-4.032 20.338-2.1 10.716-2.713 21.548 10.482 26.06 11.126 3.803 22.15-3.99 24.507-12.703 2.213-8.18 4.573-19.732 5.078-23.116-5.015.842-11.4-.346-15.448-5.795-4.044-5.445-2.76-13.456.588-17.17z"}),s.createElement("path",{fill:"#8EE000",d:"M1374.367 518.17c-46.003.302-51.565 25.403-51.565 25.403s.191-.262.57-.73c3.306-4.086 20.945-23.892 51.038-22.174 33.54 1.915 38.932 24.324 67.462 25.827 28.531 1.502 56.552-23.993 79.113-22.884 24.801 1.219 36.595 19.378 39.95 25.665.709 1.326 1.041 2.124 1.041 2.124s-5.55-31.408-42.043-30.771c-36.495.637-40.12 22.203-77.623 22.357-37.503.155-21.941-25.12-67.943-24.818zm50.085 93.108c28.684-.5 39.004 35.908 67.64 37.825 29.993 2.008 50.2-6.908 51.193-22.537-7.9 5.811-13.687 19.882-45.727 16.957-32.04-2.926-46.163-32.112-73.13-33.483-29.699-1.51-43.898 32.04-77.925 31.666-27.488-.304-35.18-18.03-35.18-18.03s-1.428 23.779 33.582 23.168c36.698-.64 50.865-35.065 79.547-35.566z"}),s.createElement("path",{fill:"#F48000",d:"M1446.278 622.454c-2.659 15.765-12.302 23.187-25.182 23.412-11.825.207-20.343-10.41-18.023-22.273.367-1.877.88-3.494 1.523-4.89 3.474-7.533 10.76-8.598 19.511-9.183 9.31-.622 22.015-3.035 22.504 8.439.055 1.309-.047 2.8-.333 4.495z"}),s.createElement("path",{fill:"#B16900",d:"M1444.562 608.13c-2.334 12.411-10.725 18.268-21.918 18.464-10.277.18-17.664-8.165-15.631-17.505.322-1.478-.033 1.388.528.29 3.03-5.936 9.364-6.785 16.97-7.258 8.09-.503 19.136-2.418 19.544 6.611.046 1.031.758-1.937.507-.603z"}),s.createElement("path",{fill:"#FFB8D1",d:"M1444.562 608.13c-2.334 12.411-10.725 18.268-21.918 18.464-5.961.104-10.949-2.659-13.69-6.82-1.987-3.014 35.859-12.979 35.608-11.645z"}),s.createElement("path",{fill:"#FFC200",d:"M1396.101 618.567c3.998-15.708 15.795-21.4 31.136-21.668 13.956-.244 27.466 7.88 27.52 22.206a2.72 2.72 0 0 1-1.98 2.635c-1.153.318-29.522 6.193-29.522 6.193s-24.016-6.636-25.272-6.825c-1.257-.188-2.414-.451-1.882-2.54z"}),s.createElement("path",{fill:"#FFE747",d:"M1421.383 599.647c4.944-1.021 10.276-.84 14.98.377 3.205.83 4.884 3.374 3.977 5.511-.862 2.028-3.51 3.386-6.361 2.373-4.062-1.445-9.936-1.342-13.753-.596-3.006.587-4.986-1.652-4.767-3.381.362-2.847 3.47-3.776 5.924-4.284z"}))))))),Gs=[130,290],Bs=`(min-width: ${Hs})`,Vs=({animateTopbar:e,canShowAndroidBanner:t,hideTopbar:a,onGetStartedMouseEnter:n,onGetStartedMouseLeave:r,onLogInClick:i,onRegisterClick:o})=>{const l=(0,h.Fx)(x.$4),c=(0,Ts.Z)(),d=(0,M.Z)(),u=(0,Xa.Z)(void 0,(()=>d?Promise.resolve(void 0):L.bG.getLottieAnimation(Ms)),[d]),{hidePlaceholder:p,onEnterFrame:g,ref:m}=es(),{isPlaying:v,ref:f,shouldRender:b}=ss(Ms,l),[S,y]=(0,St.Z)({rootMargin:"-72px 0px 0px 0px"}),E=(0,Ie.vl)().via,I="WeChat"===E?Os:"DET"===E?Ls:Ps;return s.createElement("header",{className:te()("_3JtPO",{_3Znp1:t})},s.createElement("div",{className:te()("_2rbiz",{_332dh:e,StuET:a,_1Ti8X:c})},s.createElement("nav",{className:S?"_1uPJV":"J1_jm _1uPJV"},s.createElement(J.Z,{href:"/"},s.createElement("img",{alt:"Duolingo",className:"_2mK7o",src:As})),S?s.createElement(ws.Z,{className:"_3x9Nm",style:"hare-always-light",trackingScreen:"splash"}):s.createElement(J.Z,{className:te()((0,is.y)({variant:"solid"}),"_3OZCu _108yV _2dZP2"),href:"/register",onClick:()=>o("topbar"),onMouseEnter:n,onMouseLeave:r,trackingScreen:"splash",trackingTarget:"get_started"},s.createElement(os,null,(0,q._i)(18550))))),s.createElement("div",{className:"_3P8T-"},s.createElement("div",{className:"_147Y1",ref:f},l&&!d?s.createElement(js,{className:Us,ref:m,style:{visibility:p?"hidden":"visible"}}):s.createElement("picture",{className:Us,ref:m,style:{visibility:p?"hidden":"visible"}},s.createElement("source",{media:Bs,srcSet:`${Ns}, ${Fs} 2x`}),s.createElement("source",{srcSet:`${Ds}, ${xs} 2x`}),s.createElement("img",{alt:"",src:Ds})),u&&b?s.createElement(s.Suspense,{fallback:null},s.createElement(Pa.Z,{animationData:u,className:"_1YfpC zpDJB _1G1lu",isPlaying:v,loop:!0,loopSegment:Gs,onEnterFrame:g,renderSubframes:!1,renderer:"svg"})):null),s.createElement("div",{className:"_3wkNA"},s.createElement("h1",{className:"sDOMk"},(0,q._i)(29896)),s.createElement("div",{className:"_1-V6o"},s.createElement(J.Z,Object.assign({},(0,se._q)(re.V.GetStartedTop),{className:te()((0,is.y)({variant:"solid"}),"GzNGH _108yV"),href:"/register",onClick:()=>o("top"),onMouseEnter:n,onMouseLeave:r,ref:y,trackingScreen:"splash",trackingTarget:"get_started"}),s.createElement(os,null,(0,q._i)(18550))),s.createElement($.Z,Object.assign({},(0,se._q)(re.V.HaveAccount),{className:"_1QYlW _2zs7L",onClick:()=>i("top"),variant:"stroke"}),s.createElement(os,null,(0,q._i)(20690)))),["zh","zh-CN"].includes(window.duo.uiLanguage)&&ra.Z.desktop&&(0,O.J9)()?s.createElement("div",{className:"_1P2Pe"},s.createElement("img",{className:"_2rsxt",src:I}),s.createElement($.Z,{className:"_3YIzr",onClick:()=>(0,Qt.ci)("splash-page")},s.createElement("span",{className:"_3Yh0c"},s.createElement("span",{className:"_30Q2s"},"扫一扫下载 APP"),s.createElement("img",{src:Rs})))):null)),s.createElement("div",{className:"_3IHzb"},s.createElement(Cs.Z,{className:"_3kJkj",onCarouselItemClick:()=>(0,_.track)("click",{which:"splash page flag"}),trackingScreen:"splash"})))},zs=a.p+"images/splash/lottie/229d5f88cc9df2eb0b68f39466500911.svg",Zs=a.p+"lottie/splash/c16e90b93e35750c893be4b58720cef2.json",$s=a.p+"lottie/splash/c02b5f75d9ec48815e6a964f641a9fe2.json",Ws="_1iZJw",qs=s.forwardRef((({},e)=>{const t=s.useRef(),a=s.useRef(null),n=s.useContext(Ga),r=s.useContext(Ba),i=(0,M.Z)(),o=ts(n===Zs),{hidePlaceholder:l,onEnterFrame:c,ref:d}=es(),u=(0,Xa.Z)(void 0,(()=>L.bG.getLottieAnimation(Zs)),[]),p=(0,Xa.Z)(void 0,(()=>i?Promise.resolve(void 0):L.bG.getLottieAnimation($s)),[i]),g=as((e=>{var a;let s=(0,ja.bA)(e.targetRect.top,e.rootBounds.bottom,-e.targetRect.height,0,450);r(Zs,s>=0&&s<=450?-1:1/0),s=Math.min(Math.max(s,0),450),m.isAnimating()?m.update(s):m.start(null!==(a=t.current)&&void 0!==a?a:s,s)}),{onCleanup:()=>r(Zs,1/0)}),m=(0,Aa.Z)((e=>{var s;const n=e.done?e.target:e.current;t.current=n,(null===(s=a.current)||void 0===s?void 0:s.animation)&&a.current.animation.goToAndStop(n,!0)}),{clamp:!0});return s.createElement("section",{className:"_2Ifk1",ref:e},s.createElement("div",{className:"_2UDeG"},s.createElement("div",{className:"_2LeU5"},s.createElement("h1",{className:"_1yvWZ"},(0,q._i)(43096)),s.createElement("div",{className:"_1-N1K"},s.createElement(na.Z,{href:ra.Z.desktop?(0,q.H8)(22504,void 0,{addRightToLeftMark:!1}):(0,Qt.fy)({via:"splash_page"}),onClick:()=>{(0,_.track)("click",{screen:"splash",target:"mobile_download_ios"}),(0,_.track)("click",{which:"mobile download ios"}),(0,_.track)("web_to_app_store_tap",{target:"apple",via:"splash_page"})},size:"medium",style:"snow-always-light",type:"apple",via:"splash_page"}),s.createElement(na.Z,{href:ra.Z.desktop?(0,Qt.A)({utmCampaign:"splash",utmContent:"download_button"}):(0,Qt.Ir)({via:"splash_page"}),onClick:()=>{(0,_.track)("click",{screen:"splash",target:"mobile_download_android"}),(0,_.track)("click",{which:"mobile download android"}),(0,_.track)("web_to_app_store_tap",{target:"google_or_China",via:"splash_page"})},size:"medium",style:"snow-always-light",type:(0,O.J9)()?"china":"google"}))),s.createElement("div",{className:"_3TZgM"},s.createElement("img",{alt:"",className:Ws,ref:d,src:zs,style:{visibility:l?"hidden":"visible"}}),p&&o?s.createElement(s.Suspense,{fallback:null},s.createElement(Pa.Z,{animationData:p,className:Ws,isPlaying:n===Zs,loop:!0,onEnterFrame:c,renderSubframes:!1})):null,u?s.createElement(s.Suspense,{fallback:null},s.createElement(Pa.Z,{animationData:u,className:Ws,isPlaying:!1,ref:a,renderSubframes:!1})):null,s.createElement("div",{className:"_1AOK-",ref:g}))))}));var Qs=a(98683);const Ys=a.p+"images/splash/3a733db6d6873e1a915f70cf72554ce3.svg",Ks=a.p+"images/splash/dd7453522d3192d4df06d4652508b8bc.svg",Js=a.p+"images/splash/lottie/22fce01f6df43e0472d7585afad9a43a.svg",Xs=a.p+"images/splash/lottie/43ea369cfa70f093c3edad4d75ea6009.svg",en=a.p+"lottie/splash/904f242fe2ab5477e3b97928d3e1cb89.json",tn="_1uvqp _1G1lu",an=[35,156],sn=`(min-width: ${Hs})`,nn=s.forwardRef((({},e)=>{const t=(0,M.Z)(),a=(0,Xa.Z)(void 0,(()=>t?Promise.resolve(void 0):L.bG.getLottieAnimation(en)),[t]),{hidePlaceholder:n,onEnterFrame:r,ref:i}=es(),{isPlaying:o,ref:l,shouldRender:c}=ss(en),d=(0,Qs.Q)({iapContext:"splash"});return s.createElement("section",{className:"_1zKNN",ref:e},s.createElement("div",{className:"gbnAR"},s.createElement("div",{className:"_1GsjX",ref:l},s.createElement("img",{alt:"",className:tn,ref:i,src:t?Xs:Js,style:{visibility:n?"hidden":"visible"}}),a&&c?s.createElement(s.Suspense,{fallback:null},s.createElement(Pa.Z,{animationData:a,className:tn,isPlaying:o,loop:!0,loopSegment:an,onEnterFrame:r,renderSubframes:!1})):null),s.createElement("div",{className:"_661Zl"},s.createElement("picture",null,s.createElement("source",{height:91,media:sn,srcSet:Ys,width:605}),s.createElement("img",{alt:(0,q.H8)(36712),className:"_2kDi8",height:55,src:Ks,width:339})),s.createElement($.Z,{className:"_2hD3V _1Rcu8",onClick:d,variant:"solid"},s.createElement(os,null,(0,q._i)(43088))))))})),rn=()=>{const e=(0,h.tX)(),t=(0,w.TH)(),{featureFlags:{linfra_hide_picker_web:a}}=(0,h.Fx)(x.Mb),n=s.useRef(),r=s.useRef(null),i=s.useRef(null),o=s.useRef(null),[l,c]=s.useState(!1),[d,u]=s.useState(!1),[p,g]=s.useState(!1),[m,v]=s.useState(!1);(0,R.Z)("SplashPageRedesign"),(0,Ra.Z)("courseList",(()=>L._s.courseList(!0===a)));const f=ra.Z.silk?null:(0,O.J9)(),b=ra.Z.android&&!f,S="/"===t.pathname,[y,E]=s.useMemo((()=>"/log-in"===t.pathname?[`${(0,q.H8)(18855)} - ${(0,q.H8)(23227)}`,(0,q.H8)(28228)]:[`${(0,q.H8)(23227)} - ${(0,q.H8)(10751)}`,(0,q.H8)(19956)]),[t.pathname]),I=(0,Aa.Z)((e=>{const t=e.done?e.target:e.current;if(n.current=t,r.current){const e=(0,ja.bA)(t,0,100,0,1,!0);r.current.style.setProperty("opacity",`${e}`)}}),{clamp:!0}),k=as((e=>{var t,a;const s=null===(t=i.current)||void 0===t?void 0:t.getBoundingClientRect();if(!s)return;(e=>{var t;I.isAnimating()?I.update(e):I.start(null!==(t=n.current)&&void 0!==t?t:e,e)})((0,ja.bA)(s.top,e.rootBounds.bottom,e.rootBounds.top,0,100,!0));const r=null===(a=o.current)||void 0===a?void 0:a.getBoundingClientRect();r&&(u(s.top-96<e.rootBounds.top&&r.bottom>e.rootBounds.top),v(!0))}),{onInvisible:()=>v(!0)}),C=e=>{(0,_.track)("splash_tap",{target:"get_started"}),(0,_.track)("click",{which:`splash page get started ${e}`})};return s.useEffect((()=>{m&&c(!0)})),s.useEffect((()=>{Pa.Z.preload()}),[]),s.useEffect((()=>{Te.Z.finishOptional("splash_to_intro")}),[]),s.useEffect((()=>{(0,_.track)("screen_load",{screen:"splash"})}),[]),s.useEffect((()=>{S&&(0,ht.Bf)(t,"splash")}),[S]),s.useEffect((()=>{window.location.host.startsWith("join")&&e({options:{goBack:()=>(0,T.Zs)(void 0,!0),isSignIn:!0,name:Q.t.SignInUp,via:"onboarding"},type:"TOGGLE_MODAL"})}),[]),s.useEffect((()=>{"/log-in"===t.pathname&&((0,_.track)("sign_in_load",{screen:"splash_login_page",via:"onboarding"}),e({options:{allowLanguagelessUser:!0,isSignIn:!0,name:Q.t.SignInUp,via:"onboarding"},type:"TOGGLE_MODAL"}))}),[t.pathname]),s.createElement("div",{className:"_3ApL-",ref:k},s.createElement(kt.Z,{content:E}),s.createElement(It.ql,null,s.createElement("title",null,y)),s.createElement(Ha,{sameAs:["https://www.youtube.com/duolingo","https://twitter.com/duolingo","https://www.facebook.com/duolingo","https://www.linkedin.com/company/duolingo/","https://www.instagram.com/duolingo/","https://www.twitch.tv/Duolingo"]}),s.createElement(It.ql,null,s.createElement("body",{className:"_2EAJQ"})),s.createElement(Va,null,s.createElement(Vs,{animateTopbar:l,canShowAndroidBanner:b,hideTopbar:d,onGetStartedMouseEnter:()=>g(!0),onGetStartedMouseLeave:()=>g(!1),onLogInClick:()=>{(0,_.track)("click",{screen:"splash",target:"has_account"}),(0,_.track)("splash_tap",{target:"has_account"}),e({options:{allowLanguagelessUser:!0,isSignIn:!0,name:Q.t.SignInUp,via:"onboarding"},type:"TOGGLE_MODAL"})},onRegisterClick:C}),s.createElement("main",null,s.createElement("div",{className:"_2D87c"},s.createElement("div",{className:"_35PgS _2lttK",ref:r}),s.createElement(rs,null),s.createElement(qs,{ref:i})),s.createElement(nn,{ref:o}),s.createElement(vs,null),s.createElement(Is,{isHoveringGetStarted:p,onRegisterClick:()=>C("bottom")})),s.createElement(ks,null)),f?s.createElement(Fa,null):b?s.createElement(xa,null):null)},on=e=>"string"==typeof e?e:[e.pathname,e.search,e.hash].join(""),ln=e=>{const t=(0,w.TH)();return s.useEffect((()=>{(0,_.trackRedirection)(on(t),on(e.to),"soft")}),[]),s.createElement(n.l_,Object.assign({},e))},cn=(...e)=>e,dn=({children:e,location:t,match:{params:a}})=>{return(0,F.Pc)()?s.createElement(ln,{to:{pathname:(n=["/enroll",a.learningLanguageId,a.fromLanguageId,a.slug],n.reduceRight(((e,t)=>t?e?`${t}/${e}`:t:""),"")),search:t.search}}):s.createElement(s.Fragment,null,e);var n},un=(0,ze.Z)((()=>Promise.all([a.e(8250),a.e(148),a.e(2668),a.e(5314),a.e(3766),a.e(8729),a.e(4990),a.e(8327),a.e(7449),a.e(7203),a.e(9879),a.e(2603),a.e(9441),a.e(351),a.e(4073)]).then(a.bind(a,15371)))),pn=(0,ze.Z)((()=>Promise.all([a.e(2668),a.e(5314),a.e(3766),a.e(2185),a.e(1684),a.e(3784),a.e(8743),a.e(1033),a.e(2603),a.e(7391),a.e(1564),a.e(3016),a.e(9441),a.e(6098),a.e(950),a.e(450),a.e(2599),a.e(7507)]).then(a.bind(a,4293)))),gn=(0,ze.Z)((()=>a.e(1436).then(a.bind(a,61436)))),mn=(0,ze.Z)((()=>a.e(2980).then(a.bind(a,81603)))),hn=(0,ze.Z)((()=>a.e(2177).then(a.bind(a,12177)))),_n=(0,ze.Z)((()=>a.e(8962).then(a.bind(a,76692)))),vn=(0,ze.Z)((()=>Promise.all([a.e(8250),a.e(148),a.e(1362),a.e(8743),a.e(7449),a.e(1033),a.e(7203),a.e(4081),a.e(5637),a.e(6601),a.e(7391),a.e(1564),a.e(345)]).then(a.bind(a,80306)))),fn=(0,ze.Z)((()=>Promise.all([a.e(8250),a.e(148),a.e(1362),a.e(8743),a.e(7449),a.e(1033),a.e(7203),a.e(4081),a.e(5637),a.e(6601),a.e(7391),a.e(1564),a.e(6541)]).then(a.bind(a,98968)))),bn=(0,ze.Z)((()=>Promise.all([a.e(8250),a.e(148),a.e(8743),a.e(7449),a.e(1033),a.e(7203),a.e(4081),a.e(5637),a.e(6601),a.e(7424)]).then(a.bind(a,2072)))),Sn=(0,ze.Z)((()=>Promise.all([a.e(5809),a.e(7660)]).then(a.bind(a,33843)))),yn=(0,ze.Z)((()=>Promise.all([a.e(2668),a.e(2603),a.e(3685),a.e(8215)]).then(a.bind(a,79026)))),En=(0,ze.Z)((()=>Promise.all([a.e(2668),a.e(5314),a.e(3766),a.e(2185),a.e(1684),a.e(3784),a.e(8743),a.e(1033),a.e(2603),a.e(7391),a.e(1564),a.e(3016),a.e(9441),a.e(6098),a.e(950),a.e(450),a.e(2599),a.e(7507)]).then(a.bind(a,4617)))),In=(0,ze.Z)((()=>Promise.all([a.e(2668),a.e(5314),a.e(3766),a.e(2185),a.e(407),a.e(7493),a.e(1684),a.e(3784),a.e(8743),a.e(1033),a.e(2603),a.e(7391),a.e(1564),a.e(3016),a.e(9441),a.e(6098),a.e(950),a.e(3860),a.e(450),a.e(7187),a.e(2599),a.e(9179),a.e(5993)]).then(a.bind(a,45993)))),kn=(0,ze.Z)((()=>Promise.all([a.e(2668),a.e(5314),a.e(3766),a.e(2185),a.e(1684),a.e(3784),a.e(8743),a.e(1033),a.e(2603),a.e(7391),a.e(1564),a.e(3016),a.e(9441),a.e(6098),a.e(950),a.e(450),a.e(2599),a.e(7507)]).then(a.bind(a,65637)))),wn=(0,ze.Z)((()=>a.e(9199).then(a.bind(a,69199)))),Tn=(0,ze.Z)((()=>Promise.all([a.e(2668),a.e(5314),a.e(3766),a.e(2185),a.e(1684),a.e(3784),a.e(8743),a.e(1033),a.e(2603),a.e(7391),a.e(1564),a.e(3016),a.e(9441),a.e(6098),a.e(950),a.e(450),a.e(2599),a.e(7507)]).then(a.bind(a,50565)))),Cn=(0,ze.Z)((()=>Promise.all([a.e(8250),a.e(148),a.e(8743),a.e(7449),a.e(1033),a.e(7203),a.e(4081),a.e(5637),a.e(6601),a.e(4367)]).then(a.bind(a,5805)))),Rn=(0,ze.Z)((()=>Promise.all([a.e(8250),a.e(148),a.e(8743),a.e(7449),a.e(1033),a.e(7203),a.e(4081),a.e(5637),a.e(6601),a.e(5227)]).then(a.bind(a,84212)))),Ln=(0,ze.Z)((()=>Promise.all([a.e(8250),a.e(148),a.e(941),a.e(8743),a.e(7449),a.e(1033),a.e(7203),a.e(4081),a.e(5637),a.e(6601),a.e(9755)]).then(a.bind(a,91097)))),On=(0,ze.Z)((()=>Promise.all([a.e(8250),a.e(148),a.e(8743),a.e(7449),a.e(1033),a.e(7203),a.e(4081),a.e(5637),a.e(6601),a.e(9722)]).then(a.bind(a,6506)))),Pn=(0,ze.Z)((()=>Promise.all([a.e(8729),a.e(5254),a.e(7524)]).then(a.bind(a,87121)))),An=(0,ze.Z)((()=>Promise.all([a.e(8250),a.e(148),a.e(8743),a.e(7449),a.e(7203),a.e(4081),a.e(673),a.e(768)]).then(a.bind(a,17421)))),Dn=(0,ze.Z)((()=>Promise.all([a.e(5314),a.e(3766),a.e(3593)]).then(a.bind(a,26569)))),xn=(0,ze.Z)((()=>a.e(1348).then(a.bind(a,41348)))),Nn=(0,ze.Z)((()=>a.e(726).then(a.bind(a,53020)))),Fn=(0,ze.Z)((()=>a.e(5862).then(a.bind(a,5862)))),Mn=(0,ze.Z)((()=>a.e(1958).then(a.bind(a,33790)))),Un=(0,ze.Z)((()=>a.e(4772).then(a.bind(a,4772)))),Hn=(0,ze.Z)((()=>a.e(8788).then(a.bind(a,43029)))),jn=(0,ze.Z)((()=>a.e(9062).then(a.bind(a,67040)))),Gn=(0,ze.Z)((()=>a.e(6782).then(a.bind(a,26782)))),Bn=(0,ze.Z)((()=>Promise.all([a.e(8729),a.e(5254),a.e(4635)]).then(a.bind(a,43972)))),Vn=(0,ze.Z)((()=>a.e(5146).then(a.bind(a,20629)))),zn=(0,ze.Z)((()=>a.e(4850).then(a.bind(a,20590)))),Zn=(0,ze.Z)((()=>Promise.all([a.e(1229),a.e(7281)]).then(a.bind(a,33513)))),$n=(0,ze.Z)((()=>Promise.all([a.e(1229),a.e(3091)]).then(a.bind(a,41958)))),Wn=(0,ze.Z)((()=>Promise.all([a.e(6461),a.e(1229),a.e(512),a.e(2048)]).then(a.bind(a,95907)))),qn=(0,ze.Z)((()=>Promise.all([a.e(2668),a.e(6461),a.e(3547),a.e(4152)]).then(a.bind(a,54345)))),Qn=(0,ze.Z)((()=>a.e(5249).then(a.bind(a,25249)))),Yn=(0,ze.Z)((()=>a.e(7182).then(a.bind(a,97182)))),Kn=(0,ze.Z)((()=>a.e(4001).then(a.bind(a,4001)))),Jn=(0,ze.Z)((()=>a.e(4702).then(a.bind(a,24702)))),Xn=(0,ze.Z)((()=>a.e(6202).then(a.bind(a,56202)))),er=(0,ze.Z)((()=>a.e(3827).then(a.bind(a,83827)))),tr=(0,ze.Z)((()=>a.e(7957).then(a.bind(a,97957)))),ar=(0,ze.Z)((()=>a.e(3473).then(a.bind(a,13473)))),sr=(0,ze.Z)((()=>Promise.resolve().then(a.bind(a,54452)))),nr=(0,ze.Z)((()=>Promise.all([a.e(8250),a.e(148),a.e(2035),a.e(8743),a.e(7449),a.e(7203),a.e(4081),a.e(9879),a.e(673),a.e(2238),a.e(1927)]).then(a.bind(a,14368)))),rr=(0,ze.Z)((()=>Promise.all([a.e(9879),a.e(2915)]).then(a.bind(a,91380)))),ir=(0,ze.Z)((()=>Promise.all([a.e(9879),a.e(2432)]).then(a.bind(a,85180)))),or=(0,ze.Z)((()=>Promise.all([a.e(2238),a.e(6811)]).then(a.bind(a,4224)))),lr=(0,ze.Z)((()=>a.e(5258).then(a.bind(a,5793)))),cr=(0,ze.Z)((()=>Promise.all([a.e(9879),a.e(1066)]).then(a.bind(a,58921)))),dr=(0,ze.Z)((()=>a.e(5473).then(a.bind(a,18)))),ur=(0,ze.Z)((()=>Promise.all([a.e(9879),a.e(6285)]).then(a.bind(a,16855)))),pr=(0,ze.Z)((()=>Promise.all([a.e(9879),a.e(5893)]).then(a.bind(a,15390)))),gr=(0,ze.Z)((()=>Promise.all([a.e(2668),a.e(2185),a.e(2035),a.e(1458),a.e(2603),a.e(3685),a.e(411)]).then(a.bind(a,9247)))),mr=(0,ze.Z)((()=>a.e(7606).then(a.bind(a,67606)))),hr=(0,ze.Z)((()=>Promise.all([a.e(5314),a.e(3766),a.e(2185),a.e(407),a.e(7493),a.e(8743),a.e(1033),a.e(7391),a.e(3016),a.e(9441),a.e(6098),a.e(950),a.e(3860),a.e(450),a.e(7187),a.e(9179),a.e(507)]).then(a.bind(a,50339)))),_r=(0,ze.Z)((()=>Promise.all([a.e(8250),a.e(148),a.e(8743),a.e(7449),a.e(1033),a.e(7203),a.e(4081),a.e(5637),a.e(6601),a.e(8558)]).then(a.bind(a,78082)))),vr=(0,ze.Z)((()=>Promise.all([a.e(8250),a.e(148),a.e(1771),a.e(8743),a.e(7449),a.e(1033),a.e(7203),a.e(4081),a.e(5637),a.e(6601),a.e(7391),a.e(1564),a.e(324)]).then(a.bind(a,59709)))),fr=(0,ze.Z)((()=>Promise.all([a.e(8250),a.e(148),a.e(8743),a.e(7449),a.e(1033),a.e(7203),a.e(4081),a.e(5637),a.e(6601),a.e(5287)]).then(a.bind(a,94740)))),br=(0,ze.Z)((()=>a.e(1099).then(a.bind(a,22470)))),Sr=(0,ze.Z)((()=>a.e(70).then(a.bind(a,20343)))),yr=(0,ze.Z)((()=>a.e(6274).then(a.bind(a,65595)))),Er=(0,ze.Z)((()=>a.e(3841).then(a.bind(a,59177)))),Ir=(0,ze.Z)((()=>Promise.all([a.e(2668),a.e(2603),a.e(766)]).then(a.bind(a,7096)))),kr=(0,ze.Z)((()=>a.e(940).then(a.bind(a,90940)))),wr=(0,ze.Z)((()=>a.e(3162).then(a.bind(a,1271)))),Tr=(0,ze.Z)((()=>Promise.all([a.e(8250),a.e(148),a.e(8743),a.e(7449),a.e(1033),a.e(7203),a.e(4081),a.e(5637),a.e(9879),a.e(5187)]).then(a.bind(a,42164)))),Cr=(0,ze.Z)((()=>Promise.all([a.e(8250),a.e(148),a.e(9115),a.e(8743),a.e(7449),a.e(1033),a.e(7203),a.e(4081),a.e(5637),a.e(6601),a.e(7391),a.e(1564),a.e(8833)]).then(a.bind(a,78500)))),Rr=(0,ze.Z)((()=>Promise.all([a.e(8250),a.e(148),a.e(9115),a.e(8743),a.e(7449),a.e(1033),a.e(7203),a.e(4081),a.e(5637),a.e(6601),a.e(7391),a.e(1564),a.e(8833)]).then(a.bind(a,11800)))),Lr=e=>{const t=({children:t})=>s.createElement(wr,{feature:e},t);return t.displayName=`UnavailableInZombieMode feature="${e}"`,t},Or=e=>e.flatMap((e=>{if(void 0===e.subroutes)return e;const{components:t=[],exact:a=!1,path:s="",props:n={}}=e;return Or(e.subroutes).map((({components:e=[],exact:r=!1,path:i="",props:o={}})=>({components:[...t,...e],exact:a||r,path:`${s}${i}`,props:Object.assign(Object.assign({},n),o)})))})),Pr=!0,Ar=!0,Dr={noMobileTabbar:Pr,noMobileTopbar:Ar},xr={noDesktopTopbar:!0,noMobileTabbar:Pr,noMobileTopbar:Ar},Nr={noContainer:!0,noDesktopTopbar:!0,noMobileTabbar:Pr,noMobileTopbar:Ar},Fr=({appProps:e,components:t,routerProps:a})=>{const n=s.useMemo((()=>{const e=[un,...t].filter(ze.N).filter((e=>!e.hasLoaded()));return 0===e.length?void 0:Promise.all(e.map((e=>e.preload())))}),[t]),r=(0,Xa.Z)([],(async()=>(await n,t)),[n]),i=void 0===n?t:r,o=(()=>{if(t===i)return t;const e=t.findIndex(((e,t)=>e!==i[t]));return 0!==i.length&&-1===e?t:t.slice(0,e)})();return s.createElement(un,Object.assign({},a,e),o.reduceRight(((e,t)=>s.createElement(t,Object.assign({},a),e)),null))},Mr=(0,ze.Z)((()=>Promise.all([a.e(8250),a.e(8729),a.e(146),a.e(618)]).then(a.bind(a,16497)))),Ur="/business/admin",Hr=e=>`${Ur}/${e}`,jr=Hr("learners"),Gr=[s.createElement(ln,{exact:!0,from:Ur,key:"route",to:jr}),s.createElement(n.AW,{component:e=>s.createElement(Mr,Object.assign({},e)),key:"route",path:`${Ur}/:page`})],Br=({target:e})=>(s.useLayoutEffect((()=>{(0,T.Zs)(e,!0)}),[]),null),Vr=[s.createElement(n.AW,{key:"route",path:"/404",render:()=>s.createElement(Br,{target:T.Oy})}),s.createElement(n.AW,{key:"route",path:"/blog",render:()=>s.createElement(Br,{target:null!==T.Ql&&void 0!==T.Ql?T.Ql:"https://blog.duolingo.com"})}),s.createElement(n.AW,{key:"route",path:["/careers","/jobs"],render:()=>s.createElement(Br,{target:"https://careers.duolingo.com"})}),s.createElement(n.AW,{key:"route",path:"/design",render:()=>s.createElement(Br,{target:"https://design.duolingo.com/"})}),s.createElement(n.AW,{key:"route",path:"/events",render:()=>s.createElement(Br,{target:"https://events.duolingo.com?source=main"})}),s.createElement(n.AW,{key:"route",path:"/press",render:()=>s.createElement(Br,{target:"https://press.duolingo.com"})}),s.createElement(n.AW,{key:"route",path:["/effectiveness-study","/research"],render:()=>s.createElement(Br,{target:"https://research.duolingo.com"})}),s.createElement(n.AW,{key:"route",path:["/school","/schools"],render:()=>s.createElement(Br,{target:"https://schools.duolingo.com?source=main"})}),s.createElement(n.AW,{key:"route",path:"/team",render:()=>s.createElement(Br,{target:"https://careers.duolingo.com/about"})}),s.createElement(n.AW,{key:"route",path:"/abc",render:e=>s.createElement(Br,{target:`https://abc.duolingo.com${e.location.search}`})})],zr=(0,ze.Z)((()=>Promise.all([a.e(6461),a.e(512),a.e(1806)]).then(a.bind(a,62802)))),Zr=(0,ze.Z)((()=>Promise.all([a.e(6461),a.e(3547),a.e(5813)]).then(a.bind(a,49304)))),$r=(0,ze.Z)((()=>a.e(7402).then(a.bind(a,48012)))),Wr=(0,ze.Z)((()=>Promise.all([a.e(1285),a.e(1607)]).then(a.bind(a,35906)))),qr=(0,ze.Z)((()=>Promise.all([a.e(1285),a.e(2944)]).then(a.bind(a,87159)))),Qr=(0,ze.Z)((()=>Promise.all([a.e(1285),a.e(229)]).then(a.bind(a,70964)))),Yr=(0,ze.Z)((()=>a.e(4662).then(a.bind(a,94325)))),Kr=(0,ze.Z)((()=>Promise.all([a.e(1285),a.e(5390)]).then(a.bind(a,96441)))),Jr=(0,ze.Z)((()=>a.e(6350).then(a.bind(a,36450)))),Xr=(0,ze.Z)((()=>a.e(1674).then(a.bind(a,71221)))),ei=(0,ze.Z)((()=>a.e(6734).then(a.bind(a,65305)))),ti=(0,ze.Z)((()=>a.e(6850).then(a.bind(a,30850)))),ai=(0,ze.Z)((()=>a.e(8825).then(a.bind(a,34017)))),si=(0,ze.Z)((()=>Promise.all([a.e(2035),a.e(961),a.e(5986)]).then(a.bind(a,44330)))),ni=(0,ze.Z)((()=>Promise.all([a.e(961),a.e(5820)]).then(a.bind(a,51285)))),ri=[s.createElement(n.AW,{component:ei,key:"route",path:"/2022-campaigns"}),s.createElement(n.AW,{component:$r,key:"route",path:"/apk-download"}),s.createElement(n.AW,{component:Zr,key:"route",path:"/business/checkout"}),s.createElement(n.AW,{component:zr,exact:!0,key:"route",path:"/business"}),s.createElement(n.AW,{component:Kr,key:"route",path:"/duocon"}),s.createElement(n.AW,{component:Wr,key:"route",path:"/duocon2019"}),s.createElement(n.AW,{component:qr,key:"route",path:"/duocon2020"}),s.createElement(n.AW,{component:Qr,key:"route",path:"/duocon2021"}),s.createElement(n.AW,{component:Yr,key:"route",path:"/duocon2022"}),s.createElement(n.AW,{component:Jr,key:"route",path:"/duoversary"}),s.createElement(n.AW,{component:Xr,key:"route",path:"/efficacy/:tab?"}),s.createElement(n.AW,{component:ai,key:"route",path:"/share/sm"}),s.createElement(n.AW,{component:ai,key:"route",path:"/share-direct/sm"}),s.createElement(n.AW,{component:ti,key:"route",path:"/valyriansteel"}),s.createElement(n.AW,{component:si,key:"route",path:"/weekly-report"}),s.createElement(n.AW,{component:ni,key:"route",path:"/year-in-review/2023"})],ii=()=>{var e;return null!==(e=(0,m.rV)(m.Qt.LastAppCrashes,{useSessionStorage:!0}))&&void 0!==e?e:[]},oi=(0,ze.Z)((()=>a.e(6557).then(a.bind(a,36557)))),li=(0,ze.Z)((()=>a.e(6710).then(a.bind(a,56710)))),ci=(0,ze.Z)((()=>a.e(7017).then(a.bind(a,57017)))),di=e=>e?cn("/p"):cn("/p","/leaderboard"),ui=cn("/","/log-in","/register_user"),pi=()=>{const e=(0,w.TH)(),t=(()=>{const e=(0,h.Fx)((e=>e.ui.shouldUnmount));return s.useEffect((()=>{if(!e)return;(()=>{const e=ii();e.push(Date.now()),(0,m.LS)(m.Qt.LastAppCrashes,e.slice(-3),{useSessionStorage:!0})})();const t=async e=>{await(0,_.trackRedirection)(window.location.href,e,"hard",!1),await(0,T.Zs)(e)};if((()=>{const e=Date.now()-6e4;return 3===ii().filter((t=>t>e)).length})())return(0,m.cl)(m.Qt.LastAppCrashes,{useSessionStorage:!0}),void t("/errors/500.html");if("visible"===document.visibilityState)return void t((0,T.cd)());const a=()=>{"visible"===document.visibilityState&&t((0,T.cd)())};return document.addEventListener("visibilitychange",a),()=>document.removeEventListener("visibilitychange",a)}),[e]),e})(),a=(0,F.Pc)(),i=s.useMemo((()=>(e=>Or((e=>[...e?[{components:[({location:e})=>s.createElement(ln,{to:{pathname:T.B6,search:e.search}})],exact:!0,path:"/"}]:[],{props:{userMustBeLoggedIn:!0},subroutes:[{components:[bn],subroutes:[{components:[Sn],path:T.B6},{components:[Lr("shop"),yn],path:"/shop"}]},{components:[fr],exact:!0,path:"/alphabets/:languageAbbrev/tips",props:Dr},{components:[vr],path:"/alphabets/:languageAbbrev/tips/:groupIndex/:tipIndex",props:Dr},{components:[vr],path:"/alphabets/:languageAbbrev/:alphabetSessionId/tips",props:xr},{components:[Lr("alphabet-lessons"),_r],path:"/characters"},{components:[Lr("mistakes"),Rn],exact:!0,path:"/practice-hub/mistakes"},{components:[Lr("practice-hub"),Ln],exact:!0,path:"/practice-hub/stories"},{components:[Lr("practice-hub"),On,Pn],exact:!0,path:T.$R},{components:[kn,En],props:xr,subroutes:[{path:"/alphabets/:languageAbbrev/:alphabetSessionId"},{path:"/placement/:languageAbbrev"},{path:"/practice"},{path:"/preview/:skillId/:lesson"}]},{components:[Tn,kn,En],props:xr,subroutes:[{path:"/practice-hub/:practiceType"},{path:"/practice-hub/words/practice"}]},{components:[pn,In],props:xr,subroutes:[{exact:!0,path:"/lesson"},{path:"/lesson/section/:pathSectionNumber/test"},{path:"/lesson/unit/:pathUnitNumber/level/:pathLevelNumber"},{path:"/lesson/unit/:pathUnitNumber/legendary/:pathLevelNumber"},{path:"/lesson/unit/:pathUnitNumber/test"}]},{components:[vn],exact:!0,path:"/guidebook/:languageAbbrev/:unitNumber",props:Dr},{components:[Rr],exact:!0,path:"/sections/details/:pathSectionNumber",props:Dr},{components:[fn],path:"/guidebook/preview/:fromLanguageAbbrev/:learningLanguageAbbrev/:unitNumber",props:Dr},{components:[Tn,En],path:"/mistakes-review",props:xr},{components:[Lr("practice-hub"),Cn],path:"/practice-hub"},{components:[kr,gr],path:"/settings"},{components:[Un],path:"/admin_tools"},{components:[Lr("profiles"),cr],path:"/user-search",props:Dr},{components:[dr],exact:!0,path:"/friend-updates"},{components:[ur],path:"/friend-updates/:kudosFilter"},{components:[Dn],path:"/welcome/:linkCode?",props:Nr},{components:[Lr("leaderboards"),An],path:"/leaderboard",props:{noMobileTopbar:Ar}},{components:[Lr("quests"),Tr],path:"/quests",props:{noMobileTopbar:Ar}},{components:[Cr],exact:!0,path:"/sections"}]},{components:[xn],subroutes:[{components:[Nn],path:"/approach"},{components:[Fn],path:"/contact"},{components:[Mn],path:"/info"}]},{components:[gn],path:"/login-page",props:Nr},{components:[tr],path:"/abc-privacy"},{components:[Lr("courses"),jn],path:"/courses/:fromLanguageId?"},{components:[hn],path:"/forgot_password"},{components:[ar],path:"/remove/:token/:email"},{components:[Gn],path:"/guidelines"},{components:[Bn],path:"/help",props:Nr},{components:[Hn],path:"/join-beta"},{components:[Vn],path:"/mobile"},{components:[zn],path:"/participation"},...T.a9.map((e=>({components:[Zn],path:e,props:Nr}))),{components:[qn],path:"/gift/checkout",props:Nr},{components:[Wn],path:"/gift",props:Nr},{components:[$n],path:"/redeem",props:Nr},{components:[_n],path:"/reset_password/:client_abbrev?"},{components:[Qn],path:"/attribution"},{components:[Jn],path:"/privacy"},{components:[Xn],path:"/terms"},{components:[Yn],path:"/auto-renewal-agreement"},{components:[Kn],path:"/cross-border-data-transfer-agreement"},{components:[er],path:"/cookies"},{components:[sr],path:"/verify/:token"},{components:[mr],exact:!0,path:"/stories"},{components:[wn,hr],path:"/stories/:storyId",props:xr},{components:[Lr("profiles"),rr],path:"/profile/:username",subroutes:[{path:"/followers"},{path:"/following"}]},{components:[Lr("profiles"),or],path:"/profile/:username/achievements"},{components:[Lr("profiles"),pr],path:"/profile/:username/friends-in-common"},{components:[Lr("profiles"),ir],path:"/friend-suggestions"},{components:[lr],path:"/profile/:username/courses"},{components:[Lr("courses"),mn],path:"/enroll/:learningLanguageId/:fromLanguageId?/:slug?"},{components:[br],path:"/family",props:Nr},{components:[Sr],props:Nr,subroutes:[{path:"/family-plan"},{path:"/share-family-plan"},{path:"/family-plan-user-invite"}]},{components:[yr],exact:!0,props:Nr,subroutes:[{path:"/classroom"},{path:"/classroom/:classroomCode"}]},{components:[Er],path:"/bango/:reseller/:token",props:Nr},{components:[Ir],path:"/purchase",props:Nr},{props:{noMobileTopbar:e},subroutes:[{components:[Lr("profiles"),nr],path:"/profile/:username"},{components:[Lr("profiles"),nr],path:"/u/:userId"}]}])(e)).map((({exact:e,path:t,props:a,components:r=[]})=>s.createElement(n.AW,{exact:e,key:"route",path:t,render:e=>s.createElement(Fr,{appProps:null!=a?a:{},components:r,routerProps:e})}))))(a)),[a]),l=s.useMemo((()=>(e=>o.ZP.keys(Gt.Jl).map((e=>`/${(0,Gt.D3)(e)}`)).map((t=>s.createElement(ln,{exact:!0,from:t,key:"route",to:(0,T.cd)(e)}))))(a)),[a]),[c,d]=s.useState(!1);if(t)return null;if(!c){const t=(0,T.o_)(e);if(t.pathname!==e.pathname||t.search!==e.search)return s.createElement(ln,{to:t});d(!0)}const u=(0,T.cd)(a);return s.createElement(bt,null,s.createElement(s.Suspense,{fallback:null},s.createElement(n.rs,null,s.createElement(ln,{from:"/comment",to:"/"}),s.createElement(ln,{from:"/discussion",to:"/"}),s.createElement(ln,{from:"/topic",to:"/"}),s.createElement(ln,{from:"/Luis",to:"/profile/Luis"}),s.createElement(ln,{from:"/beta-app",to:"/join-beta"}),s.createElement(ln,{from:"/c",to:u}),s.createElement(ln,{from:"/download",to:"/mobile"}),s.createElement(ln,{from:"/words",to:u}),s.createElement(ln,{from:"/english",to:"/course/en"}),s.createElement(ln,{from:"/french",to:"/course/fr"}),s.createElement(ln,{from:"/home",to:u}),s.createElement(ln,{from:"/italian",to:"/course/it"}),s.createElement(ln,{from:"/join",to:"/classroom"}),s.createElement(ln,{from:"/kids",to:"/abc"}),s.createElement(ln,{from:"/labs",to:u}),s.createElement(ln,{from:"/learningseason",to:"/2022-campaigns"}),s.createElement(ln,{from:"/learning-season",to:"/2022-campaigns"}),s.createElement(ln,{from:"/login",to:"/log-in"}),s.createElement(ln,{from:"/mm",to:u}),s.createElement(ln,{from:"/mm-early-access",to:u}),s.createElement(ln,{from:"/nocuesta",to:"/2022-campaigns"}),s.createElement(ln,{exact:!0,from:"/o",to:"/classroom"}),s.createElement(ln,{from:"/o/:classroomCode",to:"/classroom/:classroomCode"}),s.createElement(ln,{from:"/plus_view",to:"/settings/super"}),s.createElement(ln,{from:"/reddem",to:{pathname:"/redeem",search:e.search}}),s.createElement(ln,{from:"/redem",to:{pathname:"/redeem",search:e.search}}),s.createElement(ln,{from:"/reedeem",to:{pathname:"/redeem",search:e.search}}),s.createElement(ln,{from:"/reedem",to:{pathname:"/redeem",search:e.search}}),s.createElement(ln,{from:"/show_store",to:"/shop"}),s.createElement(ln,{from:"/sign-up",to:"/register"}),s.createElement(ln,{from:"/signup",to:"/register"}),s.createElement(ln,{from:"/spanish",to:"/course/es"}),s.createElement(ln,{from:"/start",to:"/register"}),s.createElement(ln,{from:"/summer2020",to:"/2022-campaigns"}),s.createElement(ln,{from:"/troubleshooting",to:"/help"}),a?ui.filter((e=>"/"!==e)).map((t=>s.createElement(ln,{from:t,key:"route",to:{pathname:T.B6,search:e.search}}))):s.createElement(ln,{from:T.B6,to:{pathname:"/",search:e.search}}),...Vr,...l,...ri,...Gr,(0,gt.Au)()?s.createElement(n.l_,{from:"/lottie",to:"/debug/components/controls/LottieAnimationLazy"}):null,(0,gt.Au)()?s.createElement(n.AW,{component:oi,path:"/debug/:splat*"}):null,s.createElement(n.AW,{component:li,path:di(a)}),s.createElement(n.AW,{path:"/course/:learningLanguageId/:fromLanguageId?/:slug?",render:e=>s.createElement(dn,Object.assign({},e),s.createElement(va,Object.assign({},e)))}),s.createElement(n.AW,{component:ci,path:"/logout"}),s.createElement(n.AW,{component:Oa,exact:!0,path:["/referred","/register","/register/:languageId"]}),...i,s.createElement(n.AW,{component:rn,exact:!0,path:ui}),s.createElement(n.AW,{component:r.Z}))))}},17818:(e,t,a)=>{"use strict";a.d(t,{O:()=>l,H:()=>o});var s=a(27378);const n="_270mD".split(" "),r=()=>document.getElementById("root"),i=()=>({x:window.scrollX,y:window.scrollY}),o=(e,t)=>{s.useLayoutEffect((()=>{if(e){const e=l.lock();return()=>{t||l.scrollTo(0,0),e.release()}}}),[e])},l=new class{constructor(){this.locks=new Set,this.addEventListener=(e,t)=>{document.addEventListener("scroll",t),r().addEventListener("scroll",t)},this.clampY=e=>Math.min(Math.max(e,this.minY),this.maxY),this.lock=()=>{const e={release:()=>{this.locks.delete(e),0===this.locks.size&&(()=>{const e=r(),{scrollLeft:t,scrollTop:a}=e;e.classList.remove(...n),window.scrollTo(t,a)})()}};return this.locks.add(e),1===this.locks.size&&(()=>{const e=r(),{x:t,y:a}=i();e.classList.add(...n),e.scrollLeft=t,e.scrollTop=a,window.scrollTo(0,0)})(),e},this.removeEventListener=(e,t)=>{document.removeEventListener("scroll",t),r().removeEventListener("scroll",t)},this.scrollTo=(e,t)=>{if(this.isLocked){const a=r();a.scrollLeft=e,a.scrollTop=t}else window.scrollTo(e,t)},this.scrollToY=e=>{this.scrollTo(this.x,e)},this.getCurrentOffset=()=>{if(this.isLocked){const e=r();return{x:e.scrollLeft,y:e.scrollTop}}return i()}}get isLocked(){return this.locks.size>0}get isScrollable(){return this.scrollHeight>window.innerHeight}get maxY(){return this.scrollHeight-window.innerHeight}get minY(){return 0}get scrollHeight(){return this.isLocked?r().scrollHeight:document.documentElement.scrollHeight}get x(){return this.getCurrentOffset().x}get y(){return this.getCurrentOffset().y}}},60106:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var s=a(80254);class n{constructor(e){this.listeners=[],this.subscribe=e=>(this.listeners.push(e),()=>{this.listeners=this.listeners.filter((t=>t!==e))}),this.get=()=>this.value(),this.set=e=>{this.value=s.IH(e),this.notifyListeners()},this.notifyListeners=()=>{this.listeners.forEach((e=>e()))},this.value=s.IH(e)}}class r{constructor(e){this.listeners=[],this.substate=e=>{var t;return null!==(t=this.substates[e])&&void 0!==t?t:this.makeSubstate(e,(()=>{}))},this.subscribe=e=>(this.listeners.push(e),()=>{this.listeners=this.listeners.filter((t=>t!==e))}),this.get=e=>this.substate(e).get(),this.getAll=()=>Object.fromEntries(Object.entries(this.substates).map((([e,t])=>[e,t.get()]))),this.set=(e,t)=>{this.substate(e).set(t)},this.makeSubstate=(e,t)=>{const a=new n(t);return a.subscribe(this.notifyListeners),this.substates[e]=a,a},this.notifyListeners=()=>{this.listeners.forEach((e=>e()))},this.substates={};for(const[t,a]of Object.entries(e))this.makeSubstate(t,(()=>a))}}},40472:(e,t,a)=>{"use strict";a.d(t,{M:()=>g,y:()=>i});const s=[["...","…"]],n=["ca","cs","cy","da","de","en","eo","es","fi","fr","ga","gd","ht","hu","hv","hw","id","it","la","mi","nl-NL","no-BO","pl","pt","ro","sv","sw","tl","tr","vi","xx-ZB","yu"],r=(e,t)=>{for(let a=0;a<e.length;a++)if(e[a]!==t[a])return a;return e.length},i=e=>n.includes(e),o=[['[’\\"´‘`′ʻ́̀´]',"'"],["¡","!"],["¿","?"]];class l{constructor(e,t={}){this.match=(e,t)=>{e=this.normalize(e);const a=null!=t?t:this.originalTokens,s=t?t.map((e=>this.normalize(e))):this.tokens;let n,r=0;return{highlights:s.map(((t,s)=>{const i=this.matchToken(t,e);return i.index>0&&(i.isComposing?n=-1:void 0===n?n=s:n>-1&&this.normalizeWithoutAccents(a[n])!==this.normalizeWithoutAccents(a[s])&&(n=-1),r++),i})),match:null!=n?n:-1,partialMatches:r}},this.matchAlias=(e,t)=>{var a,s;const n=null!==(s=null===(a=this.options.aliases)||void 0===a?void 0:a.filter((([,t])=>t===e)))&&void 0!==s?s:[];let i;for(const[e]of n){const a=r(e,t);a>0&&(!i||a>i.length)&&(i={isComposing:a<e.length,length:a})}return i},this.matchToken=(e,t)=>{const a={index:0,isComposing:!1};for(let s=0,n=0;s<t.length;s++,n++){if(t[s]===e[n]){a.index++;continue}const r=this.matchAlias(e[n],t.slice(s));if(!r||r.isComposing&&r.length!==t.length-s)return{index:0,isComposing:!1};a.index++,a.isComposing=r.isComposing,s+=r.length-1}return a},this.normalize=e=>(e=this.normalizeAccents(e),e=this.normalizeCase(e),this.normalizePatterns(e)),this.normalizeAccents=e=>{const{accentedCharacterMap:t}=this.options;return t&&(e=e.split("").map((e=>{var a;return null!==(a=t[e])&&void 0!==a?a:e})).join("")),e},this.normalizeCase=e=>{const{ignoreCase:t}=this.options;return t?e.toLowerCase():e},this.normalizePatterns=e=>{const{normalizationData:t}=this.options;return null==t||t.forEach((([t,a])=>{e=e.replace(new RegExp(t,"g"),a)})),e},this.normalizeWithoutAccents=e=>(e=this.normalizeCase(e),this.normalizePatterns(e)),this.options=Object.assign({normalizationData:o},t),this.originalTokens=e,this.tokens=e.map((e=>this.normalize(e)))}}class c extends l{constructor(e,t={}){var a;super(e,Object.assign(Object.assign({},t),{aliases:[["ae","æ"],...null!==(a=t.aliases)&&void 0!==a?a:s]}))}}class d extends l{constructor(e,t={}){var a;super(e,Object.assign(Object.assign({},t),{aliases:null!==(a=t.aliases)&&void 0!==a?a:s}))}}class u extends l{constructor(e,t={}){var a;super(e,Object.assign(Object.assign({},t),{aliases:[["ae","æ"],["oe","œ"],...null!==(a=t.aliases)&&void 0!==a?a:s]}))}}class p extends l{constructor(e,t={}){var a;super(e,Object.assign(Object.assign({},t),{aliases:[["ss","ß"],...null!==(a=t.aliases)&&void 0!==a?a:s]}))}}const g=e=>{switch(e){case"da":case"no-BO":return(...e)=>new c(...e);case"de":return(...e)=>new p(...e);case"fr":return(...e)=>new u(...e);default:return(...e)=>new d(...e)}}},70220:(e,t,a)=>{"use strict";a.d(t,{H:()=>s});const s=matchMedia("(prefers-reduced-motion: reduce)").matches},84389:(e,t,a)=>{"use strict";a.d(t,{$9:()=>_,A9:()=>d,ET:()=>h,H2:()=>c,Kv:()=>u,Mw:()=>p,an:()=>g,vO:()=>m});var s=a(99369),n=a(43464),r=a(8654),i=a(95941),o=a(35160);const l={champion:{displayString:7018,getCompletedDescription:(e,t,a)=>{const s=e-1;if(0===s)return(0,r.H8)(t?27195:15352,{name:a});const n=(0,r.H8)(i.Vq[s]);return(0,r.H8)(t?27196:5667,{league:n,name:a})},getDescription:e=>{const t=e-1;if(0===t)return(0,r.H8)(18931);const a=(0,r.H8)(i.Vq[t]);return(0,r.H8)(9836,{league:a})},position:4},conqueror:{displayString:6676,getCompletedDescription:(e,t,a)=>(0,r.H8)(t?27197:17870,{name:a,number:e}),getDescription:e=>(0,r.H8)(24339,{number:e}),position:6},friendly:{displayString:2148,getCompletedDescription:(e,t,a)=>(0,r.H8)(t?27198:21686,{name:a}),getDescription:()=>(0,r.H8)(6105),position:10},legendary:{displayString:31855,getCompletedDescription:(e,t,a)=>(0,r.H8)(t?27199:7181,{name:a}),getDescription:()=>(0,r.H8)(13781),position:8},overtime:{displayString:19748,getCompletedDescription:(e,t,a)=>(0,r.H8)(t?27200:11321,{name:a}),getDescription:()=>(0,r.H8)(10191),position:11},photogenic:{displayString:20036,getCompletedDescription:(e,t,a)=>(0,r.H8)(t?27201:22947,{name:a}),getDescription:()=>(0,r.H8)(19790),position:12},regal:{displayString:9220,getCompletedDescription:(e,t,a)=>(0,r.H8)(t?27202:4438,{name:a,number_1:e}),getDescription:e=>(0,r.H8)(15694,{number_1:e}),position:3},sage:{displayString:20797,getCompletedDescription:(e,t,a)=>(0,r.H8)(t?27203:21311,{name:a,number_1:e}),getDescription:e=>(0,r.H8)(20170,{number_1:e}),position:1},scholar:{displayString:7357,getCompletedDescription:(e,t,a)=>(0,r.H8)(t?27204:1301,{name:a,number_of_words:e}),getDescription:e=>(0,r.H8)(22639,{number_of_words:e}),position:2},sharpshooter:{displayString:2932,getCompletedDescription:(e,t,a)=>(0,r.H8)(t?27205:17946,{name:a,number_1:e}),getDescription:e=>(0,r.H8)(19943,{number_1:e}),position:5},strategist:{displayString:7441,earn:e=>{n.I7.earnTipsAchievement(e)},getCompletedDescription:(e,t,a)=>(0,r.H8)(t?27206:18657,{name:a}),getDescription:()=>(0,r.H8)(8963),position:9},wildfire:{displayString:6641,getCompletedDescription:(e,t,a)=>(0,r.H8)(t?27207:20666,{name:a,number_1:e}),getDescription:e=>(0,r.H8)(5551,{number_1:e}),position:0},winner:{displayString:14814,getCompletedDescription:(e,t,a)=>(0,r.H8)(t?27208:19806,{name:a}),getDescription:()=>(0,r.H8)(14009),position:7}},c=e=>(0,s.from)((0,s.asMutable)(e).sort(((e,t)=>l[e.name].position-l[t.name].position))),d=(e,t,a,s)=>{const n=t?Math.max(0,e.tier-1):e.tier,r=l[e.name],i=e.tierCounts[n];return t?r.getCompletedDescription(i,a,s):r.getDescription(i)},u=e=>{const t=l[e.name];return(0,r.H8)(t.displayString)},p=e=>e.tierCounts[e.tier]||0,g=e=>Math.max(1,e.tier<e.tierCounts.length?e.tier+1:e.tier),m=e=>e.count>=p(e),h=e=>e.reduce(((e,t)=>(e[t.name]=t,e)),{}),_=(e,t,a,s)=>{e({options:{achievement:t,achieverName:s,name:o.t.Achievement,thirdPerson:a},replaceExisting:!1,type:"TOGGLE_MODAL"})}},51827:(e,t,a)=>{"use strict";a.d(t,{BY:()=>P,N1:()=>I,Nq:()=>A,OE:()=>R,Ph:()=>G,Tu:()=>T,UG:()=>B,XT:()=>j,Z7:()=>w,ZD:()=>s,_H:()=>O,as:()=>H,eu:()=>L,i1:()=>D,j2:()=>C,kN:()=>V,nc:()=>k,qc:()=>z,sb:()=>F});var s,n=a(80254),r=a(17135),i=a(63301),o=a(81149),l=a(53229),c=a(37825),d=a(74971),u=a(84401),p=a(67280),g=a(32499),m=a(51158),h=a(11908),_=a(79465),v=a(16086),f=a(20028);!function(e){e.SessionEnd="SESSION_END",e.Tree="TREE"}(s||(s={}));const b=n.IH((()=>(0,l.lh)("//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js")));let S,y=!0;const E=new Promise((e=>{S=e})),I=e=>{y=e.privacySettings.includes("DISABLE_PERSONALIZED_ADS"),S()},k=async()=>{await b(),await E;const e=(0,v.Pc)()?y:!(0,d.Xb)("targeting");(window.adsbygoogle=window.adsbygoogle||[]).requestNonPersonalizedAds=e?1:0,console.log((e?"Disable":"Enable")+" personalized ads"),(window.adsbygoogle=window.adsbygoogle||[]).push({})},w=(e,t)=>{var a,s;if((0,i.gQ)("disableAds")||(s=window.location.href,decodeURIComponent(s).includes("@"))||(0,f.pN)(e))return null;if(void 0===(null===(a=e.adsConfig)||void 0===a?void 0:a.units))return null;const n=e.adsConfig.units[t];if(void 0===n||""===n.id)return null;if(e.hasPlus)return(0,m.Kp)(`Premium user was inappropriately provided ads unit for placement '${t}'`),null;if((e=>(0,f.jq)(e)||(0,f.dE)(e))(e)&&!n.familySafe)return(0,m.Kp)(`User was inappropriately provided non-family safe ads unit (id='${n.id}') for placement '${t}'`,{once:!0}),null;const[r,o]=n.id.split("/");return{client:r,familySafe:n.familySafe,slot:o}},T=(e,t)=>`${e.toLowerCase()}_ad${"showing"===t?"":`_${t}`}`,C=e=>void 0!==e&&["session_end_ad","session_end_ad_blocked","session_end_ad_showing","tree_ad","tree_ad_blocked","tree_ad_showing"].includes(e),R=(e,t,a,s)=>{(0,_.track)(e,{ad_network:"adsense",ad_placement:t.toLowerCase(),ad_type:"banner",ad_unit:a,family_safe:s})},L=e=>{var t,a,s;return(null===(t=e.subscriptions)||void 0===t?void 0:t.isLoaded)?null===(s=null===(a=e.subscriptions)||void 0===a?void 0:a.subscriptionPlans)||void 0===s?void 0:s.some((e=>e.isFreeTrial&&!e.isNewYears)):void 0},O=e=>{var t,a;return(null===(t=e.subscriptions)||void 0===t?void 0:t.isLoaded)?null===(a=e.subscriptions.subscriptionPlans)||void 0===a?void 0:a.some((e=>e.isWinback)):void 0},P=e=>{var t,a,s;if(!(null===(t=e.subscriptions)||void 0===t?void 0:t.isLoaded))return;const n=null===(s=null===(a=e.subscriptions)||void 0===a?void 0:a.subscriptionPlans)||void 0===s?void 0:s.find((e=>(0,g.kY)(e)));return void 0===n?"USD":n.planCurrency},A=(e,t)=>e&&t,D=e=>e&&"control"===(0,o.j6)("gweb_remove_super_repair",void 0),x={"practice-hub-promo":"duo.internalAds.sessionEnd.practiceHubPromo",standard:"duo.internalAds.sessionEnd.plus","super-video":"duo.internalAds.sessionEnd.superVideo"},N=e=>(0,h.rV)(x[e]),F=(e,t)=>{let a;return(0,h.No)(x[e])?a=N(e):(a=null!=t?t:{lastShowTimestamp:0,showCount:0},M(e,a)),a},M=(e,t)=>{(0,h.LS)(x[e],t)},U=({isDesktop:e,items:t,user:a})=>!(!(0,g.X0)(t,a)||!e||(0,f.pN)(a)||1e3*a.creationDate>Date.now()-1728e5),H=({isDesktop:e,items:t,user:a})=>{if(!U({isDesktop:e,items:t,user:a}))return!1;const s=F("standard",{lastSessionCount:a.sessionCount,lastShowTimestamp:0,showCount:0}),n=Math.min(s.showCount,7)*(0,r.dz)({days:1})*1e3;return 0===s.showCount||Date.now()>s.lastShowTimestamp+n},j=({isDesktop:e,items:t,user:a})=>{const s=(0,p.Ay)(a.plusDiscounts);if(!U({isDesktop:e,items:t,user:a}))return!1;if(1e3*a.creationDate>Date.now()-1728e5)return!1;if(s&&"experiment"===(0,o.j6)("spack_web_new_years_2024_vid_ad_load",void 0))return Math.random()<.5;if(F("super-video",{lastSessionCount:a.sessionCount,lastShowTimestamp:0,showCount:0}).lastSessionCount===a.sessionCount-1)return!1;const n=N("standard"),r=void 0===(null==n?void 0:n.lastSessionCount)?void 0:a.sessionCount-n.lastSessionCount;return 2===r||void 0!==r&&r>=5&&Math.random()<.1},G=(e,t="standard",a)=>{var s;const n=F(t);M(t,{lastSessionCount:e,lastShowTimestamp:Date.now(),showCount:n.showCount+1,subtypesShown:a?[a].concat(null!==(s=n.subtypesShown)&&void 0!==s?s:[]):void 0})},B=({isDesktop:e,items:t,user:a})=>{var s,n;if(!(0,g.X0)(t,a)||!(e=>{var t,a;return e.shop.isLoaded?null===(a=null===(t=e.shop)||void 0===t?void 0:t.in_app_purchase)||void 0===a?void 0:a.some((({productId:e})=>(0,g.RD)(e))):void 0})(t)||!e||(0,f.pN)(a))return!1;const r=null!==(n=null===(s=a.streakData.currentStreak)||void 0===s?void 0:s.length)&&void 0!==n?n:0;return 7===r||r>0&&r%50==0},V=({items:e,path:t,user:a})=>{const s=(0,g.X0)(e,a),n=(0,u.Hk)(t,(0,u.yi)(t,s,a));if(!s||!n)return!1;const i=F("practice-hub-promo",{lastShowTimestamp:0,showCount:0,subtypesShown:[]}),o=1e3*(0,r.dz)({days:5}),l=Date.now()>i.lastShowTimestamp+o,c=i.subtypesShown,d=!!c&&c.length<4;return 0===i.showCount||l&&d},z=({levelData:e})=>void 0!==e&&(0,c.d)(e.level.type)&&"passed"===e.level.state},40387:(e,t,a)=>{"use strict";a.d(t,{IF:()=>o,hM:()=>r,jJ:()=>i,qz:()=>l});var s=a(80254),n=a(11811);const r=e=>{const{currentIndex:t,session:a,session:{adaptiveChallenges:r,challenges:o}}=e;if(!r)return;if(i(a))return;const l=o.slice(0,t+1),c=o.slice(t+1),d=l.every((e=>{var t;return null===(t=e.gradingResult)||void 0===t?void 0:t.correct}))&&c.length===r.length,u=s.jj(o,!1,(e=>e.id)),p=u[u.length-1],g=1===l.filter((e=>{var t;return!1===(null===(t=e.gradingResult)||void 0===t?void 0:t.correct)})).length&&t+1===o.indexOf(p)&&p.type!==n.Sm.Speak;switch(a.type){case n.FF.GlobalPractice:return d?r:g?[r[0]]:void 0;case n.FF.Lesson:return d?r:void 0;default:return}},i=({adaptiveChallenges:e,challenges:t})=>e&&s.jV(t.map((e=>e.id)),e.map((e=>e.id))).length>0,o=e=>{const{currentIndex:t,session:{adaptiveChallenges:a,challenges:n}}=e;if(void 0===a)return!1;const r=a.map((e=>e.id)),i=n.slice(0,t+1).map((e=>e.id)),o=n[t+1];return 0===s.jV(i,r).length&&r.includes(null==o?void 0:o.id)},l=(e,t)=>{var a,s,n,r,i;e.adaptiveChallenges=null===(a=e.adaptiveChallenges)||void 0===a?void 0:a.filter((e=>!t.includes(e.type))),e.mistakesReplacementChallenges=null===(s=e.mistakesReplacementChallenges)||void 0===s?void 0:s.filter((e=>!t.includes(e.type)));const o=[],l=[];for(let a=0;a<e.challenges.length;a++){const s=e.challenges[a],c=null!==(r=null===(n=e.adaptiveInterleavedChallenges)||void 0===n?void 0:n.speakOrListenReplacementIndices[a])&&void 0!==r?r:null;if(t.includes(s.type)){const t=null===(i=e.adaptiveInterleavedChallenges)||void 0===i?void 0:i.challenges[null!=c?c:-1];t&&(o.push(t),l.push(null))}else o.push(s),l.push(c)}return e.challenges=o,e.adaptiveInterleavedChallenges&&(e.adaptiveInterleavedChallenges.speakOrListenReplacementIndices=l),e}},9979:(e,t,a)=>{"use strict";a.d(t,{AX:()=>i,Gg:()=>c,Vv:()=>o,jt:()=>u,nN:()=>l,q8:()=>d});var s=a(88528),n=a(50498),r=a(59815);const i="cubic-bezier(0.32, 0, 0.67, 0)",o="cubic-bezier(0.5, 1, 0.89, 1)",l=1e3*parseFloat(s.Z["duration-fade"]),c=()=>new Promise((e=>{requestAnimationFrame((()=>requestAnimationFrame(e)))})),d={EaseInOutCubic:e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1,EaseInOutQuad:e=>e<.5?2*e*e:(4-2*e)*e-1,EaseInOutQuart:e=>e<.5?8*e*e*e*e:1-8*--e*e*e*e,EaseInOutQuint:e=>e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e,EaseInQuad:e=>e*e,EaseInQuart:e=>e*e*e*e,EaseInQuint:e=>e*e*e*e*e,EaseOutCubic:e=>--e*e*e+1,EaseOutExpo:e=>1-Math.pow(2,-10*e),EaseOutQuad:e=>e*(2-e),EaseOutQuart:e=>1- --e*e*e*e,EaseOutQuint:e=>1+--e*e*e*e*e,Linear:e=>e},u=async({animationDelay:e=0,animationDuration:t,easingFunction:a=d.Linear,onAnimate:s,signal:i})=>{if(e>0&&await(0,n._v)(e),null==i?void 0:i.aborted)throw new r.$K;const o=Date.now(),l=o+t;return new Promise(((e,t)=>{const n=async()=>{await new Promise((e=>{requestAnimationFrame(e)})),(null==i?void 0:i.aborted)&&t(new r.$K);const c=Date.now();if(c<l){const e=a((c-o)/(l-o));s(e),n()}else s(1),e()};n()}))}},56043:(e,t,a)=>{"use strict";a.d(t,{SK:()=>c,TK:()=>d});var s=a(76986),n=a(78939),r=a(51158),i=a(43006),o=a(7113);const l=s,c=(e,t,a)=>{const s=(0,o.J)(e),n=(0,o.J)(t),r=u(s.map((e=>e.word)),n.map((e=>e.word)));if(void 0===r)return;const{firstIncorrectIndex:i,lastIncorrectIndex:l}=r;return s.map(((e,t)=>t>=i&&t<=l?e.word.length:0)).reduce(((e,t)=>e+t))>a*e.length||!s[i]||!s[l]?void 0:[s[i].startIndexWithinSentence,s[l].endIndexWithinSentence]},d=(e,t,a)=>{const s=(0,o.J)(e),n=(0,o.J)(t),r=u(s.map((e=>e.word)),n.map((e=>e.word)));if(void 0===r)return{rangeType:"all"};const{firstIncorrectIndex:i,lastIncorrectIndex:l}=r,c=m(s[0].word)?0:1,d=m(s[s.length-1].word)?s.length-1:s.length-2,p=Math.max(i,c),g=Math.min(l,d);if(p===g)return{blankIndex:p,highlightEndIndex:s[p].endIndexWithinSentence,highlightStartIndex:s[p].startIndexWithinSentence,rangeType:"one"};const h={blankEndIndex:g+1,blankStartIndex:c},_={blankEndIndex:d+1,blankStartIndex:p},v=s.map(((e,t)=>t>=h.blankStartIndex&&t<h.blankEndIndex?e.word.length:0)).reduce(((e,t)=>e+t)),f=s.map(((e,t)=>t>=_.blankStartIndex&&t<_.blankEndIndex?e.word.length:0)).reduce(((e,t)=>e+t));return Math.min(v,f)>a*s.map((e=>e.word)).join("").length?{rangeType:"all"}:v<f?Object.assign(Object.assign({},h),{highlightEndIndex:s[h.blankEndIndex].endIndexWithinSentence,highlightStartIndex:s[h.blankStartIndex].startIndexWithinSentence,rangeType:"partial"}):Object.assign(Object.assign({},_),{highlightEndIndex:s[_.blankEndIndex].endIndexWithinSentence,highlightStartIndex:s[_.blankStartIndex].startIndexWithinSentence,rangeType:"partial"})},u=(e,t)=>{const a=p(e,t),s=g(e,t);if(void 0===a||void 0===s)return;const n=s<a,i=n?s:a,o=n?a:s;if(i<=o)return{firstIncorrectIndex:i,lastIncorrectIndex:o};(0,r.Kp)("Something went wrong trying to determine the guess's incorrect range.",{data:{bestSolutionTokens:e,detectedRange:{firstDivergenceMaybeReversed:i,lastDivergenceMaybeReversed:o},guessTokens:t}})},p=(e,t)=>{const a=h(e),s=h(t);for(let e=0;e<a.length;e++)if(void 0===s[e]||(0,n.GS)((0,n.lG)(l,a[e].element))!==(0,n.GS)((0,n.lG)(l,s[e].element)))return a[e].index;if(a.length!==s.length)return a.length<s.length?e.length:a[s.length].index},g=(e,t)=>{const a=h(e).reverse(),s=h(t).reverse();for(let e=0;e<a.length;e++)if(void 0===s[e]||(0,n.GS)((0,n.lG)(l,a[e].element))!==(0,n.GS)((0,n.lG)(l,s[e].element)))return a[e].index;if(a.length!==s.length)return a.length<s.length?-1:a[a.length-s.length-1].index},m=e=>!(0===(0,i.Dg)(e).length),h=e=>e.map(((e,t)=>m(e)?{element:e,index:t}:{element:"",index:t})).filter((e=>0!==e.element.length))},43464:(e,t,a)=>{"use strict";a.d(t,{Sl:()=>$,eN:()=>Z,I7:()=>s,d0:()=>I,_s:()=>k,Vi:()=>w,Kz:()=>n,XY:()=>i,zQ:()=>o,ub:()=>J,bG:()=>l,mJ:()=>c,i_:()=>d,JV:()=>u,lB:()=>p,Hx:()=>X,qF:()=>g,dQ:()=>m,zi:()=>h,wO:()=>_,xr:()=>v,s3:()=>l,bu:()=>f,PA:()=>b,uf:()=>S,yG:()=>y,Mw:()=>E,a1:()=>r,w1:()=>T,ML:()=>C,eB:()=>R,AL:()=>L});var s={};a.r(s),a.d(s,{claimAchievement:()=>se,earnTipsAchievement:()=>ne,getAchievementsV3:()=>ae,migrateToV3:()=>re});var n={};a.r(n),a.d(n,{getAvatarBuilderConfig:()=>oe,getUserBuiltAvatar:()=>le});var r={};a.r(r),a.d(r,{createInvoice:()=>ue,getB2BPricingData:()=>de,submitInvoice:()=>ge,updateInvoice:()=>pe});var i={};a.r(i),a.d(i,{B2B_UNIVERSAL_CLOCK_CODE_PREFIX:()=>he,downloadCodes:()=>ke,getCodes:()=>be,getDownloadReportUrl:()=>Re,getOrganizations:()=>_e,getPurchases:()=>fe,getReports:()=>Ce,getSubscriptions:()=>Se,redeemCode:()=>Te,removeCode:()=>ye,removeSubscription:()=>Ee,sendCodes:()=>Ie,updateOrganization:()=>ve,validateCode:()=>we});var o={};a.r(o),a.d(o,{getCharacterChart:()=>Pe,getExpandedViewInfo:()=>xe,sessionCreate:()=>De,sessionSubmit:()=>Ae});var l={};a.r(l),a.d(l,{getBrbStatus:()=>Me,getCefrContent:()=>je,getExplanation:()=>Ue,getGrammarConcept:()=>Ge,getGuidebook:()=>He,getLottieAnimation:()=>Be,getSmartTip:()=>ze,getZombieStatus:()=>Ze,requestGradingConfig:()=>$e});var c={};a.r(c),a.d(c,{addModerator:()=>Xe,isSpecialForumTopic:()=>Qe,listAllMods:()=>Je,listMods:()=>Ke,listTopics:()=>Ye,removeModerator:()=>et,undeleteComment:()=>qe});var d={};a.r(d),a.d(d,{NUDGE_TRACKING_NAMES:()=>at,block:()=>Et,deleteFriendRecommendation:()=>mt,facebookToDuolingo:()=>kt,follow:()=>St,getFeed:()=>nt,getFollowers:()=>ft,getFollowing:()=>vt,getFriendRecommendations:()=>pt,getFriendsInCommon:()=>bt,getKudosAssets:()=>it,getKudosDrawer:()=>ot,getKudosReactions:()=>rt,getSocialProfile:()=>_t,postFriendsQuestNudge:()=>wt,searchUsers:()=>ht,sendKudos:()=>lt,sendTriggeredKudos:()=>ct,unblock:()=>It,unfollow:()=>yt,unsendKudos:()=>dt,updateFeed:()=>ut,updateFriendRecommendations:()=>gt});var u={};a.r(u),a.d(u,{getQuestProgress:()=>Rt,getQuestsData:()=>Lt,getQuestsSchema:()=>Ct,postQuestComplete:()=>Ot,sendBatchUpdate:()=>Pt});var p={};a.r(p),a.d(p,{submitDuoconForm:()=>Dt,submitHighValyrianForm:()=>xt});var g={};a.r(g),a.d(g,{lV:()=>Ft,Y4:()=>Ut,LE:()=>Mt});var m={};a.r(m),a.d(m,{LEAGUES_ID:()=>Gt,SCHOOLS_CLASSROOM_LEADERBOARD_ID:()=>Vt,TOURNAMENT_DOGFOODING_LEADERBOARD_ID:()=>Bt,get:()=>Jt,getReactionUncohorted:()=>aa,patch:()=>ea,post:()=>Xt,setReactionCohorted:()=>ta,setReactionUncohorted:()=>sa});var h={};a.r(h),a.d(h,{ackHomeMessage:()=>ra,ackSessionEndMessages:()=>ia,getHomeMessages:()=>oa,getSessionEndMessages:()=>la});var _={};a.r(_),a.d(_,{clearUngeneratableMistakes:()=>ga,getMistakeCount:()=>ua,getMistakes:()=>pa});var v={};a.r(v),a.d(v,{trackSplashLoad:()=>ha});var f={};a.r(f),a.d(f,{AssignmentType:()=>_a,CONTENT_SPECIFIC_ASSIGNMENT_TYPES:()=>va,autoFollowClassmates:()=>wa,getClassroomByCode:()=>ya,getSessionActivitiesByUser:()=>Ta,getUserClassroomLeaderboardInfo:()=>ka,getUserClassrooms:()=>Sa,joinClassroom:()=>Ea,leaveClassroom:()=>Ia});var b={};a.r(b),a.d(b,{detectDuplicates:()=>Ra,fullyConnectDuplicates:()=>La,getSlackReportTypes:()=>Oa,getSuggestedFeatures:()=>Pa,reportIssue:()=>Aa});var S={};a.r(S),a.d(S,{sendDownloadSMS:()=>xa});var y={};a.r(y),a.d(y,{ReportReason:()=>Ma,reportProfileUser:()=>Ua});var E={};a.r(E),a.d(E,{getPracticeHubStories:()=>Za,getStory:()=>ja,postStoryComplete:()=>Ga,recordUserReply:()=>Ba});var I={};a.r(I),a.d(I,{dismissNotification:()=>Ya,getDeleteModLog:()=>Ka,getNotifications:()=>qa,getShadowbannedUsers:()=>Ja,getSocialCurrencyStats:()=>ts,logout:()=>Wa,shadowbanUser:()=>Xa,unshadowbanUser:()=>es,uploadAvatar:()=>Qa});var k={};a.r(k),a.d(k,{convertRemoteLanguageId:()=>os,courseList:()=>ds,courseShow:()=>us,courseSubscribe:()=>hs,courseUnsubscribe:()=>_s,getLanguageTokens:()=>ps,legacyLanguageId:()=>ls,registerDevice:()=>gs,unregisterDevice:()=>ms,userBan:()=>is});var w={};a.r(w),a.d(w,{ChallengeReports:()=>en,EventType:()=>Rs,PasswordContext:()=>As,acceptFamilyPlanDirectInvite:()=>Sn,acceptFamilyPlanInviteCode:()=>bn,addUserStripePaymentMethod:()=>dn,attachUserStripePaymentMethod:()=>pn,challengeCreate:()=>Js,challengeGrade:()=>Xs,checkPasswordQuality:()=>Ds,consumeReward:()=>An,createPaymentMethodSetup:()=>un,createUserSuperDiscount:()=>xn,emailVerificationSend:()=>Hs,emailVerificationUpdate:()=>js,forgotPassword:()=>On,getConfig:()=>Tn,getCustomAcquisitionSurveyResponses:()=>Dn,getFamilyPlanUserInvites:()=>vn,getPackageNameFromPromoCodeRaw:()=>Ls,getShopItems:()=>an,getSubscriptionPlans:()=>sn,getUnfilteredPrivacySettings:()=>Rn,getUnitOfTimeFromPromoCodeRaw:()=>Os,getUserInventory:()=>cn,getUserPaymentMethods:()=>ln,getUserShopItem:()=>nn,getUserVocabSummary:()=>Mn,getUserXPSummaries:()=>$s,login:()=>Ps,patchUserShopItem:()=>rn,purchaseShopItemGift:()=>hn,purchaseUserShopItem:()=>mn,registerTrackingStatus:()=>Pn,rejectFamilyPlanDirectInvite:()=>yn,removeEmailUpdate:()=>Gs,removeHeart:()=>Fn,removeUserFromFamilyPlan:()=>En,reportSentence:()=>tn,resetPassword:()=>xs,sessionCreate:()=>Ys,sessionSubmit:()=>Ks,subscribeToBangoPlan:()=>wn,subscriptionOrderCreate:()=>gn,treatUser:()=>Nn,updatePrivacySettings:()=>Ln,updateUserStripePaymentMethod:()=>on,useUserShopItem:()=>Cn,userCreate:()=>Ns,userDeleteCourse:()=>Qs,userInfo:()=>Fs,userInfoPartial:()=>Us,userMessage:()=>qs,userModeratedEvents:()=>Ws,userProfileInfo:()=>Ms,userSearch:()=>Vs,userSearchByEmail:()=>zs,userUpdate:()=>Zs,usernameValidate:()=>Bs,validateBangoToken:()=>kn,validateFamilyInviteToken:()=>fn,validatePromoCode:()=>_n});var T={};a.r(T),a.d(T,{getReport:()=>Hn});var C={};a.r(C),a.d(C,{getLearnedLexemes:()=>Gn,getLearnedLexemesCount:()=>Bn,getPracticeLexemes:()=>Vn});var R={};a.r(R),a.d(R,{getReport:()=>Wn,getReportId:()=>$n,openReport:()=>qn});var L={};a.r(L),a.d(L,{postRequest:()=>Jn,postUploadFile:()=>Kn});var O=a(42659),P=a(54412),A=a(51158),D=a(18804),x=a(16086),N=a(20028),F=a(80254),M=a(53229),U=a(79465);const H=e=>encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]");var j=a(59815);class G extends j.pY{get name(){return"HttpClientError"}static from(e,{method:t,url:a}){var s;if(e instanceof G)return e;const n=new G(e.message);return n.code=(null!==(s=e.code)&&void 0!==s?s:"AbortError"===e.name)?"ECONNABORTED":void 0,n.method=t,n.response=e.response,n.url=a,n}}const B=G,V=F.P2((e=>{var t,a;Math.random()<(null!==(a=null===(t=(0,D.qg)())||void 0===t?void 0:t.config.featureFlags.web_api_rate_limited_sampling_rate)&&void 0!==a?a:0)&&(0,U.track)("api_rate_limited",{host:e})}),6e4),z=F.P2((e=>{var t,a;Math.random()<(null!==(a=null===(t=(0,D.qg)())||void 0===t?void 0:t.config.featureFlags.web_api_not_acceptable_sampling_rate)&&void 0!==a?a:0)&&(0,U.track)("api_request_not_acceptable",{host:e})}),6e4),Z=class{constructor(e){this.addCacheBuster=!1,this.errorInterceptors=[],this.interceptors=[],this.useFormEncoding=!1,this.withCredentials=!1,this.getAdditionalHeaders=e=>({}),this.parseJsonResponse=e=>e.text().then((e=>e?JSON.parse(e):void 0)),this.baseUrl=(null==e?void 0:e.startsWith("/"))?`${window.location.origin}${e}`:null!=e?e:""}addErrorInterceptor(e){return this.errorInterceptors.push(e),this}addResponseInterceptor(e){return this.interceptors.push(e),this}delete(e,t,a){return this.request("DELETE",e,t,a)}enableCacheBuster(){return this.addCacheBuster=!0,this}enableCredentials(){return this.withCredentials=!0,this}enableFormEncoding(){return this.useFormEncoding=!0,this}get(e,t){return this.request("GET",e,void 0,t)}getBlob(e,t){return this.request("GET",e,void 0,t,"blob")}download(e,t,a,s){return this.request(e,t,a,s,"blob").then((e=>{const t=window.URL.createObjectURL(e.data);window.location.assign(t)}))}getBuffer(e,t){return this.request("GET",e,void 0,t,"arraybuffer")}getText(e,t){return this.request("GET",e,void 0,t,"text")}patch(e,t,a){return this.request("PATCH",e,t,a)}post(e,t,a){return this.request("POST",e,t,a)}put(e,t,a){return this.request("PUT",e,t,a)}buildUrl(e,t,a={}){const s=a.params instanceof URLSearchParams?new URLSearchParams(a.params):Object.assign({},a.params);this.addCacheBuster&&"GET"===e&&(s instanceof URLSearchParams?s.set("_",`${Date.now()}`):s._=Date.now());let n=((e,t)=>{let a;if(t instanceof URLSearchParams)a=t.toString();else{const e=[];for(const[a,s]of Object.entries(t)){if(null==s)continue;const t=Array.isArray(s)?`${a}[]`:a,n=Array.isArray(s)?s:[s];for(const a of n){const s=a instanceof Date?a.toISOString():"object"==typeof a&&null!==a?JSON.stringify(a):a;e.push(`${H(t)}=${H(s)}`)}}a=e.join("&")}return a&&(e+=(e.includes("?")?"&":"?")+a),e})(t,s);return n=(0,M.qy)(n.startsWith("//")?n:n.startsWith("/")?`${this.baseUrl}${n}`:n),n}async request(e,t,a,s={},n="json"){const r=Object.assign(Object.assign({},s.headers),this.getAdditionalHeaders(t)),i=this.buildUrl(e,t,s);!this.useFormEncoding||!a||a instanceof FormData||(a=(0,M.Vp)(a),r["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"),"json"===n&&(r.Accept="application/json; charset=UTF-8");const o=(async()=>{var t;void 0===a||a instanceof FormData||(null==r?void 0:r["Content-Type"])||(r["Content-Type"]="application/json; charset=UTF-8");const o=new AbortController;void 0!==s.timeout&&setTimeout((()=>o.abort()),s.timeout);const l=await fetch(i,{body:a instanceof FormData||this.useFormEncoding?a:JSON.stringify(a),credentials:this.withCredentials?"include":"same-origin",headers:r,method:e,signal:o.signal}),c=!0===s.forceJsonDecoding||(null===(t=l.headers.get("content-type"))||void 0===t?void 0:t.split(";").some((e=>"application/json"===e.trim()))),d={data:await("arraybuffer"===n?l.arrayBuffer():"blob"===n?l.blob():"text"===n?l.text():c?this.parseJsonResponse(l):void 0),headers:Object.fromEntries(l.headers.entries()),status:l.status,statusText:l.statusText};if(406===l.status?z((0,M.Fo)(l.url)):429===l.status&&V((0,M.Fo)(l.url)),!l.ok){const t=new B(`Request failed with status code ${l.status}`);throw t.method=e,t.response=d,t.url=i,t}return d})();try{const e=await o;return this.interceptors.forEach((t=>t(e))),e}catch(a){const s=B.from(a,{method:e,url:i});throw this.errorInterceptors.forEach((e=>e(t,s))),s}}},$=class extends Z{constructor(e){super(e),this.addBearer=!1,this.addTraceHeaders=!1,this.serviceMap={},this.getAdditionalHeaders=e=>{var t,a;const s={},n=(0,P.ej)(P.Vj.JWT);if(this.addBearer&&n&&(s.Authorization=`Bearer ${n}`),this.addTraceHeaders){if(n){const e=null===(t=null===D.qg||void 0===D.qg?void 0:(0,D.qg)())||void 0===t?void 0:t.user,r=null!==(a=(0,x.MJ)(n))&&void 0!==a?a:0;e&&(0,N.Sk)(e)&&(s["Jaeger-Debug-Id"]=`${r}`),s["X-Amzn-Trace-Id"]=`User=${r}`}else s["X-Amzn-Trace-Id"]="User=0";"/deactivate"!==e&&"/logout"!==e&&(s["X-Requested-With"]="XMLHttpRequest")}const r=Object.entries(this.serviceMap);return r.length&&(s["x-duolingo-service-map"]=r.map((([e,t])=>`${e}=${t}`)).join(";")),s},super.enableCredentials()}enableBearer(){return this.addBearer=!0,this}enableTraceHeaders(){return this.addTraceHeaders=!0,this}setServiceEnvironment(e,t){return t?this.serviceMap[e]=t:delete this.serviceMap[e],this}async request(e,t,a,s={},n="json"){const r=(0,D.qg)();return r&&(0,O.df)(r)&&!t.startsWith("/admin_tools")&&((0,A.Kp)("Performing backend request while Zombie mode is enabled",{data:{method:e,url:t}}),console.trace()),super.request(e,t,a,s,n)}};var W=a(63301),q=a(11908);const Q=e=>new $(e).addErrorInterceptor(((e,{response:t})=>{})).addResponseInterceptor((e=>{})).enableBearer().enableCacheBuster().enableTraceHeaders(),Y=(e="")=>{const t=(0,W.pL)(),a=(0,W.gQ)("edgeGatewayStaging")?"www-stage":"www";return void 0!==t?Q(`https://${a}.duolingo.com${e}`).setServiceEnvironment("monolith",`next-${t}`):/[^.]*api[^.]*.duolingo.(com|cn)/.test(window.location.host)?Q(`https://www.duolingo.com${e}`):Q(e)},K=e=>Q(e).enableFormEncoding(),J=()=>{F.VO(P.Vj).forEach((e=>(0,P.nJ)(e))),(0,q.cl)(q.Qt.State);try{new Promise((e=>{window.FB?window.FB.logout((()=>e())):e()}))}catch(e){}},X=e=>e instanceof B,ee=["champion","conqueror","friendly","legendary","overtime","photogenic","regal","sage","scholar","sharpshooter","strategist","wildfire","winner"],te=Q("https://duolingo-achievements-prod.duolingo.com"),ae=async(e,t,a,s,n,r,i)=>{const o=`/users/${e}/achievements`;if(!t||!a)return[];const l={fromLanguage:t,hasPlus:i?1:0,isAgeRestricted:s?1:0,isProfilePublic:n?1:0,isSchools:r?1:0,learningLanguage:a};return(c=(await te.get(o,{params:l})).data,null!==(d=c.achievements)&&void 0!==d?d:[]).filter((({name:e})=>ee.includes(e)));var c,d},se=async(e,t)=>{const a=`/users/${t}/${e.name}/${e.tier}/claim`;await te.post(a,{})},ne=async e=>{const t=`/users/${e}/update`;await te.post(t,{tip_read:!0})},re=async(e,t=!0)=>{const a=`/users/${e}/migrate`;await te.post(a,{async:t,dryRun:!1})},ie=Y(""),oe=async(e,t)=>(await ie.get(`/users/${e}/avatar-builder-config`,{params:{uiLanguage:t}})).data.avatarBuilderConfig,le=async e=>(await ie.get(`/users/${e}/built-avatar-states`)).data.builtAvatarStates[0],ce=new $("https://www.duolingo.com").addErrorInterceptor(((e,{response:t})=>{})).addResponseInterceptor((e=>{})).enableCacheBuster().enableTraceHeaders(),de=async e=>(await ce.get("/b2b/pricing/",{params:{country_code:e}})).data,ue=async e=>(await ce.post("/subscription-codes/invoices/",e)).data,pe=async(e,t)=>(await ce.patch(`/subscription-codes/invoices/${e}/`,t)).data,ge=async e=>(await ce.post(`/subscription-codes/invoices/${e}/finalize/`)).data,me=Y(),he="B_",_e=async()=>(await me.get(`/b2b/users/${(0,x.Jb)()}/organizations`)).data,ve=async(e,t)=>{await me.put(`/b2b/organizations/${e}`,t)},fe=async e=>(await me.get(`/b2b/organizations/${e}/purchases`)).data,be=async e=>(await me.get(`/b2b/purchases/${e}/codes`)).data,Se=async e=>(await me.get(`/b2b/purchases/${e}/subscriptions`)).data,ye=async e=>200===(await me.delete(`/b2b/codes/${e}`)).status,Ee=async e=>200===(await me.delete(`/b2b/subscriptions/${e}`)).status,Ie=async(e,t)=>(await me.post(`/b2b/purchases/${e}/codes/send`,t)).data,ke=e=>me.download("POST",`/b2b/purchases/${e}/codes/download`),we=async e=>(await me.get(`/b2b/codes/${e}`)).data,Te=async e=>{await me.post(`/b2b/codes/${e}/redeem`)},Ce=async e=>me.get(`/b2b/organizations/${e}/reports`).then((({data:e})=>e)),Re=(e,t)=>me.buildUrl("GET",`/b2b/organizations/${e}/reports/${t}`);var Le=a(88868);Q(`https://${window.location.host===Le.a_?Le.a_:"www.duolingo.com"}/2017-06-30/beta-program`);const Oe=Q("https://www-prod.duolingo.com/2017-06-30/alphabets"),Pe=async(e,t,a)=>{const s={params:{alphabetsPathProgressKey:a}};return(await Oe.get(`/courses/${e}/${t}`,s)).data},Ae=async e=>Oe.put(`/sessions/${e.learningLanguage}/${e.fromLanguage}/${e.id}`,e),De=async(e,t,a)=>Oe.post(`/sessions/${e}/${t}`,a),xe=async e=>(await Oe.get(`/courses/${e.learningLanguage}/${e.fromLanguage}/expandedViewInfo/${e.expandedViewId}`,{params:e})).data;var Ne=a(17135);const Fe=new Z,Me=async()=>void 0===(await Ve("brb")).brb_version?"disabled":"enabled",Ue=async e=>(await Fe.get(e)).data,He=async e=>(await Fe.get(e)).data,je=async e=>(await Fe.get(e)).data,Ge=async e=>(await Fe.get(e)).data,Be=async e=>(await Fe.get(e)).data,Ve=async e=>{let t;try{t=(0,x.Jb)()}catch(e){t=0}const a=t%100;try{return(await Fe.get(`https://${e}.duolingo.com/${a}/web.json?user=${t}&ts=${(0,Ne.Zo)()}&tzoffset=${(0,Ne.pQ)()/-60}`,{forceJsonDecoding:!0,timeout:1e4})).data}catch(e){return{}}},ze=async e=>(await Fe.get(e)).data,Ze=async()=>!0===(await Ve("zombie")).enforce_offline?"enabled":"disabled",$e=async()=>(await Fe.get("https://d3kwyfyztuo0xs.cloudfront.net/config/latest/0.9.6",{forceJsonDecoding:!0})).data,We=(Q("https://explanations.duolingo.com"),K("https://forum-api.duolingo.com")),qe=e=>We.post(`/comments/${e}/undelete`),Qe=e=>null===e.learning_language,Ye=async()=>(await We.post("/diagnostics/topic_moderators/list_topics")).data,Ke=async e=>(await We.post("/diagnostics/topic_moderators/list_mods",{topic_id:e})).data,Je=async()=>(await We.post("/diagnostics/topic_moderators/list_mods")).data,Xe=async(e,t)=>(await We.post("/diagnostics/topic_moderators/add",{topic_id:e,user_id:t})).data,et=async(e,t)=>(await We.post("/diagnostics/topic_moderators/remove",{topic_id:e,user_id:t})).data,tt={LESSONS:"lessons",NINETY_ACCURACY_LESSONS:"ninetyPercentLessons",PERFECT_LESSONS:"perfectLessons",XP:"xp"},at={hiAllStar:"hi_all_star",hiDreamTeam:"hi_dream_team",hiFlex:"hi_flex",hiHighFive:"hi_high_five",nudgeClaws:"nudge_claws",nudgeFlex:"nudge_flex",nudgeHighFive:"nudge_high_five",nudgeSadDuo:"nudge_sad_duo"},st=Y("/2017-06-30/friends"),nt=async(e,t,a,s)=>{var n;return(null===(n=null==a?void 0:a.featureFlags)||void 0===n?void 0:n.friends_microservice_web_client)?(await st.get(`/users/${e}/feed`,{params:Object.assign({uiLanguage:t},void 0===s?{}:{after:s})})).data:{feed:[],kudosConfig:{reactions:[],shareLabel:""}}},rt=async(e,t,a,s,n)=>{var r;if(null===(r=null==a?void 0:a.featureFlags)||void 0===r?void 0:r.friends_microservice_web_client){const a=void 0===n?{pageSize:s}:{pageAfter:n,pageSize:s};return(await st.get(`/kudos/${e}/reactions/${t}`,{params:a})).data}return{cursor:null,userReactions:[]}},it=async e=>{var t;if(null===(t=null==e?void 0:e.featureFlags)||void 0===t?void 0:t.friends_microservice_web_client){const e=(await st.get("/kudos/assets")).data;return Object.assign(Object.assign({},e.kudosFeedAssets),e.kudosDrawerAssets)}return{}},ot=async(e,t,a)=>{var s;if(null===(s=null==a?void 0:a.featureFlags)||void 0===s?void 0:s.friends_microservice_web_client){const a=(await st.get(`/kudos/${e}/drawer`,{params:{uiLanguage:t}})).data.kudosDrawer;return a?a.isSystemGenerated?null:a:null}return null},lt=async(e,t,a)=>{await st.post("/kudos",{eventIds:e,reactionType:t,screen:a})},ct=async(e,t)=>{await st.post("/kudos",{triggerTypes:e,triggerUserIds:t})},dt=async e=>{await st.delete(`/kudos/${e}`)},ut=async(e,t,a,s)=>{await st.patch(`/users/${e}/feed`,{eventIds:t,isInteractionEnabled:a,screen:s})},pt=async(e,t)=>{const a={filterUsers:!0,pageSize:50,uiLanguage:t};return(await st.get(`/users/${e}/recommendations`,{params:a})).data},gt=async(e,t)=>(await st.patch(`/users/${e}/recommendations`,{userIds:t})).data,mt=async(e,t)=>{await st.delete(`/users/${e}/recommendations/${t}`)},ht=async(e,t,a)=>{const s={cursor:a,pageSize:e,query:t,searchType:"QUERY"};return(await st.get("/users",{params:s})).data},_t=async(e,t)=>(await st.get(`/users/${e}/profile`,{params:{pageSize:t}})).data,vt=async(e,t,a)=>(await st.get(`/users/${e}/following`,{params:Object.assign({pageSize:t},a?{pageAfter:a}:void 0)})).data.following,ft=async(e,t,a)=>(await st.get(`/users/${e}/followers`,{params:Object.assign({pageSize:t},a?{pageAfter:a}:void 0)})).data.followers,bt=async(e,t,a)=>(await st.get(`/users/${e}/friends-in-common`,{params:Object.assign({pageSize:t},a?{pageAfter:a}:void 0)})).data.friendsInCommon,St=async(e,t,a,s,n)=>{const r={component:t,follow_reason:a,follow_suggestion_score:n,suggested_reason:s};await st.post(`/users/${(0,x.Jb)()}/follow/${e}`,r)},yt=async e=>{await st.delete(`/users/${(0,x.Jb)()}/follow/${e}`)},Et=async e=>{await st.post(`/users/${(0,x.Jb)()}/block/${e}`)},It=async e=>{await st.delete(`/users/${(0,x.Jb)()}/block/${e}`)},kt=async(e,t)=>(await st.post("/facebook-connect",{facebookFriends:JSON.stringify(t.map((e=>({id:e})))),facebookId:e})).data.users,wt=async({eventType:e,expirationTime:t,nudgeType:a,recipientId:s,remainingEvents:n,shouldSendPush:r,userId:i,winStreak:o})=>{await st.post(`/users/${i}/friends-quests/${s}/nudge`,{eventType:tt[e],expirationTime:t,nudgeType:a,remainingEvents:n,shouldSendPush:r,winStreak:o})},Tt=Q("https://goals-api.duolingo.com"),Ct=async e=>(await Tt.get(`/schema?ui_language=${e}`)).data,Rt=async({timezone:e,uiLanguage:t,userId:a})=>(await Tt.get(`/users/${a}/progress`,{params:{timezone:e,ui_language:t}})).data,Lt=async e=>(await Tt.get(`/users/${e}/quests`)).data,Ot=async({goalId:e,questId:t,questSlot:a,timestamp:s,timezone:n,userId:r})=>{await Tt.post(`/users/${r}/quest`,{goal_id:e,quest_id:t,quest_slot:a,timestamp:s.toISOString(),timezone:n})},Pt=async(e,t,a,s)=>{await Tt.post(`/users/${e}/progress/batch`,{metric_updates:t.metricUpdates,timestamp:null==a?void 0:a.toISOString(),timezone:s})},At=new Z("https://api.hsforms.com"),Dt=e=>Nt("42546705","ba5f77b7-5cd8-4ac1-bbb3-0c93011e0d78",[{name:"email",value:e}]),xt=(e,t)=>Nt("22404983","48a49871-198d-470d-a32f-a959d7b72c44",[{name:"email",value:e},{name:"username",value:t}]),Nt=(e,t,a)=>At.post(`/submissions/v3/integration/submit/${e}/${t}`,{context:{pageUri:window.location.href},fields:a});var Ft,Mt,Ut;!function(e){e.SUPER="premium_subscription",e.MAX="gold_subscription",e.IMMERSIVE_SUPER="immersive_subscription"}(Ft||(Ft={})),function(e){e.IOS="APPLE",e.Schools="DUOLINGO_SCHOOLS",e.Stripe="DUOLINGO",e.Android="GOOGLE_PLAY",e.ImmersivePlus="IMMERSIVE_PLUS",e.Admin="NONE"}(Mt||(Mt={})),function(e){e.Standard="STANDARD",e.NewYears2024="NEW_YEARS_2024"}(Ut||(Ut={}));var Ht=a(13026);const jt=Q("https://duolingo-leaderboards-prod.duolingo.com"),Gt="7d9f5dd1-8423-491a-91f2-2532052038ce",Bt="d50df136-ca7a-4c17-8c44-83f599174f58",Vt="b7f7f746-212e-42a2-aa70-54beacad9011",zt=e=>"TROPHY,winner"===e?"TROPHY":(0,Ht.gs)(e)?e:"NONE",Zt=e=>({itemId:e.item_id,itemQuantity:e.item_quantity,rank:e.rank,rewardType:e.reward_type,tier:e.tier}),$t=e=>({cohortSize:e.cohort_size,cohortType:e.cohort_type,numDemoted:e.num_demoted,numLosers:e.num_losers,numPromoted:e.num_promoted,numWinners:e.num_winners,rewards:e.rewards.map(Zt),scoreType:e.score_type}),Wt=e=>({contestEnd:Date.parse(e.contest_end),contestStart:Date.parse(e.contest_start),contestState:e.contest_state,registrationEnd:Date.parse(e.registration_end),registrationStart:Date.parse(e.registration_start),registrationState:e.registration_state,ruleset:$t(e.ruleset)}),qt=e=>({avatarUrl:e.avatar_url,displayName:e.display_name,hasRecentActivity:e.has_recent_activity_15,reaction:zt(e.reaction),score:e.score,userId:e.user_id}),Qt=e=>({creationDate:Date.parse(e.creation_date),id:e.cohort_id,rankings:e.rankings.map(qt),tier:e.tier}),Yt=e=>({cohort:Qt(e.cohort),complete:e.complete,contest:Wt(e.contest),isDemoted:e.is_demoted,isLoser:e.is_loser,isPromoted:e.is_promoted,isWinner:e.is_winner,score:e.score,userId:e.user_id}),Kt=async(...e)=>{(await Promise.resolve().then(a.bind(a,79465))).trackLeaderboardApiEvent(...e)},Jt=async(e,t,a=!1)=>{Kt("fetch",{unlocked:a});const s=`/leaderboards/${e}/users/${t}`,n={};return a&&(n.client_unlocked=!0),n.get_reactions=!0,(e=>{const t={streakInTier:e.streak_in_tier,tier:e.tier,topThreeFinishes:e.top_three_finishes};return void 0!==e.num_sessions_remaining_to_unlock&&(t.numSessionsRemainingToUnlock=e.num_sessions_remaining_to_unlock),void 0!==e.active&&(t.active=null===e.active?null:Yt(e.active)),void 0!==e.ended&&("result"===(0,W.ky)("debugLeaderboards")&&e.active?t.ended=[Yt(e.active)]:t.ended=e.ended.map(Yt)),void 0!==e.leaderboard&&(t.leaderboard=(e=>({activeContest:e.active_contest?Wt(e.active_contest):null,nextContestStart:e.next_contest_start?Date.parse(e.next_contest_start):null}))(e.leaderboard)),t})((await jt.get(s,{params:n})).data)},Xt=async(e,t)=>{Kt("join");const a=`/leaderboards/${e}/users/${t}`;await jt.post(a)},ea=async(e,t)=>{Kt("clear_ended");const a=`/leaderboards/${e}/users/${t}`;await jt.patch(a)},ta=async(e,t,a)=>{Kt("set_reaction",{cohorted:!0});const s=`/reactions/${e}/users/${t}`,n={reaction:a};await jt.patch(s,n)},aa=async(e,t)=>{Kt("fetch_reaction_uncohorted");const a=`/reactions/uncohorted/${e}/users/${t}`;return zt((await jt.get(a)).data.reaction)},sa=async(e,t,a)=>{Kt("set_reaction",{cohorted:!1});const s=`/reactions/uncohorted/${e}/users/${t}`,n={reaction:a};await jt.patch(s,n)},na=Q("https://www.duolingo.com/2017-06-30/messaging"),ra=(e,t={})=>na.post("/ack-message/",{messageId:{[e]:t},userId:(0,x.Jb)()}),ia=e=>na.post("/ack-messages/",{sessionEndMessageLogs:e.map((({ctaWasClicked:e,messageId:t,timestamp:a})=>({ctaWasClicked:e,sessionEndMessageId:{[t]:{}},timestamp:a}))),userId:(0,x.Jb)()}),oa=async(e,t)=>(await na.post("/get-messages/",{potentialMessageIds:e.map((e=>({[e]:{}}))),useOnboardingBackend:t,userId:(0,x.Jb)()})).data,la=async(e,t)=>(await na.post("/get-messages/",{sessionEndPotentialMessageIds:e.map((e=>({[e]:{}}))),useOnboardingBackend:t,userId:(0,x.Jb)()})).data,ca=Q("https://www.duolingo.com/v2/mistakes");var da;!function(e){e[e.ADD=0]="ADD",e[e.RESOLVE_INBOX=1]="RESOLVE_INBOX",e[e.RESOLVE_LEARNING=2]="RESOLVE_LEARNING"}(da||(da={}));const ua=async(e,t,a)=>(await ca.get(`/users/${(0,x.Jb)()}/courses/${e}/count`,{params:{includeListening:t,includeSpeaking:a}})).data.numberMistakes,pa=async({countLimit:e,courseId:t,includeListening:a,includeSpeaking:s})=>(await ca.get(`/users/${(0,x.Jb)()}/courses/${t}`,{params:{includeListening:a,includeSpeaking:s,limit:e,requestType:"INBOX"}})).data.mistakes,ga=async({courseId:e,expectedMistakes:t,session:a})=>{var s;const n=null===(s=null==a?void 0:a.challenges)||void 0===s?void 0:s.map((e=>e.challengeGeneratorIdentifier)).filter((e=>void 0!==e)),r=null==n?void 0:n.map((e=>e.generatorId)),i=null==t?void 0:t.filter((e=>!(null==r?void 0:r.includes(e.generatorId)))),o=null==i?void 0:i.map((e=>({challengeIdentifier:e,patchType:da.RESOLVE_INBOX})));void 0!==o&&0!==o.length&&await ca.patch(`/users/${(0,x.Jb)()}/courses/${e}`,{incomingMistakes:o})},ma=Q("https://invite.duolingo.com"),ha=e=>ma.post("/user/splash-load",{invite_code:e});var _a;!function(e){e.SKILL="SKILL",e.STORY="STORY",e.XP="XP_CHALLENGE",e.UNIT="UNIT"}(_a||(_a={}));const va=[_a.SKILL,_a.STORY],fa=Q("https://schools.duolingo.com/api/1"),ba=Q("https://schools.duolingo.com/api/2"),Sa=async()=>(await fa.get("/observers/list_settings_classrooms")).data.classrooms,ya=async e=>(await fa.get("/observers/get_observer_for_code",{params:{link_code:e}})).data,Ea=async e=>(await fa.post("/observers/join_classroom_by_code",{link_code:e})).data,Ia=async e=>{await fa.post("/observers/leave_classroom",{classroom_id:e})},ka=async e=>(await ba.get(`/leaderboards/${e}/classroom_info`,{params:{user_id:e}})).data,wa=e=>ba.post(`/students/${e}/auto_follow`),Ta=async(e,t,a)=>(await ba.get("/activities",{params:{end_time:a,start_time:t,user_ids:[e].join(",")}})).data[e],Ca=(Q("https://www.duolingo.com/v1/score"),Q("https://jeeves.duolingo.com")),Ra=async e=>(await Ca.get("/api/1/detect_duplicates",{params:{issue_key:e}})).data,La=e=>Ca.post("/api/1/fully_connect_duplicates",{issue_keys:e}),Oa=async()=>(await Ca.get("/api/2/shakira/slack_report_types")).data,Pa=async e=>(await Ca.get("/api/2/shakira/suggested_features",{params:e})).data,Aa=async(e,t)=>{const a=new FormData;return a.set("issueData",JSON.stringify(e)),t.forEach((([e,t])=>a.set(e,t))),(await Ca.post("/api/2/shakira/report_issue",a)).data},Da=Y(""),xa=async e=>{await Da.post("/d",{phoneNumber:e})};var Na=a(50498);const Fa=Q("https://spam-control-api.duolingo.com");var Ma;!function(e){e.BAD_BEHAVIOR="bad_behavior",e.BAD_NAME="bad_name",e.NUDITY="nudity",e.SPAM="spam",e.SOMETHING_ELSE="something_else"}(Ma||(Ma={}));const Ua=async(e,t)=>{const{name:a="(Unknown)",picture:s,username:n="(Unknown)",id:r}=e;await(0,Na.XD)((async()=>Fa.post("/reports/user_profiles",{name:a,picture:`https:${s}/xlarge`,reason:t,user_id:r,username:n})),{retries:1})};const Ha=Q("https://stories.duolingo.com"),ja=async e=>{var{storyId:t}=e,a=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]])}return a}(e,["storyId"]);return(await Ha.get(`/api2/stories/${t}`,{params:a})).data},Ga=async(e,t)=>(await Ha.post(`/api2/stories/${e}/complete`,t)).data,Ba=async e=>(await Ha.post("/api/userReply",e)).data;let Va,za=0;const Za=async(e,t,a)=>{if(void 0===Va||Va+1e4<Date.now())za=1,Va=Date.now();else if(za+=1,za>=5)return(0,W.Au)()&&alert("Practice hub stories has been refreshed too frequently - please contact a developer."),void(0,A.vU)("Practice hub stories has been refreshed too many times",{data:{practiceHubStoryApiCount:za}});return(await Ha.get("/api2/practiceHubStories",{params:{featuredStoryId:e,fromLanguage:t,illustrationFormat:"svg",learningLanguage:a}})).data},$a=K(""),Wa=async()=>{await $a.post("/logout")},qa=async()=>(await $a.get("/notifications")).data,Qa=async e=>{const t=new FormData;t.append("image",e),await $a.post("/avatars",t)},Ya=async e=>{await $a.post("/dismiss_notification",{message:e.toLowerCase()})},Ka=async e=>(await $a.get("/admin_tools",{params:{log_type:"deletes",page:e}})).data,Ja=async()=>(await $a.get("/admin_tools/shadow_banned")).data,Xa=async e=>{const t=(await $a.post("/admin_tools/shadow_banned/add",{username:e})).data;if(t.error)throw t.error;return t},es=async e=>{const t=(await $a.post("/admin_tools/shadow_banned/remove",{user_id:e})).data;if(t.error)throw t.error;return t},ts=async()=>(await $a.get("/admin_tools/social_currency_stats")).data;var as=a(26886),ss=a(93746),ns=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]])}return a};const rs=K("/api/1"),is=async(e,t,a,s)=>{const n=new FormData;n.append("user_id",`${e}`),n.append("username",t),s&&n.append("image",s),a.length&&n.append("ban_description",a),await rs.post("/shadowban_user",n)},os=e=>"zh-CN"===e?"zh":e,ls=e=>"zh"===e?"zh-CN":e,cs=e=>{var{from_language:t,from_language_id:a,from_language_name:s,learning_language:n,learning_language_id:r,learning_language_name:i,num_learners:o,num_learners_string:l}=e,c=ns(e,["from_language","from_language_id","from_language_name","learning_language","learning_language_id","learning_language_name","num_learners","num_learners_string"]);return Object.assign({fromLanguage:t,fromLanguageId:os(a),fromLanguageName:s,learningLanguage:n,learningLanguageId:os(r),learningLanguageName:i,numLearners:o,numLearnersString:l},c)},ds=async e=>(await rs.get("/courses/list")).data.map(cs).filter((({fromLanguageId:t,learningLanguageId:a})=>((0,ss.nV)(a,t)||(0,as.yO)(t,a))&&!(e&&(0,as.It)(a,t)))),us=async(e,t=ss.h9,a=ss.h9)=>(e=>{var{beta_date:t,estimated_beta_date:a,estimated_beta_date_string:s,from_language:n,from_language_name:r,from_language_id:i,learning_language:o,learning_language_id:l,learning_language_name:c,num_learners:d,num_learners_string:u,released_date:p,released_date_string:g,start_date:m,subscriber_count:h,user_subscribed:_}=e,v=ns(e,["beta_date","estimated_beta_date","estimated_beta_date_string","from_language","from_language_name","from_language_id","learning_language","learning_language_id","learning_language_name","num_learners","num_learners_string","released_date","released_date_string","start_date","subscriber_count","user_subscribed"]);return Object.assign({betaDate:t,estimatedBetaDate:a,estimatedBetaDateString:s,fromLanguage:n,fromLanguageId:os(i),fromLanguageName:r,learningLanguage:o,learningLanguageId:os(l),learningLanguageName:c,numLearners:d,numLearnersString:u,releasedDate:p,releasedDateString:g,startDate:m,subscriberCount:h,userSubscribed:_},v)})((await rs.get(`/courses/${ls(e)}/${ls(t)}/show`,{params:{ui_language_abbrev:(0,ss.D3)(a)}})).data),ps=F.HP((async e=>(await rs.get("/get_language_tokens",{params:{language:e}})).data.tokens||[])),gs=async(e,t)=>{await rs.post("/me/register_device",{registration_id:e,subscription:t})},ms=async e=>{await rs.post("/me/unregister_device",{registration_id:e})},hs=async(e,t,a)=>{const s={};a&&(s.email=a),await rs.post(`/courses/${ls(e)}/${ls(null!=t?t:ss.h9)}/subscribe`,s)},_s=async(e,t,a)=>{const s={};a&&(s.email=a),await rs.post(`/courses/${ls(e)}/${ls(null!=t?t:ss.h9)}/unsubscribe`,s)};var vs=a(16324),fs=a(46435),bs=a(41364),Ss=a(71371),ys=a(25062),Es=a(32499),Is=a(54448),ks=a(11811);const ws=Y("/2017-06-30"),Ts="Idempotency-Key";ws.addErrorInterceptor(((e,{response:t})=>{if(401===(null==t?void 0:t.status)&&!e.includes("login")){if((0,x.Pc)())return(0,A.um)("Requiring logged-out user to log in again",{sample:.1}),J(),(0,Le.Zs)();(0,A.vU)("Attempted authenticated call while logged-out")}})),(0,W.gQ)("debugStripe")&&ws.setServiceEnvironment("purchasing-backend","staging").setServiceEnvironment("shop-backend","staging-1").setServiceEnvironment("subscriptions-backend","staging-1"),(0,W.gQ)("monolithStaging")&&ws.setServiceEnvironment("monolith",`next-${(0,W.ky)("monolithStaging")}`);const Cs=(e=!0)=>["acquisitionSurveyReason","adsConfig","betaStatus","blockedUserIds","blockerUserIds","canUseModerationTools","classroomLeaderboardsEnabled","courses","creationDate","currentCourseId","email","emailAnnouncement","emailAssignment","emailAssignmentComplete","emailClassroomJoin","emailClassroomLeave","emailEditSuggested","emailEventsDigest","emailFollow","emailPass","emailPromotion","emailResearch","emailWeeklyProgressReport","emailSchoolsAnnouncement","emailSchoolsNewsletter","emailSchoolsProductUpdate","emailSchoolsPromotion","emailStreamPost","emailVerified","emailWeeklyReport","enableMicrophone","enableSoundEffects","enableSpeaker",`experiments{${fs.rn}}`,"facebookId","fromLanguage","gemsConfig","globalAmbassadorStatus","googleId","hasFacebookId","hasGoogleId","hasPlus","health","id","inviteURL","joinedClassroomIds","lastResurrectionTimestamp","lastStreak{isAvailableForRepair,length}","learningLanguage","lingots","location","monthlyXp","name","observedClassroomIds","optionalFeatures","persistentNotifications","picture","plusDiscounts","practiceReminderSettings","privacySettings","referralInfo","rewardBundles","roles","sessionCount","streak","streakData{currentStreak,longestStreak,previousStreak}","timezone","timezoneOffset","totalXp","trackingProperties","username","webNotificationIds","weeklyXp","xpGains","xpGoal","zhTw"].concat(e?["currentCourse"]:[]);var Rs;!function(e){e.COMMENT="COMMENT",e.FOLLOW="FOLLOW",e.LESSON="LESSON",e.MASTER="MASTER",e.PASS="PASS",e.PRACTICE="PRACTICE",e.STREAM_POST="STREAM_POST",e.TEST="TEST",e.TRANSLATION="TRANSLATION",e.WELCOME="WELCOME"}(Rs||(Rs={}));const Ls=e=>{if("PREPAID"===e.couponType&&e.packageInfo){if("premium"===e.packageInfo[0].subscriptionType)return e.packageInfo[0].isFamilyPlan?"Super Family":"Super";if("gold"===e.packageInfo[0].subscriptionType)return e.packageInfo[0].isFamilyPlan?"Max Family":"Max";throw Error("Invalid Subscription Type from Coupon")}if("B2B_UNIVERSAL_CLOCK"===e.couponType||"TRIAL"===e.couponType)return"Super";throw Error("Invalid couponType")},Os=e=>{if("PREPAID"===e.couponType&&e.packageInfo){if("WEEK"===e.packageInfo[0].unitOfTime)return"WEEK";if("MONTH"===e.packageInfo[0].unitOfTime)return"MONTH"}return"MONTH"},Ps=async(e,t=!0,a=null,s)=>{await ws.post(s?"/login-experiment":"/login",Object.assign({distinctId:(0,U.getDistinctId)(),signal:a},e),{params:{fields:t?Cs().join(","):""}})};var As;!function(e){e.CHANGE_PASSWORD="CHANGE_PASSWORD",e.RESET_PASSWORD="RESET_PASSWORD",e.SIGN_UP="SIGN_UP"}(As||(As={}));const Ds=async e=>(await ws.post("/password-quality/check",Object.assign({},e))).data,xs=async(e,t)=>{await ws.post(t?"/login-experiment":"/login",Object.assign({distinctId:(0,U.getDistinctId)()},e),{params:{fields:""}})},Ns=async(e,t)=>(await ws.post("/users",Object.assign({distinctId:(0,U.getDistinctId)(),signal:t},e),{forceJsonDecoding:!0,params:{fields:"id"}})).data,Fs=(0,bs.p)("GET_USER")((async(e,t=void 0)=>await Us(e,Cs(t)))),Ms=(0,bs.p)("GET_USER")((async e=>await Us(e,["courses","creationDate","currentCourse","currentCourseId","gemsConfig","globalAmbassadorStatus","hasPlus","id","lingots","name","picture","privacySettings","roles","streak","streakData{currentStreak,previousStreak}","totalXp","username"]))),Us=async(e,t)=>(await ws.get(`/users/${e}`,{params:{fields:t.join(",")}})).data,Hs=e=>ws.post(`/users/${e}/email-verifications`),js=async(e,t)=>(await ws.patch(`/users/${e}/email-verifications/${t}`,{verified:!0})).data,Gs=async(e,t)=>(await ws.post("/email-removals",{email:e,token:t})).data,Bs=async e=>(await ws.get("/onboarding/validate-username",{params:{username:e}})).data,Vs=async e=>{const t={fields:`users{${["courses","creationDate","currentCourse","currentCourseId","gemsConfig","globalAmbassadorStatus","hasPlus","id","lingots","name","picture","privacySettings","roles","streak","streakData{currentStreak,previousStreak}","totalXp","username"].join(",")}}`};return(await ws.get("/users",{params:Object.assign({username:e},t)})).data.users},zs=async e=>(await ws.get("/users",{params:{email:e}})).data.users,Zs=async(e,t,a,s=null)=>{const n=a?{fields:a.join(",")}:{};return(await ws.patch(`/users/${e}`,Object.assign({signal:s},t),{forceJsonDecoding:!0,params:n})).data},$s=async(e,t)=>{const a=t?(0,Ne.zK)((0,Ne.g8)(t)):void 0;return(await ws.get(`/users/${e}/xp_summaries`,{params:{startDate:a}})).data.summaries},Ws=async(e,t,a)=>(await ws.get(`/users/${e}/moderated-events`,{params:{limit:a,types:t.join(",")}})).data.events,qs=async(e,t)=>{await ws.post(`/users/${e}/messages`,{message:t})},Qs=e=>ws.delete(`/users/${(0,x.Jb)()}/courses/${e}`,{}),Ys=async e=>{const t=(e.type===ks.FF.AlphabetLesson&&(0,W.NY)()?await De(e.learningLanguage,e.fromLanguage,e):await ws.post("/sessions",e)).data;if(!Array.isArray(t.challenges)&&e.type!==ks.FF.DuoRadio)throw Error("No challenges present in session");return t},Ks=(e,{onError:t,signal:a}={})=>{const s=new AbortController;return(0,Na.XD)((async()=>{try{let t;if(t=e.type===ks.FF.AlphabetLesson?await Ae(e):await ws.put(`/sessions/${e.id}`,Object.assign({},e),{headers:{"Idempotency-Key":e.id},timeout:1e4}),202===t.status)throw Error("Session has been accepted but not yet processed.");return t.data}catch(e){throw Ss.Z.remove("session_end_grade"),null==t||t(e),e.response&&(e.response.status>=500&&e.response.status<600&&!e.response.headers["no-retry"]||s.abort()),e}}),{backoffFn:e=>{const t=.75+2*Math.random()*.25;return 250*Math.pow(2,e-1)*t},retries:1/0,signal:a?(0,Na.yv)(s.signal,a):s.signal,stopAtTime:Date.now()+24e4})},Js=async e=>(await ws.post(`/sessions/${e.id}/challenges`,Object.assign({},e))).data,Xs=async e=>F.ei((await ws.put(`/challenges/${e.id}`,Object.assign({},e))).data,"blameMessage","blameType","closestSolution","correct","gradingMetadata","guess","highlights"),en={BAD_AUDIO:"BAD_AUDIO",BAD_HINTS:"BAD_HINTS",BAD_IMAGE:"BAD_IMAGE",BAD_OPTION:"BAD_OPTION",BAD_PROMPT:"BAD_PROMPT",CHARACTER_DISPLAY:"CHARACTER_DISPLAY",MISSING_AUDIO:"MISSING_AUDIO",MISSING_HINTS:"MISSING_HINTS",MISSING_IMAGE:"MISSING_IMAGE",NOT_ACCEPTED:"NOT_ACCEPTED",OFFENSIVE_OPTION:"OFFENSIVE_OPTION",OTHER_ISSUE:"OTHER_ISSUE",WRONG_ACCEPTED:"WRONG_ACCEPTED"},tn=async(e,t)=>{const a={challenge:(0,Is.g)(e),problems:t};await ws.post(`/challenges/${e.id}/reports`,a)},an=async()=>(await ws.get("/shop-items")).data.shopItems,sn=async(e="US",t)=>{const a=t?Ut.NewYears2024:Ut.Standard,s=(await ws.get(`/users/${(0,x.Jb)()}/subscription-plans`,{params:{countryCode:e,supportedLayouts:a}})).data,n=t=>void 0===t.planCurrency?"UNDEFINED":(0,ys.T4)(Math.floor(t.priceInCents/t.periodLengthInMonths),t.planCurrency,e),r=t=>void 0===t.planCurrency?"UNDEFINED":(0,ys.T4)(t.priceInCents,t.planCurrency,e),i=s.plusPackageViewModels.find((e=>1===e.periodLengthInMonths)),o=t=>t===Es._r.TwelveMonth&&i?(0,ys.T4)(12*i.priceInCents,i.planCurrency,e):void 0,l=t=>void 0===t.undiscountedPriceInCents?void 0:(0,ys.T4)(t.undiscountedPriceInCents,t.planCurrency,e),c=e=>{const a=1===(s=e).periodLengthInMonths?Es._r.OneMonth:s.isFamilyPlan?Es._r.FamilyPlan:Es._r.TwelveMonth;var s;return Object.assign(Object.assign({},e),{formattedHypotheticalYearlyPrice:o(a),formattedMonthlyPrice:n(e),formattedNypUndiscountedPrice:l(e),formattedPrice:r(e),isFreeTrial:e.trialPeriodInDays>0,isNewYears:t&&a===Es._r.TwelveMonth,planType:a,type:"subscription"})};return{currentPlan:s.currentPlan?c(s.currentPlan):void 0,subscriptionPlans:s.plusPackageViewModels.map(c)}},nn=async e=>(await ws.get(`/users/${(0,x.Jb)()}/shop-items/${e}`)).data,rn=async(e,t)=>ws.patch(`/users/${(0,x.Jb)()}/shop-items/${e}`,t),on=async(e,t,a,s)=>(await ws.put(`/users/${(0,x.Jb)()}/payment-methods/${e}`,{product:t,stripeToken:a},{headers:{[Ts]:s}})).data,ln=async()=>(await ws.get(`/users/${(0,x.Jb)()}`,{params:{fields:"paymentMethods"}})).data.paymentMethods,cn=async()=>(await ws.get(`/users/${(0,x.Jb)()}`,{params:{fields:"shopItems{familyPlanInfo{inviteToken,ownerId,secondaryMembers},itemName,purchaseDate,purchaseId,purchasePrice,quantity,subscriptionInfo{currency,expectedExpiration,extendedFreeTrialLength,isFreeTrialPeriod,periodLength,price,renewer,renewing,vendorPurchaseId},wagerDay}"}})).data.shopItems,dn=async(e,t)=>(await ws.post(`/users/${(0,x.Jb)()}/payment-methods`,{product:ys.hp.Duolingo,stripeToken:e},{headers:{[Ts]:t}})).data,un=async(e,t)=>(await ws.post(`/users/${(0,x.Jb)()}/create-setup`,{paymentMethodId:e,product:ys.hp.Duolingo},{headers:{[Ts]:t}})).data,pn=async(e,t)=>(await ws.post(`/users/${(0,x.Jb)()}/attach-payment-method`,{paymentMethodId:e,product:ys.hp.Duolingo},{headers:{[Ts]:t}})).data,gn=async({email:e,idempotencyKey:t,languageCode:a,productId:s,promoCode:n})=>{const r={couponCode:n,email:e,languageCode:a,productId:s,stripeAccount:"DUOLINGO_GENERAL"+((0,W.gQ)("debugStripe")?"_TEST":""),vendor:"VENDOR_STRIPE"};return(0,vs.EV)((await ws.post(`/users/${(0,x.Jb)()}/create-order`,(0,vs.Ed)(r),{headers:{[Ts]:t}})).data)},mn=async(e,t,a)=>{const s=new AbortController;let n=0;return(0,Na.XD)((async()=>{try{return{item:(await ws.post(`/users/${(0,x.Jb)()}/shop-items`,Object.assign({itemName:e},t),{headers:a?{[Ts]:a}:void 0})).data,numRetries:n}}catch(e){throw e.response&&(e.response.status>=500&&e.response.status<600&&!e.response.headers["no-retry"]?n++:s.abort()),e}}),{retries:1,signal:s.signal})},hn=async({itemName:e,purchasingId:t,receivingId:a})=>(await ws.post(`/users/${t}/gifts/${a}`,{itemName:e})).data,_n=async e=>(await ws.get(`/plus-coupon-codes/${e}`)).data,vn=async()=>(await ws.get(`/users/${(0,x.Jb)()}/family-plan/invites`)).data,fn=async e=>(await ws.get(`/family-plan/invite/${e}`)).data,bn=async e=>(await ws.post(`/users/${(0,x.Jb)()}/family-plan/members/invite/${e}`,{})).data,Sn=async e=>(await ws.patch(`/users/${(0,x.Jb)()}/family-plan/invites/${e}`,{status:"ACCEPTED"})).data,yn=async e=>(await ws.patch(`/users/${(0,x.Jb)()}/family-plan/invites/${e}`,{status:"REJECTED"})).data,En=(e,t)=>ws.delete(`/users/${e}/family-plan/members/${t}`,{}),In=["ageRestrictionLimit",`clientExperiments{${fs.Sg}}`,"featureFlags","ipCountry","speechHost"],kn=async e=>200===(await ws.get(`/bango/invite/${e}`)).status,wn=async e=>200===(await ws.post(`/users/${(0,x.Jb)()}/activate-bango-subscription`,{inviteToken:e})).status,Tn=async()=>(await ws.get("/config",{params:{fields:In.join(",")}})).data,Cn=async e=>{await ws.delete(`/users/${(0,x.Jb)()}/shop-items`,{itemName:e})},Rn=async()=>(await ws.get(`/users/${(0,x.Jb)()}/privacy-settings`)).data.privacySettings.map((e=>Object.assign(Object.assign({},e),{id:e.id.toUpperCase()}))),Ln=async e=>(await ws.patch(`/users/${(0,x.Jb)()}/privacy-settings`,e,{params:{fields:"privacySettings"}})).data.privacySettings,On=e=>ws.post("/password-reset",{email:e}),Pn=async(e,t)=>{await ws.post("/tracking-status",{distinctId:t,enabled:e})},An=async({id:e,fromLanguage:t,learningLanguage:a},s,n)=>{await ws.patch(`/users/${e}/rewards/${s}`,{consumed:!0,fromLanguage:t,learningLanguage:a,pathLevelSpecifics:n})},Dn=async e=>(await ws.get(`/attribution/survey/custom?uiLanguage=${e}`)).data.responses,xn=async e=>(await ws.post(`/users/${(0,x.Jb)()}/plus-discounts`,{discountType:e})).data,Nn=(e,t,a)=>ws.patch(`/users/${e}/experiments/${t}`,a),Fn=async()=>{await ws.put(`/users/${(0,x.Jb)()}/remove-heart`)},Mn=async(e,t,a)=>(await ws.get(`/users/${e}/vocab-summary?endTime=${a}&startTime=${t}`)).data,Un=Q("https://www.duolingo.com/2017-06-30"),Hn=async()=>{var e;if(null===(e=window.webkit)||void 0===e?void 0:e.messageHandlers)return new Promise((e=>{window.weekly_data_callback=t=>{window.user_model_callback=a=>{if(t.current_streak=a.streakData.length,t.current_learning_language=a.currentCourse.learningLanguage,a.currentCourse.skills){const e=a.currentCourse.skills;let s=0,n=0;e.forEach((e=>{e.forEach((({finishedLevels:e})=>{s+=1,e>0&&(n+=1)}))})),t.current_course_progress=n/s}e(t)},window.webkit.messageHandlers.observer.postMessage({get_user_model:{callback:"user_model_callback",fields:["currentCourse","streakData"]}})},window.webkit.messageHandlers.observer.postMessage({get_weekly_report_info:{callback:"weekly_data_callback"}})}));const{data:t}=await Un.get("/weekly-report-info");return t},jn=Q("https://www.duolingo.com/2020-01-02"),Gn=async({fromLanguage:e,lastTotalLexemeCount:t,learningLanguage:a,limit:s=200,progressedSkills:n,sortBy:r="LEARNED_DATE",startIndex:i=0})=>(await jn.post(`/users/${(0,x.Jb)()}/courses/${a}/${e}/learned-lexemes`,{lastTotalLexemeCount:t,progressedSkills:n},{params:{limit:s,sortBy:r,startIndex:i}})).data,Bn=async(e,t,a)=>(await jn.post(`/users/${(0,x.Jb)()}/courses/${t}/${e}/learned-lexemes/count`,{progressedSkills:a})).data,Vn=async(e,t,a,s)=>(await jn.post(`/users/${(0,x.Jb)()}/courses/${a}/${e}/practice-lexemes`,{lastTotalLexemeCount:t,progressedSkillIds:s})).data,zn=Q("https://www.duolingo.com"),Zn=Q("https://yir.duolingo.com"),$n=()=>{const e=(0,M.vl)().id;return e?Promise.resolve(e):zn.get("/2017-06-30/year-in-review-info").then((e=>{var t;return(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.report_url)?(0,M.vl)(e.data.report_url.split("?")[1]).id:""})).catch((()=>(window.location.href="https://www.duolingo.com","")))},Wn=e=>Zn.get(`/2023/user_stats_${e}.json`,{forceJsonDecoding:!0}).then((e=>e.data)),qn=async e=>{await zn.patch("/2017-06-30/year-in-review-info",{learner_style:e})},Qn=(0,a(80388).J9)()?"zendesk.duolingo.cn":"duolingotest.zendesk.com",Yn=new Z(`https://${Qn}/api/v2`),Kn=async(e,t)=>(await fetch(`https://${Qn}/api/v2/uploads?filename=${e}`,{body:t,headers:{"Content-Type":t.type},method:"POST"})).json(),Jn=async e=>{const t={request:{comment:{body:e.description,uploads:e.uploadTokens},requester:{email:e.email,name:e.email},subject:e.subject,tags:[e.tag]}};return(await Yn.post("/requests",t)).data}},50498:(e,t,a)=>{"use strict";a.d(t,{XD:()=>l,_v:()=>c,f:()=>o,p4:()=>i,yv:()=>r});var s=a(80254),n=a(59815);const r=(...e)=>{const t=new AbortController,a=()=>{t.abort();for(const t of e)t.removeEventListener("abort",a)};for(const t of e){if(t.aborted){a();break}t.addEventListener("abort",a)}return t.signal},i=async e=>{const t={};try{return await Promise.race([e,t])===t?"pending":"fulfilled"}catch(e){return"rejected"}},o=s.IH((()=>new Promise((()=>{})))),l=async(e,{backoffFn:t,retries:a,signal:s,stopAtTime:r})=>{let i,o=0;for(;o<a+1;){if(o>0){const e=t?t(o):Math.round(Math.min(1e3*o,3e4)*(Math.random()+1));console.log(`Backing off for ${e}ms before retrying`),await c(e)}if((null==s?void 0:s.aborted)||r&&Date.now()>=r)break;try{return await e(o)}catch(e){i=e}if(o++,null==s?void 0:s.aborted)break}throw null!=i?i:new n.$K},c=e=>new Promise((t=>{window.setTimeout(t,e)}))},97236:(e,t,a)=>{"use strict";a.d(t,{Tc:()=>E,cq:()=>P,IZ:()=>x,a1:()=>N,GN:()=>F,nU:()=>M,Ap:()=>U,N$:()=>O,Ms:()=>G});var s=a(91367),n=a(80254);const r=a.p+"sounds/7abe057dc8446ad325229edd6d8fd250.mp3",i=a.p+"sounds/2aae0ea735c8e9ed884107d6f0a09e35.mp3",o=a.p+"sounds/421d48c53ad6d52618dba715722278e0.mp3",l=a.p+"sounds/37d8f0b39dcfe63872192c89653a93f6.mp3",c=a.p+"sounds/0a27c1ee63dd220647e8410a0029aed2.mp3",d=a.p+"sounds/a28ff0a501ef5f33ca78c0afc45ee53e.mp3",u=a.p+"sounds/2e4669d8cf839272f0731f8afa488caf.mp3",p=a.p+"sounds/f0b6ab4396d5891241ef4ca73b4de13a.mp3";var g=a(50498),m=a(80388),h=a(71371),_=a(51158),v=a(18804),f=a(79465);const b=s.Howler._setup;s.Howler._setup=()=>{const e=null===s.Howler._navigator?null:new Proxy(s.Howler._navigator,{get:(e,t)=>"userAgent"===t?e.userAgent.replace(/OPR\/(\d{3})/,"OPR/99"):e[t]});return s.Howler._navigator=e,b()};const S={BONUS:{url:r,volume:.5},CORRECT:{url:l,volume:.35},FAILED:{url:o,volume:.5},INCORRECT:{url:p,volume:.35},PASSED:{url:i,volume:.5},TEST:{url:d,volume:.4},TIMER:{url:u,volume:.6}},y=Symbol("SOUND_OPTIONS_KEY"),E=n.Xc(S,(e=>e.url)),I=n.Ry(n.VO(S).map((({url:e,volume:t})=>[e,t]))),k=[],w={},T={};let C,R=!1;const L=({failureReason:e,source:t,timeTaken:a,url:s})=>{const n=(0,m.J9)()?.005:5e-4;if(Math.random()<n){const r=new URL(H(s));(0,f.track)("tts_play_finished",{failure_reason:e,host:r.host,path:r.pathname,sampling_rate:n,successful:void 0===e,time_taken:a,tts_source:t})}},O=({text:e,url:t})=>{const a=(0,m.J9)()?.1:.01;Math.random()<a&&(0,f.track)("tts_download_failure",{offline:!navigator.onLine,path:t?H(t):"",text:e})},P=()=>k.length>0||R,A=e=>{var t;return new s.Howl({format:["mp3"],html5:!0,onloaderror:(t,a)=>(0,_.vU)("Failed to load audio",{data:{errorCode:a,url:e},sample:1e-4}),onplayerror:(t,a)=>(0,_.vU)("Failed to play audio",{data:{errorCode:a,url:e},sample:1e-4}),preload:!0,src:[e],volume:null!==(t=I[e])&&void 0!==t?t:1})},D=e=>{switch(e){case"ended":return"end";case"error":return"loaderror";default:return e}},x=e=>{if(!e)return Promise.reject();if(e=H(e),!w[e]){const t=A(e);w[e]=new Promise(((e,a)=>{t.on("load",e),t.on("loaderror",a)})),T[e]=t}return w[e]},N=(e,{requestedAt:t},a)=>{var s;if(!e)return(0,_.Kp)("TTS URL is null"),void L({failureReason:"empty_url",source:"network",timeTaken:0,url:""});const n=w[e];let r="network";(async()=>{const e=n?await(0,g.p4)(n):"empty";r="fulfilled"===e?"cache":"pending"===e?"pending-cache":"network"})();const i=window.performance.now();return F(e,Object.assign(Object.assign({},a),{eventListeners:[...null!==(s=null==a?void 0:a.eventListeners)&&void 0!==s?s:[],["error",()=>L({failureReason:"load_error",source:r,timeTaken:window.performance.now()-i,url:e})],["play",()=>{const a=window.performance.now();h.Z.start("tts_play",{startTime:t}),h.Z.finish("tts_play"),L({failureReason:void 0,source:r,timeTaken:a-i,url:e})}],["playerror",()=>L({failureReason:"play_promise_rejected",source:r,timeTaken:window.performance.now()-i,url:e})]]}))},F=(e,t={})=>{var a,s,r,i,o,l;if(!e)return void(0,_.Kp)("TTS URL is null");const c=H(e);if(n.VO(E).includes(c)&&!(null===(a=(0,v.qg)())||void 0===a?void 0:a.user.enableSoundEffects))return;if(!t.overlay&&C&&C.howl.playing()&&C.options.forceListen&&C.url!==c&&C.url!==t.allowInterrupt)return;const d=null!==(s=T[c])&&void 0!==s?s:A(c),u=d[y];return d[y]=t,null===(r=null==u?void 0:u.eventListeners)||void 0===r||r.forEach((([e,t])=>d.off(D(e),t))),null===(i=t.eventListeners)||void 0===i||i.forEach((([e,t])=>d.on(D(e),t))),T[c]||d.on("end",(()=>j(d))),t.overlay||(U(),C={howl:d,options:t,url:c}),d.seek(null!==(o=t.currentTime)&&void 0!==o?o:0),d.rate(null!==(l=t.playbackRate)&&void 0!==l?l:1),d.play(),{get currentTime(){return"unloaded"===d.state()?0:d.seek()},set currentTime(e){"unloaded"!==d.state()&&d.seek(e)},get duration(){return d.duration()},set paused(e){e&&d.playing()?d.pause():e||d.playing()||d.play()},get paused(){return!d.playing()},get src(){return c}}},M=n.IH((()=>{try{const e=new s.Howl({src:[c]});e.on("unlock",(()=>{e.unload(),R=!0}))}catch(e){(0,_.vU)("Howler failed to unlock audio",{ex:e})}})),U=()=>null==C?void 0:C.howl.stop(),H=e=>e.replace("http://static.duolingo.com","https://d7mj4aqfscim2.cloudfront.net"),j=e=>{var t;const a=e[y];null===(t=null==a?void 0:a.eventListeners)||void 0===t||t.forEach((([t,a])=>e.off(D(t),a))),e[y]=void 0,e.unload()},G=e=>{e&&(e=H(e),w[e]&&(delete w[e],j(T[e]),delete T[e]))}},70326:(e,t,a)=>{"use strict";a.d(t,{$C:()=>y,IS:()=>I,Wj:()=>f,lV:()=>T,pK:()=>S,rV:()=>w,x4:()=>E});var s=a(80254),n=a(43464),r=a(54412),i=a(17135),o=a(59815),l=a(81149),c=a(41679),d=a(15670),u=a(8654),p=a(93746),g=a(51158),m=a(11908),h=a(18804),_=a(79465),v=a(16086);class f extends o.pY{constructor(e,t){super(),this.useImprovedErrorMessages=e,this.errorFields=t}}const b=async e=>{var t;const a={timezone:(0,i.NP)()};try{const a=c.E6()&&(null===(t=await c.Jb())||void 0===t?void 0:t.accessToken);a&&(e.facebookToken=a)}catch(e){}const s=(0,m.rV)(m.Qt.InviteCode);s&&(e.inviteCode=s,(0,m.cl)(m.Qt.InviteCode));const o=(0,r.ej)(r.Vj.LandingURL);o!==r.m_&&(e.landingUrl=o);const l=(0,r.ej)(r.Vj.InitialReferrer);l!==r.m_&&(e.initialReferrer=l),e.lastReferrer=(0,r.ej)(r.Vj.LastReferrer),(0,r.d8)(r.Vj.LastReferrer,"");const u=await d.e("SIGNUP"),p=await n.Vi.userCreate(Object.assign(Object.assign({},a),e),u),g=p.id;return await(0,_.alias)(g),(0,_.setDistinctId)(g),p},S=async(e,t=p.h9)=>{if(e===t)throw(0,g.vU)("Tried to create trial user with same from and learning languages",{data:{fromLanguage:t,learningLanguage:e}}),Error("learningLanguage and fromLanguage cannot be the same");return await b({fromLanguage:t,learningLanguage:e})},y=async(e={},t=p.h9)=>{await b(Object.assign({fromLanguage:t},e))},E=async(e,t=!0)=>{var a;const s=(0,r.ej)(r.Vj.LandingURL);s!==r.m_&&(e.landingUrl=s),e.lastReferrer=(0,r.ej)(r.Vj.LastReferrer),(0,r.d8)(r.Vj.LastReferrer,"");const i=await d.e("LOGIN"),o=null===(a=(0,h.qg)())||void 0===a?void 0:a.config.clientExperiments,c=void 0!==o&&"experiment"===(0,l.cu)("web_login_migration_v2",null,o);await n.Vi.login(e,t,i,c);const u=(0,v.Jb)();(0,_.setDistinctId)(u)},I=async(e,t=!0)=>{const a={},n={identifier:e.identifier.trim(),password:e.password};if(n.identifier||(a.identifier=(0,u.H8)(11696)),n.password.trim()||(a.password=(0,u.H8)(5030)),!s.xb(a))throw new f(!1,a);try{await E(s.ei(n,"identifier","password"),!1)}catch(e){if(t){const e=await k(n.identifier);a.password=e?(0,u.H8)(6852):void 0,a.identifier=e?void 0:(0,u.H8)(17234,{email_or_username:n.identifier})}else a.connectivity=(0,u.H8)(19737);throw new f(!0,a)}},k=async e=>{const[t,a]=await Promise.all([n.Vi.userSearchByEmail(e),n.Vi.userSearch(e)]);return t.length>0||a.length>0},w=async e=>{const t=await n.Vi.usernameValidate(e);if(t.isUsernameTaken)throw new f(!0,{suggestedUsernames:t.suggestedUsernames,username:t.suggestedUsernames.length?(0,u.H8)(49958,{num:t.suggestedUsernames.length}):(0,u.H8)(6284)});if(!t.isUsernameValid)throw new f(!0,{suggestedUsernames:[],username:(0,u.H8)(14591)})},T=e=>new f(!1,Object.assign({},...e.map((e=>{switch(e){case"AGE_INVALID":return{age:(0,u._i)(15012)};case"EMAIL_INVALID":return{email:(0,u._i)(11696)};case"EMAIL_TAKEN":return{email:(0,u._i)(1760)};case"NAME_INVALID":return{name:(0,u._i)(24091)};case"PASSWORD_INCORRECT":return{currentPassword:(0,u._i)(8182)};case"PASSWORD_INVALID":return{password:(0,u._i)(5030)};case"USERNAME_INVALID":return{username:(0,u._i)(14591)};case"USERNAME_TAKEN":return{username:(0,u._i)(6284)};default:return}}))))},30033:(e,t,a)=>{"use strict";a.d(t,{Aq:()=>i,_q:()=>o,m5:()=>r});var s=a(80254),n=a(39852);const r="data-test",i=(e,t)=>{console.log(`${e}${JSON.stringify(t)}`,n.$U)},o=(...e)=>{const t=s.jj(s.oA(e).map((e=>e.split(" "))).flat()).sort();return t.length?{[r]:t.join(" ")}:{}}},83719:(e,t,a)=>{"use strict";a.d(t,{Oj:()=>s,ub:()=>l,ul:()=>c,zD:()=>o});var s,n=a(80254);!function(e){e.Accent="accent",e.ExtraSpace="extra_space",e.MissingSpace="missing_space",e.MissingWord="missing_word",e.Typo="typo",e.WrongWord="wrong_word"}(s||(s={}));const r=[12244,9366,748,6198,12541,9987,1358,11280,22136,11684],i=[1547,8153,10795,15212,8539],o="Nice! You’re building your writing skills!",l=()=>n.UP(r),c=e=>e?n.UP(i):15039},80388:(e,t,a)=>{"use strict";a.d(t,{J9:()=>n,lS:()=>r,nC:()=>l,vQ:()=>i});var s=a(17135);const n=()=>window.location.host.endsWith(".cn"),r=()=>"zh-CN"===navigator.language,i=async e=>{navigator.clipboard?await navigator.clipboard.writeText(e):o(e)},o=e=>{const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select();try{if(!document.execCommand("copy"))throw Error('Cannot execute "copy" command')}finally{document.body.removeChild(t)}},l=(e,t)=>{const a=t/1e3;let n=(0,s.Zo)();return window.setInterval((()=>{const t=(0,s.Zo)();t-n<a||(n=t,e())}),1e4)}},16324:(e,t,a)=>{"use strict";a.d(t,{EV:()=>i,Ed:()=>o,TD:()=>s});const s=e=>e.toLowerCase().split("_").reduce(((e,t,a)=>e+(a?(e=>e[0].toUpperCase()+e.slice(1))(t):t))),n=e=>e.split(/(?=[A-Z])/).join("_").toLowerCase(),r=(e,t)=>((e,t)=>Object.fromEntries(Object.entries(e).map((e=>t(e)))))(e,(([e,a])=>[t(e),null===a||"object"!=typeof a||a instanceof Function?a:Array.isArray(a)?a.slice():r(a,t)])),i=e=>r(e,s),o=e=>r(e,n)},95332:(e,t,a)=>{"use strict";a.d(t,{Dw:()=>R,F:()=>_,SJ:()=>h,Tu:()=>g,cC:()=>y,cf:()=>k,eK:()=>E,gr:()=>T,j$:()=>v,j6:()=>w,jc:()=>I,nT:()=>b,qD:()=>L,r1:()=>S,rF:()=>f,vv:()=>C,yH:()=>m});var s=a(80254),n=a(40472),r=a(43464),i=a(37590),o=a(68903),l=a(8654),c=a(93746),d=a(51158),u=a(43006),p=a(11811);const g=3,m=[p.Sm.Assist,p.Sm.CompleteReverseTranslation,p.Sm.Dialogue,p.Sm.Form,p.Sm.GapFill,p.Sm.Judge,p.Sm.Listen,p.Sm.ListenComplete,p.Sm.ListenIsolation,p.Sm.ListenSpeak,p.Sm.ListenTap,p.Sm.PartialListen,p.Sm.PartialReverseTranslate,p.Sm.SelectPronunciation,p.Sm.SelectTranscription,p.Sm.Speak,p.Sm.SyllableTap,p.Sm.Translate],h={[p.Sm.Assist]:"assist",[p.Sm.CharacterIntro]:"character_intro",[p.Sm.CharacterMatch]:"character_match",[p.Sm.CharacterPuzzle]:"character_puzzle",[p.Sm.CharacterSelect]:"character_select",[p.Sm.CharacterTrace]:"character_trace",[p.Sm.CharacterWrite]:"character_write",[p.Sm.CompleteReverseTranslation]:"complete_reverse_translation",[p.Sm.Definition]:"definition",[p.Sm.Dialogue]:"dialogue",[p.Sm.Form]:"form",[p.Sm.FreeResponse]:"free_response",[p.Sm.GapFill]:"gap_fill",[p.Sm.Judge]:"judge",[p.Sm.Listen]:"listen",[p.Sm.ListenComplete]:"listen_complete",[p.Sm.ListenComprehension]:"listen_comprehension",[p.Sm.ListenIsolation]:"listen_isolation",[p.Sm.ListenMatch]:"listen_match",[p.Sm.ListenSpeak]:"listen_speak",[p.Sm.ListenTap]:"listen_tap",[p.Sm.Match]:"match",[p.Sm.Name]:"name",[p.Sm.OrderTapComplete]:"order_tap_complete",[p.Sm.PartialListen]:"partial_listen",[p.Sm.PartialReverseTranslate]:"partial_reverse_translate",[p.Sm.PatternTapComplete]:"pattern_tap_complete",[p.Sm.ReadComprehension]:"read_comprehension",[p.Sm.ReverseAssist]:"reverse_assist",[p.Sm.Select]:"select",[p.Sm.SelectPronunciation]:"select_pronunciation",[p.Sm.SelectTranscription]:"select_transcription",[p.Sm.SvgPuzzle]:"svg_puzzle",[p.Sm.SyllableListenTap]:"syllable_listen_tap",[p.Sm.SyllableTap]:"syllable_tap",[p.Sm.Speak]:"speak",[p.Sm.TapCloze]:"tap_cloze",[p.Sm.TapClozeTable]:"tap_cloze_table",[p.Sm.TapComplete]:"tap_complete",[p.Sm.TapCompleteTable]:"tap_complete_table",[p.Sm.TapDescribe]:"tap_describe",[p.Sm.Translate]:"translate",[p.Sm.Transliterate]:"transliterate",[p.Sm.TransliterationAssist]:"transliteration_assist",[p.Sm.TypeCloze]:"type_cloze",[p.Sm.TypeClozeTable]:"type_cloze_table",[p.Sm.TypeComplete]:"type_complete",[p.Sm.TypeCompleteTable]:"type_complete_table",[p.Sm.WriteComprehension]:"write_comprehension"},_={Bea:"bea",Duo:"duo",Eddy:"eddy",Falstaff:"falstaff",Junior:"junior",Lily:"lily",Lin:"lin",Lucy:"lucy",Oscar:"oscar",Vikram:"vikram",Zari:"zari"},v=e=>{const t=[];return e.forEach(((e,a,s)=>{e.isBlank&&a>0&&s[a-1].isBlank?t[t.length-1].text+=e.text:t.push(Object.assign({},e))})),t},f=e=>[!0,void 0].includes(e.grader.whitespaceDelimited)?" ":"",b=(e,t)=>{e.length!==t.length&&(0,d.Kp)("Mismatch between text sequence lengths",{data:{differentTexts:t,originalTexts:e}});let a=0;const s=[];for(let n=0;n<Math.min(e.length,t.length);n++){const r=e[n];r!==t[n]&&s.push([a,a+r.length]),a+=r.length}return s},S=e=>{var t,a;switch(e.type){case p.Sm.Assist:case p.Sm.CharacterIntro:case p.Sm.CharacterPuzzle:case p.Sm.CharacterSelect:case p.Sm.CharacterTrace:case p.Sm.CharacterWrite:case p.Sm.CompleteReverseTranslation:case p.Sm.Judge:case p.Sm.Listen:case p.Sm.ListenSpeak:case p.Sm.ListenComplete:case p.Sm.ListenTap:case p.Sm.Name:case p.Sm.PartialListen:case p.Sm.PatternTapComplete:case p.Sm.ReverseAssist:case p.Sm.Select:case p.Sm.SvgPuzzle:case p.Sm.SyllableListenTap:case p.Sm.SyllableTap:case p.Sm.Speak:case p.Sm.Translate:case p.Sm.Transliterate:case p.Sm.TransliterationAssist:return[e.prompt];case p.Sm.CharacterMatch:return[e.pairs.map((e=>e.character)).join(", ")];case p.Sm.Definition:return[e.displayTokens.map((e=>e.text)).join(""),(0,l.H8)(1831,{string_1:e.phraseToDefine})];case p.Sm.Dialogue:{const t=e.dialogue.map((e=>{const t=v(e.displayTokens).map((e=>e.isBlank?u.qv:e.text)).join("");return(0,l.H8)(20248,{message:t,speaker:e.speaker})}));return e.promptTokens&&t.push(e.promptTokens.map((e=>e.value)).join("")),t}case p.Sm.Form:return[`${e.promptPieces[0]} ${u.qv} ${e.promptPieces[1]}`];case p.Sm.FreeResponse:return[null!==(t=e.prompt)&&void 0!==t?t:""];case p.Sm.GapFill:return[v(e.displayTokens).map((e=>e.isBlank?u.qv:e.text)).join("")];case p.Sm.ListenComprehension:return[e.prompt,e.question?e.question:(0,l.H8)(2005)];case p.Sm.ListenMatch:return[e.pairs.map((e=>e.translation)).join(", ")];case p.Sm.Match:return[e.pairs.map((e=>e.learningToken)).join(", ")];case p.Sm.OrderTapComplete:return[v(e.displayTokens).map((e=>e.isBlank?u.qv:e.text)).join("")];case p.Sm.PartialReverseTranslate:return[e.prompt];case p.Sm.ReadComprehension:return[e.passage,null!==(a=e.question)&&void 0!==a?a:(0,l.H8)(2005)];case p.Sm.SelectPronunciation:case p.Sm.SelectTranscription:return[e.choices[e.correctIndex].text];case p.Sm.TapCloze:case p.Sm.TapClozeTable:case p.Sm.TapCompleteTable:case p.Sm.TypeCloze:case p.Sm.TypeClozeTable:case p.Sm.TypeCompleteTable:return[(0,i.JH)(e)];case p.Sm.TapComplete:return[e.displayTokens.map((e=>e.isBlank?u.qv:e.text)).join("")];case p.Sm.TypeComplete:return[e.displayTokens.map((e=>e.text)).join("")];case p.Sm.TapDescribe:return[e.correctSolutions[0]];case p.Sm.ListenIsolation:return[e.solutionTranslation];case p.Sm.WriteComprehension:return[e.passage,e.question?e.question:(0,l.H8)(2005)];default:throw(0,o.RJ)(e),Error(`Cannot get prompt for ${e.type} challenge`)}},y=(e,{fromLanguage:t,learningLanguage:a})=>{switch(e.type){case p.Sm.Assist:case p.Sm.CharacterIntro:case p.Sm.CharacterPuzzle:case p.Sm.CharacterSelect:case p.Sm.CharacterTrace:case p.Sm.CharacterWrite:case p.Sm.CompleteReverseTranslation:case p.Sm.Dialogue:case p.Sm.Form:case p.Sm.FreeResponse:case p.Sm.GapFill:case p.Sm.Judge:case p.Sm.Listen:case p.Sm.ListenComplete:case p.Sm.ListenComprehension:case p.Sm.ListenIsolation:case p.Sm.ListenSpeak:case p.Sm.ListenTap:case p.Sm.Name:case p.Sm.OrderTapComplete:case p.Sm.PartialListen:case p.Sm.PartialReverseTranslate:case p.Sm.PatternTapComplete:case p.Sm.ReadComprehension:case p.Sm.Select:case p.Sm.SelectPronunciation:case p.Sm.SelectTranscription:case p.Sm.Speak:case p.Sm.SvgPuzzle:case p.Sm.SyllableListenTap:case p.Sm.SyllableTap:case p.Sm.TapCloze:case p.Sm.TapClozeTable:case p.Sm.TapComplete:case p.Sm.TapCompleteTable:case p.Sm.TapDescribe:case p.Sm.TypeCloze:case p.Sm.TypeClozeTable:case p.Sm.TypeComplete:case p.Sm.TypeCompleteTable:case p.Sm.WriteComprehension:return a;case p.Sm.CharacterMatch:case p.Sm.ListenMatch:case p.Sm.Match:return;case p.Sm.Definition:return r._s.convertRemoteLanguageId(e.choiceLanguageId);case p.Sm.ReverseAssist:case p.Sm.TransliterationAssist:return t;case p.Sm.Translate:return e.targetLanguage;case p.Sm.Transliterate:return"en";default:throw(0,o.RJ)(e),Error(`Unexpected challenge type: ${e.type}`)}},E=({browserSettings:e,challenge:t,isDesktop:a,isGrammar:s,learningLanguage:n,session:r})=>{if(r.type===p.FF.PlacementTest)return t.type===p.Sm.Translate?{canToggleTyping:!1,isToggledToTyping:!C(t)}:{canToggleTyping:!1,isToggledToTyping:!1};if(r.type===p.FF.AlphabetLesson)return{canToggleTyping:!1,isToggledToTyping:!1};switch(t.type){case p.Sm.CompleteReverseTranslation:return{canToggleTyping:!0,isToggledToTyping:e.completeReverseTranslationTypingEnabled&&!s};case p.Sm.ListenTap:return a?{canToggleTyping:!0,isToggledToTyping:e.typingEnabled}:{canToggleTyping:!1,isToggledToTyping:!1};case p.Sm.Translate:return C(t)?L(t,n)?{canToggleTyping:!1,isToggledToTyping:!1}:{canToggleTyping:!0,isToggledToTyping:e.typingEnabled}:{canToggleTyping:!1,isToggledToTyping:!0};default:return{canToggleTyping:!1,isToggledToTyping:!0}}},I=e=>(0,n.y)(e),k=(e,t,a)=>{const s=2*a,n=e*a+t;return s<10?n+1:(n+1)%s},w=(e,t,a,s,n=[])=>{if((0,c.k4)(e,t,a))return s.map(((e,t)=>n.includes(e.value)?t:void 0)).filter((e=>void 0!==e));const r=s.map((({value:e})=>e)).join("");return T(r,n)},T=(e,t=[])=>t.reduce(((t,a)=>{const n=e.indexOf(a);return t.concat(s.DZ(a.length,(e=>e+n)))}),[]),C=e=>void 0!==e.choices&&void 0!==e.correctIndices&&e.choices.length>0&&e.correctIndices.length>0,R=(e,t)=>!L(e,t),L=(e,t)=>e.sourceLanguage===t},94778:(e,t,a)=>{"use strict";a.d(t,{KT:()=>Q,uu:()=>ee,uZ:()=>K,w6:()=>J,sS:()=>re,Q5:()=>X,j4:()=>te,Gs:()=>ae,BY:()=>se,w4:()=>ne});var s=a(80254),n=a(25880),r=a(76986),i=a(93540),o=a(43464),l=a(83719),c=a(95332),d=a(18675),u=a(78939),p=a(33037),g=a(37590),m=a(8654),h=a(23275);const _=a.p+"rive/22b0f8df605624bae776f4b6b6372904.riv",v=a.p+"rive/316f1939c9601ad9a07aeffc401bd86d.riv",f=a.p+"rive/26757eeb54483468f7d24d3247c921e4.riv",b=a.p+"rive/16d5291f7f7c6ef8a05a83d187c3417a.riv",S=a.p+"rive/48a518bc044faae47a88d413ddeb2113.riv",y=a.p+"rive/c6ff57285bb71c61fe1bc00ad042695a.riv",E=a.p+"rive/49d354d11868306b4c7c1c0c9a92651e.riv",I=a.p+"rive/d73e180ee82ba9d2f9bfafb42738d324.riv",k=a.p+"rive/5e6bde7d1737406b10c7c405d1e2e94e.riv",w=a.p+"rive/d6ea005cd489006994de7ca326900eec.riv",T=(e,t)=>({artBoardName:"Character",correctStateName:"Correct",incorrectStateName:"Incorrect",notSetStateName:"Reset",outfit:t,outfitInputName:"Outfit",stateMachineName:"InLesson",url:e}),C=T(_),R=T(v),L=T(f),O=T(b),P=T(S),A=T(y),D=T(E),x=T(I),N=T(k),F=T(w);var M=a(51158),U=a(89260),H=a(59096),j=a(18804),G=a(43006),B=a(11811);const V=r,z=" ",Z=({challenge:e,challengeState:t})=>{var a,s;const n=(0,G.Dg)(null!==(s=null===(a=t.guess)||void 0===a?void 0:a.map((t=>e.choices[t].text)).join(""))&&void 0!==s?s:"",""),r=e.type===B.Sm.SyllableTap?e.correctSolutions.map((e=>(0,G.Dg)(e,""))):[(0,G.Dg)(e.correctIndices.map((t=>e.choices[t].text)).join(""))];return Promise.resolve({correct:r.includes(n),guess:n})},$=({challenge:e,challengeState:t})=>{var a,s,n;const r=null!==(a=t.guess)&&void 0!==a?a:[],i={BOTH:["left","right"],LEFT:["left"],NEITHER:[],RIGHT:["right"]};for(let t=0;t<r.length;t++){const a=e.choices[r[t]],o=t>0?e.choices[r[t-1]]:void 0,l=t+1<r.length?e.choices[r[t+1]]:void 0,c=i[null!==(s=null==l?void 0:l.damagePosition)&&void 0!==s?s:"NEITHER"],d=i[null!==(n=null==o?void 0:o.damagePosition)&&void 0!==n?n:"NEITHER"];if("NEITHER"!==a.damagePosition)if("LEFT"===a.damagePosition){if(!d.includes("right"))return!1}else if("RIGHT"===a.damagePosition){if(!c.includes("left"))return!1}else if(!("BOTH"!==a.damagePosition||d.includes("right")&&c.includes("left")))return!1}return!0};class W{continueChallenge({challengeState:e}){return Object.assign({},e)}prepareChallenge({challenge:e}){const t=Object.assign({},e);return t.character&&!t.character.image&&delete t.character,t.character&&(t.character=Object.assign(Object.assign({},t.character),{riveAnimation:"BEA"===t.character.name?C:"EDDY"===t.character.name?R:"FALSTAFF"===t.character.name?L:"JUNIOR"===t.character.name?O:"LILY"===t.character.name?P:"LIN"===t.character.name?A:"LUCY"===t.character.name?D:"OSCAR"===t.character.name?x:"VIKRAM"===t.character.name?N:"ZARI"===t.character.name?F:void 0})),t}}const q={[B.Sm.Assist]:new class extends W{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[o.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[o.Vi.ChallengeReports.NOT_ACCEPTED],this.getTts=({challenge:e})=>s.oA(e.options.map((e=>e.tts&&{autoplay:!1,required:!1,text:e.text,url:e.tts}))),this.grade=({challenge:e,challengeState:t})=>Promise.resolve({correct:t.guess===e.correctIndex,guess:t.guess}),this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challengeState:e})=>void 0!==e.guess}},[B.Sm.CharacterIntro]:new class extends W{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[o.Vi.ChallengeReports.BAD_AUDIO,o.Vi.ChallengeReports.CHARACTER_DISPLAY,o.Vi.ChallengeReports.MISSING_AUDIO,o.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[o.Vi.ChallengeReports.NOT_ACCEPTED,o.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>[{autoplay:!0,required:!1,text:e.prompt,url:e.tts}],this.grade=({challenge:e,challengeState:t})=>Promise.resolve({correct:t.guess===e.correctIndex,guess:`${t.guess}`}),this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challengeState:e})=>void 0!==e.guess}},[B.Sm.CharacterMatch]:new class extends W{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[o.Vi.ChallengeReports.BAD_AUDIO,o.Vi.ChallengeReports.CHARACTER_DISPLAY,o.Vi.ChallengeReports.MISSING_AUDIO,o.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[o.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA(e.pairs.map((e=>e.tts&&{autoplay:!1,required:!1,text:e.character,url:e.tts}))),this.grade=({challengeState:e})=>Promise.resolve({correct:void 0!==e.guess,guess:e.guess}),this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challengeState:e})=>void 0!==e.guess}},[B.Sm.CharacterPuzzle]:new class extends W{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[o.Vi.ChallengeReports.BAD_AUDIO,o.Vi.ChallengeReports.BAD_OPTION,o.Vi.ChallengeReports.CHARACTER_DISPLAY,o.Vi.ChallengeReports.MISSING_AUDIO,o.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[o.Vi.ChallengeReports.NOT_ACCEPTED,o.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA([...e.choices.map((e=>e.tts&&{autoplay:!1,required:!1,text:e.text,url:e.tts})),{autoplay:!0,required:!1,text:e.correctSolutions[0],url:e.tts}]),this.grade=({challenge:e,challengeState:t})=>{var a;const s=null===(a=t.guess)||void 0===a?void 0:a.choices.map((t=>t>=0?e.choices[t].text:"")).join(""),n=e.correctIndices.map((t=>e.choices[t].text)).join("");return Promise.resolve({correct:s===n,guess:s})},this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challenge:e,challengeState:t})=>{var a,s;return(null===(s=null===(a=t.guess)||void 0===a?void 0:a.choices)||void 0===s?void 0:s.filter((e=>e>=0)).length)===e.correctIndices.length}}},[B.Sm.CharacterSelect]:new class extends W{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[o.Vi.ChallengeReports.BAD_AUDIO,o.Vi.ChallengeReports.BAD_OPTION,o.Vi.ChallengeReports.CHARACTER_DISPLAY,o.Vi.ChallengeReports.MISSING_AUDIO,o.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[o.Vi.ChallengeReports.NOT_ACCEPTED,o.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA(e.choices.map((e=>e.tts&&{autoplay:!1,required:!1,text:e.character,url:e.tts}))),this.grade=({challenge:e,challengeState:t})=>Promise.resolve({correct:t.guess===e.correctIndex,guess:`${t.guess}`}),this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challengeState:e})=>void 0!==e.guess}},[B.Sm.CharacterTrace]:new class extends W{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[o.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[o.Vi.ChallengeReports.BAD_AUDIO,o.Vi.ChallengeReports.MISSING_AUDIO],this.getTts=({challenge:e})=>e.tts?[{autoplay:!0,required:!1,text:e.prompt,url:e.tts}]:[],this.grade=({challenge:e,challengeState:t})=>{var a,s;return Promise.resolve({correct:(null!==(s=null===(a=t.guess)||void 0===a?void 0:a.currentStrokeNumber)&&void 0!==s?s:0)>=e.strokes.length,guess:t.guess})},this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challenge:e,challengeState:t})=>{var a,s;return(null!==(s=null===(a=t.guess)||void 0===a?void 0:a.currentStrokeNumber)&&void 0!==s?s:0)>=e.strokes.length}}},[B.Sm.CharacterWrite]:new class extends W{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[o.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[o.Vi.ChallengeReports.BAD_AUDIO,o.Vi.ChallengeReports.MISSING_AUDIO],this.getTts=({challenge:e})=>e.promptTts?[{autoplay:!0,required:!1,text:e.prompt,url:e.promptTts}]:[],this.grade=({challenge:e,challengeState:t})=>{var a,s,r,i;const o=e.strokes.filter((e=>"PREDRAWN"!==e.strokeDrawMode)),l=null!==(s=null===(a=t.guess)||void 0===a?void 0:a.currentStrokeNumber)&&void 0!==s?s:0,c=l>=o.length&&(null!==(i=null===(r=t.guess)||void 0===r?void 0:r.numFailures)&&void 0!==i?i:0)<n.C;return Promise.resolve({correct:c,guess:t.guess,numStrokesLeft:o.length-l})},this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challenge:e,challengeState:t})=>{var a,s;const n=e.strokes.filter((e=>"PREDRAWN"!==e.strokeDrawMode));return(null!==(s=null===(a=t.guess)||void 0===a?void 0:a.currentStrokeNumber)&&void 0!==s?s:0)>=n.length}}},[B.Sm.CompleteReverseTranslation]:new class extends W{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[o.Vi.ChallengeReports.BAD_PROMPT,o.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[o.Vi.ChallengeReports.BAD_HINTS,o.Vi.ChallengeReports.MISSING_HINTS,o.Vi.ChallengeReports.NOT_ACCEPTED,o.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA(e.tokens.map((e=>e.tts&&{autoplay:!1,required:!1,text:e.value,url:e.tts}))),this.grade=async({challenge:e,challengeState:t,challengeToggleState:a})=>{if(a.isToggledToTyping){const s=this.getTypedSentence(t);return(0,p.wM)({allowTypoBlame:!0,challenge:e,guess:s,isTypingInLearningLanguage:a.isToggledToTyping})}const n=this.getTypedWords(e,t),r=this.getAllWords(e,t).join(""),i=e.displayTokens.filter((e=>e.isBlank)).map((e=>e.text));if(s.Xy(n,i))return Promise.resolve({correct:!0,guess:r});const o=await(0,p.wM)({allowTypoBlame:!0,challenge:e,guess:r,isTypingInLearningLanguage:a.isToggledToTyping});return o.correct||delete o.blameMessage,o},this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({guess:{translatedWords:e.displayTokens.map((()=>""))},type:e.type}),this.validate=({challenge:e,challengeState:t,challengeToggleState:a})=>a.isToggledToTyping?this.getTypedSentence(t).length>0:this.getTypedWords(e,t).every((e=>e)),this.getTypedWords=(e,t)=>{var a,s;const n=null!==(s=null===(a=t.guess)||void 0===a?void 0:a.translatedWords)&&void 0!==s?s:[];return e.displayTokens.flatMap(((e,t)=>e.isBlank?n[t]:[]))},this.getAllWords=(e,t)=>{const{displayTokens:a}=e;let s=0;const n=this.getTypedWords(e,t);return a.map((e=>e.isBlank?n[s++]:e.text))},this.getTypedSentence=e=>{var t,a;return(null!==(a=null===(t=e.guess)||void 0===t?void 0:t.translatedSentence)&&void 0!==a?a:"").trim()}}},[B.Sm.Definition]:new class extends W{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[o.Vi.ChallengeReports.BAD_PROMPT,o.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[o.Vi.ChallengeReports.BAD_AUDIO,o.Vi.ChallengeReports.BAD_HINTS,o.Vi.ChallengeReports.MISSING_AUDIO,o.Vi.ChallengeReports.MISSING_HINTS,o.Vi.ChallengeReports.NOT_ACCEPTED,o.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA([...e.displayTokens.map((e=>e.hintToken.tts&&{autoplay:!1,required:!1,text:e.text,url:e.hintToken.tts})),e.tts&&{autoplay:!0,required:!1,text:e.displayTokens.map((e=>e.text)).join(""),url:e.tts}]),this.grade=({challenge:e,challengeState:t})=>Promise.resolve({correct:t.guess===e.correctIndex,guess:t.guess}),this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challengeState:e})=>void 0!==e.guess}},[B.Sm.Dialogue]:new class extends W{constructor(){super(...arguments),this.continueChallenge=({challengeState:e})=>Object.assign(Object.assign({},e),{currentDialogueIndex:e.currentDialogueIndex+1}),this.getAlwaysDisplayedReportTypes=()=>[o.Vi.ChallengeReports.BAD_PROMPT,o.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[o.Vi.ChallengeReports.BAD_HINTS,o.Vi.ChallengeReports.MISSING_HINTS,o.Vi.ChallengeReports.NOT_ACCEPTED,o.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>{var t;return s.oA([...e.dialogue.map((e=>e.hintTokens)).flat(),...null!==(t=e.promptTokens)&&void 0!==t?t:[]].map((e=>e.tts&&{autoplay:!1,required:!1,text:e.value,url:e.tts})))},this.grade=({challenge:e,challengeState:t})=>Promise.resolve({correct:t.guess===e.correctIndex,guess:`${t.guess}`}),this.isReadyForGuessing=({challenge:e,challengeState:t})=>{const{dialogue:a}=e,{currentDialogueIndex:s}=t;return s>=a.length},this.prepareChallengeState=({challenge:e})=>({currentDialogueIndex:0,type:e.type}),this.validate=({challengeState:e})=>void 0!==e.guess}},[B.Sm.Form]:new class extends W{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[o.Vi.ChallengeReports.BAD_PROMPT,o.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[o.Vi.ChallengeReports.NOT_ACCEPTED,o.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=()=>[],this.grade=({challenge:e,challengeState:t})=>Promise.resolve({correct:t.guess===e.correctIndex,gradingMetadata:(0,H.u5)(e,t.guess),guess:`${t.guess}`}),this.isReadyForGuessing=()=>!0,this.prepareChallenge=e=>{const t=super.prepareChallenge(e);return t.options||(t.options=t.choices.map((e=>({text:e})))),t},this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challengeState:e})=>void 0!==e.guess}},[B.Sm.FreeResponse]:new class extends W{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[o.Vi.ChallengeReports.BAD_PROMPT,o.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[],this.getTts=()=>[],this.grade=({challengeState:e})=>Promise.resolve({correct:""!==this.getResponse(e),guess:this.getResponse(e)}),this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challenge:e,challengeState:t})=>{const{maxGuessLength:a}=e,s=this.getResponse(t);return s.length>0&&s.length<=a},this.getResponse=e=>{var t;return(null!==(t=e.guess)&&void 0!==t?t:"").trim()}}},[B.Sm.GapFill]:new class extends W{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[o.Vi.ChallengeReports.BAD_PROMPT,o.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[o.Vi.ChallengeReports.BAD_HINTS,o.Vi.ChallengeReports.MISSING_HINTS,o.Vi.ChallengeReports.NOT_ACCEPTED,o.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA(e.tokens.map((e=>e.tts&&{autoplay:!1,required:!1,text:e.value,url:e.tts}))),this.grade=({challenge:e,challengeState:t})=>Promise.resolve({closestSolution:e.displayTokens.map((e=>e.text)).join(""),correct:t.guess===e.correctIndex,guess:void 0===t.guess?void 0:e.choices[t.guess]}),this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challengeState:e})=>void 0!==e.guess}},[B.Sm.Judge]:new class extends W{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[o.Vi.ChallengeReports.BAD_PROMPT,o.Vi.ChallengeReports.BAD_OPTION,o.Vi.ChallengeReports.OFFENSIVE_OPTION,o.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[o.Vi.ChallengeReports.NOT_ACCEPTED,o.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=()=>[],this.grade=({challenge:e,challengeState:t})=>(e.correctIndices.length>1&&(0,M.vU)(`Judge has more than one right answer: ${e.prompt}`),Promise.resolve({correct:void 0!==t.guess&&e.correctIndices.includes(t.guess),guess:t.guess})),this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challengeState:e})=>void 0!==e.guess}},[B.Sm.Listen]:new class extends W{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[o.Vi.ChallengeReports.BAD_AUDIO,o.Vi.ChallengeReports.MISSING_AUDIO,o.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[o.Vi.ChallengeReports.NOT_ACCEPTED,o.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA([e.slowTts&&{autoplay:!1,required:!1,text:e.prompt,url:e.slowTts},{autoplay:!0,required:!0,text:e.prompt,url:e.tts}]),this.grade=({challenge:e,challengeState:t,learningLanguage:a})=>(0,p.wM)({allowTypoBlame:!0,challenge:e,guess:this.getGuess(t),isTypingInLearningLanguage:e.grader.language===a}),this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challengeState:e})=>!!this.getGuess(e),this.getGuess=e=>{var t;return(null!==(t=e.guess)&&void 0!==t?t:"").trim()}}},[B.Sm.ListenComplete]:new class extends W{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[o.Vi.ChallengeReports.BAD_AUDIO,o.Vi.ChallengeReports.MISSING_AUDIO,o.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[o.Vi.ChallengeReports.NOT_ACCEPTED,o.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA([e.slowTts&&{autoplay:!1,required:!1,text:e.prompt,url:e.slowTts},{autoplay:!0,required:!0,text:e.prompt,url:e.tts}]),this.grade=({challenge:e,challengeState:t,learningLanguage:a})=>(0,p.wM)({allowTypoBlame:!0,challenge:e,guess:this.getUserInput(e,t,!0).join(""),isTypingInLearningLanguage:e.grader.language===a}),this.isReadyForGuessing=()=>!0,this.prepareChallenge=e=>{const t=super.prepareChallenge(e);return t.prompt=t.displayTokens.map((e=>e.text)).join(""),t},this.prepareChallengeState=({challenge:e})=>({guess:e.displayTokens.map((()=>"")),type:e.type}),this.validate=({challenge:e,challengeState:t})=>this.getUserInput(e,t,!1).every((e=>e)),this.getUserInput=(e,t,a)=>{var s;const n=null!==(s=t.guess)&&void 0!==s?s:[];return e.displayTokens.flatMap(((e,t)=>{const s=a?e.text:[];return e.isBlank?n[t]:s}))}}},[B.Sm.ListenMatch]:new class extends W{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[o.Vi.ChallengeReports.BAD_AUDIO,o.Vi.ChallengeReports.CHARACTER_DISPLAY,o.Vi.ChallengeReports.MISSING_AUDIO,o.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[o.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA(e.pairs.map((e=>e.tts&&{autoplay:!1,required:!1,text:e.translation,url:e.tts}))),this.grade=({challengeState:e})=>Promise.resolve({correct:void 0!==e.guess,guess:e.guess}),this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challengeState:e})=>void 0!==e.guess}},[B.Sm.Match]:new class extends W{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[o.Vi.ChallengeReports.BAD_AUDIO,o.Vi.ChallengeReports.MISSING_AUDIO,o.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[o.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA(e.pairs.map((e=>e.tts&&{autoplay:!1,required:!1,text:e.learningToken,url:e.tts}))),this.grade=({challengeState:e})=>Promise.resolve({correct:void 0!==e.guess,guess:e.guess}),this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challengeState:e})=>void 0!==e.guess}},[B.Sm.Name]:new class extends W{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[o.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[o.Vi.ChallengeReports.BAD_IMAGE,o.Vi.ChallengeReports.MISSING_IMAGE,o.Vi.ChallengeReports.NOT_ACCEPTED,o.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=()=>[],this.grade=({challenge:e,challengeState:t,session:a})=>{var s;const n=[this.getTranslation(t)],r=this.getArticle(e,t);if(r&&n.unshift(r),e.grader){const t=null!==(s=(0,d.K)(n))&&void 0!==s?s:"",a=Object.assign(Object.assign({},e),{grader:e.grader});return(0,p.wM)({allowTypoBlame:!0,challenge:a,guess:t,isTypingInLearningLanguage:!0})}const o=(e.correctSolutions||[]).map((e=>(0,u.lG)(V,e)));if(o.includes((0,u.lG)(V,n.join(z)))||o.includes((0,u.lG)(V,n.join(""))))return Promise.resolve({correct:!0,guess:n});const l=(0,j.qg)();let c=!1;if(l){const e=(0,i.HF)(l),t=a.skillId;t&&e&&(c=void 0!==(0,h.m8)(e,(e=>"skill"===e.type&&e.pathLevelClientData.skillId===t&&"custom_intro"===e.subtype)))}return c?Promise.resolve({correct:!1,guess:n}):(0,p.EZ)(Object.assign(Object.assign({},e),{guess:n}))},this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challenge:e,challengeState:t})=>(!e.articles||this.getArticle(e,t).length>0)&&this.getTranslation(t).length>0,this.getArticle=(e,t)=>{var a,s,n,r;return null!==(r=(null!==(a=e.articles)&&void 0!==a?a:[])[null!==(n=null===(s=t.guess)||void 0===s?void 0:s.article)&&void 0!==n?n:-1])&&void 0!==r?r:""},this.getTranslation=e=>{var t,a;return(null!==(a=null===(t=e.guess)||void 0===t?void 0:t.translation)&&void 0!==a?a:"").trim()}}},[B.Sm.ListenComprehension]:new class extends W{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[o.Vi.ChallengeReports.BAD_AUDIO,o.Vi.ChallengeReports.BAD_PROMPT,o.Vi.ChallengeReports.MISSING_AUDIO,o.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[o.Vi.ChallengeReports.NOT_ACCEPTED,o.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>{var t;return s.oA([e.slowTts&&{autoplay:!1,required:!1,text:e.prompt,url:e.slowTts},{autoplay:!0,required:!0,text:e.prompt,url:e.tts},...(null!==(t=e.questionTokens)&&void 0!==t?t:[]).map((e=>e.tts&&{autoplay:!1,required:!1,text:e.value,url:e.tts}))])},this.grade=({challenge:e,challengeState:t})=>Promise.resolve({correct:t.guess===e.correctIndex,guess:`${t.guess}`}),this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challengeState:e})=>void 0!==e.guess}},[B.Sm.ListenIsolation]:new class extends W{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[o.Vi.ChallengeReports.BAD_AUDIO,o.Vi.ChallengeReports.BAD_PROMPT,o.Vi.ChallengeReports.MISSING_AUDIO,o.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[o.Vi.ChallengeReports.NOT_ACCEPTED,o.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>{var t,a;return s.oA([{autoplay:!0,required:!0,text:e.tokens.map((e=>e.value)).join(""),url:e.tts},...(null!==(t=e.options)&&void 0!==t?t:[]).map((e=>e.tts&&{autoplay:!1,required:!0,text:e.text,url:e.tts})),...(null!==(a=e.tokens)&&void 0!==a?a:[]).map((e=>e.tts&&{autoplay:!1,required:!1,text:e.value,url:e.tts}))])},this.grade=({challenge:e,challengeState:t})=>Promise.resolve({correct:t.guess===e.correctIndex,guess:`${t.guess}`}),this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challengeState:e})=>void 0!==e.guess}},[B.Sm.ListenSpeak]:new class extends W{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[o.Vi.ChallengeReports.BAD_AUDIO,o.Vi.ChallengeReports.BAD_PROMPT,o.Vi.ChallengeReports.MISSING_AUDIO,o.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[o.Vi.ChallengeReports.NOT_ACCEPTED,o.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>[{autoplay:!0,required:!1,text:e.prompt,url:e.tts}],this.grade=({challenge:e,challengeState:t})=>{var a,s,n,r;const i=(null!==(s=null===(a=t.guess)||void 0===a?void 0:a.score)&&void 0!==s?s:0)>=e.threshold;return Promise.resolve({correct:i,guess:t.guess,numRetriesLeft:i||void 0===(null===(n=t.guess)||void 0===n?void 0:n.usedGuesses)?0:c.Tu-(null===(r=t.guess)||void 0===r?void 0:r.usedGuesses)})},this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=()=>!1}},[B.Sm.ListenTap]:new class extends W{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[o.Vi.ChallengeReports.BAD_AUDIO,o.Vi.ChallengeReports.BAD_PROMPT,o.Vi.ChallengeReports.MISSING_AUDIO,o.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[o.Vi.ChallengeReports.NOT_ACCEPTED,o.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA([e.slowTts&&{autoplay:!1,required:!1,text:e.prompt,url:e.slowTts},{autoplay:!0,required:!0,text:e.prompt,url:e.tts},...e.choices.map((e=>e.tts&&{autoplay:!1,required:!1,text:e.text,url:e.tts}))]),this.grade=async({challenge:e,challengeState:t,challengeToggleState:a})=>{if(a.isToggledToTyping)return(0,p.wM)({allowTypoBlame:!0,challenge:e,guess:this.getTranscription(t),isTypingInLearningLanguage:a.isToggledToTyping});const n=(0,c.rF)(e),r=this.getTapTranscriptions(e,t),i=r.join(n),o=e.correctIndices.map((t=>e.choices[t].text));if(s.Xy(o,r))return Promise.resolve({correct:!0,guess:i});const l=await(0,p.wM)({allowTypoBlame:!1,challenge:e,guess:i,isTypingInLearningLanguage:a.isToggledToTyping});return l.correct?l:Promise.resolve({correct:l.correct,guess:i})},this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challenge:e,challengeState:t,challengeToggleState:a})=>a.isToggledToTyping?this.getTranscription(t).length>0:this.getTapTranscriptions(e,t).length>0,this.getTapTranscriptions=(e,t)=>{var a,s,n;return null!==(n=null===(s=null===(a=t.guess)||void 0===a?void 0:a.tapTranscriptions)||void 0===s?void 0:s.map((t=>e.choices[t].text)))&&void 0!==n?n:[]},this.getTranscription=e=>{var t,a;return(null!==(a=null===(t=e.guess)||void 0===t?void 0:t.transcription)&&void 0!==a?a:"").trim()}}},[B.Sm.OrderTapComplete]:new class extends W{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[o.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[o.Vi.ChallengeReports.BAD_AUDIO,o.Vi.ChallengeReports.BAD_HINTS,o.Vi.ChallengeReports.BAD_IMAGE,o.Vi.ChallengeReports.MISSING_AUDIO,o.Vi.ChallengeReports.MISSING_HINTS,o.Vi.ChallengeReports.MISSING_IMAGE,o.Vi.ChallengeReports.NOT_ACCEPTED,o.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA(e.tokens.map((e=>e.tts&&{autoplay:!1,required:!1,text:e.value,url:e.tts}))),this.grade=({challenge:e,challengeState:t})=>{const a=this.getGuesses(t).values();let s=!0,n=!1;for(const t of e.displayTokens)if(t.isBlank){n=!0;const r=a.next().value;if(null==r||t.text!==e.choices[r].text){s=!1;break}}else if(n&&t.text!==z){n=!1;const e=a.next();if(null!==e.value&&!e.done){s=!1;break}}return Promise.resolve({closestSolution:e.displayTokens.map((e=>e.text)).join(""),correct:s,guess:t.guess,highlights:this.getHighlights(e)})},this.hasDiscussion=()=>!1,this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challengeState:e})=>this.getGuesses(e).length>0&&null!==this.getGuesses(e)[0],this.getGuesses=e=>{var t;return null!==(t=e.guess)&&void 0!==t?t:[]},this.getHighlights=e=>(0,c.nT)(e.displayTokens.map((e=>e.text)),e.displayTokens.map((e=>e.isBlank?"":e.text)))}},[B.Sm.PartialListen]:new class extends W{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[o.Vi.ChallengeReports.BAD_AUDIO,o.Vi.ChallengeReports.BAD_PROMPT,o.Vi.ChallengeReports.MISSING_AUDIO,o.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[o.Vi.ChallengeReports.NOT_ACCEPTED,o.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=()=>[],this.grade=async({challenge:e,challengeState:t,challengeToggleState:a})=>{var n;const r=e.displayTokens,i=r.findIndex((e=>e.isBlank)),o=e.displayTokens.map((e=>e.text)).join(""),l=null!==(n=t.guess)&&void 0!==n?n:"",c=r.map(((e,t)=>e.isBlank?t===i?l:"":e.text)).join("");if(s.Xy(c,o))return Promise.resolve({correct:!0,guess:l});const d=await(0,p.wM)({allowTypoBlame:!0,challenge:e,guess:c,isTypingInLearningLanguage:a.isToggledToTyping});return d.guess=l,d.correct||delete d.blameMessage,d},this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challengeState:e})=>!!e.guess}},[B.Sm.PartialReverseTranslate]:new class extends W{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[o.Vi.ChallengeReports.BAD_PROMPT,o.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[o.Vi.ChallengeReports.NOT_ACCEPTED,o.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA([...e.tokens.map((e=>e.tts&&{autoplay:!1,required:!1,text:e.value,url:e.tts}))]),this.grade=async({challenge:e,challengeState:t,challengeToggleState:a})=>{var n;const r=e.displayTokens,i=r.findIndex((e=>e.isBlank)),o=e.displayTokens.map((e=>e.text)).join(""),l=null!==(n=t.guess)&&void 0!==n?n:"",c=r.map(((e,t)=>e.isBlank?t===i?l:"":e.text)).join("");if(s.Xy(c,o))return Promise.resolve({correct:!0,guess:l});const d=await(0,p.wM)({allowTypoBlame:!0,challenge:e,guess:c,isTypingInLearningLanguage:a.isToggledToTyping});return d.guess=l,d.correct||delete d.blameMessage,d},this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challengeState:e})=>!!e.guess}},[B.Sm.PatternTapComplete]:new class extends W{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[o.Vi.ChallengeReports.BAD_AUDIO,o.Vi.ChallengeReports.BAD_PROMPT,o.Vi.ChallengeReports.MISSING_AUDIO,o.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[o.Vi.ChallengeReports.NOT_ACCEPTED,o.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=()=>[],this.grade=async({challenge:e,challengeState:t})=>Promise.resolve({correct:e.correctIndex===t.guess,guess:void 0===t.guess?"":e.choices[t.guess]}),this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challengeState:e})=>void 0!==e.guess}},[B.Sm.ReadComprehension]:new class extends W{constructor(){super(...arguments),this.continueChallenge=({challengeState:e})=>Object.assign(Object.assign({},e),{finishedPassage:!0}),this.getAlwaysDisplayedReportTypes=()=>[o.Vi.ChallengeReports.BAD_PROMPT,o.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[o.Vi.ChallengeReports.NOT_ACCEPTED,o.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>{var t,a;return s.oA([...null!==(t=e.passageTokens)&&void 0!==t?t:[],...null!==(a=e.questionTokens)&&void 0!==a?a:[]].map((e=>e.tts&&{autoplay:!1,required:!1,text:e.value,url:e.tts})))},this.grade=({challenge:e,challengeState:t})=>Promise.resolve({correct:t.guess===e.correctIndex,guess:`${t.guess}`}),this.isReadyForGuessing=({challengeState:e})=>e.finishedPassage,this.prepareChallengeState=({challenge:e})=>({finishedPassage:!1,type:e.type}),this.validate=({challengeState:e})=>void 0!==e.guess}},[B.Sm.ReverseAssist]:new class extends W{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[o.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[o.Vi.ChallengeReports.NOT_ACCEPTED],this.getTts=()=>[],this.grade=({challenge:e,challengeState:t})=>Promise.resolve({correct:t.guess===e.correctIndex,guess:t.guess}),this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challengeState:e})=>void 0!==e.guess}},[B.Sm.Select]:new class extends W{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[o.Vi.ChallengeReports.BAD_IMAGE,o.Vi.ChallengeReports.BAD_OPTION,o.Vi.ChallengeReports.BAD_PROMPT,o.Vi.ChallengeReports.MISSING_IMAGE],this.getConditionallyDisplayedReportTypes=()=>[o.Vi.ChallengeReports.BAD_AUDIO,o.Vi.ChallengeReports.MISSING_AUDIO,o.Vi.ChallengeReports.NOT_ACCEPTED,o.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA(e.choices.map((e=>e.tts&&{autoplay:!1,required:!1,text:e.phrase,url:e.tts}))),this.grade=({challenge:e,challengeState:t})=>Promise.resolve({correct:t.guess===e.correctIndex,guess:`${t.guess}`}),this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challengeState:e})=>void 0!==e.guess}},[B.Sm.SelectPronunciation]:new class extends W{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[o.Vi.ChallengeReports.BAD_AUDIO,o.Vi.ChallengeReports.MISSING_AUDIO,o.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[o.Vi.ChallengeReports.NOT_ACCEPTED,o.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>e.choices.map(((t,a)=>({autoplay:a===e.correctIndex,required:!0,text:t.text,url:t.tts}))),this.grade=({challenge:e,challengeState:t})=>Promise.resolve({correct:t.guess===e.correctIndex,guess:`${t.guess}`}),this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challengeState:e})=>void 0!==e.guess}},[B.Sm.SelectTranscription]:new class extends W{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[o.Vi.ChallengeReports.BAD_AUDIO,o.Vi.ChallengeReports.MISSING_AUDIO,o.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[o.Vi.ChallengeReports.NOT_ACCEPTED,o.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA([{autoplay:!0,required:!0,text:e.choices[e.correctIndex].text,url:e.tts},...e.choices.map((e=>e.tts&&{autoplay:!1,required:!0,text:e.text,url:e.tts}))]),this.grade=({challenge:e,challengeState:t})=>Promise.resolve({correct:t.guess===e.correctIndex,guess:`${t.guess}`}),this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challengeState:e})=>void 0!==e.guess}},[B.Sm.SvgPuzzle]:new class extends W{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[o.Vi.ChallengeReports.BAD_AUDIO,o.Vi.ChallengeReports.BAD_OPTION,o.Vi.ChallengeReports.CHARACTER_DISPLAY,o.Vi.ChallengeReports.MISSING_AUDIO,o.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[o.Vi.ChallengeReports.NOT_ACCEPTED,o.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA([...e.choices.map((e=>e.tts&&e.text&&{autoplay:!1,required:!1,text:e.text,url:e.tts}))].concat(e.tts?[{autoplay:!0,required:!1,text:e.correctSolutions[0],url:e.tts}]:[])),this.grade=({challenge:e,challengeState:t})=>{var a,s;let n=!0;for(let s=0;s<e.correctIndices.length;s++)if(e.correctIndices[s]!==(null===(a=t.guess)||void 0===a?void 0:a.choices[s])){n=!1;break}const r=null===(s=t.guess)||void 0===s?void 0:s.choices.map((e=>`${e}`)).join(", ").trim();return Promise.resolve({correct:n,guess:`[${r}]`})},this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challenge:e,challengeState:t})=>{var a,s;return(null===(s=null===(a=t.guess)||void 0===a?void 0:a.choices)||void 0===s?void 0:s.filter((e=>e>=0)).length)===e.correctIndices.length}}},[B.Sm.SyllableTap]:new class extends W{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[o.Vi.ChallengeReports.BAD_AUDIO,o.Vi.ChallengeReports.BAD_PROMPT,o.Vi.ChallengeReports.MISSING_AUDIO,o.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[o.Vi.ChallengeReports.NOT_ACCEPTED,o.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA([{autoplay:!1,required:!0,text:e.prompt,url:e.tts},...e.choices.map((e=>e.tts&&{autoplay:!1,required:!0,text:e.text,url:e.tts}))]),this.grade=e=>Z(e),this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=e=>$(e)}},[B.Sm.SyllableListenTap]:new class extends W{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[o.Vi.ChallengeReports.BAD_AUDIO,o.Vi.ChallengeReports.BAD_PROMPT,o.Vi.ChallengeReports.MISSING_AUDIO,o.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[o.Vi.ChallengeReports.NOT_ACCEPTED,o.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA([{autoplay:!1,required:!0,text:e.prompt,url:e.tts},...e.choices.map((e=>e.tts&&{autoplay:!1,required:!0,text:e.text,url:e.tts}))]),this.grade=e=>Z(e),this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=e=>$(e)}},[B.Sm.Speak]:new class extends W{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[o.Vi.ChallengeReports.BAD_AUDIO,o.Vi.ChallengeReports.BAD_PROMPT,o.Vi.ChallengeReports.MISSING_AUDIO,o.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[o.Vi.ChallengeReports.NOT_ACCEPTED,o.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>[{autoplay:!0,required:!1,text:e.prompt,url:e.tts}],this.grade=({challenge:e,challengeState:t})=>{var a,s,n,r;const i=(null!==(s=null===(a=t.guess)||void 0===a?void 0:a.score)&&void 0!==s?s:0)>=e.threshold;return Promise.resolve({correct:i,guess:t.guess,numRetriesLeft:i||void 0===(null===(n=t.guess)||void 0===n?void 0:n.usedGuesses)?0:c.Tu-(null===(r=t.guess)||void 0===r?void 0:r.usedGuesses)})},this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=()=>!1}},[B.Sm.TapCloze]:new class extends W{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[o.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[o.Vi.ChallengeReports.BAD_AUDIO,o.Vi.ChallengeReports.BAD_HINTS,o.Vi.ChallengeReports.MISSING_AUDIO,o.Vi.ChallengeReports.MISSING_HINTS,o.Vi.ChallengeReports.NOT_ACCEPTED,o.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA(e.tokens.map((e=>e.tts&&{autoplay:!1,required:!1,text:e.value,url:e.tts}))),this.grade=({challenge:e,challengeState:t})=>{const a=this.getGuessedTexts(e,t),n=(0,g.Ub)(e);return Promise.resolve({correct:s.Xy(a,n),guess:a.join(""),highlights:this.getHighlights(e,t)})},this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({guess:(0,g.jL)(e.displayTokens),type:e.type}),this.validate=({challenge:e,challengeState:t})=>this.getGuesses(e,t).every((e=>void 0!==e)),this.getGuessedTexts=(e,t)=>{const{displayTokens:a}=e;let s=0;const n=this.getGuesses(e,t);return a.map((e=>{if(void 0===e.damageStart)return e.text;const t=n[s++];return void 0===t?e.text.slice(0,e.damageStart):`${e.text.slice(0,e.damageStart)}${t}`}))},this.getHighlights=(e,t)=>{const a=this.getGuessedTexts(e,t),s=(0,g.Ub)(e);return(0,c.nT)(s,a)},this.getGuesses=(e,t)=>{const{displayTokens:a}=e;return t.guess?t.guess.map((e=>e.guess)):(0,g.jL)(a).map((()=>{}))}}},[B.Sm.TapClozeTable]:new class extends W{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[o.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[o.Vi.ChallengeReports.BAD_AUDIO,o.Vi.ChallengeReports.BAD_HINTS,o.Vi.ChallengeReports.MISSING_AUDIO,o.Vi.ChallengeReports.MISSING_HINTS,o.Vi.ChallengeReports.NOT_ACCEPTED,o.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA(e.tableTokens.flat(2).map((e=>e.tts&&{autoplay:!1,required:!1,text:e.value,url:e.tts}))),this.grade=({challenge:e,challengeState:t})=>{const a=this.getGuessedTexts(e,t),n=(0,g.Ub)(e);return Promise.resolve({correct:s.Xy(a,n),guess:a.join(""),highlights:this.getHighlights(e,t)})},this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({guess:(0,g.Xh)(e.displayTableTokens),type:e.type}),this.validate=({challenge:e,challengeState:t})=>this.getGuesses(e,t).every((e=>void 0!==e.guess)),this.getGuessedTexts=(e,t)=>{const{displayTableTokens:a,headers:s}=e,n=this.getGuesses(e,t);return(0,g.x6)(a,s,((e,t,a)=>{if(void 0===a.damageStart)return a.text;const s=n.find((a=>a.colIndex===e&&a.rowIndex===t));return(null==s?void 0:s.guess)?`${a.text.slice(0,a.damageStart)}${s.guess}`:a.text.slice(0,a.damageStart)}))},this.getHighlights=(e,t)=>{const a=this.getGuessedTexts(e,t),s=(0,g.Ub)(e);return(0,c.nT)(s,a)},this.getGuesses=(e,t)=>{var a;const{displayTableTokens:s}=e;return null!==(a=t.guess)&&void 0!==a?a:(0,g.Xh)(s)}}},[B.Sm.TapComplete]:new class extends W{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[o.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[o.Vi.ChallengeReports.BAD_AUDIO,o.Vi.ChallengeReports.BAD_HINTS,o.Vi.ChallengeReports.BAD_IMAGE,o.Vi.ChallengeReports.MISSING_AUDIO,o.Vi.ChallengeReports.MISSING_HINTS,o.Vi.ChallengeReports.MISSING_IMAGE,o.Vi.ChallengeReports.NOT_ACCEPTED,o.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA(e.tokens.map((e=>e.tts&&{autoplay:!1,required:!1,text:e.value,url:e.tts}))),this.grade=({challenge:e,challengeState:t})=>{const a=this.getGuesses(e,t),n=a.values(),r=e.displayTokens.map((t=>{if(t.isBlank){const t=n.next().value;return null===t?"":e.choices[t].text}return t.text})).join("");return Promise.resolve({closestSolution:e.displayTokens.map((e=>e.text)).join(""),correct:s.Xy(a,e.correctIndices),guess:r,highlights:this.getHighlights(e,t)})},this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challenge:e,challengeState:t})=>this.getGuesses(e,t).filter((e=>null!==e)).length===e.correctIndices.length,this.getGuesses=(e,t)=>t.guess?t.guess:new Array(e.correctIndices.length).fill(null),this.getHighlights=(e,t)=>{const a=this.getGuesses(e,t).values();return(0,c.nT)(e.displayTokens.map((e=>e.text)),e.displayTokens.map((t=>{if(t.isBlank){const t=a.next().value;return null===t?"":e.choices[t].text}return t.text})))}}},[B.Sm.TapCompleteTable]:new class extends W{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[o.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[o.Vi.ChallengeReports.BAD_AUDIO,o.Vi.ChallengeReports.BAD_HINTS,o.Vi.ChallengeReports.MISSING_AUDIO,o.Vi.ChallengeReports.MISSING_HINTS,o.Vi.ChallengeReports.NOT_ACCEPTED,o.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA(e.tableTokens.flat(2).map((e=>e.tts&&{autoplay:!1,required:!1,text:e.value,url:e.tts}))),this.grade=({challenge:e,challengeState:t})=>{const a=this.getGuessedTexts(e,t),n=(0,g.Ub)(e);return Promise.resolve({correct:s.Xy(a,n),guess:a.join(""),highlights:this.getHighlights(e,t)})},this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({guess:(0,g.Xh)(e.displayTableTokens),type:e.type}),this.validate=({challenge:e,challengeState:t})=>this.getGuesses(e,t).every((e=>void 0!==e.guess)),this.getGuessedTexts=(e,t)=>{const{displayTableTokens:a,headers:s}=e,n=this.getGuesses(e,t);return(0,g.x6)(a,s,((e,t,a)=>{if(!a.isBlank)return a.text;const s=n.find((a=>a.colIndex===e&&a.rowIndex===t));return(null==s?void 0:s.guess)?s.guess:""}))},this.getHighlights=(e,t)=>{const a=this.getGuessedTexts(e,t),s=(0,g.Ub)(e);return(0,c.nT)(s,a)},this.getGuesses=(e,t)=>{var a;const{displayTableTokens:s}=e;return null!==(a=t.guess)&&void 0!==a?a:(0,g.Xh)(s)}}},[B.Sm.TapDescribe]:new class extends W{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[o.Vi.ChallengeReports.BAD_IMAGE,o.Vi.ChallengeReports.MISSING_IMAGE,o.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[o.Vi.ChallengeReports.NOT_ACCEPTED,o.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA(e.choices.map((e=>e.tts&&{autoplay:!1,required:!1,text:e.text,url:e.tts}))),this.grade=async({challenge:e,challengeState:t})=>{const a=this.getGuess(e,t),s=await(0,p.wM)({allowTypoBlame:!1,challenge:e,guess:a,isTypingInLearningLanguage:!1});return s.correct?s:{correct:s.correct,guess:a}},this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challenge:e,challengeState:t})=>this.getChoices(t).length===e.correctIndices.length,this.getChoices=e=>{var t;return null!==(t=e.guess)&&void 0!==t?t:[]},this.getGuess=(e,t)=>{const a=(0,c.rF)(e);return this.getChoices(t).map((t=>e.choices[t].text)).join(a)}}},[B.Sm.Translate]:new class extends W{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[o.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[o.Vi.ChallengeReports.BAD_AUDIO,o.Vi.ChallengeReports.BAD_HINTS,o.Vi.ChallengeReports.BAD_IMAGE,o.Vi.ChallengeReports.MISSING_AUDIO,o.Vi.ChallengeReports.MISSING_HINTS,o.Vi.ChallengeReports.MISSING_IMAGE,o.Vi.ChallengeReports.NOT_ACCEPTED,o.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e,learningLanguage:t,session:a})=>s.oA([e.tts&&{autoplay:e.sourceLanguage===t,required:!1,text:e.prompt,url:e.tts},...e.choices.map((e=>e.tts&&{autoplay:!1,required:!1,text:e.text,url:e.tts})),...e.tokens.map((e=>e.tts&&!(0,U.LJ)(a.type)&&{autoplay:!1,required:!1,text:e.value,url:e.tts}))]),this.grade=async({challenge:e,challengeState:t,challengeToggleState:a,learningLanguage:n})=>{if(a.isToggledToTyping)return(0,p.wM)({allowTypoBlame:a.isToggledToTyping,challenge:e,guess:this.getTranslation(t),isTypingInLearningLanguage:a.isToggledToTyping&&e.grader.language===n});const r=(0,c.rF)(e),i=this.getTapTranslations(e,t),o=i.join(r),d=e.correctIndices.map((t=>e.choices[t].text));if(s.Xy(d,i))return Promise.resolve({correct:!0,guess:o});const u=await(0,p.wM)({allowTypoBlame:a.isToggledToTyping,challenge:e,guess:o,isTypingInLearningLanguage:a.isToggledToTyping&&e.grader.language===n});return u.correct?u.blameType===l.Oj.ExtraSpace?{correct:u.correct,guess:o}:u:Promise.resolve({correct:u.correct,guess:o,mistakesRecyclingHighlights:u.mistakesRecyclingHighlights})},this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challenge:e,challengeState:t,challengeToggleState:a})=>a.isToggledToTyping?this.getTranslation(t).length>0:this.getTapTranslations(e,t).length>0,this.getTapTranslations=(e,t)=>{var a,s,n;return null!==(n=null===(s=null===(a=t.guess)||void 0===a?void 0:a.tapTranslations)||void 0===s?void 0:s.map((t=>e.choices[t].text)))&&void 0!==n?n:[]},this.getTranslation=e=>{var t,a;return(null!==(a=null===(t=e.guess)||void 0===t?void 0:t.translation)&&void 0!==a?a:"").trim()}}},[B.Sm.Transliterate]:new class extends W{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[o.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[o.Vi.ChallengeReports.NOT_ACCEPTED,o.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=()=>[],this.grade=({challenge:e,challengeState:t})=>{const a=this.getTransliteration(t),s=(e.correctSolutions||[]).map((e=>(0,u.lG)(V,e))).map((e=>e.replace(z,""))),n=(0,u.lG)(V,a).replace(z,""),r=s.includes(n);return Promise.resolve({correct:r,guess:a})},this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challengeState:e})=>this.getTransliteration(e).length>0,this.getTransliteration=e=>{var t,a;return(null!==(a=null===(t=e.guess)||void 0===t?void 0:t.transliteration)&&void 0!==a?a:"").trim()}}},[B.Sm.TransliterationAssist]:new class extends W{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[o.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[o.Vi.ChallengeReports.NOT_ACCEPTED],this.getTts=({challenge:e})=>s.oA(e.options.map((e=>e.tts&&{autoplay:!1,required:!1,text:e.text,url:e.tts}))),this.grade=({challenge:e,challengeState:t})=>Promise.resolve({correct:t.guess===e.correctIndex,guess:t.guess}),this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challengeState:e})=>void 0!==e.guess}},[B.Sm.TypeCloze]:new class extends W{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[o.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[o.Vi.ChallengeReports.BAD_AUDIO,o.Vi.ChallengeReports.BAD_HINTS,o.Vi.ChallengeReports.MISSING_AUDIO,o.Vi.ChallengeReports.MISSING_HINTS,o.Vi.ChallengeReports.NOT_ACCEPTED,o.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA(e.tokens.map((e=>e.tts&&{autoplay:!1,required:!1,text:e.value,url:e.tts}))),this.grade=async({challenge:e,challengeState:t,learningLanguage:a})=>{const n=this.getGuessedTexts(e,t),r=(0,g.Ub)(e),i=await(0,u.C3)(a);return Promise.resolve({correct:s.Xy(n.map((e=>(0,u.PW)(i.accentedCharacterMap,i.normalizationData,e))),r.map((e=>(0,u.PW)(i.accentedCharacterMap,i.normalizationData,e)))),guess:n.join(""),highlights:this.getHighlights(e,t)})},this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({guess:(0,g.jL)(e.displayTokens),type:e.type}),this.validate=({challenge:e,challengeState:t})=>this.getGuesses(e,t).every((e=>void 0!==e)),this.getGuessedTexts=(e,t)=>{const{displayTokens:a}=e;let s=0;const n=this.getGuesses(e,t);return a.map((e=>{if(void 0===e.damageStart)return e.text;const t=n[s++];return void 0===t?e.text.slice(0,e.damageStart):`${e.text.slice(0,e.damageStart)}${t}`}))},this.getHighlights=(e,t)=>{const a=this.getGuessedTexts(e,t),s=(0,g.Ub)(e);return(0,c.nT)(s,a)},this.getGuesses=(e,t)=>{const{displayTokens:a}=e;return t.guess?t.guess.map((e=>e.guess)):(0,g.jL)(a).map((()=>{}))}}},[B.Sm.TypeClozeTable]:new class extends W{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[o.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[o.Vi.ChallengeReports.BAD_AUDIO,o.Vi.ChallengeReports.BAD_HINTS,o.Vi.ChallengeReports.MISSING_AUDIO,o.Vi.ChallengeReports.MISSING_HINTS,o.Vi.ChallengeReports.NOT_ACCEPTED,o.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA(e.tableTokens.flat(2).map((e=>e.tts&&{autoplay:!1,required:!1,text:e.value,url:e.tts}))),this.grade=async({challenge:e,challengeState:t,learningLanguage:a})=>{const n=this.getGuessedTexts(e,t),r=(0,g.Ub)(e),i=await(0,u.C3)(a);return{correct:s.Xy(n.map((e=>(0,u.PW)(i.accentedCharacterMap,i.normalizationData,e))),r.map((e=>(0,u.PW)(i.accentedCharacterMap,i.normalizationData,e)))),guess:n.join(""),highlights:this.getHighlights(e,t)}},this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({guess:(0,g.Xh)(e.displayTableTokens),type:e.type}),this.validate=({challenge:e,challengeState:t})=>this.getGuesses(e,t).every((e=>void 0!==e.guess)),this.getGuessedTexts=(e,t)=>{const{displayTableTokens:a,headers:s}=e,n=this.getGuesses(e,t);return(0,g.x6)(a,s,((e,t,a)=>{if(void 0===a.damageStart)return a.text;const s=n.find((a=>a.colIndex===e&&a.rowIndex===t));return(null==s?void 0:s.guess)?`${a.text.slice(0,a.damageStart)}${s.guess}`:a.text.slice(0,a.damageStart)}))},this.getHighlights=(e,t)=>{const a=this.getGuessedTexts(e,t),s=(0,g.Ub)(e);return(0,c.nT)(s,a)},this.getGuesses=(e,t)=>{const{displayTableTokens:a}=e;return t.guess?t.guess:(0,g.Xh)(a)}}},[B.Sm.TypeComplete]:new class extends W{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[o.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[o.Vi.ChallengeReports.BAD_AUDIO,o.Vi.ChallengeReports.BAD_HINTS,o.Vi.ChallengeReports.MISSING_AUDIO,o.Vi.ChallengeReports.MISSING_HINTS,o.Vi.ChallengeReports.NOT_ACCEPTED,o.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA(e.tokens.map((e=>e.tts&&{autoplay:!1,required:!1,text:e.value,url:e.tts}))),this.grade=async({challenge:e,challengeState:t})=>{const a=e.displayTokens,n=a.findIndex((e=>e.isBlank)),r=e.displayTokens.map((e=>e.text)).join(""),i=this.getUserInput(e,t,!0),o=a.map(((t,a)=>t.isBlank?a===n?e.assistedText?e.assistedText+i[a]:i[a]:"":t.text)).join("");if(s.Xy(o,r))return Promise.resolve({correct:!0,guess:i});const l=await(0,p.wM)({allowTypoBlame:!0,challenge:e,guess:o,isTypingInLearningLanguage:!0});return l.guess=i[0],l.correct||delete l.blameMessage,l},this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({guess:"",type:e.type}),this.validate=({challengeState:e})=>void 0!==e.guess,this.getUserInput=(e,t,a)=>{var s;const n=null!==(s=t.guess)&&void 0!==s?s:[];return e.displayTokens.flatMap((e=>{const t=a?e.text:[];return e.isBlank?n:t}))}}},[B.Sm.TypeCompleteTable]:new class extends W{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[o.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[o.Vi.ChallengeReports.BAD_AUDIO,o.Vi.ChallengeReports.BAD_HINTS,o.Vi.ChallengeReports.MISSING_AUDIO,o.Vi.ChallengeReports.MISSING_HINTS,o.Vi.ChallengeReports.NOT_ACCEPTED,o.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA(e.tableTokens.flat(2).map((e=>e.tts&&{autoplay:!1,required:!1,text:e.value,url:e.tts}))),this.grade=async({challenge:e,challengeState:t,learningLanguage:a})=>{const n=this.getGuessedTexts(e,t),r=(0,g.Ub)(e),i=await(0,u.C3)(a);return{correct:s.Xy(n.map((e=>(0,u.PW)(i.accentedCharacterMap,i.normalizationData,e))),r.map((e=>(0,u.PW)(i.accentedCharacterMap,i.normalizationData,e)))),guess:n.join(""),highlights:this.getHighlights(e,t)}},this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({guess:(0,g.Xh)(e.displayTableTokens),type:e.type}),this.validate=({challenge:e,challengeState:t})=>this.getGuesses(e,t).every((e=>void 0!==e.guess)),this.getGuessedTexts=(e,t)=>{const{displayTableTokens:a,headers:s}=e,n=this.getGuesses(e,t);return(0,g.x6)(a,s,((e,t,a)=>{if(!a.isBlank)return a.text;const s=n.find((a=>a.colIndex===e&&a.rowIndex===t));return(null==s?void 0:s.guess)?s.guess:""}))},this.getHighlights=(e,t)=>{const a=this.getGuessedTexts(e,t),s=(0,g.Ub)(e);return(0,c.nT)(s,a)},this.getGuesses=(e,t)=>{const{displayTableTokens:a}=e;return t.guess?t.guess:(0,g.Xh)(a)}}},[B.Sm.WriteComprehension]:new class extends W{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[o.Vi.ChallengeReports.BAD_PROMPT,o.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[o.Vi.ChallengeReports.NOT_ACCEPTED,o.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>{var t,a;return s.oA([...null!==(t=e.passageTokens)&&void 0!==t?t:[],...null!==(a=e.questionTokens)&&void 0!==a?a:[]].map((e=>e.tts&&{autoplay:!1,required:!1,text:e.value,url:e.tts})))},this.grade=async({challenge:e,challengeState:t,learningLanguage:a})=>{var s;const n=await(0,p.wM)({allowTypoBlame:!0,challenge:e,guess:null!==(s=t.guess)&&void 0!==s?s:"",isTypingInLearningLanguage:e.grader.language===a});return{blameMessage:n.correct?void 0:(0,m.H8)(30063),correct:n.correct,guess:n.guess}},this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challengeState:e})=>void 0!==e.guess}}},Q=s.XP(q),Y=e=>t=>{const a=t.challenge.type;if(!(a in q))throw Error(`Unknown challenge type: ${a}`);return q[a][e](t)},K=Y("getAlwaysDisplayedReportTypes"),J=Y("getConditionallyDisplayedReportTypes"),X=e=>{const{challenge:t,challengeState:a,session:s}=e;if(t.skipped&&(!(0,U.LJ)(s.type)||s.type===B.FF.UnitTest||s.type===B.FF.SectionTest)){if(a.hasBrokenTts)return Promise.resolve({correct:!0,guess:""});if((0,U.tq)().includes(t.type))return Promise.resolve({blameMessage:(0,m.H8)(4469),blameSubtext:(0,m.H8)(35006),correct:!0,guess:""});if((0,U.bc)().includes(t.type)){const e=a.recognizerFailed?(0,m.H8)(7768):(0,m.H8)(35006);return Promise.resolve({blameMessage:(0,m.H8)(12946),blameSubtext:e,correct:!0,guess:""})}}return Y("grade")(e)},ee=Y("continueChallenge"),te=Y("isReadyForGuessing"),ae=Y("prepareChallenge"),se=Y("prepareChallengeState"),ne=Y("validate"),re=Y("getTts")},18675:(e,t,a)=>{"use strict";a.d(t,{K:()=>p,w:()=>f});var s=a(80254),n=a(5219),r=a(95332),i=a(63301),o=a(68903),l=a(39852),c=a(11811);const d=s.IH((()=>{n.setDebug((0,i.Au)())})),u=(e,t,a)=>a.challenges.slice(0,t.currentIndex).filter((t=>t.id===e.id&&t.type===e.type)).length,p=e=>"string"==typeof e?e:e[0].endsWith("'")?e.join(""):e.join(" "),g=(e,t)=>{var a;const s=t.guess;switch(e.type){case c.Sm.CharacterMatch:case c.Sm.CharacterPuzzle:case c.Sm.CharacterTrace:case c.Sm.CharacterWrite:case c.Sm.ListenMatch:case c.Sm.ListenSpeak:case c.Sm.Match:case c.Sm.Speak:case c.Sm.SvgPuzzle:return;case c.Sm.Assist:case c.Sm.ReverseAssist:case c.Sm.TransliterationAssist:return null===(a=e.options[s])||void 0===a?void 0:a.text;case c.Sm.CharacterIntro:return e.choices[s];case c.Sm.CharacterSelect:return((e,t)=>{var a;return null===(a=e.choices[t])||void 0===a?void 0:a.character})(e,s);case c.Sm.Judge:return e.choices[s];case c.Sm.Select:return((e,t)=>{var a;return null===(a=e.choices[t])||void 0===a?void 0:a.phrase})(e,s);case c.Sm.SelectPronunciation:case c.Sm.SelectTranscription:return((e,t)=>{var a;return null===(a=e.choices[t])||void 0===a?void 0:a.text})(e,s);case c.Sm.TapCloze:case c.Sm.TypeCloze:case c.Sm.TypeComplete:case c.Sm.TapClozeTable:case c.Sm.TypeClozeTable:case c.Sm.TapCompleteTable:case c.Sm.TypeCompleteTable:case c.Sm.CompleteReverseTranslation:case c.Sm.FreeResponse:case c.Sm.Listen:case c.Sm.ListenComplete:case c.Sm.ListenIsolation:case c.Sm.ListenTap:case c.Sm.OrderTapComplete:case c.Sm.PartialListen:case c.Sm.PartialReverseTranslate:case c.Sm.SyllableListenTap:case c.Sm.SyllableTap:case c.Sm.TapComplete:case c.Sm.TapDescribe:case c.Sm.Translate:case c.Sm.Transliterate:case c.Sm.WriteComprehension:return s;case c.Sm.Definition:case c.Sm.Dialogue:case c.Sm.ListenComprehension:case c.Sm.PatternTapComplete:case c.Sm.ReadComprehension:return e.choices[s];case c.Sm.Form:return((e,t)=>{if(e.promptPieces.length<2||!(t in e.options)||!("text"in e.options[t]))return;const a=e.options[t].text;return e.promptPieces[0]+a+e.promptPieces[1]})(e,s);case c.Sm.GapFill:return((e,t)=>e.displayTokens.map((e=>e.isBlank?t:e.text)).join(""))(e,s);case c.Sm.Name:return p(s);default:throw(0,o.RJ)(e),Error("Unexpected challenge type for computing tracked response guess in computeGuess.")}},m=e=>{var t,a,s;switch(e.type){case c.Sm.CompleteReverseTranslation:case c.Sm.GapFill:case c.Sm.ListenIsolation:case c.Sm.ListenSpeak:case c.Sm.OrderTapComplete:case c.Sm.PartialReverseTranslate:case c.Sm.Speak:case c.Sm.SyllableTap:case c.Sm.TapCloze:case c.Sm.TapComplete:case c.Sm.Translate:case c.Sm.TypeCloze:case c.Sm.TypeComplete:return null!==(t=e.tokens)&&void 0!==t?t:[];case c.Sm.Definition:return e.displayTokens.map((e=>e.hintToken));case c.Sm.Dialogue:return e.dialogue.flatMap((e=>e.hintTokens));case c.Sm.ReadComprehension:case c.Sm.WriteComprehension:return[...null!==(a=e.passageTokens)&&void 0!==a?a:[],...null!==(s=e.questionTokens)&&void 0!==s?s:[]];case c.Sm.TapClozeTable:case c.Sm.TapCompleteTable:case c.Sm.TypeClozeTable:case c.Sm.TypeCompleteTable:return e.tableTokens.flat(2);case c.Sm.Assist:case c.Sm.CharacterIntro:case c.Sm.CharacterMatch:case c.Sm.CharacterPuzzle:case c.Sm.CharacterSelect:case c.Sm.CharacterTrace:case c.Sm.CharacterWrite:case c.Sm.Form:case c.Sm.FreeResponse:case c.Sm.Judge:case c.Sm.Listen:case c.Sm.ListenComprehension:case c.Sm.ListenComplete:case c.Sm.ListenMatch:case c.Sm.ListenTap:case c.Sm.Match:case c.Sm.Name:case c.Sm.PartialListen:case c.Sm.PatternTapComplete:case c.Sm.ReverseAssist:case c.Sm.Select:case c.Sm.SelectPronunciation:case c.Sm.SelectTranscription:case c.Sm.SvgPuzzle:case c.Sm.SyllableListenTap:case c.Sm.TapDescribe:case c.Sm.Transliterate:case c.Sm.TransliterationAssist:return[];default:throw(0,o.RJ)(e),Error("Unexpected challenge type for computing tracked response prompt tokens in computePromptTokens.")}},h=e=>{const t=e.challengeStates[e.currentIndex].hintsShown;return void 0===t?[]:t.map((e=>e.value)).slice(0,128)},_=e=>{var t,a;return null!==(a=null===(t=e.challengeGeneratorIdentifier)||void 0===t?void 0:t.specificType)&&void 0!==a?a:r.SJ[e.type]},v=e=>{var t;return e.worldCharacterShown&&(null===(t=e.character)||void 0===t?void 0:t.name)?[r.F[e.character.name]]:void 0},f=(e,t,a,s,r,i,o)=>{var p;const f=e.challenges[a.currentIndex],b=Object.assign(Object.assign({app_version:window.duo.version},{app_version_hash:window.duo.versionHash}),{challenge_response_tracking_properties:f.challengeResponseTrackingProperties,closest_solution:s.closestSolution,compact_translations:f.compactTranslations,content_id:null===(p=f.challengeGeneratorIdentifier)||void 0===p?void 0:p.generatorId,correct:r?void 0:s.correct,distractors:f.wrongTokens,from_language:a.sessionParams.fromLanguage,guess:g(f,s),hinted_words:h(a),item_type:_(f),learning_language:a.sessionParams.learningLanguage,level_index:a.sessionParams.levelIndex,num_hints_tapped:h(a).length,order_index:a.currentIndex,previous_mistake_order_index:a.recycledMistakeIndexToOriginalMistakeIndex[a.currentIndex],prompt:f.prompt,prompt_tokens:(S=m(f),S.filter((e=>void 0!==e.hintTable)).map((e=>{var t,a;return{hints:null!==(a=null===(t=e.hintTable)||void 0===t?void 0:t.rows.flatMap((e=>e.flatMap((e=>{var t;return null!==(t=e.hint)&&void 0!==t?t:[]})))))&&void 0!==a?a:[],value:e.value}}))),repetition_number:u(f,a,e),responded_by_typing:o.canToggleTyping&&o.isToggledToTyping,session_id:e.type===c.FF.AlphabetLesson?e.trackingProperties.alphabet_static_session_id:e.trackingProperties.activity_uuid,session_type:e.type.toLowerCase(),skill_id:e.skillId,skill_tree_id:e.trackingProperties.skill_tree_id,skipped:r,tagged_kc_ids:f.metadata.lexeme_ids_to_update,time_taken:i,tree_row:f.metadata.depth,user_id:t.id,world_characters_shown:v(f)});var S;d(),n.track(b,(()=>(0,l.bP)("track","challenge response",[{data:b,name:"properties"}],{excludeFromRollbarTelemetry:!0})))}},16970:(e,t,a)=>{"use strict";a.d(t,{AX:()=>S,BV:()=>l,Hu:()=>v,LK:()=>y,S9:()=>g,SR:()=>d,XW:()=>i,YR:()=>b,Yt:()=>_,aw:()=>c,hN:()=>m,n_:()=>o,u_:()=>u,w:()=>h});var s=a(81149),n=a(93746),r=a(11811);const i="＿",o=18,l=10,c=270;var d;!function(e){e.CorrectMoveInwards="correct_1",e.CorrectShowFinalWord="correct_2",e.CorrectFinal="correct_3",e.IncorrectMoveInwards="incorrect_1",e.IncorrectSnapBack="incorrect_2"}(d||(d={}));const u=e=>e?[d.CorrectMoveInwards,d.IncorrectMoveInwards,d.IncorrectSnapBack].includes(e)?"white":[d.CorrectShowFinalWord,d.CorrectFinal].includes(e)?"green":null:null,p=[["ja<en",void 0],["ru<en",void 0],["uk<en",void 0],["he<en",void 0],["yi<en",void 0],["el<en",void 0],["hi<en",void 0],["ar<en",void 0],["ko<en",void 0]],g=(e,t)=>{const a=`${e}<${t}`;for(const[e,t]of p)if(e===a&&(!t||"experiment"===(0,s.j6)(t,void 0)))return!0;return!1},m=(e,t)=>{var a;return!(null!==(a=null==t?void 0:t.featureFlags.alphabets_web_maintenance)&&void 0!==a&&a)&&g(e.learningLanguage,e.fromLanguage)},h=({learningLanguage:e,fromLanguage:t})=>"ja"===e&&"en"===t,_=e=>{const{currentIndex:t,session:{challenges:a}}=e;if(a.slice(0,t+1).some((e=>e.indicatorType===r.A.LimitedTts)))return!1;const s=a[t+1];return(null==s?void 0:s.indicatorType)===r.A.LimitedTts},v=(e,t)=>"ja"===e&&"en"===t&&"experiment"===(0,s.j6)("writing_web_kanji",void 0),f=["ja"],b=e=>f.includes(e)?"characters":"letters",S=e=>`Learn ${(0,n.vY)(e)} ${b(e)} here!`,y=(e,t)=>{for(let a=1;a<e.length;a++)if(void 0===e[(t+a)%e.length].choiceIndex)return(t+a)%e.length}},78939:(e,t,a)=>{"use strict";a.d(t,{sd:()=>S,C3:()=>h,YK:()=>E,PW:()=>f,GS:()=>k,tc:()=>g,gE:()=>p,lG:()=>b});var s=a(87251),n=a.n(s),r=a(80254);const i=JSON.parse('{"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","×":"x","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ý":"Y","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","÷":"/","ø":"o","ù":"u","ú":"u","û":"u","ü":"u","ý":"y","ÿ":"y","Ā":"A","ā":"a","Ă":"A","ă":"a","Ą":"A","ą":"a","Ć":"C","ć":"c","Ĉ":"C","ĉ":"c","Ċ":"C","ċ":"c","Č":"C","č":"c","Ď":"D","ď":"d","Đ":"D","đ":"d","Ē":"E","ē":"e","Ĕ":"E","ĕ":"e","Ė":"E","ė":"e","Ę":"E","ę":"e","Ě":"E","ě":"e","Ĝ":"G","ĝ":"g","Ğ":"G","ğ":"g","Ġ":"G","ġ":"g","Ģ":"G","ģ":"g","Ĥ":"H","ĥ":"h","Ħ":"H","ħ":"h","Ĩ":"I","ĩ":"i","Ī":"I","ī":"i","Ĭ":"I","ĭ":"i","Į":"I","į":"i","İ":"I","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","ĺ":"l","Ļ":"L","ļ":"l","Ľ":"L","ľ":"l","Ŀ":"L","ŀ":"l","Ł":"L","ł":"l","Ń":"N","ń":"n","Ņ":"N","ņ":"n","Ň":"N","ň":"n","Ō":"O","ō":"o","Ŏ":"O","ŏ":"o","Ő":"O","ő":"o","Ŕ":"R","ŕ":"r","Ŗ":"R","ŗ":"r","Ř":"R","ř":"r","Ś":"S","ś":"s","Ŝ":"S","ŝ":"s","Ş":"S","ş":"s","Š":"S","š":"s","Ţ":"T","ţ":"t","Ť":"T","ť":"t","Ŧ":"T","ŧ":"t","Ũ":"U","ũ":"u","Ū":"U","ū":"u","Ŭ":"U","ŭ":"u","Ů":"U","ů":"u","Ű":"U","ű":"u","Ų":"U","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","ź":"z","Ż":"Z","ż":"z","Ž":"Z","ž":"z","Ơ":"O","ơ":"o","Ư":"U","ư":"u","Ș":"S","ș":"s","Ț":"T","ț":"t","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ό":"Ο","Ύ":"Υ","Ώ":"Ω","ΐ":"ι","Ϊ":"Ι","Ϋ":"Υ","ά":"α","έ":"ε","ή":"η","ί":"ι","ΰ":"υ","ϊ":"ι","ϋ":"υ","ό":"ο","ύ":"υ","ώ":"ω","Ạ":"A","ạ":"a","Ả":"A","ả":"a","Ấ":"A","ấ":"a","Ầ":"A","ầ":"a","Ẩ":"A","ẩ":"a","Ẫ":"A","ẫ":"a","Ậ":"A","ậ":"a","Ắ":"A","ắ":"a","Ằ":"A","ằ":"a","Ẳ":"A","ẳ":"a","Ẵ":"A","ẵ":"a","Ặ":"A","ặ":"a","Ẹ":"E","ẹ":"e","Ẻ":"E","ẻ":"e","Ẽ":"E","ẽ":"e","Ế":"E","ế":"e","Ề":"E","ề":"e","Ể":"E","ể":"e","Ễ":"E","ễ":"e","Ệ":"E","ệ":"e","Ỉ":"I","ỉ":"i","Ị":"I","ị":"i","Ọ":"O","ọ":"o","Ỏ":"O","ỏ":"o","Ố":"O","ố":"o","Ồ":"O","ồ":"o","Ổ":"O","ổ":"o","Ỗ":"O","ỗ":"o","Ộ":"O","ộ":"o","Ớ":"O","ớ":"o","Ờ":"O","ờ":"o","Ở":"O","ở":"o","Ỡ":"O","ỡ":"o","Ợ":"O","ợ":"o","Ụ":"U","ụ":"u","Ủ":"U","ủ":"u","Ứ":"U","ứ":"u","Ừ":"U","ừ":"u","Ử":"U","ử":"u","Ữ":"U","ữ":"u","Ự":"U","ự":"u","Ỳ":"Y","ỳ":"y","Ỵ":"Y","ỵ":"y","Ỷ":"Y","ỷ":"y","Ỹ":"Y","ỹ":"y"}');var o=a(76986),l=a(43464),c=a(83719),d=a(11908);const u=o,p=()=>{const e=d.Qt.GradingConfig;if(!(0,d.No)(e))return!0;const t=d.Qt.GradingConfigTimestamp;let a=0;return(0,d.No)(t)&&(a=(0,d.rV)(t)),Date.now()-a>108e5||a<16969464e5},g=e=>{(0,d.LS)(d.Qt.GradingConfig,e),(0,d.LS)(d.Qt.GradingConfigTimestamp,Date.now())},m=r.HP((e=>(0,d.rV)(`${d.Qt.LanguageTokens}.${e}`)||[])),h=async e=>{var t,a,s,n;let r=i,o=u;if(e){const i=await(async()=>{if(!p())return(0,d.rV)(d.Qt.GradingConfig);const e=await l.bG.requestGradingConfig();return g(e),e})();r=Object.assign(Object.assign({},i.language_data.default.accented_character_map),null!==(a=null===(t=i.language_data[e])||void 0===t?void 0:t.accented_character_map)&&void 0!==a?a:{}),o=[...i.language_data.default.normalization_data,...null!==(n=null===(s=i.language_data[e])||void 0===s?void 0:s.normalization_data)&&void 0!==n?n:[]]}return{accentedCharacterMap:r,normalizationData:o}},_={Accent:[c.Oj.Accent,1e-12],ExtraSpace:[c.Oj.ExtraSpace,.002],MissingSpace:[c.Oj.MissingSpace,.001],MissingWord:[c.Oj.MissingWord,.6],Typo:[c.Oj.Typo,1e-6],WrongWord:[c.Oj.WrongWord,.6]},v=r.Ry(r.VO(_)),f=(e,t,a)=>b(t,a).split("").map((t=>{var a;return null!==(a=e[t])&&void 0!==a?a:t})).join(""),b=(e,t)=>e.reduce(((e,[t,a])=>e.replace(new RegExp(t,"g"),a)),t.toLowerCase()),S=(e,t)=>{if(!e)return null!=t?t.length:Number.MAX_VALUE;if(!t)return e.length;const a=[];let s,n;for(s=0;s<=t.length;s++)a[s]=[s];for(n=0;n<=e.length;n++)a[0][n]=n;for(s=1;s<=t.length;s++)for(n=1;n<=e.length;n++)t.charAt(s-1)===e.charAt(n-1)?a[s][n]=a[s-1][n-1]:a[s][n]=Math.min(a[s-1][n-1]+1,Math.min(a[s][n-1]+1,a[s-1][n]+1));return a[t.length][e.length]};class y{constructor({accentedCharacterMap:e={},allowTypoBlame:t,isTypingInLearningLanguage:a,isWhitespaceDelimited:s=!0,language:n,submittedValue:r,vertices:i}){if(this.startState=()=>[0,0],this.isEndState=([e,t])=>e===this.vertices.length-1&&t===this.submittedValue.length,this.iterEdges=e=>{const t=[],a=(e,[t,a])=>Object.assign(Object.assign({},e),{type:t,weight:a+(e.auto?1e-4:0)}),[s,n]=e;if(n>this.submittedValue.length)throw Error('"pos" must be less than the length of "submittedValue".');const r=this.submittedValue.slice(n);return this.vertices[s].forEach((e=>{let s,i;const o=e.lenient;if(!o.length)return void t.push([e,[e.to,n]]);if(" "===o)return void(r.startsWith(" ")?t.push([e,[e.to,n+1]]):""===r?t.push([e,[e.to,n]]):(i=this.isWhitespaceDelimited?a(e,_.MissingSpace):e,t.push([i,[i.to,n]])));if(this.isWhitespaceDelimited){let l=!0,c=0;o.split("").some((e=>{for(;c<r.length&&" "===r[c];)c+=1;return c===r.length||e!==r[c]?(l=!1,!0):(c+=1,!1)})),l&&(i=a(e,_.ExtraSpace),s=n+c,t.push([i,[i.to,s]]))}const l=r.indexOf(" "),c=l<0?r:r.slice(0,l);if(s=n+c.length,o===c)t.push([e,[e.to,s]]);else if(this.isWhitespaceDelimited&&c.length){const n=((e,t,a)=>((e,t,a=((e,t)=>e===t))=>{if(Math.abs(e.length-t.length)>1)return 2;t.length>e.length&&([e,t]=[t,e]);const s=e.length,n=t.length;let r=0;for(;r<n&&a(e[r],t[r]);)r+=1;if(r===n)return s>n?1:0;let i=0;for(;i<n&&a(e[s-1-i],t[n-1-i]);)i+=1;return r+i+1>=s||s===n&&r+1<s&&a(e[r],t[r+1])&&a(e[r+1],t[r])&&r+i+2===s?1:2})(e,t,((e,t)=>{var s,n;return(null!==(s=a[e])&&void 0!==s?s:e)===(null!==(n=a[t])&&void 0!==n?n:t)})))(o,c,this.accentedCharacterMap);if(0===n)i=a(e,_.Accent),t.push([i,[i.to,s]]);else if(1===n){const n=this.isValidToken(c),r=!this.allowTypoBlame||n&&this.isTypingInLearningLanguage?_.WrongWord:_.Typo;return i=a(e,r),void t.push([i,[i.to,s]])}}c.startsWith(o)&&t.push([e,[e.to,n+o.length]]),!this.isWhitespaceDelimited&&c.startsWith(o)||(i=a(e,_.MissingWord),this.isWhitespaceDelimited&&(i=this.spaceSkippingEdge(i)),t.push([i,[i.to,n]]),c.length&&(i=a(e,_.WrongWord),t.push([i,[i.to,s]])))})),t},this.edgeWeight=e=>void 0===e.weight?0:e.weight,this.isValidToken=e=>this.languageTokens.includes(e),this.spaceSkippingEdge=e=>{const t=Object.assign({},e),a=this.vertices[e.to];return 1===a.length&&" "===a[0].lenient&&(t.to=a[0].to,t.lenient+=" ","orig"in t&&(t.orig+=" ")),t},i[i.length-1].length)throw Error("Malformed vertices array: Last element is not empty.");this.accentedCharacterMap=e,this.isWhitespaceDelimited=s,this.isTypingInLearningLanguage=a,this.languageTokens=m(n),this.submittedValue=r,this.vertices=i,this.allowTypoBlame=t}}const E=({accentedCharacterMap:e,allowTypoBlame:t,compiledNormalizationData:a,gradingData:s,isTypingInLearningLanguage:i,submittedValue:o})=>{var l;if(0!==s.version)throw Error("Client-side grading version incompatible");const d=new y({accentedCharacterMap:e,allowTypoBlame:t,isTypingInLearningLanguage:i,isWhitespaceDelimited:null===(l=s.whitespaceDelimited)||void 0===l||l,language:s.language,submittedValue:b(a,o),vertices:s.vertices}),[u,p]=((e,t,a,s,i)=>{const o=new(n())(((e,t)=>e.weight-t.weight||e.tieBreaker-t.tieBreaker));o.push({path:[],state:e,tieBreaker:0,weight:0});const l={};for(;o.size();){const e=r.Fp(o.toArray().map((({tieBreaker:e})=>e)))+1,{path:n,state:i,weight:c}=o.pop();if(!l[`${i}`]){if(l[`${i}`]=!0,c>1)return[null,null];if(t(i))return[n,c];a(i).forEach((([t,a],r)=>{const l=s(t);if(l<0)throw Error("Negative weight edge in solution DAG");o.push({path:[...n,[i,t]],state:a,tieBreaker:e+r,weight:c+l})}))}}return[null,null]})(d.startState(),d.isEndState,d.iterEdges,d.edgeWeight);if(null===u||null===p)return{correct:!1};const g=I(u);if(void 0!==g)return{correct:!1,gradingMetadata:g};const m=p<=.5,h={};let _="";u.forEach((([{},e])=>{var t;let a=e.type;a=void 0===a?"correct":a;let s=e.orig;if(s=void 0===s?e.lenient:s,"correct"!==a){const e=_.length;let n=e+s.length;a===c.Oj.MissingWord&&s.endsWith(" ")&&(n-=1);const r=null!==(t=h[a])&&void 0!==t?t:[];r.push([e,n]),h[a]=r}_+=s}));const f=r.xb(h)?void 0:r.Fp(r.XP(h),(e=>v[e])),S=m&&f===c.Oj.Accent&&!i?void 0:f,E=S?h[S]:void 0;return{blameType:S,closestSolution:_,correct:m,highlights:E}},I=e=>{const t=e.filter((([{},e])=>e.lenient.trim().length>0)).map((([{},e])=>e.metadata)),a=t.filter((e=>void 0!==e));if(0!==a.length&&a.length===t.length)return a[0].filter((e=>a.every((t=>t.some((t=>r.Xy(e,t)))))))},k=e=>e.normalize("NFD").replace(/\p{Diacritic}/gu,"")},34830:(e,t,a)=>{"use strict";a.d(t,{g3:()=>Z,S6:()=>K,R4:()=>k});var s=a(80254),n=a(42659),r=a(70220),i=a(63301),o=a(51748),l=a(37971),c=a(8654),d=a(23275),u=a(89260),p=a(11811);const g=a.p+"lottie/cd94552ec23af717cc7d8c36b2555da1.json",m=a.p+"lottie/aff89eb7214a19826c9406db2b6c35bf.json",h=a.p+"lottie/2494663888ef0119bb1c065df8a5d47e.json",_=a.p+"lottie/d2d2d4912de6e2a64cf9a7fd10eb86af.json",v=a.p+"lottie/775b11efc4068571b26c933998182bb4.json",f=a.p+"lottie/0b1182e57e9379ed2b22a439fbfa7a16.json",b=a.p+"lottie/8e0c9acabfda9acda61f502236cc92c8.json",S=a.p+"lottie/0816dd8d57f0dece3a6d93f2fe5a0f34.json",y=a.p+"lottie/3480e4bee560bc137aea40c106bdb178.json",E={left:{bubblePointerLocation:.7,delay:42,horizontalDockPoint:"left",verticalPosition:.52},loopingPosition:200,right:{bubblePointerLocation:.3,delay:117,horizontalDockPoint:"right",verticalPosition:.55},type:"dialogue",url:g},I={left:{bubblePointerLocation:.5,delay:1,horizontalDockPoint:"center",maxWidth:.6,verticalPosition:.58},loopingPosition:183,right:{bubblePointerLocation:.5,bubblePointerSide:"left",delay:116,horizontalDockPoint:"right",maxWidth:.275,shouldLimitToOneLine:!0,verticalPosition:.22},type:"dialogue",url:m},k={left:{bubblePointerLocation:.5,delay:1,horizontalDockPoint:"center",maxWidth:.75,verticalPosition:.25},loopingPosition:122,type:"dialogue",url:h},w={left:{bubblePointerLocation:.7,delay:44,horizontalDockPoint:"left",verticalPosition:.25},loopingPosition:235,right:{bubblePointerLocation:.3,delay:151,horizontalDockPoint:"right",verticalPosition:.45},type:"dialogue",url:_},T={left:{bubblePointerLocation:.7,delay:34,horizontalDockPoint:"left",verticalPosition:.55},right:{bubblePointerLocation:.3,delay:111,horizontalDockPoint:"right",verticalPosition:.52},type:"dialogue",url:v},C={left:{bubblePointerLocation:.7,delay:1,horizontalDockPoint:"left",verticalPosition:.3},loopingPosition:440,right:{bubblePointerLocation:.3,delay:1,horizontalDockPoint:"right",verticalPosition:.52},type:"dialogue",url:f},R={left:{bubblePointerLocation:.5,delay:1,horizontalDockPoint:"center",maxWidth:.75,verticalPosition:.25},loopingPosition:122,type:"dialogue",url:b},L={left:{animation:"explosive",bubblePointerLocation:.7,delay:103,horizontalDockPoint:"left",verticalPosition:.35},loopingPosition:246,right:{bubblePointerLocation:.3,delay:4,horizontalDockPoint:"right",verticalPosition:.58},type:"dialogue",url:S},O={left:{bubblePointerLocation:.7,delay:1,horizontalDockPoint:"left",verticalPosition:.38},loopingPosition:122,right:{bubblePointerLocation:.3,delay:28,horizontalDockPoint:"right",verticalPosition:.44},type:"dialogue",url:y},P=a.p+"lottie/f594ec5d1518865c8831d9b5a5f05537.json",A=a.p+"lottie/d867e159a8624e9604099bc598262341.json",D=a.p+"lottie/aba546f1ff54d762a09b8b6239b196f3.json",x=a.p+"lottie/02a931886091c6e4b1242a2a5600ee3e.json",N=a.p+"lottie/f0ff5463127e650523d76912d3e1db9e.json",F=a.p+"lottie/760be70075dbd04bccbc57a28cf26d20.json",M=a.p+"lottie/b3cf1956fff828f27dc17c9a60d55fcb.json",U=a.p+"lottie/9dfadd0b7300d9b8856cb3142f6323c0.json",H=a.p+"lottie/bcbc4cf102a7221cb63a36977dd9c1a1.json";var j=a(68903),G=a(44637);const B=e=>({type:"top-message",url:(()=>{const t=(0,G.SB)(e);return"bee"===t?D:"fox"===t?P:"owl"===t?A:(0,j.RJ)(t)})()}),V=e=>({type:"top-message",url:(()=>{const t=(0,G.SB)(e);return"bee"===t?F:"fox"===t?x:"owl"===t?N:(0,j.RJ)(t)})()}),z=e=>({type:"top-message",url:(()=>{const t=(0,G.SB)(e);return"bee"===t?H:"fox"===t?M:"owl"===t?U:(0,j.RJ)(t)})()}),Z=1728e5,$={[o.w.AfterThirdMistakeCheckpointTest]:{rawTemplates:[{message:32719,trackingIndex:65}],test:({player:e})=>1===e.session.heartsLeft},[o.w.BigRightStreak]:{getStreak:e=>e.coachDuo.currentCorrectStreak,rawTemplates:[{animation:E,character:"eddy",message:33382,secondary:33397},{animation:E,character:"eddy",message:33384,secondary:33398},{animation:E,character:"eddy",message:33399,secondary:33400},{animation:I,character:"falstaff",message:33382,secondary:33452},{animation:I,character:"falstaff",message:33453,secondary:33454},{animation:w,character:"lily",message:33410,secondary:33411,test:()=>!1},{animation:w,character:"lily",message:33412,secondary:33413,test:()=>!1},{animation:w,character:"lily",message:33414,secondary:33415,test:()=>!1},{animation:T,character:"lin",message:33426,secondary:33427,test:()=>!1},{animation:T,character:"lin",message:33428,secondary:33429,test:()=>!1},{animation:C,character:"lucy",message:33464,secondary:33465},{animation:C,character:"lucy",message:33384,secondary:33466},{animation:C,character:"lucy",message:33399,secondary:33467},{animation:L,character:"vikram",message:33498,secondary:33497},{animation:L,character:"vikram",message:33500,secondary:33499},{animation:L,character:"vikram",message:33502,secondary:33501},{animation:O,character:"zari",message:33513,secondary:33514},{animation:O,character:"zari",message:33515,secondary:33516},{animation:O,character:"zari",message:32240,secondary:32241},{message:()=>(0,c.H8)(20295,{challenges:10}),trackingIndex:10},{message:()=>(0,c.H8)(20893,{num_right:10}),trackingIndex:1},{message:()=>(0,c.H8)(7976,{challenges:10}),trackingIndex:7},{message:11911,trackingIndex:6},{message:16802,trackingIndex:8},{message:9495,trackingIndex:9},{message:14485,trackingIndex:3},{message:5686,trackingIndex:4}],test:({player:e})=>10===e.coachDuo.currentCorrectStreak},[o.w.BigRightStreakCheckpointTest]:{getStreak:e=>e.coachDuo.currentCorrectStreak,rawTemplates:[{message:32267,trackingIndex:62},{message:32268,trackingIndex:63}],test:({player:e})=>8===e.coachDuo.currentCorrectStreak},[o.w.BigRightStreakPlacement]:{getStreak:e=>e.coachDuo.currentCorrectStreak,rawTemplates:[{animation:()=>B(8),character:"bea",message:()=>(0,c.H8)(29391,{num:8})},{animation:()=>V(8),character:"junior",message:()=>(0,c.H8)(29391,{num:8})},{animation:()=>z(8),character:"lily",message:()=>(0,c.H8)(29391,{num:8})},{message:7829,trackingIndex:48},{message:15413,trackingIndex:49},{message:23424,trackingIndex:50}],test:({player:e})=>8===e.coachDuo.currentCorrectStreak},[o.w.CapstoneHardExercises]:{rawTemplates:[{message:33647}],test:({player:e})=>!!(e.session.type===p.FF.LevelReview||e.session.type===p.FF.LexemePractice&&e.levelData&&(0,d.$)(e.levelData.level))&&(e.status===l.c.CapstoneReviewSplash?-1:e.currentIndex)===e.session.challenges.findIndex((e=>e.indicatorType===p.A.HardChallenge))-1},[o.w.MistakesReview]:{rawTemplates:[{message:11949}],test:({player:e})=>!!(e.session.type===p.FF.GlobalPractice||e.session.type===p.FF.Lesson||e.session.type===p.FF.LevelReview||e.session.type===p.FF.LexemePractice&&e.levelData&&(0,d.$)(e.levelData.level)||e.session.type===p.FF.LexemeSkillLevelPractice)&&(e.status===l.c.CapstoneReviewSplash?-1:e.currentIndex)===e.session.challenges.findIndex((e=>e.indicatorType===p.A.PastMistake))-1},[o.w.FirstCorrectCheckpointTest]:{rawTemplates:[{message:31719,trackingIndex:55}],test:({player:e})=>0===e.currentIndex&&1===e.coachDuo.currentCorrectStreak},[o.w.FirstWrongCheckpointTest]:{rawTemplates:[{message:32264,trackingIndex:60}],test:({player:e})=>0===e.currentIndex&&1===e.coachDuo.currentIncorrectStreak},[o.w.FourQuestionsLeftCheckpointTest]:{rawTemplates:[{message:32269,trackingIndex:64}],test:({player:e})=>25===e.currentIndex},[o.w.MediumRightStreakCheckpointTest]:{getStreak:e=>e.coachDuo.currentCorrectStreak,rawTemplates:[{message:9366,trackingIndex:44},{message:14828,trackingIndex:46}],test:({player:e})=>4===e.coachDuo.currentCorrectStreak},[o.w.MidPointCheckpointTest]:{rawTemplates:[{message:32266,trackingIndex:61}],test:({player:e})=>14===e.currentIndex},[o.w.SmallRightStreak]:{getStreak:e=>e.coachDuo.currentCorrectStreak,rawTemplates:[{animation:E,character:"eddy",message:33392,secondary:33393},{animation:E,character:"eddy",message:33374,secondary:33394},{animation:E,character:"eddy",message:33395,secondary:33396},{animation:I,character:"falstaff",message:33449,secondary:33450},{animation:I,character:"falstaff",message:33378,secondary:33451},{animation:w,character:"lily",message:33405,secondary:33406,test:()=>!1},{animation:w,character:"lily",message:33407,secondary:33408,test:()=>!1},{animation:w,character:"lily",message:33374,secondary:33409,test:()=>!1},{animation:T,character:"lin",message:33422,secondary:33423,test:()=>!1},{animation:T,character:"lin",message:33424,secondary:33425,test:()=>!1},{animation:C,character:"lucy",message:33374,secondary:()=>(0,c.H8)(33459)},{animation:C,character:"lucy",message:33460,secondary:33461},{animation:C,character:"lucy",message:33462,secondary:33463},{animation:L,character:"vikram",message:33492,secondary:33491},{animation:L,character:"vikram",message:33494,secondary:33493},{animation:L,character:"vikram",message:33496,secondary:33495},{animation:O,character:"zari",message:33378,secondary:33509},{animation:O,character:"zari",message:33510,secondary:33511},{animation:O,character:"zari",message:32238,secondary:33512},{message:2762,trackingIndex:0},{message:()=>(0,c.H8)(14350,{challenges:5}),trackingIndex:6},{message:()=>(0,c.H8)(2592,{challenges:5}),trackingIndex:7},{message:9705,trackingIndex:8},{message:9634,trackingIndex:9},{message:7829,trackingIndex:10}],test:({player:e})=>5===e.coachDuo.currentCorrectStreak},[o.w.SmallRightStreakPlacement]:{getStreak:e=>e.coachDuo.currentCorrectStreak,rawTemplates:[{animation:()=>B(3),character:"bea",message:()=>(0,c.H8)(29391,{num:3})},{animation:()=>V(3),character:"junior",message:()=>(0,c.H8)(29391,{num:3})},{animation:()=>z(3),character:"lily",message:()=>(0,c.H8)(29391,{num:3})},{message:14430,trackingIndex:43},{message:9366,trackingIndex:44},{message:5918,trackingIndex:45},{message:14828,trackingIndex:46}],test:({player:e})=>3===e.coachDuo.currentCorrectStreak},[o.w.WrongStreak]:{getStreak:e=>e.coachDuo.currentIncorrectStreak,rawTemplates:[{animation:R,character:"duo",message:32244},{message:6886,trackingIndex:0},{message:18656,trackingIndex:6},{message:22112,trackingIndex:2},{message:16138,trackingIndex:7},{message:5514,trackingIndex:4},{message:4997,trackingIndex:5},{message:4668,trackingIndex:8}],test:({player:e})=>3===e.coachDuo.currentIncorrectStreak},[o.w.WrongStreakPlacement]:{getStreak:e=>e.coachDuo.currentIncorrectStreak,rawTemplates:[{message:17585,trackingIndex:33},{message:7478,trackingIndex:34},{message:9973,trackingIndex:35},{message:16942,trackingIndex:36},{message:9613,trackingIndex:37},{message:22972,trackingIndex:38}],test:({player:e})=>3===e.coachDuo.currentIncorrectStreak}},W=[o.w.BigRightStreak,o.w.SmallRightStreak,o.w.WrongStreak],q=[o.w.BigRightStreakPlacement,o.w.SmallRightStreakPlacement,o.w.WrongStreakPlacement],Q=[o.w.AfterThirdMistakeCheckpointTest,o.w.FourQuestionsLeftCheckpointTest,o.w.MidPointCheckpointTest,o.w.BigRightStreakCheckpointTest,o.w.MediumRightStreakCheckpointTest,o.w.FirstCorrectCheckpointTest,o.w.FirstWrongCheckpointTest],Y=(e,t)=>{var a;const s="function"==typeof e.animation?e.animation(t.player):e.animation,n=null!==(a=e.character)&&void 0!==a?a:"duo",r="function"==typeof e.message?e.message():(0,c.H8)(e.message),i=void 0===e.secondary?void 0:"function"==typeof e.secondary?e.secondary():(0,c.H8)(e.secondary),o=e.trackingIndex;return"dialogue"===(null==s?void 0:s.type)?{animation:s,character:n,message:r,secondary:i,trackingIndex:o,type:"dialogue"}:"top-message"===(null==s?void 0:s.type)?{animation:s,character:n,message:r,trackingIndex:o,type:"top-message"}:{character:n,message:r,trackingIndex:o,type:"static"}},K=e=>{if((0,i.gQ)("debugCoach"))return(e=>{console.log("These are all possible coach messages:"),s.XP($).forEach((t=>{console.log("====",t),$[t].rawTemplates.forEach((t=>{var a,s,n;const r=Y(t,e);"dialogue"===r.type?console.log(`(${null!==(a=t.trackingIndex)&&void 0!==a?a:-1}) duo: "${r.message}" => ${r.character}: "${r.secondary}"`):console.log(`(${null!==(s=t.trackingIndex)&&void 0!==s?s:-1}) ${null!==(n=r.character)&&void 0!==n?n:"duo"}: "${r.message}"`)}))}))})(e),{showReason:o.w.SmallRightStreak,template:Y($[o.w.SmallRightStreak].rawTemplates[3],e)};if(!(0,u.ZX)(e.player.session.type)||!(0,n.jv)(e).coachEnabled)return;const t=J(e);return void 0!==t?{showReason:t,template:Y(X(t,e),e)}:void 0},J=e=>{const{player:t,user:a}=e,s=s=>(e=>!t.coachDuo.allShowReasons.includes(e))(s)&&$[s].test(e)&&([o.w.CapstoneHardExercises,o.w.MistakesReview].includes(s)||(e=>{var t,s;const n=null===(s=null===(t=a.coachRecords)||void 0===t?void 0:t[e])||void 0===s?void 0:s.timesShownToday;return void 0===n||n<3})(s));switch(t.session.type){case p.FF.SectionTest:case p.FF.UnitTest:return Q.find(s);case p.FF.LevelReview:case p.FF.LexemePractice:return[o.w.MistakesReview,o.w.CapstoneHardExercises].find(s);case p.FF.PlacementTest:return q.find(s);case p.FF.GlobalPractice:case p.FF.LexemeSkillLevelPractice:case p.FF.Lesson:return[o.w.MistakesReview,...W].find(s);default:return W.find(s)}},X=(e,t)=>{var a;const n=!t.browserSettings.prefersReducedMotion&&!r.H&&1e3*t.user.creationDate<Date.now()-Z,i=$[e].rawTemplates.filter((e=>n||void 0===e.animation)).filter((e=>void 0===e.character||"duo"===e.character||!t.player.coachDuo.allCharacters.includes(e.character))).filter((e=>{var t,a;return null===(a=null===(t=e.test)||void 0===t?void 0:t.call(e))||void 0===a||a}));return null!==(a=s.UP(i.filter((e=>e.animation))))&&void 0!==a?a:s.UP(i.filter((e=>void 0===e.animation)))}},54412:(e,t,a)=>{"use strict";a.d(t,{Vj:()=>n,d8:()=>o,ej:()=>i,m_:()=>c,nJ:()=>l});var s=a(67921);const n={CSRFToken:"csrf_token",Impersonate:"impersonate",InitialReferrer:"initial_referrer",JWT:(window.location.host.includes("testbed")?"testbed_":"")+"jwt_token",LandingPage:"lp",LandingURL:"lu",LastReferrer:"lr",LoggedIn:"logged_in",LoggedOutUUID:"logged_out_uuid",RedirectToPreview:"redirect_to_preview",ShouldTrackWelcome:"should_track_welcome",Test:"test",TimeSiteLoaded:"tsl",UTMParameters:"utm_parameters"},r=window.location.host.includes("duolingo.com")?".duolingo.com":window.location.host.includes("duolingo.cn")?".duolingo.cn":window.location.host.includes("githubpreview.dev")?window.location.host:"localhost",i=e=>s.get(e),o=(e,t,a,n)=>{const i={domain:r,expires:365};a&&(i.SameSite="Lax"),n&&(i.secure=!0),s.set(e,t,i)},l=e=>{s.remove(e),s.remove(e,{domain:"duolingo.com"}),s.remove(e,{domain:"www.duolingo.com"}),s.remove(e,{domain:r})},c="N/A"},26886:(e,t,a)=>{"use strict";a.d(t,{Eb:()=>p,It:()=>v,jP:()=>b,og:()=>g,s7:()=>_,yO:()=>h});var s=a(72538),n=a(81149),r=a(53229),i=a(8654),o=a(93746),l=a(16086);const c={},d=[["eo","es"],["eo","fr"],["eo","pt"],["gn","es"]],u={AR_BLURB:11241,AR_DESCRIPTION:4909,CA_BLURB:8506,CA_DESCRIPTION:21183,CS_BLURB:20024,CS_DESCRIPTION:18066,CY_BLURB:10701,CY_DESCRIPTION:10429,DA_BLURB:9800,DA_DESCRIPTION:9178,DE_BLURB:6542,DE_DESCRIPTION:7582,EL_BLURB:18561,EL_DESCRIPTION:20429,EN_BLURB:1646,EN_DESCRIPTION:16668,EO_BLURB:23473,EO_DESCRIPTION:2491,ES_BLURB:7319,ES_DESCRIPTION:19850,FI_BLURB:void 0,FI_DESCRIPTION:11646,FR_BLURB:9723,FR_DESCRIPTION:17267,GA_BLURB:4364,GA_DESCRIPTION:22122,GD_BLURB:void 0,GD_DESCRIPTION:18683,GN_BLURB:24569,GN_DESCRIPTION:11938,HE_BLURB:15278,HE_DESCRIPTION:15586,HI_BLURB:8016,HI_DESCRIPTION:10589,HT_BLURB:void 0,HT_DESCRIPTION:33373,HU_BLURB:12368,HU_DESCRIPTION:11959,HV_BLURB:3675,HV_DESCRIPTION:18996,HW_BLURB:4934,HW_DESCRIPTION:11500,ID_BLURB:12109,ID_DESCRIPTION:16127,IT_BLURB:3816,IT_DESCRIPTION:13241,JA_BLURB:16465,JA_DESCRIPTION:14968,KO_BLURB:617,KO_DESCRIPTION:12438,LA_BLURB:void 0,LA_DESCRIPTION:3495,NL_NL_BLURB:7666,NL_NL_DESCRIPTION:3564,NO_BO_BLURB:10523,NO_BO_DESCRIPTION:1378,NV_BLURB:3404,NV_DESCRIPTION:23224,PL_BLURB:2749,PL_DESCRIPTION:11727,PT_BLURB:1296,PT_DESCRIPTION:17196,RO_BLURB:10940,RO_DESCRIPTION:18512,RU_BLURB:17561,RU_DESCRIPTION:5413,SV_BLURB:16903,SV_DESCRIPTION:14282,SW_BLURB:13815,SW_DESCRIPTION:2071,TLH_BLURB:17152,TLH_DESCRIPTION:13015,TR_BLURB:5007,TR_DESCRIPTION:10435,UK_BLURB:11573,UK_DESCRIPTION:4802,VI_BLURB:14762,VI_DESCRIPTION:13549,YI_BLURB:void 0,YI_DESCRIPTION:26696,ZH_BLURB:20640,ZH_DESCRIPTION:6308,ZH_HK_BLURB:void 0,ZH_HK_DESCRIPTION:3e4,ZU_BLURB:void 0,ZU_DESCRIPTION:37399},p=e=>{const t=u[`${(e=>e.toUpperCase().replace("-","_"))(e)}_DESCRIPTION`];return void 0===t?void 0:(0,i._i)(t)},g=(e,t=o.h9)=>{const a=(0,r.lV)((0,i.H8)(2471,{learning_language_name:(0,o.vY)(e)}));return`/${(0,l.Pc)()?"enroll":"course"}/${e}/${t}/${a}`},m=(e,t)=>`${t}<-${e}`,h=(e,t)=>m(e,t)in c,_=(e,t,a,s,r)=>{var i;if(r>=o.AP.Beta)return!0;const l=c[m(t,s)];return!!l&&!!((null===(i=e.featureFlags)||void 0===i?void 0:i[l.featureFlag])||a&&"experiment"===(0,n.j6)(l.experiment,void 0))},v=(e,t)=>d.some((([a,s])=>a===e&&s===t)),f=(e,t)=>{var a;return(null===(a=t.currentCourseId)||void 0===a?void 0:a.endsWith("ZH-CN"))&&t.zhTw?t.currentCourseId===e||t.currentCourseId.replace("ZH-CN","ZH-TW")===e:t.currentCourseId===e},b=(e,t)=>t.courses.filter((a=>f(a,t)||e[a].xp)).map((a=>((e,t,a)=>{var n;const r=e[a].fromLanguage,i=e[a].learningLanguage,l=(0,o.vI)(r,t.zhTw);return{courseId:a,fromLanguageId:r,isCurrent:f(a,t),learningLanguageId:i,learningLanguageName:null===(n=s[l])||void 0===n?void 0:n[i]}})(e,t,a)))},95351:(e,t,a)=>{"use strict";a.d(t,{K:()=>i});var s=a(23275),n=a(11811);const r={[n.FF.GlobalPractice]:{maxLength:16,minLength:10,nthSessionStart:4,requiredSessionEnds:2}},i=({currentCourseHistory:e,levelData:t,sessionType:a,timestamp:i})=>{if(void 0===e)return;const{globalPracticeSessionEnds:o,globalPracticeSessionStarts:l,mistakeHistory:c}=e;if(t&&(0,s.$)(t.level)){const e=c.filter((e=>{var a;return t.level.id===(null===(a=e.additionalData)||void 0===a?void 0:a.levelId)})).map((e=>e.value.generatorIdentifier)).slice(0,10);return e.length>=0?e:void 0}if(a===n.FF.GlobalPractice){if(void 0===i)throw Error("timestamp should not be undefined for Global Practice SessionType");const e=c.filter((e=>i<e.expirationTimestamp)).map((e=>e.value)),t=r[a];return l%t.nthSessionStart==0&&o>=t.requiredSessionEnds&&e.length>=t.minLength?e.map((e=>e.generatorIdentifier)).slice(0,t.maxLength):void 0}}},17135:(e,t,a)=>{"use strict";a.d(t,{ee:()=>E,PG:()=>S,wD:()=>y,rE:()=>I,Mb:()=>C,zq:()=>T,Nf:()=>w,Xx:()=>k,v4:()=>$,g8:()=>x,NP:()=>G,zM:()=>N,M:()=>H,zK:()=>c,cz:()=>o,C$:()=>i,i_:()=>v,Qe:()=>_,zO:()=>O,Ux:()=>R,QB:()=>L,$$:()=>ie,ji:()=>Z,t8:()=>se,Ij:()=>X,dz:()=>te,zj:()=>ae,Ml:()=>A,Zo:()=>P,RF:()=>D,fv:()=>K,L3:()=>J,mm:()=>q,J8:()=>ne,Z2:()=>Q,oE:()=>oe,Zm:()=>Y,F:()=>h,kJ:()=>m,Ko:()=>ee,T6:()=>W,HR:()=>M,pQ:()=>j,VV:()=>B,vw:()=>f,WJ:()=>re,pY:()=>U,bC:()=>z,zk:()=>V,Gz:()=>F,iN:()=>u,$I:()=>l,Rw:()=>p});var s=a(76578),n=a(51158),r=a(80254);const i=e=>e.toLocaleDateString(void 0,{month:"long",year:"numeric"}),o=e=>{const t=e.getFullYear().toString();let a=(e.getMonth()+1).toString(),s=e.getDate().toString();return a.length<2&&(a=`0${a}`),s.length<2&&(s=`0${s}`),[t,a,s].join("-")},l=e=>{const[t,a,s]=e.split("-");return new Date(parseInt(t,10),parseInt(a,10)-1,parseInt(s,10))},c=e=>new Date(1e3*e).toISOString().slice(0,10),d=[["s",1e3],["m",6e4],["h",36e5],["d",864e5]],u=e=>{var t;if(e.includes(":"))return e.split(":").reverse().reduce(((e,t,a)=>e+parseInt(t,10)*d[a][1]),0);const a=e.trim().charAt(e.length-1),s=null===(t=d.find((([e])=>e===a)))||void 0===t?void 0:t[1];return void 0===s?NaN:parseInt(e,10)*s},p=r.ZP.memoize((e=>{let t;try{t=parseInt(e,10)}catch(a){(0,n.Kp)("Invalid timezoneOffset",{data:{timezoneOffset:e}}),t=parseInt(S,10)}const a=Math.sign(t);return t=Math.abs(t),a*(Math.floor(t/100)+t%100/60)}));var g=a(8654);const m=(e,t,a)=>(K(e,t)-a+7)%7,h=(e,t,a=0)=>{const s=Y(e,t),n=m(e,t,a);return Math.ceil((s+n)/7)},_=(e,t,a=0)=>{const s=(t+1)%12,n=t<11?e:e+1,r=(t-1+12)%12,i=t>0?e:e-1,o=Y(e,t),l=Y(i,r),c=m(e,t,a),d=[],u=Math.ceil((o+c)/7);for(let a=0;a<u;a++){const u=[];for(let d=0;d<7;d++){const p=7*a+d-c,g=p<0?r:p>=o?s:t,m=(p<0?l+p:p%o)+1,h=g===r?i:g===s?n:e;u.push(ie(h,g,m))}d.push(u)}return d},v=({month:e,year:t})=>(0,g.T$)(new Date(t,e),{month:"long",year:"numeric"}),f=e=>{const t=new Date,a=7*e,s=(t.getDay()-(0,g.k8)()+7)%7,n=new Date(t.setDate(t.getDate()-s-a)),r=new Date(t.setDate(t.getDate()+6));return`${(0,g.T$)(n)} - ${(0,g.T$)(r)}`},b="America/New_York",S="-500",y=2147483647,E=7,I=1440,k=3600,w=86400,T=36e5,C=864e5,R=()=>new Date,L=e=>new Date(e),O=e=>new Date(1e3*e),P=()=>Math.floor(Date.now()/1e3),A=()=>Math.floor(Date.now()/T),D=e=>Math.floor(Date.now()/1e3)-te(e),x=e=>Math.floor(e.getTime()/1e3),N=(e,t="000")=>new Date(1e3*e+36e5*p(t)),F=e=>new Date(e),M=e=>Date.now()+1e3*e,U=e=>Date.now()>=e,H=(e,t)=>(t-1e3*e)/C,j=()=>(new Date).getTimezoneOffset(),G=()=>{try{return Intl.DateTimeFormat().resolvedOptions().timeZone||((0,n.Kp)("Got empty time zone from browser API",{once:!0,sample:.1}),b)}catch(e){(0,n.Kp)("Failed to detect time zone",{ex:e,once:!0})}return b},B=e=>(void 0===e?new Date:new Date(e.getTime())).setUTCHours(0,0,0,0),V=e=>e.toDateString()===R().toDateString(),z=(e,t)=>{const a=new Date;return a.setDate(a.getDate()+t),e.toDateString()===a.toDateString()},Z=(e=S)=>N(Date.now()/1e3,e).getUTCDay(),$=(e,t)=>{const a=new Date(e.setDate(e.getDate()+t));return B(a)/1e3},W=()=>{const e=new Date;return e.setHours(0,0,0,0),e},q=()=>{const e=new Date;return e.setDate(e.getDate()+1),e.setHours(0,0,0,0)},Q=()=>{const e=new Date;return e.setDate(1),e.setHours(0,0,0,0),e.setMonth(e.getMonth()+1),e},Y=(e,t)=>new Date(e,t+1,0).getDate(),K=(e,t)=>new Date(e,t).getDay(),J=(e=S)=>{const t=Math.floor(23-R().getUTCHours()-p(e));return(0,s.vN)(t,24)},X=e=>{const t=N(e);return Y(t.getUTCFullYear(),t.getUTCMonth())-t.getUTCDate()},ee=(e=S)=>{const t=R(),a=3600*(t.getUTCHours()+p(e))+60*t.getUTCMinutes()+t.getUTCSeconds();return(0,s.vN)(a,w)},te=e=>{const{days:t=0,hours:a=0,minutes:s=0,seconds:n=0}=e;return t*w+a*k+60*s+n},ae=e=>{if(e<0)throw RangeError("The argument must be greater than or equal to 0.");const t=e/1e3,a=t/60,s=a/60,n=s/24,r=Math.floor(n),i=24*r,o=Math.floor(s-i),l=60*(i+o),c=Math.floor(a-l),d=60*(l+c);return{days:r,hours:o,hoursTotal:o+24*r,minutes:c,seconds:Math.floor(t-d)}},se=(e,t,a="floor")=>{const s=new Date(e),n=new Date(t),r=Date.UTC(s.getFullYear(),s.getMonth(),s.getDate()),i=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate());switch(a){case"round":return Math.round((i-r)/C);case"ceil":return Math.ceil((i-r)/C);default:return Math.floor((i-r)/C)}},ne=(e,t)=>{const a=12*e.getFullYear()+e.getMonth();return 12*t.getFullYear()+t.getMonth()-a},re=(e,t)=>{const a=7*e,s=(R().getDay()-t+7)%7;return $(R(),0-s-a)},ie=(...e)=>{const t=e.indexOf(void 0);return new Date(...e.slice(0,-1===t?e.length:t))},oe=({currentTime:e,targetHour:t,targetWeekday:a})=>{const s=new Date(e),n=s.getUTCDay();let r=0;return n===a?s.getUTCHours()>=t&&(r=E):r=n>a?E-n+a:a-n,s.setUTCDate(s.getUTCDate()+r),s.setUTCHours(t,0,0,0),s.getTime()}},63301:(e,t,a)=>{"use strict";a.d(t,{vU:()=>_,tc:()=>p,Vl:()=>C,R:()=>k,ky:()=>R,nn:()=>S,pL:()=>I,gQ:()=>L,Au:()=>w,oj:()=>y,NY:()=>E,Sz:()=>P,Wi:()=>d});var s=a(99369),n=a(50498),r=a(53229),i=a(11908),o=a(18804),l=a(27378),c=a(1398);let d;const u=(0,c.Z)((()=>a.e(8801).then(a.bind(a,97464)).then((e=>({default:e.ReactQueryDevtools}))))),p=()=>{const[e,t]=l.useReducer((e=>!e),!1);return l.useEffect((()=>(d=t,()=>{d===t&&(d=void 0)})),[]),e?l.createElement(l.Suspense,{fallback:null},l.createElement(u,{initialIsOpen:!0})):null};var g=a(28818);let m;const h=(0,c.Z)((()=>a.e(2343).then(a.bind(a,12343)).then((e=>({default:e.DevTools}))))),_=()=>{const[e,t]=l.useReducer((e=>!e),!1);l.useEffect((()=>(m=t,()=>{m===t&&(m=void 0)})),[]);const a=(0,g.oR)();return e?l.createElement(l.Suspense,{fallback:null},l.createElement(h,{isInitialOpen:!0,store:a})):null};let v,f=!1,b=!1;const S=()=>{var e;return null!==(e=null==v?void 0:v())&&void 0!==e?e:0},y=()=>/^(next-1|preview)\./.test(window.location.host),E=()=>/^next-\d+\./.test(window.location.host),I=()=>{const e=/^next-(\d+)\./.exec(window.location.host);return e?parseInt(e[1],10):void 0},k=()=>{b||(b=!0,console.log("Enabled debug mode"),A())},w=()=>E()||b,T=()=>Object.assign(Object.assign(Object.assign({},(0,r.vl)((0,i.rV)(i.Qt.DebugFlags))),(0,r.vl)((0,i.rV)(i.Qt.BrowserSessionDebugFlags,{useSessionStorage:!0}))),(0,r.vl)(window.location.search)),C=()=>Object.keys(T()).length>0,R=e=>w()?T()[e]:void 0,L=e=>void 0!==R(e),O=e=>void 0!==e&&""!==e&&"false"!==e,P=(e,t)=>{var a;if(!w())throw Error("Tried to set a debug flag with debug mode disabled.");const n=null!==(a=(0,i.rV)(i.Qt.BrowserSessionDebugFlags,{useSessionStorage:!0}))&&void 0!==a?a:{};if(O(t)?n[e]===t:!(e in n))return;const r=O(t)?(0,s.set)(n,e,t):(0,s.without)(n,e);(0,i.LS)(i.Qt.BrowserSessionDebugFlags,r,{useSessionStorage:!0}),console.log(`Set debugFlag ${e} to ${t}`)},A=()=>{f||((async()=>{const[e,t]=await Promise.all([a.e(1711).then(a.bind(a,23339)),a.e(1711).then(a.bind(a,4485))]);e.checkCourseData(),v=t.getDebugOffset})(),D(),f=!0)},D=async()=>{let e;await(0,n._v)(1),(0,o.A5)({timestamp:Date.now(),type:"debug/PAGE_LOAD"});const t=()=>{var a,s;Date.now()>(null!==(s=null===(a=(0,o.qg)())||void 0===a?void 0:a.debug.pageLoadTime)&&void 0!==s?s:Date.now())+864e5?(0,o.A5)({type:"debug/ADD_UNIQUE_DEBUG_WARNING",warning:{type:"stale-page"}}):e=window.setTimeout(t,1e4)};document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState?window.clearTimeout(e):e=window.setTimeout(t,600)})),t()};w()&&A()},6962:(e,t,a)=>{"use strict";a.d(t,{I:()=>O,JW:()=>L,Jp:()=>C,Jy:()=>P,XN:()=>A});var s=a(51827),n=a(17135),r=a(63301),i=a(81149),o=a(94171),l=a(41831),c=a(1),d=a(68903),u=a(93746),p=a(87471),g=a(23275),m=a(89065),h=a(95975),_=a(90110),v=a(51158),f=a(12125),b=a(51551),S=a(6661),y=a(37111),E=a(11811),I=a(41631),k=a(81621),w=a(20028),T=a(97106);const C=(0,d.p)(["friendsQuestGift","friendsQuestReward","streakExplainer"]),R=["immersivePlus","plusPromoInterstitial","plusPromoCarousel","finalLevelPromotion","practiceHubPromo","podcastAd"],L=(e,t)=>{if((0,r.gQ)("debugSlides"))return e;const a=e.find((e=>"finalLevelFailed"===e.type));if(a)return[a];t.sessionParams.isFinalLevel&&!t.session.failed&&(e=e.filter((e=>"achievementUnlocked"===e.type||"chestLingotsReward"===e.type||"dailyQuestComplete"===e.type||"dailyQuestFirst"===e.type||"dailyQuestHalfway"===e.type||"dailyQuestReward"===e.type||"finalLevelLesson"===e.type||"finalLevelPartialXp"===e.type||"levelUp"===e.type||"monthlyChallengeComplete"===e.type||"monthlyGoal"===e.type||"nativeAd"===e.type||"sessionComplete"===e.type||"streakExtended"===e.type))),e.find((e=>"checkpointComplete"===e.type&&"unitTestFailed"===e.view||"checkpointComplete"===e.type&&"sectionTestFailed"===e.view||"placementTestResult"===e.type&&"startFromBasics"===e.view))&&(e=e.filter((e=>"chestLingotsReward"!==e.type&&"sessionComplete"!==e.type&&"streakExtended"!==e.type&&"streakFreezeChestReward"!==e.type))),e.some((e=>"streakFreezeChestReward"===e.type))&&(e=e.filter((e=>"chestLingotsReward"!==e.type))),e.some((e=>"streakFreezeGift"===e.type))&&(e=e.filter((e=>"streakWager"!==e.type)));const s=R.find((t=>e.some((e=>e.type===t))));return e=e.filter((e=>e.type===s||!R.includes(e.type))),s&&"podcastAd"!==s&&(e=e.filter((e=>"nativeAd"!==e.type))),e.some((e=>"streakSocietyFreezes"===e.type))&&(e=e.filter((e=>"milestoneStreakFreeze"!==e.type))),e},O=e=>e.flatMap((e=>"attachedSlides"in e?[e,...e.attachedSlides]:[e])),P=({attachedSlides:e,currentIndex:t,playerSlideData:a})=>{var s;if(0===e.length)return!0;for(let n=0;n<e.length;n++)if(e[n].type!==(null===(s=a[t+n+1])||void 0===s?void 0:s.type))return(0,v.Kp)("Expected attached slides to follow main slide, but found a mismatch",{data:{expected:e[n],found:a[n+t+1]}}),!1;return!0},A=({availableQuests:e,course:t,goals:a,hasXpBoost:d,isDesktop:C,items:R,leaderboards:L,leaderboardPositionState:O,levelData:P,monthlyChallengeThreshold:A,path:D,player:x,sectionType:N,streakExplainerState:F,streakNudgeState:M,unlockedAchievementsV3:U,user:H,rewardedHearts:j})=>{var G,B,V,z,Z,$,W,q,Q,Y,K,J,X,ee,te,ae,se,ne,re,ie,oe,le,ce,de,ue,pe,ge,me;const{receivedGifts:he,session:_e,sessionParams:ve}=x,{learnedSkills:fe,sectionIndex:be,type:Se,xpGain:ye}=_e,{streakData:{currentStreak:Ee},timezoneOffset:Ie,xpGains:ke}=H,we=[],Te=(0,c.GQ)(H),[Ce,Re]=(()=>{const e=(0,r.ky)("debugSlides");return void 0===e||["0","false"].includes(e)?[!1,void 0]:["1","true"].includes(e)?[!0,void 0]:[!1,e.split(",")]})(),Le=Ce||Re;if(Le&&(we.push({type:"finalLevelFailed"}),we.push({type:"finalLevelPartialXp"})),x.sessionParams.isFinalLevel&&!x.completedWithHeartsRemaining)return[{type:"finalLevelPartialXp"}];const Oe=(0,T.R7)(Ie,ke),Pe=Oe[6],Ae=ye>0&&ye===Pe,De=(0,T.Ig)(x,Pe,d),xe=Se===E.FF.PlacementTest&&0===fe.length,Ne=Se===E.FF.PlacementTest&&fe.length>0,Fe=Se===E.FF.SectionTest,Me=Se===E.FF.UnitTest,Ue=Se===E.FF.UnitReview&&N!==I.t.DAILY_REFRESH,He=D[D.length-1],je=D[D.length-2],Ge=(He.levels.some((e=>void 0!==e.dailyRefreshInfo))?je.levels[je.levels.length-1].id:He.levels[He.levels.length-1].id)===(null==P?void 0:P.level.id)&&Se===E.FF.UnitReview;(Le||Ge&&"experiment"===(0,i.j6)("path_web_course_complete_slides",void 0))&&(we.push({type:"courseCompletionTrophy"}),we.push({type:"dailyRefreshOnboarding"})),(xe||Le)&&we.push({languageName:(0,u.vY)(t.learningLanguage),type:"placementTestResult",view:"startFromBasics"}),we.push({type:"sessionComplete",xpGoalSessionProgress:De});const Be=(0,n.Ux)(),Ve=(0,T.uD)(Be,H.xpSummaries),ze=(0,S.cA)(Be,Ve,!0),Ze=(0,S.gm)(Be,Ve),$e=null!==(G=null==Ee?void 0:Ee.length)&&void 0!==G?G:0,We=(0,k.Nr)(Oe,$e);if(Le||Ae){const e=!0===(null==Re?void 0:Re.includes("streakExplainer"))||(0,S.Yv)($e,null==F?void 0:F.count,null==F?void 0:F.entryPointLastShown);we.push({attachedSlides:e?[{isPrimaryCta:(0,k.EO)(H)||(0,k.i5)(H)<=30,type:"streakExplainer"}]:[],daysInCurrentStreak:We,isPerfectStreakWeekLost:Ze,perfectWeekDay:ze,template:(0,S.lw)($e),type:"streakExtended",xpPerDay:Oe})}if((Le||(0,S.NE)(Ae,$e,null==M?void 0:M.count,null==M?void 0:M.resurrectionTimestamp,H.lastResurrectionTimestamp))&&we.push({daysInCurrentStreak:We,isPerfectStreakWeekLost:Ze,perfectWeekDay:ze,template:(0,S.eU)($e),type:"streakNudge",xpPerDay:Oe}),(Le||1===$e&&Ae)&&we.push({preselectedStreakGoal:14,selectedStreakGoal:14,type:"earlyStreakMilestonePrompt"}),Ne||Le){if(void 0===(null==P?void 0:P.unitIndex)){const e=null!==(B=null==D?void 0:D.length)&&void 0!==B?B:0,a=null!==(Z=null===(z=null===(V=null==D?void 0:D[e])||void 0===V?void 0:V.levels)||void 0===z?void 0:z.length)&&void 0!==Z?Z:0;throw(0,v.vU)("No active unit after completing v2 placement test",{data:{debugSlides:Le,languageName:(0,u.vY)(t.learningLanguage),pathDefined:!!D,pathFirstPebbleState:null===(W=null===($=null==D?void 0:D[0])||void 0===$?void 0:$.levels)||void 0===W?void 0:W[0].state,pathLastPebbleState:null===(Y=null===(Q=null===(q=null==D?void 0:D[e])||void 0===q?void 0:q.levels)||void 0===Q?void 0:Q[a])||void 0===Y?void 0:Y.state,pathLength:e}}),Error("No active unit after completing v2 placement test")}we.push({languageName:(0,u.vY)(t.learningLanguage),type:"placementTestResult",unlockedUnitIndex:P.unitIndex,unlockedUnitNumber:P.unitNumber,view:"testComplete"})}if(Fe||Le)if(Le)we.push({sectionNumber:0,sectionType:I.t.ROOKIE,type:"checkpointComplete",unitIndex:0,unitNumber:10,view:"sectionTestFailed"});else{if(void 0===be)throw Error("sectionIndex undefined after section test complete.");_e.failed&&we.push({sectionNumber:be+2,sectionType:m.uu[be+1],type:"checkpointComplete",unitIndex:null!==(K=null==P?void 0:P.unitIndex)&&void 0!==K?K:0,unitNumber:null!==(J=null==P?void 0:P.unitNumber)&&void 0!==J?J:0,view:"sectionTestFailed"})}if(Me||Le)if(Le)we.push({type:"checkpointComplete",unitIndex:0,unitNumber:10,view:"unitTestPassed"}),we.push({type:"checkpointComplete",unitIndex:0,unitNumber:10,view:"unitTestFailed"});else{if(void 0===(null==P?void 0:P.unitNumber))throw Error("unitNumber undefined after unit test complete.");we.push({type:"checkpointComplete",unitIndex:null!==(X=null==P?void 0:P.unitIndex)&&void 0!==X?X:0,unitNumber:P.unitNumber,view:_e.failed?"unitTestFailed":"unitTestPassed"})}if(Ue||Le){if(void 0===(null==P?void 0:P.unitIndex)&&!Le)throw Error("unitIndex undefined after unit review complete.");we.push({type:"checkpointComplete",unitIndex:null!==(ee=null==P?void 0:P.unitIndex)&&void 0!==ee?ee:0,unitNumber:null!==(te=null==P?void 0:P.unitNumber)&&void 0!==te?te:1,view:"unitReview"})}if(Le?(we.push({type:"milestoneStreakFreeze"}),we.push({quantity:b.SG,type:"streakFreezeGift"})):he.streakFreeze&&(he.fromMilestone?we.push({type:"milestoneStreakFreeze"}):we.push({quantity:he.quantity,type:"streakFreezeGift"})),(0,b.PR)(R,H,ye)||Le){const e=null!==(ae=R.shop.misc.rupee_wager)&&void 0!==ae?ae:{currencyType:"XLG",id:"rupee_wager",price:5,type:"misc"},t=null!==(se=R.shop.misc.gem_wager)&&void 0!==se?se:{currencyType:"XGM",id:"gem_wager",price:50,type:"misc"};we.push({item:(0,c.GQ)(H)?t:e,type:"streakWager"})}if(Se===E.FF.Legendary&&"legendary"===(null==P?void 0:P.level.state)||Le){let e=null==P?void 0:P.unitNumber;if(void 0===e){if(!Le)throw Error("Missing unit index for Legendary levelUp slide.");e=0}we.push({type:"levelUp",unitNumber:e})}if([E.FF.LegendaryLevel,E.FF.LegendaryLexemePractice].includes(Se)&&"legendary"===(null==P?void 0:P.level.state)||Le){let e=null==P?void 0:P.unitIndex,t=null==P?void 0:P.unitNumber;if(void 0===e||void 0===t){if(!Le)throw Error("Missing unit index for legendary earned slide.");e=0,t=0}we.push({type:"finalLevelLesson",unitIndex:e,unitNumber:t})}null==U||U.forEach((e=>we.push({achievement:e,type:"achievementUnlocked"}))),!(null==U?void 0:U.length)&&Le&&we.push({achievement:{count:1,name:"champion",rewards:[10,10],shouldShowUnlock:!0,tier:1,tierCounts:[5,5]},type:"achievementUnlocked"});const qe=H.sessionCount-1;(Le||(0,s.UG)({isDesktop:C,items:R,user:H}))&&we.push({type:"immersivePlus"}),(Le||(0,s.as)({isDesktop:C,items:R,user:H}))&&we.push({type:"plusPromoCarousel"}),(Le||(0,s.XT)({isDesktop:C,items:R,user:H}))&&we.push({type:"plusPromoInterstitial"}),(Le||(0,s.kN)({items:R,path:D,user:H}))&&we.push({type:"practiceHubPromo"}),(Le||(0,s.qc)({levelData:P}))&&we.push({type:"finalLevelPromotion"});const Qe=D?null===(ne=(0,g.Bm)(D))||void 0===ne?void 0:ne.unitIndex:void 0;if((Le||(0,h.S)(Qe,qe,H))&&we.push({type:"podcastAd"}),((0,w.pN)(H)||Le)&&we.push({type:"createProfile"}),C&&null!==(0,s.Z7)(H,s.ZD.SessionEnd)&&we.push({type:"nativeAd"}),(Le||_e.type===E.FF.MistakesReview&&0===(null===(re=H.mistakeCountInfo)||void 0===re?void 0:re.mistakeCount))&&we.push({type:"mistakesInboxEmpty"}),Le){const e={avatarUrl:"https://images-static.duolingo.cn/avatars/415711021/KR7snIZQms"},t=20,a=8,s=20;we.push({classroomLeaderboard:{alias:"classroom",classroomId:0,classroomName:"Test Classroom",learningLanguageId:"es",socialDisabledUsers:[],state:{active:{cohort:{creationDate:0,id:"id",rankings:[...new Array(t)].map(((s,n)=>Object.assign(Object.assign({},e),{displayName:`Tester ${n+1}`,hasRecentActivity:!0,reaction:"NONE",score:t-n,userId:a-1===n?H.id:n}))),tier:0},complete:!1,contest:{contestEnd:1e4,contestStart:0,contestState:"ACTIVE",registrationEnd:50,registrationStart:0,registrationState:"CLOSED",ruleset:{cohortSize:t,cohortType:"RANDOM",numDemoted:[],numLosers:0,numPromoted:[],numWinners:0,rewards:[],scoreType:"XP"}},score:5,userId:H.id},tier:0}},totalSessionXpGain:s,type:"schoolsClassroomLeaderboardMoveUp"})}else L.classroomLeaderboard&&(0,f.S2)(H.id,L.classroomLeaderboard.state,null!==(ie=_e.xpPromised)&&void 0!==ie?ie:ye)&&we.push({classroomLeaderboard:L.classroomLeaderboard,totalSessionXpGain:null!==(oe=_e.xpPromised)&&void 0!==oe?oe:ye,type:"schoolsClassroomLeaderboardMoveUp"});const Ye=null===(le=L.leagues)||void 0===le?void 0:le.state;if(Le)we.push({lastPositionSeen:29,lastScoreSeen:0,type:"leaderboardTopThree"}),we.push({lastPositionSeen:29,lastScoreSeen:0,type:"leaderboardPromoZone"}),we.push({lastPositionSeen:29,lastScoreSeen:0,type:"leaderboardDemoZone"}),we.push({lastPositionSeen:29,lastScoreSeen:0,type:"leaderboardRankIncreaseLarge"}),we.push({lastPositionSeen:29,lastScoreSeen:0,type:"leaderboardRankIncreaseSmall"}),we.push({lastPositionSeen:void 0,lastScoreSeen:void 0,type:"leaderboardJoin"}),we.push({lastPositionSeen:void 0,lastScoreSeen:void 0,type:"leaderboardMoveUpPrompt"});else if((null==Ye?void 0:Ye.active)&&(null===(ce=Ye.leaderboard)||void 0===ce?void 0:ce.activeContest)&&Ye.tier>=1&&!H.classroomLeaderboardsEnabled){const e=(0,p.c$)(Ye,O,L.sessionEndData);e&&we.push(e)}if(Le){const t=["DAILY","CORE","HARD"],s={availableQuests:e,difficulty:a.difficulty,numQuestsCompleted:0,oldProgress:a.progress};we.push(Object.assign(Object.assign({},s),{numQuestsCompleted:1,type:"dailyQuestComplete"})),we.push(Object.assign(Object.assign({},s),{type:"dailyQuestFirst"})),we.push(Object.assign(Object.assign({},s),{type:"dailyQuestHalfway"})),we.push({dailyQuestRewards:[{},{},{}].map(((e,a)=>({reward:a%2==0?{amount:a+1,consumed:!1,currency:"LINGOTS",id:"5",rewardType:"CHEST"}:{consumed:!1,id:"5",itemId:"STREAK_FREEZE",rewardType:"CHEST"},slotType:t[a]}))),type:"dailyQuestReward"}),we.push({type:"streakFreezeChestReward"});const n=(0,_.gW)(H);we.push({new_rupees:0,reward:n,type:"chestLingotsReward"})}else{if(a.progress&&(null===(de=a.progressUpdate)||void 0===de?void 0:de.updates)){const t=a.progressUpdate.updates,s=(0,l.gl)({availableQuests:e,difficulty:a.difficulty,oldProgress:a.progress,updatedProgress:t});s&&we.push(s)}if(a.pendingRewards.length)if(1===e.length)if((0,_.Se)(a.pendingRewards[0].reward)){const e=a.pendingRewards[0].reward;we.push({new_rupees:e.amount,reward:e,type:"chestLingotsReward"})}else we.push({type:"streakFreezeChestReward"});else we.push({dailyQuestRewards:a.pendingRewards,type:"dailyQuestReward"})}const Ke=a.progress&&a.monthlyQuest?a.progress[a.monthlyQuest]:void 0,Je=Ke+a.monthlyChallengeProgressUpdate;var Xe,et;if(Le?(we.push({oldProgress:27,type:"monthlyChallengeComplete"}),we.push({newProgress:15,oldProgress:12,type:"monthlyGoal"})):Je>=A&&Ke<A?we.push({oldProgress:Ke,type:"monthlyChallengeComplete"}):Je!==Ke&&Ke<A&&(Xe=Ke,et=Je,Math.floor(et/5)>Math.floor(Xe/5))&&we.push({newProgress:Je,oldProgress:Ke,type:"monthlyGoal"}),(Le||Te&&j>0)&&we.push({type:"heartRefill"}),Le)we.push({rewardType:"xpBoost",type:"levelUpChest"});else if((Se===E.FF.LevelReview||Se===E.FF.LexemePractice&&"practice_level_review"===ve.lexemePracticeType)&&(0,c.GQ)(H)&&"experiment"===(0,i.j6)("gweb_capstone_xp_boost_reward_v2",void 0)){const e=null===(ue=(0,_.f7)(H))||void 0===ue?void 0:ue.rewards[0],t=a.pendingRewards.some((({reward:e})=>(0,_.be)(e))),s=d||t;we.push({currencyReward:s?e:void 0,rewardType:s?"GEMS"===e.currency?"gems":"lingots":"xpBoost",type:"levelUpChest"})}if(Le)we.push({streak:$e,type:"streakSociety"}),we.push({type:"streakSocietyWelcomeChest"}),we.push({nextMilestone:200,type:"streakSocietyFreezes"}),we.push({type:"streakSocietyVip"}),we.push({type:"streakSocietyVipUpdate",years:2});else{if(void 0!==R.inventory.society_streak_freeze_refill&&(void 0===R.inventory.society_streak_freeze||0===(null===(pe=R.inventory.society_streak_freeze)||void 0===pe?void 0:pe.quantity))){const e=(Math.floor($e/y.mx)+1)*y.mx;we.push({nextMilestone:e,type:"streakSocietyFreezes"})}if(Ae&&($e>=y.jL[0]||$e>=y.gt&&"experiment"===(0,i.j6)("gweb_start_ss_earlier",void 0))&&we.push({streak:$e,type:"streakSociety"}),Ae&&$e===y.fI&&we.push({type:"streakSocietyWelcomeChest"}),Ae&&$e>=y.ME&&$e%y.ME==0){const e=Math.floor($e/y.ME);e>=2?we.push({type:"streakSocietyVipUpdate",years:e}):we.push({type:"streakSocietyVip"})}}const tt=null===(ge=a.friendsQuest)||void 0===ge?void 0:ge.details;if(Le)if(tt){const{friendProgress:e,metric:t,threshold:a,totalProgress:s,ownProgress:n}=tt,r={friendUser:e,metric:t,threshold:a,totalProgress:s,userProgress:n};we.push(Object.assign({attachedSlides:[{friendUser:e,type:"friendsQuestGift"}],type:"friendsQuestProgress"},r)),we.push(Object.assign({attachedSlides:[{type:"friendsQuestReward"}],type:"friendsQuestComplete"},r))}else{const e={friendUser:o.Dw,metric:"XP",threshold:500};we.push(Object.assign({attachedSlides:[{friendUser:o.Dw,type:"friendsQuestGift"}],totalProgress:350,type:"friendsQuestProgress",userProgress:200},e)),we.push(Object.assign({attachedSlides:[{type:"friendsQuestReward"}],totalProgress:500,type:"friendsQuestComplete",userProgress:350},e))}else if(void 0!==tt){const{metric:e,totalProgress:t,threshold:s}=tt,n=a.friendsQuest.lastSeenTotalProgress;if(t>=s&&(null!=n?n:0)<s&&!tt.acknowledged&&"experiment"===(0,i.j6)("gweb_friends_quests_main_v2","session_end"))we.push({attachedSlides:[{type:"friendsQuestReward"}],friendUser:tt.friendProgress,metric:e,threshold:s,totalProgress:t,type:"friendsQuestComplete",userProgress:tt.ownProgress});else if((0,o.JD)(Date.now())&&t<s&&t>=s/2&&(null!=n?n:0)<s/2&&"experiment"===(0,i.j6)("gweb_friends_quests_main_v2","session_end")){const n=(Te?H.gemsConfig.gems:H.lingots)>=(Te?o.py:o.PD),r=Date.now()-(null!==(me=a.friendsQuest.lastSentGiftTimestamp)&&void 0!==me?me:0)>=o.RL;we.push({attachedSlides:n&&r&&["experiment","experiment_copy"].includes((0,i.j6)("connect_friends_quests_gifting_2",void 0))?[{friendUser:tt.friendProgress,type:"friendsQuestGift"}]:[],friendUser:tt.friendProgress,metric:e,threshold:s,totalProgress:t,type:"friendsQuestProgress",userProgress:tt.ownProgress})}}if(void 0!==Re){const e=Re.slice(),t=we.filter((t=>{if(!Re.includes(t.type))return!1;const a=e.indexOf(t.type);return a>-1&&e.splice(a,1),!0}));return e.length&&console.warn(`1 or more invalid debugSlides: "${e.join(",")}"`),t}return we}},51748:(e,t,a)=>{"use strict";var s;a.d(t,{w:()=>s}),function(e){e.AfterThirdMistakeCheckpointTest="after_third_mistake_checkpoint_test",e.BigRightStreak="big_right_streak",e.BigRightStreakCheckpointTest="big_right_streak_checkpoint_test",e.BigRightStreakPlacement="big_right_streak_placement",e.CapstoneHardExercises="capstone_hard_exercises",e.FirstCorrectCheckpointTest="first_correct_checkpoint_test",e.FirstWrongCheckpointTest="first_wrong_checkpoint_test",e.FourQuestionsLeftCheckpointTest="four_questions_left_checkpoint_test",e.MediumRightStreakCheckpointTest="medium_right_streak_checkpoint_test",e.MidPointCheckpointTest="mid_point_checkpoint_test",e.MistakesReview="mistakes_review",e.SmallRightStreak="small_right_streak",e.SmallRightStreakPlacement="small_right_streak_placement",e.WrongStreak="wrong_streak",e.WrongStreakPlacement="wrong_streak_placement"}(s||(s={}))},37971:(e,t,a)=>{"use strict";var s;a.d(t,{c:()=>s}),function(e){e.Blaming="BLAMING",e.CapstoneReviewSplash="CAPSTONE_REVIEW_SPLASH",e.CharacterWriteRetryBlaming="CHARACTER_WRITE_RETRY_BLAMING",e.CoachDuo="COACH_DUO",e.CoachDuoSplash="COACH_DUO_SPLASH",e.CoachDuoSliding="COACH_DUO_SLIDING",e.CoachDuoSubmitting="COACH_DUO_SUBMITTING",e.EndCarousel="END_CAROUSEL",e.FinalLevelDuo="FINAL_LEVEL_DUO",e.Grading="GRADING",e.GrammarSkillSplash="GRAMMAR_SKILL_SPLASH",e.Guessing="GUESSING",e.HardModeDuo="HARD_MODE_DUO",e.HardModeDuoSliding="HARD_MODE_DUO_SLIDING",e.LegendaryDuo="LEGENDARY_DUO",e.MistakesReviewDuo="MISTAKES_REVIEW_DUO",e.PartialXpDuo="PARTIAL_XP_DUO",e.PartialXpDuoSliding="PARTIAL_XP_DUO_SLIDING",e.PlacementSplash="PLACEMENT_SPLASH",e.PracticeHubDuo="PRACTICE_HUB_DUO",e.SectionTestSplash="SECTION_TEST_SPLASH",e.Showing="SHOWING",e.Sliding="SLIDING",e.SmartTip="SMART_TIP",e.SmartTipBlaming="SMART_TIP_BLAMING",e.SmartTipSliding="SMART_TIP_SLIDING",e.SpeakRetryBlaming="SPEAK_RETRY_BLAMING",e.Submitting="SUBMITTING",e.UnitReviewSplash="UNIT_REVIEW_SPLASH",e.UnitTestSplash="UNIT_TEST_SPLASH",e.VisiblePersonalizationSplash="VISIBLE_PERSONALIZATION_SPLASH"}(s||(s={}))},94786:(e,t,a)=>{"use strict";var s;a.d(t,{Q:()=>s}),function(e){e.AlphabetLesson="alphabet_lesson",e.DuoRadio="duo_radio",e.FinalLevelLesson="final_level_lesson",e.GlobalPractice="practice",e.Legendary="legendary",e.LegendaryLevel="legendary_level",e.LegendaryLexemePractice="legendary_lexeme_practice",e.LegendaryUnitPractice="legendary_unit_practice",e.Lesson="lesson",e.LevelReview="level_review",e.LexemePractice="lexeme_practice",e.LexemeSkillLevelPractice="lexeme_skill_level_practice",e.ListeningPractice="listen_up",e.MistakesReview="mistakes_review",e.PlacementTest="placement_test",e.SectionTest="section_test",e.SpeakingPractice="perfect_pronounciation",e.SpecifiedMatchPractice="specified_match_practice",e.Stories="stories",e.TargetPractice="target_practice",e.UnitPractice="unit_practice",e.UnitReview="unit_review",e.UnitRewind="unit_rewind",e.UnitTest="unit_test"}(s||(s={}))},67173:(e,t,a)=>{"use strict";var s;a.d(t,{V:()=>s}),function(e){e.AccountNotFound="account-not-found",e.AchievementV3Slide="achievementV3-slide",e.AcquisitionSurvey="acquisitionSurvey",e.AddFamilyMember="add-family-member",e.AgeInput="age-input",e.AllowButton="allow-button",e.AppStoreButtons="app-store-buttons",e.AudioButton="audio-button",e.B2bStartButton="b2b-start-button",e.BackArrow="back-arrow",e.BigRedButton="big-red-button",e.Blame="blame",e.BlameCorrect="blame-correct",e.BlameIncorrect="blame-incorrect",e.BlockButton="block-button",e.CancelEditFamily="cancel-edit-family",e.CcBillingInfoForm="cc-billing-info-form",e.CcBillingInfoRejected="cc-billing-info-rejected",e.CcCancelButton="cc-cancel-button",e.CcExpirationInput="cc-expiration-input",e.CcExpirationLabel="cc-expiration-label",e.CcNameInput="cc-name-input",e.CcNameLabel="cc-name-label",e.CcNumberInput="cc-number-input",e.CcNumberLabel="cc-number-label",e.CcPostalCodeInput="cc-postal-code-input",e.CcPostalCodeLabel="cc-postal-code-label",e.CcRejectedImage="cc-rejected-image",e.CcSecurityInput="cc-security-input",e.CcSecurityLabel="cc-security-label",e.CcSubmitButton="cc-submit-button",e.CcTermsConditionsLabel="cc-terms-conditions-label",e.CcTermsConditionsLink="cc-terms-conditions-link",e.Challenge="challenge",e.ChallengeChoice="challenge-choice",e.ChallengeHeader="challenge-header",e.ChallengeJudgeText="challenge-judge-text",e.ChallengeTapToken="challenge-tap-token",e.ChallengeTapTokenText="challenge-tap-token-text",e.ChallengeTextInput="challenge-text-input",e.ChallengeTranslateInput="challenge-translate-input",e.ChinesePrivacy="chinese-privacy",e.ChineseTerms="chinese-terms",e.ChoosePlanHeader="choose-plan-header",e.CloseButton="close-button",e.CloseButtonInviteFamily="close-button-invite-family",e.CloseButtonStories="close-button-stories",e.ContinueWithFacebook="continue-with-facebook",e.ContinueWithGoogle="continue-with-google",e.CoursesLink="courses-link",e.CoursesMenu="courses-menu",e.CourseStartButton="course-start-button",e.CreateProfile="create-profile",e.CreateProfileJuicy="create-profile-juicy",e.CreateProfileLater="create-profile-later",e.DailyQuestProgressSlide="daily-quest-progress-slide",e.DailyQuestRewardSlide="daily-quest-reward-slide",e.DailyReminder="daily-reminder",e.DrawerBackdrop="drawer-backdrop",e.EditFamily="edit-family",e.EmailField="email-field",e.EmailInput="email-input",e.EnglishPrivacy="english-privacy",e.EnglishTerms="english-terms",e.FamilyMember="family-member",e.FaqLink="faq-link",e.FooterLinks="footer-links",e.ForgotPassword="forgot-password",e.ForgotPasswordThankYou="forgot-password-thank-you",e.FriendAddButton="friend-add-button",e.FriendAddedButton="friend-added-button",e.FriendEntry="friend-entry",e.FriendFollowersList="friend-followers-list",e.FriendFollowingList="friend-following-list",e.FriendUpdatesHeader="friend-updates-header",e.FullNameInput="full-name-input",e.FunboardingAccountLink="funboarding-account-link",e.FunboardingContinueButton="funboarding-continue-button",e.GetStartedTop="get-started-top",e.GlobalPractice="global-practice",e.GoalCasual="daily-goal-10",e.GoalIntense="daily-goal-50",e.GoalRegular="daily-goal-20",e.GoalSerious="daily-goal-30",e.GuidebookButton="guidebook-button",e.HaveAccount="have-account",e.HdyhauFriends="hdyhau-friendsOrFamily",e.HdyhauNews="hdyhau-newsArticleOrBlog",e.HdyhauOnline="hdyhau-onlineAds",e.HdyhauOther="hdyhau-other",e.HdyhauRadio="hdyhau-radio",e.HdyhauSearch="hdyhau-webSearch",e.HdyhauSocial="hdyhau-socialMedia",e.HdyhauTv="hdyhau-tv",e.HeartsIntroContinueButton="hearts-intro-continue-button",e.HeartsMenu="hearts-menu",e.HintPopover="hint-popover",e.HintToken="hint-token",e.Home="home",e.IntroPopover="intro-popover",e.InvalidFormField="invalid-form-field",e.LanguageCard="language-card",e.Leaderboard="leaderboard",e.LeaderboardsLocked="leaderboards-locked",e.LeaderboardsOpenButton="leaderboards-open",e.LeaderboardsPopover="leaderboards-popover",e.LearnWithPlus="learn-with-plus",e.LegendaryLeveledUpSlide="legendary-leveled-up-slide",e.LegendaryPaywallLingotsCTA="legendary-paywall-lingots-cta",e.LegendaryStartButton="legendary-start-button",e.LingotMenu="lingot-menu",e.LingotStat="lingot-stat",e.LoggedOutTopbar="logged-out-topbar",e.LoginWithFacebook="login-with-facebook",e.LoginWithGoogle="login-with-google",e.LongscrollTitle="longscroll-title",e.MilestoneStreakFreezeSlide="milestone-streak-freeze-slide",e.MobileApps="mobile-apps",e.NotificationButton="notification-button",e.NotificationDrawerNoThanksButton="notification-drawer-no-thanks-button",e.NyButton="ny-button",e.NyPromo="ny-promo",e.PasswordInput="password-input",e.PlayerNext="player-next",e.PlayerPracticeAgain="player-practice-again",e.PlayerSkip="player-skip",e.PlayerToggleKeyboard="player-toggle-keyboard",e.PlusChecklistTitle="plus-checklist-title",e.PlusCloseX="plus-close-x",e.PlusContinue="plus-continue",e.PlusNoThanks="plus-no-thanks",e.PlusOfferButton="plus-offer-button",e.PlusOfferLogo="plus-offer-logo",e.PlusPlans="plus-plans",e.PlusTimelineIcon="plus-timeline-icon",e.PlusViewAllPlans="plus-view-all-plans",e.PodcastSlide="podcast-slide",e.PracticeHubAdContinueButton="practice-hub-ad-continue-button",e.PracticeHubAdNoThanksButton="practice-hub-ad-no-thanks-button",e.PracticeHubFeatureSessionCTA="practice-hub-feature-session-cta",e.PrivacyPersonalizedAds="privacy-personalized-ads",e.PrivacyPublicProfile="privacy-public-profile",e.PriorProficiencyCard="prior-proficiency-card",e.ProfileHeaderBlockButton="profile-header-block-button",e.ProfileHeaderPopover="profile-header-popover",e.ProfileHeaderUnblockButton="profile-header-unblock-button",e.ProfileUsername="profile-username",e.PurchaseButton="purchase-button",e.PurchaseStepActive="purchase-step-active",e.QuitButton="quit-button",e.RegisterButton="register-button",e.RemoveMember="remove-member",e.Reset="reset",e.ResetPassword="reset-password",e.RewardSlide="reward-slide",e.SaveButton="save-button",e.SelectMemberCheckbox="select-member-checkbox",e.SessionCompleteSlide="session-complete-slide",e.SessionDuo="session-duo",e.SessionSplashTitle="session-splash-title",e.SettingsAccount="settings-account",e.SettingsChooseFile="settings-choose-file",e.SettingsCoach="settings-coach",e.SettingsCourses="settings-courses",e.SettingsNotifications="settings-notifications",e.SettingsPassword="settings-password",e.SettingsPrivacy="settings-privacy",e.SettingsProfilePictureLabel="settings-profile-picture-label",e.SettingsSchools="settings-schools",e.SettingsSound="settings-sound",e.SettingsSuper="settings-super",e.ShopSection="shop-section",e.SignInButton="sign-in-button",e.SignInJuicy="sign-in-juicy",e.SignUpButton="sign-up-button",e.SignUpLink="sign-up-link",e.SkillPath="skill-path",e.SkillPathLevel="skill-path-level",e.SkillPathLevelLockedButton="skill-path-level-locked-button",e.SkillPathState="skill-path-state",e.SkillPathTooltipUnitTest="skill-path-tooltip-unit-test",e.SkillPathUnit="skill-path-unit",e.SkillPathUnitTest="skill-path-unit-test",e.PathCompleteTrophy="path-complete-trophy",e.SocialPanelFacebook="social-panel-facebook",e.SocialPanelFindFriends="social-panel-find-friends",e.SocialPanelInviteFriends="social-panel-invite-friends",e.SoundSettings="sound-settings",e.StartBasics="start-basics",e.StartPlacement="start-placement",e.StoriesChoice="stories-choice",e.StoriesElement="stories-element",e.StoriesPlayerContinue="stories-player-continue",e.StoriesPlayerDone="stories-player-done",e.StoriesTextInput="stories-text-input",e.StoryStart="story-start",e.StoryStartButton="story-start-button",e.StoryTitle="story-title",e.StreakFreezeSlide="streak-freeze-slide",e.StreakGoalTitle="streak-goal-title",e.StreakMenu="streak-menu",e.StreakPanel="streak-panel",e.StreakSlide="streak-slide",e.StreakStat="streak-stat",e.StreakWagerSlide="streak-wager-slide",e.Submit="submit",e.SuperMenu="super-menu",e.SurveyBrain="brain",e.SurveyCulture="culture",e.SurveyFamily="family",e.SurveyFun="fun",e.SurveyOther="other",e.SurveySchool="school",e.SurveyTravel="travel",e.SurveyWork="work",e.TrialReminder="trial-reminder",e.UnitTestResultsSlide="unit-test-results-slide",e.UseAnotherAccount="use-another-account",e.UseAnotherCardRadio="use-another-card",e.UsernameInput="username-input",e.UserSearchEmptyState="user-search-empty-state",e.UserSearchInput="user-search-input",e.WordBank="word-bank"}(s||(s={}))},59815:(e,t,a)=>{"use strict";a.d(t,{$K:()=>n,Di:()=>i,Wp:()=>o,pY:()=>s,w:()=>r});class s extends Error{constructor(e){const t=new.target.prototype;super(e),Object.setPrototypeOf(this,t)}}class n extends s{constructor(){super("Aborted by user")}}class r extends s{}class i extends s{constructor(){super("Encountered stale data")}}const o=e=>"CSS_CHUNK_LOAD_FAILED"===e.code||"ChunkLoadError"===e.name},46435:(e,t,a)=>{"use strict";a.d(t,{RM:()=>h,Sg:()=>_,rn:()=>g,fv:()=>m});var s=a(80254);const n=e=>e.toString();class r{constructor(e={}){this.conditions=["control","experiment"],this.isActive=!1,this.isSticky=!1,this.urlModifier=r.URL_MODIFIERS.DEFAULT,Object.entries(e).forEach((([e,t])=>this[e]=t))}}r.URL_MODIFIERS={COURSE_ID:e=>{const t=e.pathname.split("/");return`${t[1]}_${t[2]}`},DEFAULT:n,FULL_ABSOLUTE_URL:n,LEXEME_ID:e=>e.pathname.split("/")[4],SUBDOMAIN_AND_PATHNAME:e=>`${e.hostname.split(".")[0]}-${e.pathname}`};const i=new r,o={conditions:["control","experiment"],contexts:[void 0]},l={connect_friends_quests_gifting_2:{conditions:["control","experiment","experiment_copy"],contexts:[void 0]},ginfra_web_disable_social_registration:o,gweb_capstone_xp_boost_reward_v2:o,gweb_diamond_tournament_dogfooding:o,gweb_extend_streak_daily_quest:o,gweb_friends_quests_main_v2:Object.assign(Object.assign({},o),{contexts:["home","profile","quests_tab","session_end"]}),gweb_mistake_progress_bar:o,gweb_redesigned_page_footer:o,gweb_remove_social_account_link_step:o,gweb_remove_super_repair:o,gweb_start_ss_earlier:o,gweb_streak_explainer_session_end:o,gweb_streak_nudge_session_end:o,gweb_streak_page:{conditions:["control","extend_streak","no_extend_streak"],contexts:["hover","expanded"]},gweb_tiered_daily_quests_v3:o,gweb_time_spent_daily_quest:o,mcoach_family_weekly_report_dev:o,mcoach_web_legendary_real_hearts_v2:o,mcoach_web_ph_filter_grammar_skills:o,mcoach_web_words_list_dev:o,minfra_web_stripe_setup_intent:o,path_web_copy_other:o,path_web_copy_session_end:o,path_web_copy_session_start:o,path_web_course_complete_slides:o,path_web_guidebook_phrasebook_hints:o,path_web_path_change_notifications_v2:o,path_web_sections:o,path_web_sections_overview:o,path_web_sections_v2:{conditions:["control","sections_only","sections_and_persistent"],contexts:[void 0]},spack_new_years_2024_dark_packages:o,spack_new_years_2024_discount_explain:{conditions:["control","twenty_five_percent","verbose_explanation"],contexts:[void 0]},spack_new_years_2024_fab_animation:o,spack_new_years_2024_last_chance:o,spack_new_years_2024_new_hooks:o,spack_new_years_2024_purchase_flow_port:o,spack_new_years_2024_show_family_plan:o,spack_web_disable_hearts_for_5hearts:o,spack_web_fp_init_page:o,spack_web_hearts_new_users:o,spack_web_hearts_new_users_launch:o,spack_web_immersive_super_pf:o,spack_web_new_years_2024_vid_ad_load:o,spack_web_purchase_flow_zero_cta:o,spack_web_registration_softwall_v2:o,use_new_hint_tokenization_ja_en_web_v2:o,web_hintable_text_rewrite_v3:o,web_year_in_review_2023:o,writing_web_kanji:o},c={conditions:["control","experiment"],contexts:[null]},d={conditions:["control","experiment"],contexts:[null]},u={placeholder_experiment:c,web_login_migration_v2:c},p={placeholder_experiment:d,sfeat_web_clientside_experiment_test_fam:d,sfeat_web_clientside_experiment_test_fam_v2:c},g=s.XP(l).sort().join(","),m={placeholder_experiment:Object.assign(Object.assign({},i),{isSticky:!0,urlModifier:r.URL_MODIFIERS.SUBDOMAIN_AND_PATHNAME})},h=[...s.XP(p),...s.XP(u),...s.XP(m)].filter((e=>"placeholder_experiment"!==e)),_=h.join(",")},81149:(e,t,a)=>{"use strict";a.d(t,{LK:()=>y,Uy:()=>T,cu:()=>R,j6:()=>E,nY:()=>k,xz:()=>C});var s=a(5029),n=a(42659),r=a(43464),i=a(54412),o=a(17135),l=a(63301),c=a(46435),d=a(53229),u=a(60752),p=a(93746),g=a(39852),m=a(51158),h=a(11908),_=a(18804),v=a(79465),f=a(16086);a(20028);const b=e=>(t,...a)=>{var s;if((0,l.Au)()){const e=(0,d.vl)();if(e[t])return(0,g.qr)(e[t],t,void 0,{queryOverride:!0}),e[t];const a=null===(s=(0,h.rV)(h.Qt.DebugExperimentOverrides))||void 0===s?void 0:s[t];if(a)return(0,g.qr)(a,t,void 0,{localOverride:!0}),`${a}`}return e(t,...a)};let S={};const y=()=>{S={}},E=b(((e,t)=>{const a=`${e} ${t}`;if(a in S){const[s,n]=S[a];if((0,o.Zo)()<n)return(0,g.qr)(s,e,t,{cache:!0}),s}const s=((e,t)=>{const a=t,s=(null!==(o=null===(i=(0,_.qg)())||void 0===i?void 0:i.user.experiments)&&void 0!==o?o:{})[e];var i,o;if(!s)return"control";if(!s.eligible)return s.condition;const l=void 0!==a&&!s.contexts.includes(a);if(!s.treated||l){const t=(0,_.qg)();t&&(0,n.df)(t)?(async()=>{const t=await(0,u.b)();await t.add("submittableRequests",{request:{contexts:a?[a]:[],experimentName:e},type:"experiment-treatment"})})():r.Vi.treatUser((0,f.Jb)(),e,{contexts:a?[a]:[],treated:!0}),window.setTimeout((()=>(0,_.A5)({context:a,name:e,treated:!0,type:"UPDATE_EXPERIMENT_RECORD"})),0),(0,v.track)("treatment_record_updated",{experiment_name:e})}return s.condition})(e,t);return S[a]=[s,(0,o.Zo)()+30],(0,g.qr)(s,e,t),s})),I=e=>{const t=(0,s.sha256)(e);return parseInt(t.slice(t.length-8),16)},k=(e,t,a=[null])=>{const s=C(),n=s[e]||{condition:t,contexts:a};n.condition=t,s[e]=n,(0,h.LS)(h.Qt.LoggedOutExperiments,s)},w=(e,t,a,s=[null])=>{k(e,t,s),(0,v.track)("counterfactuals_client_treat",{condition:t,context:a,experiment_name:e,is_owner_only:void 0})},T=e=>{const t=C();delete t[e],(0,h.LS)(h.Qt.LoggedOutExperiments,t)},C=()=>(0,h.rV)(h.Qt.LoggedOutExperiments)||{},R=b(((e,t,a,s)=>{(0,f.Pc)()&&console.warn(`Logged in users should not usually be treated for logged out experiments! (${e})`);const n=C()[e],r=a[e];if(!r&&!n)return(0,g.qr)(null!=s?s:"control",e,t,{default:!0,loggedOut:!0}),null!=s?s:"control";if(r&&void 0!==r.condition)return(0,g.qr)(r.condition,e,t,{loggedOut:!0}),r.condition;if(n){const a=n.contexts;return a.includes(t)||w(e,n.condition,t,[...a,t]),(0,g.qr)(n.condition,e,t,{loggedOut:!0}),n.condition}const o=r.conditions;if(!(I(`${(0,i.ej)(i.Vj.LoggedOutUUID)}-${e}`)/2**32<r.rollout)){const a=o[0];return(0,g.qr)(a,e,t,{loggedOut:!0,notInRollout:!0}),a}const l=o[I(`${(0,i.ej)(i.Vj.LoggedOutUUID)}-${e}-condition`)%o.length];return w(e,l,t,[t]),(0,g.qr)(l,e,t,{loggedOut:!0}),l})),L={},O=(b(((e,t,a=new URL(window.location.href))=>{const s=t[e];if(!s)return(0,g.qr)("control",e,void 0,{default:!0,url:!0}),"control";const{conditions:n,rollout:r}=s,{isSticky:i,urlModifier:o}=c.fv[e],l=o(a),d=i?e:`${e}-${l}`;if(L[d])return(0,g.qr)(L[d],e,void 0,{cache:!0,url:!0}),L[d];const u=I(`${e}-${l}-rollout`)/2**32<r?n[I(`${e}-${l}`)%n.length]:n[0];return(0,f.Pc)()||(0,v.track)("url_experiment_treat",{condition:u,experiment_name:e,ui_language:(0,p.D3)(p.h9)}),L[d]=u,(0,g.qr)(u,e,void 0,{url:!0}),u})),(e,t,a,s,n=[null])=>{k(e,t,n),(0,v.track)("counterfactuals_client_treat",{condition:t,context:a,experiment_name:e,is_owner_only:!1}),(0,v.trackRawEvent)("counterfactuals_client_treat",{condition:t,context:a,distinct_id:s,experiment_name:e,is_owner_only:!0,user_id:s})});b(((e,t,a,s,n,r,i)=>{const o=C()[e],l=a[e];if(void 0===n||void 0===s)return(0,m.vU)(`Users not in a family plan should not usually be treated for family plan experiments! (${e})`,{data:{experimentName:e},once:!0}),l.conditions[0];if(!l&&!o)return(0,g.qr)(null!=i?i:"control",e,t,{default:!0,loggedOut:!0,user_id:r}),null!=i?i:"control";if(l&&void 0!==l.condition)return l.condition;if(o){const a=o.contexts;return a.includes(t)||O(e,o.condition,t,n,[...a,t]),o.condition}const c=I(`${e}_${s}`)%65536;if(!(c/65536<l.rollout)){const a=l.conditions[0];return(0,g.qr)(a,e,t,{loggedOut:!0,notInRollout:!0,user_id:r}),a}const d=l.conditions[c%l.conditions.length];return O(e,d,t,n,[t]),(0,g.qr)(d,e,t,{loggedOut:!0,notInRollout:!1,user_id:r}),d}))},41679:(e,t,a)=>{"use strict";a.d(t,{E6:()=>h,Jb:()=>_,L8:()=>p,Vr:()=>S,hP:()=>g,k3:()=>b});var s=a(80254),n=a(85394),r=a(43464),i=a(70326),o=a(67899),l=a(53229),c=a(6986),d=a(79465),u=a(16086);const p=s.IH((()=>new Promise(((e,t)=>{window.fbAsyncInit=async()=>{window.FB.init({appId:"234536436609303",version:"v7.0",xfbml:!0}),window.FB.AppEvents.logPageView(),await _(),e()},(async()=>{try{await(0,l.lh)("//connect.facebook.net/en_US/sdk.js","facebook-jssdk")}catch(e){t(Error("Cannot load facebook SDK"))}})()})))),g=async()=>(await p(),(await v()).accessToken);let m=!1;const h=()=>m,_=()=>new Promise((e=>{window.FB.getLoginStatus((t=>{"connected"===t.status?(console.log("User already granted Facebook-access"),e(t.authResponse)):(console.log("User didn't grant Facebook-access yet"),e(void 0))}))})),v=async(e=[],t=!1)=>{if(m=!0,!t){const e=await _();if(e)return e}return new Promise(((t,a)=>{window.FB.login((e=>{e.authResponse?(console.log("Facebook-access granted"),t(e.authResponse)):(console.log("User closed Facebook popup or denied access"),a())}),{scope:["email",...e].join(",")})}))},f=()=>new Promise((e=>{window.FB.api("/me",{fields:"name,email,id"},e)})),b=async({allowLanguagelessUser:e=!1,dispatch:t,history:a,onLoginSuccess:s,redirectPath:l,via:p})=>{var m,h;const _=await g();try{return await(async({dispatch:e,facebookToken:t,history:a,onLoginSuccess:s,redirectPath:r})=>{await(0,i.x4)({facebookToken:t});const o=e((0,n.eY)({onUserRetrieved:e=>{(0,c.oV)("social",e)},urlForStringsReload:r}));return console.log("Logging into existing account"),await o,s?s():a.push(r),!0})({dispatch:t,facebookToken:_,history:a,onLoginSuccess:s,redirectPath:l})}catch(a){if(!(0,r.Hx)(a)||401!==(null===(m=a.response)||void 0===m?void 0:m.status)&&403!==(null===(h=a.response)||void 0===h?void 0:h.status))throw a;if((0,u.Pc)()){const e=await f();await t((0,n.DZ)({email:e.email,facebookToken:_,name:e.name})),await t((0,n.eY)()),(0,d.track)("register",{successful:!0,through:"facebook",via:p}),(0,o.SX)({event:"sign_up"})}else if(e){const e=await f();await(0,i.$C)({email:e.email,name:e.name}),await t((0,n.eY)()),(0,d.track)("register",{successful:!0,through:"facebook",via:p}),(0,o.SX)({event:"sign_up"})}return!1}},S=async e=>{await p();const t=(await v(["user_friends"])).userID,a=(await new Promise((e=>{window.FB.api("/me/friends",{fields:"id,installed,name,picture",limit:"500"},e)}))).data||[],n=await r.i_.facebookToDuolingo(t,s.jg(a,"id")),i=a.filter((e=>e.id in n)).map((e=>({contextString:`@${n[e.id].username}`,id:n[e.id].id,isFollowing:n[e.id].isFollowing,name:e.name,picture:e.picture.data.is_silhouette?`${n[e.id].picture}/medium`:e.picture.data.url,username:n[e.id].username}))).filter((t=>(e&&!t.isFollowing||!e)&&t.username));return s.MR(i,(e=>e.name))}},94171:(e,t,a)=>{"use strict";a.d(t,{Nh:()=>A,wS:()=>D,Dw:()=>H,py:()=>N,PD:()=>F,xH:()=>M,Mb:()=>P,RL:()=>R,rl:()=>L,fw:()=>U,N7:()=>O,ed:()=>$,ET:()=>j,Ck:()=>Z,qh:()=>Q,WV:()=>q,Fy:()=>W,_Q:()=>G,ML:()=>B,qt:()=>Y,Vz:()=>z,JD:()=>V});const s=a.p+"images/goals/7170947038eaa6cba13c7ee7d6c14e35.svg",n=a.p+"images/goals/b5dc107d1cf9cea867391174a8f3185b.svg",r=a.p+"images/goals/2f657380071df22fcb537fd294a42ae7.svg",i=a.p+"images/goals/645d8ee266b41bb009986bcf057bdddd.svg",o=a.p+"images/goals/d50a64c07d6a558abecc5eaf8481cd80.svg";var l=a(20770);const c=a.p+"images/goals/f874b6952352c8466b192d0a0d6ddc28.svg",d=a.p+"images/goals/daa802c6eebc41858b704ee001d05f0c.svg",u=a.p+"images/goals/5ac5f9a9c076d81536ee0f85ac88e4c2.svg",p=a.p+"images/goals/d8e2b76c5f925390f22c39c17f752e84.svg",g=a.p+"images/goals/b39589bb4696d406be1ec194e3550d29.svg",m=a.p+"images/goals/81ee0dbf33ffd889da4f899c2ec6f36b.svg",h=a.p+"images/goals/a9dcc1aaf98e3e6a030e243415a28850.svg",_=a.p+"images/goals/e0d5a67550d87239e9b604e7ba9603b6.svg",v=a.p+"images/goals/00b59b3190fddbc40ae4eb1a1b81765f.svg",f=a.p+"images/goals/6c46b3c45da29cd15b5c797f908e07d3.svg",b=a.p+"images/goals/59de0be96dd57b30e3e44f9e1396827e.svg",S=a.p+"images/goals/dd8f074a2a72986c2c0b115623c6dc57.svg";var y=a(17135),E=a(63301),I=a(81149),k=a(68903),w=a(8654),T=a(55829),C=a(81621);const R=216e5,L=216e6,O=["hiFlex","hiDreamTeam","hiHighFive","hiAllStar"],P=["nudgeFlex","nudgeClaws","nudgeHighFive","nudgeSadDuo"],A=30,D="friends_quest_complete",x="FRIENDS_QUESTS",N=20,F=1,M="xp_boost_15_gift",U=2,H={avatarUrl:C.tU,displayName:"Sample User",historicalStats:[{goalCategory:"FRIENDS_QUEST",streak:2}],progressIncrements:[100,0,0,0,0],userId:0},j=()=>{const e=(0,E.ky)("debugFriendsQuestState");if(e&&Object.values(T.S).some((t=>t===e)))return{friendProgress:H,goalId:"sample_xp_goal",metric:"XP",ownProgress:150,questId:"sample_xp_quest",questPoints:5,status:e,threshold:500,totalProgress:250,winStreak:1}},G=e=>(0,y.oE)({currentTime:e,targetHour:17,targetWeekday:0}),B=e=>(0,y.oE)({currentTime:e,targetHour:17,targetWeekday:2}),V=e=>G(e)<B(e),z=(e,t)=>void 0!==t&&V(e)&&t.totalProgress<t.threshold,Z=(e,t)=>void 0!==e?"control"===(0,I.j6)("gweb_friends_quests_main_v2","quests_tab")?"none":e.totalProgress>=e.threshold||e.status===T.S.FINISHED?"belowDailyQuest":"aboveDailyQuest":0!==t&&"experiment"===(0,I.j6)("gweb_friends_quests_main_v2","quests_tab")?"belowDailyQuest":"none",$=e=>{var t;return null===(t=null==e?void 0:e.quests)||void 0===t?void 0:t.find((e=>e.goalCategory===x&&[T.S.ACTIVE,T.S.FINISHED].includes(e.questState)))},W=e=>{var t,a;return null!==(a=null===(t=e.find((e=>e.goalCategory===x)))||void 0===t?void 0:t.streak)&&void 0!==a?a:0},q=(e,t)=>{switch(e){case"LESSONS":return(0,w._i)(30518,{threshold:t});case"NINETY_ACCURACY_LESSONS":return(0,w._i)(35010,{threshold:t});case"PERFECT_LESSONS":return(0,w._i)(35007,{threshold:t});case"XP":return(0,w._i)(35008,{threshold:t});default:throw(0,k.RJ)(e),Error("Unsupported friends quest metric")}},Q=(e,t)=>{switch(e){case"LESSONS":case"NINETY_ACCURACY_LESSONS":return(0,w._i)(35909,{num:t});case"PERFECT_LESSONS":return(0,w._i)(35759,{num:t});case"XP":return(0,w._i)(28544,{num:t});default:throw(0,k.RJ)(e),Error("Unsupported friends quest metric")}},Y=({isActive:e=!0,isDark:t=!1,nudgeType:a})=>{switch(a){case"hiAllStar":return e?u:t?c:d;case"hiDreamTeam":return e?m:t?p:g;case"hiFlex":case"nudgeFlex":return e?r:t?s:n;case"hiHighFive":case"nudgeHighFive":return e?l:t?i:o;case"nudgeClaws":return e?v:t?h:_;case"nudgeSadDuo":return e?S:t?f:b;default:return(0,k.RJ)(a),""}}},94358:(e,t,a)=>{"use strict";a.d(t,{IM:()=>u,JI:()=>l,nP:()=>d,sT:()=>p});var s=a(41461),n=a(93746),r=a(79465);let i,o=!1,l=!1;const c=new Promise((e=>{i=e}));window._fs_ready=()=>i();const d=()=>{var e;try{return null!==(e=s.Hr(!0))&&void 0!==e?e:""}catch(e){return""}},u=async e=>{s.S1({debug:!1,devMode:!1,orgId:"QZHJ3"}),o=!0,s.yV(`${e}`,{ui_language_str:n.h9}),s.ur(),l=!0,await c;const t=s.Hr();t&&(0,r.track)("fullstory_record_start",{url:t})},p=()=>{o&&(s.IG(),l=!1)}},41831:(e,t,a)=>{"use strict";a.d(t,{nU:()=>R,bf:()=>T,xD:()=>C,Ch:()=>N,Oj:()=>L,oh:()=>O,VR:()=>q,gl:()=>M,wn:()=>Z,wh:()=>H,ng:()=>F,uT:()=>j,FF:()=>P,cV:()=>K,Ul:()=>J,Oy:()=>X,wU:()=>z,iL:()=>Q,n0:()=>A,ie:()=>U,B_:()=>ee,i3:()=>V});var s=a(80254),n=a(73520);const r=a.p+"images/goals/39f13d2de304cad2ac2f88b31a7e2ff4.svg",i=a.p+"images/goals/2b5a211d830a24fab92e291d50f65d1d.svg",o=a.p+"images/goals/8787ab04a1279f1c7ca12201834e90f7.svg",l=a.p+"images/goals/1cadcf84c054b52aa7eaaa794a7d64bf.svg",c=a.p+"images/goals/a0cb3348a6747c752f7c8270b0af0b69.svg",d=a.p+"images/goals/974e284761265b0eb6c9fd85243c5c4b.svg",u=a.p+"images/goals/b519a0beabb2deedd5767f987e3f0a74.svg",p=a.p+"images/goals/62bb241121ae018b28240eebffb9fc4a.svg";var g=a(17135),m=a(63301),h=a(81149),_=a(68903),v=a(8654),f=a(23275),b=a(51158),S=a(89260),y=a(79465),E=a(11811),I=a(81621),k=a(97106);const w=["XP","LESSONS","NINETY_ACCURACY_LESSONS","PERFECT_LESSONS","QUESTS","EIGHTY_ACCURACY_LESSONS","COMBO_XP","FIVE_CORRECT_IN_A_ROW","TEN_CORRECT_IN_A_ROW","SPEAK_CHALLENGES","LISTEN_CHALLENGES","EXTEND_STREAK","START_STREAK","SECONDS_SPENT_LEARNING"],T=["DAILY_QUEST_FIRST","DAILY_QUEST_SECOND","DAILY_QUEST_THIRD"],C=["DAILY","CORE","HARD"],R="2023_11_monthly_challenge",L=(e,t)=>{const a={metricUpdates:[]};return w.forEach((s=>{const n=((e,t,a)=>{const s=e.challenges.filter((e=>!e.skipped)),n=(r=s).reduce(((e,t)=>e+(t.correct?1:0)),0)/r.length*100;var r;switch(t){case"XP":case"QUESTS":return;case"LESSONS":return[E.FF.SectionTest,E.FF.UnitTest].includes(e.type)&&e.failed?void 0:{metric:t,quantity:1};case"NINETY_ACCURACY_LESSONS":return n>=90?{metric:t,quantity:1}:void 0;case"EIGHTY_ACCURACY_LESSONS":return n>=80?{metric:t,quantity:1}:void 0;case"PERFECT_LESSONS":return n>=100?{metric:t,quantity:1}:void 0;case"COMBO_XP":return e.maxInLessonStreak?{metric:t,quantity:(0,k.CT)(e.challenges.length,e.maxInLessonStreak)}:void 0;case"FIVE_CORRECT_IN_A_ROW":return e.maxInLessonStreak&&e.maxInLessonStreak>=5?{metric:t,quantity:1}:void 0;case"TEN_CORRECT_IN_A_ROW":return e.maxInLessonStreak&&e.maxInLessonStreak>=10?{metric:t,quantity:1}:void 0;case"SPEAK_CHALLENGES":{const e=(0,S.bc)();return{metric:t,quantity:s.filter((t=>e.includes(t.type)&&t.correct)).length}}case"LISTEN_CHALLENGES":{const e=(0,S.tq)();return{metric:t,quantity:s.filter((t=>e.includes(t.type)&&t.correct)).length}}case"EXTEND_STREAK":return a.streakExtended?{metric:t,quantity:1}:void 0;case"START_STREAK":return a.streakStarted?{metric:t,quantity:1}:void 0;case"SECONDS_SPENT_LEARNING":return a.timeSpent?{metric:t,quantity:a.timeSpent}:void 0;default:return void(0,_.RJ)(t)}})(e,s,t);n&&a.metricUpdates.push(n)})),a},O=(e,t)=>{const a={metricUpdates:[]},s=e.score/e.maxScore*100;return a.metricUpdates=w.map((e=>{switch(e){case"LESSONS":return{metric:e,quantity:1};case"EIGHTY_ACCURACY_LESSONS":return{metric:e,quantity:s>=80?1:0};case"NINETY_ACCURACY_LESSONS":return{metric:e,quantity:s>=90?1:0};case"PERFECT_LESSONS":return{metric:e,quantity:s>=100?1:0};case"EXTEND_STREAK":return t.streakExtended?{metric:e,quantity:1}:void 0;case"START_STREAK":return t.streakStarted?{metric:e,quantity:1}:void 0;case"SECONDS_SPENT_LEARNING":return t.timeSpent?{metric:e,quantity:t.timeSpent}:void 0;case"XP":case"QUESTS":case"COMBO_XP":case"FIVE_CORRECT_IN_A_ROW":case"TEN_CORRECT_IN_A_ROW":case"SPEAK_CHALLENGES":case"LISTEN_CHALLENGES":return;default:return void(0,_.RJ)(e)}})).filter(_.$K),a},P=e=>{if(void 0!==e.period.oneOff){const t=(0,g.Ux)(),a=(0,g.$$)(e.period.oneOff.start.year,e.period.oneOff.start.month-1,e.period.oneOff.start.day),s=(0,g.$$)(e.period.oneOff.end.year,e.period.oneOff.end.month-1,e.period.oneOff.end.day);if(a<=t&&s>t)return!0}else if(e.period.recurring){const t=(0,g.Ux)(),a=(0,g.$$)(e.period.recurring.start.year,e.period.recurring.start.month-1,e.period.recurring.start.day),s=(0,g.$$)(e.period.recurring.until.year,e.period.recurring.until.month-1,e.period.recurring.until.day);if(a<=t&&s>t)return!0}return!1},A=(e,{includeListening:t,includeSpeaking:a,path:s,streak:n,xpSummaries:r})=>{var i,o;const l=(0,g.Ux)();switch(l.setDate(l.getDate()-1),e.metric){case"XP":case"LESSONS":case"PERFECT_LESSONS":case"NINETY_ACCURACY_LESSONS":case"EIGHTY_ACCURACY_LESSONS":case"COMBO_XP":case"FIVE_CORRECT_IN_A_ROW":case"TEN_CORRECT_IN_A_ROW":case"SECONDS_SPENT_LEARNING":return!0;case"SPEAK_CHALLENGES":return a&&void 0!==s&&(0,f.U8)({path:s})>0;case"LISTEN_CHALLENGES":return t;case"EXTEND_STREAK":return n>=1&&null!==(o=null===(i=null==r?void 0:r[(0,g.cz)(l)])||void 0===i?void 0:i.frozen)&&void 0!==o&&o&&"experiment"===(0,h.j6)("gweb_extend_streak_daily_quest",void 0);case"QUESTS":case"START_STREAK":return!1;default:return(0,_.RJ)(e.metric),!1}},D=(e,t)=>"DAILY"===e&&void 0!==t.find((e=>"extend_streak_daily_quest"===e.goalId))?"extend_streak_daily_quest":t[Math.floor(Math.random()*t.length)].goalId,x=e=>{switch(e){case"time_spent_core_daily_quest":case"time_spent_hard_daily_quest":return"experiment"===(0,h.j6)("gweb_time_spent_daily_quest",void 0);default:return!0}},N=({assignedQuestGoalIds:e,questEligibilityParams:t,schema:a,slotType:s})=>{const n=(({assignedQuestGoalIds:e,questEligibilityParams:t,schema:a,slotType:s})=>{const n=e.flatMap((e=>G(e)));return a.filter((a=>"DAILY_QUESTS"===a.category&&A(a,t)&&P(a)&&!e.some((e=>a.goalId===e))&&!n.some((e=>e===a.goalId))&&B(s).some((e=>e===a.goalId))))})({assignedQuestGoalIds:e,questEligibilityParams:t,schema:a,slotType:s});if(0===n.length)return void(0,b.Kp)(`No eligible quests found for slot type ${s}`);if((0,m.gQ)("debugChooseSpecificDailyQuest")){const e=(0,m.ky)("debugChooseSpecificDailyQuest");if(n.some((t=>t.goalId===e)))return e}let r=D(s,n);for(;!x(r);)r=D(s,n);return r},F=(e,t)=>{var a,s;return null!==(s=null===(a=t.difficultyTiers)||void 0===a?void 0:a[e].tiers[0])&&void 0!==s?s:t.threshold},M=({availableQuests:e,oldProgress:t,difficulty:a,updatedProgress:s})=>{const{newlyCompletedQuests:n,totalCompletedQuests:r}=Z({difficulty:a,oldProgress:t,progress:s,quests:e}),i={availableQuests:e,difficulty:a,oldProgress:t};return n>0?Object.assign(Object.assign({},i),{numQuestsCompleted:r,type:"dailyQuestComplete"}):e.some((e=>{var n,r;const i=F(a,e);return U(e.goalId,null!==(n=s[e.goalId])&&void 0!==n?n:0)>=i/2&&U(e.goalId,null!==(r=t[e.goalId])&&void 0!==r?r:0)<i/2}))?Object.assign(Object.assign({},i),{numQuestsCompleted:0,type:"dailyQuestHalfway"}):e.every((e=>{var a;return 0===U(e.goalId,null!==(a=t[e.goalId])&&void 0!==a?a:0)}))&&e.some((e=>{var t;return U(e.goalId,null!==(t=s[e.goalId])&&void 0!==t?t:0)>0}))?Object.assign(Object.assign({},i),{numQuestsCompleted:0,type:"dailyQuestFirst"}):void 0},U=(e,t)=>["time_spent_core_daily_quest","time_spent_hard_daily_quest"].includes(e)?Math.floor(t/60):t,H=e=>{switch(e){case"XP":case"COMBO_XP":return i;case"LESSONS":return l;case"FIVE_CORRECT_IN_A_ROW":case"TEN_CORRECT_IN_A_ROW":return d;case"PERFECT_LESSONS":case"NINETY_ACCURACY_LESSONS":case"EIGHTY_ACCURACY_LESSONS":return r;case"SPEAK_CHALLENGES":return u;case"LISTEN_CHALLENGES":return c;case"SECONDS_SPENT_LEARNING":return p;case"EXTEND_STREAK":return o;case"QUESTS":case"START_STREAK":return;default:return(0,_.RJ)(e)}},j=(e,t)=>{switch(e.metric){case"XP":return(0,v._i)(35008,{threshold:t});case"LESSONS":return(0,v._i)(30518,{threshold:t});case"PERFECT_LESSONS":return(0,v._i)(35007,{threshold:t});case"NINETY_ACCURACY_LESSONS":return(0,v._i)(35010,{threshold:t});case"EIGHTY_ACCURACY_LESSONS":return(0,v._i)(38216,{num:t,threshold:t});case"COMBO_XP":return(0,v._i)(38217,{num:t,threshold:t});case"FIVE_CORRECT_IN_A_ROW":return(0,v._i)(38218,{num:t,threshold:t});case"TEN_CORRECT_IN_A_ROW":return(0,v._i)(38305,{num:t,threshold:t});case"SPEAK_CHALLENGES":return(0,v._i)(30522,{threshold:t});case"LISTEN_CHALLENGES":return(0,v._i)(30521,{threshold:t});case"SECONDS_SPENT_LEARNING":return(0,v._i)(39357,{num:Math.floor(t/60)});case"EXTEND_STREAK":return(0,v._i)(42618);case"QUESTS":case"START_STREAK":return;default:return void(0,b.vU)("Unsupported quest metric",{data:{metric:(0,_.RJ)(e.metric)},once:!0})}},G=e=>{switch(e){case"daily_goal_daily_quest":case"extend_streak_daily_quest":case"speak_challenges_hard_daily_quest":case"listen_challenges_hard_daily_quest":return[e];case"perfect_lessons_core_daily_quest":case"perfect_lessons_hard_daily_quest":case"ninety_accuracy_lessons_core_daily_quest":case"ninety_accuracy_lessons_hard_daily_quest":case"eighty_accuracy_lessons_core_daily_quest":case"eighty_accuracy_lessons_hard_daily_quest":return["perfect_lessons_core_daily_quest","perfect_lessons_hard_daily_quest","ninety_accuracy_lessons_core_daily_quest","ninety_accuracy_lessons_hard_daily_quest","eighty_accuracy_lessons_core_daily_quest","eighty_accuracy_lessons_hard_daily_quest"];case"combo_xp_core_daily_quest":case"combo_xp_hard_daily_quest":case"five_in_a_row_core_daily_quest":case"five_in_a_row_hard_daily_quest":case"ten_in_a_row_hard_daily_quest":return["combo_xp_core_daily_quest","combo_xp_hard_daily_quest","five_in_a_row_core_daily_quest","five_in_a_row_hard_daily_quest","ten_in_a_row_hard_daily_quest"];case"time_spent_core_daily_quest":case"time_spent_hard_daily_quest":return["time_spent_core_daily_quest","time_spent_hard_daily_quest"];default:return(0,b.vU)("Unsupported quest",{data:{goalId:(0,_.RJ)(e)},once:!0}),[]}},B=e=>{switch(e){case"DAILY":return["daily_goal_daily_quest","extend_streak_daily_quest"];case"CORE":return["perfect_lessons_core_daily_quest","ninety_accuracy_lessons_core_daily_quest","eighty_accuracy_lessons_core_daily_quest","combo_xp_core_daily_quest","five_in_a_row_core_daily_quest","time_spent_core_daily_quest"];case"HARD":return["perfect_lessons_hard_daily_quest","ninety_accuracy_lessons_hard_daily_quest","eighty_accuracy_lessons_hard_daily_quest","combo_xp_hard_daily_quest","five_in_a_row_hard_daily_quest","ten_in_a_row_hard_daily_quest","speak_challenges_hard_daily_quest","listen_challenges_hard_daily_quest","time_spent_hard_daily_quest"];default:return(0,b.vU)("Unsupported daily quest slot type",{data:{slotType:(0,_.RJ)(e)},once:!0}),[]}},V=({difficulty:e,progress:t,oldProgress:a,quests:s})=>{s.forEach((s=>{var n;const r=F(e,s);void 0!==t&&void 0!==a&&(null!==(n=t[s.goalId])&&void 0!==n?n:0)>=r&&a[s.goalId]<r&&(0,y.track)("daily_quest_completed",{daily_quest_difficulty:e,daily_quest_name:s.goalId})}))},z=({difficulty:e,oldProgress:t,progress:a,quest:s})=>{var n;const r=F(e,s);return void 0!==a&&void 0!==t&&(null!==(n=a[s.goalId])&&void 0!==n?n:0)>=r&&t[s.goalId]<r},Z=({difficulty:e,progress:t,oldProgress:a,quests:s})=>s.reduce(((s,n)=>{var r,i,o;const l=F(e,n);return{newlyCompletedQuests:void 0!==t&&void 0!==a&&(null!==(r=t[n.goalId])&&void 0!==r?r:0)>=l&&a[n.goalId]<l?s.newlyCompletedQuests+1:s.newlyCompletedQuests,totalCompletedQuests:(null!==(i=null==t?void 0:t[n.goalId])&&void 0!==i?i:0)>=l||(null!==(o=null==a?void 0:a[n.goalId])&&void 0!==o?o:0)>=l?s.totalCompletedQuests+1:s.totalCompletedQuests}}),{newlyCompletedQuests:0,totalCompletedQuests:0}),$=(e,t)=>t?e[t.goalId].metric:void 0,W=(e,t)=>e[t].quantity,q=(e,t)=>{const{dailyQuest:a,coreQuest:s,hardQuest:n}=e;return(Q(t)?[a,s,n]:[a]).filter(_.$K)},Q=e=>{const t=(0,I.i5)(e),a=(0,I.i5)(e)<30;if((0,m.ky)("debugAllDailyQuestsUnlocked")||!a&&!(0,I.EO)(e))return!0;const s=(0,I.pu)(e);return a?t>=6:s>=4},Y=e=>(0,g.zM)(e).getUTCMonth()===(0,g.Ux)().getMonth()&&(0,g.Ij)(e)<4,K=e=>{if(!(0,I.EO)(e))return!1;const t=s.VO(e.xpSummaries).filter((e=>void 0!==e&&e.gainedXp>0)).sort(((e,t)=>t.date-e.date));if(t.length<6)return!0;const a=t[5].date;return Y(a)},J=e=>{if((0,I.i5)(e)>=30)return!1;if((0,I.i5)(e)<7)return!0;const t=(0,g.v4)((0,g.zM)(e.lastResurrectionTimestamp),6),a=s.VO(e.xpSummaries).filter((e=>void 0!==e&&e.date>=t&&e.gainedXp>0)).sort(((e,t)=>e.date-t.date));if(a.length<2)return!0;const n=a[1].date;return Y(n)},X=e=>!K(e)&&!J(e),ee=e=>(t,a)=>{const{dailyQuest:r,coreQuest:i,hardQuest:o}=(0,n.oV)(a()),l=(0,n.xm)(a()),c=(({currentProgress:e,dailyQuest:t,coreQuest:a,hardQuest:n,metricUpdatesWithXp:r,schema:i})=>{var o,l,c;const d={},u=s.HK(r,"metric"),p=$(i,t),g=$(i,a),m=$(i,n);return t&&p&&u[p]&&(d[t.goalId]=W(u,p)+(null!==(o=null==e?void 0:e[t.goalId])&&void 0!==o?o:0)),a&&g&&u[g]&&(d[a.goalId]=W(u,g)+(null!==(l=null==e?void 0:e[a.goalId])&&void 0!==l?l:0)),n&&m&&u[m]&&(d[n.goalId]=W(u,m)+(null!==(c=null==e?void 0:e[n.goalId])&&void 0!==c?c:0)),d})({coreQuest:i,currentProgress:(0,n.EL)(a()),dailyQuest:r,hardQuest:o,metricUpdatesWithXp:e.metricUpdates,schema:l});t({payload:{timestamp:Date.now(),updates:c},type:"SET_GOALS_PROGRESS_UPDATE"})}},8649:(e,t,a)=>{"use strict";a.d(t,{d:()=>l,m:()=>o});var s=a(80254),n=a(53229),r=a(51158);const i="onGoogleLibraryLoad";let o=!1;const l=s.IH((()=>new Promise(((e,t)=>{window[i]=()=>{try{window.google.accounts.id.initialize({callback:({credential:t})=>{e(t)},client_id:"450298686065.apps.googleusercontent.com"}),o=!0}catch(e){t(Error("Cannot initialize google sign in SDK"))}},(async()=>{try{await(0,n.lh)("https://accounts.google.com/gsi/client",i)}catch(e){(0,r.Kp)("Cannot load google sign in SDK"),t()}})()}))))},67574:(e,t,a)=>{"use strict";a.d(t,{F:()=>p});var s=a(80231),n=a(85394),r=a(43464),i=a(70326),o=a(8649),l=a(67899),c=a(6986),d=a(79465),u=a(16086);const p=async({allowLanguagelessUser:e=!1,dispatch:t,history:a,onLoginSuccess:p,redirectPath:g,setSubmitting:m,via:h})=>{var _,v;const f=await(0,o.d)();m&&m();try{return await(async({dispatch:e,googleIdToken:t,history:a,redirectPath:s,onLoginSuccess:r})=>{await(0,i.x4)({googleIdToken:t});const o=e((0,n.eY)({onUserRetrieved:e=>{(0,c.oV)("social",e)},urlForStringsReload:s}));return console.log("Logging into existing account"),await o,r?r():a.push(s),!0})({dispatch:t,googleIdToken:f,history:a,onLoginSuccess:p,redirectPath:g})}catch(a){if(!(0,r.Hx)(a)||401!==(null===(_=a.response)||void 0===_?void 0:_.status)&&403!==(null===(v=a.response)||void 0===v?void 0:v.status))throw a;const o=(b=f,JSON.parse(s.DS.decode(b.split(".")[1])));return(0,u.Pc)()?(await t((0,n.DZ)({email:o.email,googleIdToken:f,name:o.name})),await t((0,n.eY)()),(0,d.track)("register",{successful:!0,through:"google",via:h}),(0,l.SX)({event:"sign_up"})):e&&(await(0,i.$C)({email:o.email,googleIdToken:f,name:o.name}),await t((0,n.eY)()),(0,d.track)("register",{successful:!0,through:"google",via:h}),(0,l.SX)({event:"sign_up"})),!1}var b}},67899:(e,t,a)=>{"use strict";a.d(t,{KU:()=>l,Nf:()=>d,SX:()=>r,dl:()=>u,zu:()=>p});var s=a(80254),n=a(53229);window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"gtm.js","gtm.start":Date.now()}),window.dataLayer.push({cookie_domain:window.location.hostname});const r=e=>{window.dataLayer.push(e)},i=window.setInterval((()=>{var e;const t=window;if(!(null===(e=t.ga)||void 0===e?void 0:e.getAll))return;const[a]=t.ga.getAll().filter((e=>"UA-21595814-1"===e.get("trackingId")));a&&(window.clearInterval(i),new t.gaplugins.UrlChangeTracker(a))}),200),o=["card_entry_accept","card_entry_reject","plus_landing_page_load","premium_ad_click","premium_ad_dismiss","premium_ad_show","premium_purchase_cancel","premium_purchase_failure","premium_purchase_page_dismiss","premium_purchase_page_show","premium_purchase_start","premium_purchase_success","premium_trial_offer_click","premium_trial_offer_dismiss","premium_trial_offer_show","registration_load","sign_in_load","web_to_app_store_tap"],l=(e,t)=>{if(!o.includes(e))return;const a=s.ei(t,["free_trial_period","iap_context","subscription_tier"]);r(Object.assign(Object.assign({},a),{event:e}))};let c;const d=()=>c,u=async()=>{try{await(0,n.lh)("https://www.googletagmanager.com/gtm.js?id=GTM-TX6Z97C"),c=!!window.google_tag_manager}catch(e){c=!1}},p="gtm-attribution-link"},33037:(e,t,a)=>{"use strict";a.d(t,{EZ:()=>y,LN:()=>v,tx:()=>b,wM:()=>S,zn:()=>f});var s=a(56043),n=a(43464),r=a(83719),i=a(78939),o=a(37590),l=a(68903),c=a(8654),d=a(93746),u=a(51158),p=a(43006),g=a(79465),m=a(11811);const h={[r.Oj.Accent]:18634,[r.Oj.ExtraSpace]:4476,[r.Oj.MissingSpace]:18757,[r.Oj.MissingWord]:8435,[r.Oj.Typo]:4081,[r.Oj.WrongWord]:576},_=e=>{if(h[e])return(0,c.H8)(h[e])},v=e=>{switch(e.type){case m.Sm.Assist:{const{correctIndex:t,options:a}=e;return[a[t].text]}case m.Sm.CharacterIntro:{const{choices:t,correctIndex:a}=e;return[t[a]]}case m.Sm.CharacterPuzzle:return[e.correctSolutions[0]];case m.Sm.CharacterTrace:case m.Sm.CharacterWrite:return[e.prompt];case m.Sm.CharacterMatch:case m.Sm.FreeResponse:case m.Sm.ListenMatch:case m.Sm.Match:return[];case m.Sm.CharacterSelect:{const{choices:t,correctIndex:a}=e;return[t[a].character]}case m.Sm.CompleteReverseTranslation:{const{displayTokens:t}=e;return[t.map((e=>e.text)).join("")]}case m.Sm.Definition:{const{choices:t,correctIndex:a}=e;return[t[a]]}case m.Sm.Dialogue:{const{choices:t,correctIndex:a}=e;return[t[a]]}case m.Sm.Form:{const{options:t,correctIndex:a}=e;return[t[a].text]}case m.Sm.GapFill:{const{choices:t,correctIndex:a}=e;return[t[a]]}case m.Sm.Judge:{const{choices:t,correctIndices:a}=e;return a.map((e=>t[e]))}case m.Sm.Listen:case m.Sm.ListenComplete:return[e.prompt];case m.Sm.ListenComprehension:{const{choices:t,correctIndex:a}=e;return[t[a]]}case m.Sm.ListenIsolation:{const{tokens:t}=e;return[t.map((e=>e.value)).join("")]}case m.Sm.ListenSpeak:case m.Sm.ListenTap:return[e.prompt];case m.Sm.Name:return e.correctSolutions;case m.Sm.OrderTapComplete:case m.Sm.PartialListen:case m.Sm.PartialReverseTranslate:return[e.displayTokens.map((e=>e.text)).join("")];case m.Sm.PatternTapComplete:return[e.choices[e.correctIndex]];case m.Sm.ReadComprehension:{const{choices:t,correctIndex:a}=e;return[t[a]]}case m.Sm.ReverseAssist:{const{correctIndex:t,options:a}=e;return[a[t].text]}case m.Sm.Select:{const{choices:t,correctIndex:a}=e;return[t[a].phrase]}case m.Sm.SelectPronunciation:case m.Sm.SelectTranscription:{const{choices:t,correctIndex:a}=e;return[t[a].text]}case m.Sm.SvgPuzzle:return[e.correctSolutions[0]];case m.Sm.SyllableListenTap:return[e.correctIndices.map((t=>e.choices[t].text)).join("")];case m.Sm.SyllableTap:return e.correctSolutions;case m.Sm.Speak:return[e.prompt];case m.Sm.TapCloze:case m.Sm.TapClozeTable:return[(0,o.Ub)(e).join("")];case m.Sm.TapComplete:{const{displayTokens:t}=e;return[t.map((e=>e.text)).join("")]}case m.Sm.TapCompleteTable:return[(0,o.Ub)(e).join("")];case m.Sm.TapDescribe:case m.Sm.Translate:case m.Sm.Transliterate:return e.correctSolutions;case m.Sm.TransliterationAssist:{const{correctIndex:t,options:a}=e;return[a[t].text]}case m.Sm.TypeCloze:case m.Sm.TypeClozeTable:return[(0,o.Ub)(e).join("")];case m.Sm.TypeComplete:return[e.displayTokens.map((e=>e.text)).join("")];case m.Sm.TypeCompleteTable:return[(0,o.Ub)(e).join("")];case m.Sm.WriteComprehension:return[e.exampleSolution];default:throw(0,l.RJ)(e),Error(`Unexpected challenge type: ${e.type}`)}},f=e=>{var t,a,s,n;switch(e.type){case m.Sm.ListenTap:return e.promptTransliteration;case m.Sm.Select:return e.choices[e.correctIndex].phraseTransliteration;case m.Sm.Translate:return null===(t=e.correctSolutionTransliterations)||void 0===t?void 0:t[0];case m.Sm.CharacterIntro:return null===(a=e.choiceTransliterations)||void 0===a?void 0:a[e.correctIndex];case m.Sm.Form:return e.options[e.correctIndex].textTransliteration;case m.Sm.Judge:return null===(s=e.choiceTransliterations)||void 0===s?void 0:s[e.correctIndices[0]];case m.Sm.SyllableListenTap:return e.promptTransliteration;case m.Sm.SyllableTap:return null===(n=e.correctSolutionTransliterations)||void 0===n?void 0:n[0];default:return}},b=(e,t,a,s)=>(s.length&&!s[0]&&(0,u.Kp)("Trying to show correct solution when none are provided by the challenge",{data:{correctSolutions:s,length:s.length,text:s[0]}}),e&&a&&s.length&&!s.includes(a)&&s[0]&&(0,p.Dg)(t)!==(0,p.Dg)(s[0])),S=async({challenge:e,guess:t,isTypingInLearningLanguage:a,allowTypoBlame:n})=>{var r;const o=Date.now(),l=null===(r=e.grader)||void 0===r?void 0:r.language,c=await(0,i.C3)(l),d=!!e.smartTipsGraderV2,u=(0,i.YK)({accentedCharacterMap:c.accentedCharacterMap,allowTypoBlame:n,compiledNormalizationData:c.normalizationData,gradingData:d?e.smartTipsGraderV2:e.grader,isTypingInLearningLanguage:a,submittedValue:t}),{blameType:p,closestSolution:g,correct:h,gradingMetadata:f,highlights:b}=u;let S;if(!1!==e.grader.whitespaceDelimited&&(e.type===m.Sm.Translate||e.type===m.Sm.PartialReverseTranslate)){const a=(0,s.SK)(v(e)[0],t,.5);S=a?[a]:void 0}return E(e,h,o,d),{blameMessage:p?_(p):void 0,blameType:p,closestSolution:g,correct:h,gradingMetadata:f,guess:t,highlights:b,mistakesRecyclingHighlights:S}},y=async e=>{console.log("Attempting server grade");const t=await n.Vi.challengeGrade(e);return Object.assign(Object.assign({},t),{blameMessage:t.blameType?_(t.blameType):void 0})},E=async(e,t,a,s)=>{Math.random()>.001||await(0,g.track)("challenge_grade",{challenge_type:e.type,correct:t,from_language:d.h9,grading_method:s?"client_library_smart_tips":"client_library",sampling_rate:.001,target_language:e.grader.language,time_spent_grading:Date.now()-a})}},37590:(e,t,a)=>{"use strict";a.d(t,{JH:()=>p,Ub:()=>u,Xh:()=>c,ao:()=>d,jL:()=>l,tl:()=>m,x6:()=>o});var s=a(68903),n=a(51158),r=a(43006),i=a(11811);const o=(e,t,a=(({},{},e)=>e.text))=>g(e,a).slice(t?1:0).flatMap((e=>[", ",...e.flatMap((e=>[" ",e])).slice(1)])).slice(1),l=e=>e.flatMap(((e,t)=>void 0===e.damageStart?[]:{index:t})),c=e=>e.flatMap(((e,t)=>e.flatMap(((e,a)=>e.filter((e=>"isBlank"in e&&e.isBlank||"damageStart"in e)).length?[{colIndex:a,rowIndex:t}]:[])))),d=e=>{const t=c(e)[0];return{colIndex:t.colIndex,rowIndex:t.rowIndex}},u=e=>{switch(e.type){case i.Sm.TapCloze:case i.Sm.TypeCloze:return e.displayTokens.map((e=>e.text));case i.Sm.TapClozeTable:case i.Sm.TypeClozeTable:case i.Sm.TapCompleteTable:case i.Sm.TypeCompleteTable:{const{displayTableTokens:t,headers:a}=e;return o(t,a)}default:throw(0,s.RJ)(e),Error(`Tried to call getGrammarChallengeCorrectTexts on an unsupported challenge type: ${e.type}`)}},p=e=>{switch(e.type){case i.Sm.TapCloze:case i.Sm.TypeCloze:return e.displayTokens.map((e=>void 0===e.damageStart?e.text:`${e.text.slice(0,e.damageStart)}${r.qv}`)).join("");case i.Sm.TapClozeTable:case i.Sm.TypeClozeTable:case i.Sm.TapCompleteTable:case i.Sm.TypeCompleteTable:{const{displayTableTokens:t,headers:a}=e;return o(t,a).join("")}default:throw(0,s.RJ)(e),Error(`Tried to call getGrammarChallengePrompt on an unsupported challenge type: ${e.type}`)}},g=(e,t=(({},{},e)=>e.text))=>e.map(((e,a)=>e.map(((e,s)=>e.map((e=>t(s,a,e))).join(""))))),m=(e,t,a)=>e.map(((s,r)=>s.map(((s,i)=>s.map(((s,o)=>{let l;try{l=t[r][i][o]}catch(t){(0,n.vU)("No matching token found for display token in table challenge",{data:{displayTableTokens:e}})}return a({colIndex:i,rowIndex:r},s,l,o)}))))))},15670:(e,t,a)=>{"use strict";a.d(t,{e:()=>o});var s=a(50498),n=a(79465);let r=!1;const i=e=>new Promise((t=>{var a,s;r||(r=!0,window.grecaptcha?(0,n.track)("abuse_req_cls_init_success",{}):(0,n.track)("abuse_req_cls_init_fail",{abuse_client_error_cause:"script_not_loaded"})),null===(s=null===(a=window.grecaptcha)||void 0===a?void 0:a.enterprise)||void 0===s||s.ready((async()=>{var a,s;const n=await(null===(s=null===(a=window.grecaptcha)||void 0===a?void 0:a.enterprise)||void 0===s?void 0:s.execute("6LcLOdsjAAAAAFfwGusLLnnn492SOGhsCh-uEAvI",{action:e}));t(n)}))})),o=async e=>{try{const t=await Promise.race([i(e),(async()=>(await(0,s._v)(10100),null))()]);return t?((0,n.track)("abuse_req_cls_sig_measure_success",{}),{siteKey:"6LcLOdsjAAAAAFfwGusLLnnn492SOGhsCh-uEAvI",token:t,vendor:2}):((0,n.track)("abuse_req_cls_sig_measure_fail",{abuse_client_error_cause:"report_timeout"}),null)}catch(e){(0,n.track)("abuse_req_cls_sig_measure_fail",{abuse_client_error_cause:"report_error"})}return null}},1:(e,t,a)=>{"use strict";a.d(t,{Ef:()=>p,GQ:()=>g,In:()=>S,PH:()=>y,Pp:()=>I,_u:()=>v,c$:()=>h,e_:()=>b,is:()=>_,mE:()=>f,qv:()=>E,vZ:()=>m});var s=a(17135),n=a(63301),r=a(81149),i=a(8654),o=a(93746),l=a(35160),c=a(23275),d=a(20028);const u=["premium","schools","beta course","revenue paused","free","ineligible"],p=(e,t,a,s)=>{const r=(0,n.ky)("heartsGroupType");return r&&(i=r,u.includes(i))?r:g(e,t)?a?"premium":(0,d.d1)(e)?"schools":t.unlimitedHeartsAvailable?"revenue paused":void 0!==s&&(0,o.TS)(s)?"beta course":"free":"ineligible";var i},g=(e,t)=>{var a,s;return(0,n.gQ)("forceHeartsAndGems")||null!==(a=null==t?void 0:t.healthEnabled)&&void 0!==a&&a||null!==(s=null==e?void 0:e.gemsConfig.useGems)&&void 0!==s&&s},m=e=>["schools","beta course","revenue paused"].includes(e),h=e=>e.hearts===e.maxHearts,_=e=>e.hearts<=0,v=e=>{const t=Date.now();if(t>e)return null;const{hours:a,minutes:n,seconds:r}=(0,s.zj)(e-t);return a>0?(0,i._i)(25240,{num_hours:a}):n>0?(0,i._i)(25241,{num_minutes:n}):(0,i._i)(25242,{num_seconds:r})},f={currencyType:"XGM",id:"health_refill",localizedDescription:"",name:"Health Refill",price:0,type:"misc"},b={currencyType:"XGM",id:"health_refill",localizedDescription:"",name:"Health Refill",price:350,type:"misc"},S={currencyType:"XGM",id:"health_refill_reactive",localizedDescription:"",name:"Health Refill Reactive",price:450,type:"misc"},y=(e,t)=>e.sessionCount<3||t.overrideFreeHeartRefillLeft>0||(0,n.gQ)("debugFreeHeartRefill"),E=(e,t,a,s)=>{var r;const i=null===(r=a.levelData)||void 0===r?void 0:r.level;(g(e)&&t&&0===e.sessionCount&&i&&!(0,c.qM)(i,"regular")&&0===a.currentIndex||(0,n.gQ)("debugHeartsIntro"))&&s({options:{name:l.t.HeartsIntro,spotlightType:"heartsInSession"},type:"TOGGLE_MODAL"})},I=e=>"control"===(0,r.j6)("spack_web_hearts_new_users_launch",void 0)&&"control"===(0,r.j6)("spack_web_hearts_new_users",void 0)&&e.gemsConfig.useGems},68903:(e,t,a)=>{"use strict";a.d(t,{$K:()=>l,OM:()=>r,RJ:()=>n,cY:()=>i,gB:()=>o,p:()=>c,rw:()=>d});var s=a(80254);const n=e=>e,r=e=>[e,e],i=(e,t)=>e.some((e=>s.Xy(e,t))),o=(e,t)=>t.includes(e),l=e=>void 0!==e,c=e=>t=>e.includes(t),d=(e,t)=>{let a;return(...s)=>{void 0===a&&(a=setTimeout((()=>{a=void 0,e(...s)}),t))}}},50548:(e,t,a)=>{"use strict";a.d(t,{TH:()=>_,ZY:()=>m,k6:()=>h,m8:()=>g});var s=a(92534),n=a(27378),r=a(3620),i=a(35160),o=a(51158),l=a(18804);const c=[],d=[],u=[],p=[],g=(0,s.lX)({getUserConfirmation:async(e,t)=>{var a,s;await(null===(a=u[0])||void 0===a?void 0:a.call(u));const{isDesktop:n,via:r}=null!==(s=p[0])&&void 0!==s?s:{};n?(0,l.A5)({options:{message:e,name:i.t.Confirm,onClose:()=>{var e;null===(e=d[0])||void 0===e||e.call(d),t(!1)},onConfirm:()=>{var e,a;const{shouldCancelRouteChange:s=!1}=null!==(a=null===(e=c[0])||void 0===e?void 0:e.call(c))&&void 0!==a?a:{};t(!s)},via:r},type:"TOGGLE_MODAL"}):(0,l.A5)({options:{message:e,name:"CONFIRM",onClose:()=>{var e;null===(e=d[0])||void 0===e||e.call(d),t(!1)},onConfirm:()=>{var e,a;const{shouldCancelRouteChange:s=!1}=null!==(a=null===(e=c[0])||void 0===e?void 0:e.call(c))&&void 0!==a?a:{};t(!s)}},type:"TOGGLE_DRAWER"})}}),m=(e,t,a,s)=>{n.useEffect((()=>(c.length>0&&(0,o.Kp)("Adding ConfirmedRouteChangeHandler when another handler is already present",{once:!0}),c.unshift(e),d.unshift(t),u.unshift(a),p.unshift(s),()=>{const n=c.indexOf(e);n>=0&&c.splice(n,1);const r=d.indexOf(t);r>=0&&d.splice(r,1);const i=u.indexOf(a);i>=0&&u.splice(i,1);const o=p.indexOf(s);o>=0&&p.splice(o,1)})),[e,t,a,p])},h=()=>(0,r.k6)(),_=()=>(0,r.TH)()},29134:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var s=a(27378);const n=(e,t,a)=>{const[n,r]=s.useState(e);return s.useEffect((()=>{const e=new AbortController,a=e.signal;return(async()=>{const e=await t(a);a.aborted||r(e)})(),()=>{e.abort()}}),a),n}},11883:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var s=a(27378),n=a(63301),r=a(42464);const i=(e=1e3)=>{const[t,a]=s.useState(Date.now()+(0,n.nn)());return(0,r.Z)((()=>a(Date.now()+(0,n.nn)())),e),t}},42464:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var s=a(27378);const n=(e,t)=>{const a=s.useRef(e);s.useEffect((()=>{a.current=e}),[e]),s.useEffect((()=>{if(void 0!==t){const e=setInterval((()=>a.current()),t);return()=>clearInterval(e)}}),[t])}},13707:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var s=a(27378);const n=new Map,r=(e,t)=>{const[a,r]=s.useState();return s.useLayoutEffect((()=>{let a=!1;return(async()=>{var s;const i=null!==(s=n.get(e))&&void 0!==s?s:t();n.has(e)||n.set(e,i);const o=await i;a||r(o)})(),()=>{a=!0}}),[]),a}},53229:(e,t,a)=>{"use strict";a.d(t,{Fo:()=>u,Lm:()=>i,Vp:()=>o,lV:()=>c,lh:()=>l,qy:()=>d,sZ:()=>r,vl:()=>n});var s=a(80254);const n=(e=window.location.search)=>Object.fromEntries(new URLSearchParams(e).entries()),r=(e,t,a)=>{const s=new URLSearchParams(a.location.search);s.set(e,t),a.replace({search:s.toString()})},i=(e=window.location.search)=>n(e.replace(/\+/g,"%2B")),o=e=>s.XP(e).sort().map((t=>[t,e[t]].map(encodeURIComponent).join("="))).join("&"),l=s.HP(((e,t)=>new Promise(((a,s)=>{const n=document.createElement("script");n.async=!0,n.id=null!=t?t:`duo${`${Math.random()}`.split(".")[1]}_${Date.now()}`,n.onerror=s,n.onload=a,n.src=e,n.type="text/javascript";const r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(n,r)})))),c=e=>encodeURIComponent(e.replace(/[!"#$%&'()*+,\-./:;<=>?@[\]^_`{|}~ \b\f\n\r\t\v¿]+/g," ").trim().replace(" ","-")),d=e=>e,u=e=>new URL(e).hostname},8654:(e,t,a)=>{"use strict";a.d(t,{H8:()=>S,Hy:()=>R,Q7:()=>C,T$:()=>P,Ti:()=>A,VG:()=>L,_i:()=>b,ip:()=>T,k8:()=>N,k_:()=>E,lw:()=>h,mD:()=>O,pu:()=>F,sS:()=>D,to:()=>x,yL:()=>w});var s=a(27378),n=a(37803),r=a(80254),i=a(63301),o=a(93746),l=a(51158);const c=/\{\{#_iv\}\}(.+?)\{\{\/_iv\}\}/g,d=/\{\{#_ivar\}\}(.+?)\{\{\/_ivar\}\}/g,u=/\{\{#pluralize\}\}(.+?)\{\{\/pluralize\}\}/g,p=/\{\{(\w+?)\}\}/g,g=/<[a-z].*?>/i,m={'"le/l\'"':'\\"le/l\'\\"','"lowercase"':'\\"lowercase\\"','("of")':'(\\"of\\")'},h="rtl"===(()=>{if(document.dir)return document.dir;return document.documentElement.getAttribute("dir")||"ltr"})(),_=r.HP((e=>new Function("n",`return ${(0,o.EU)(e)};`))),v=e=>"number"==typeof e?`${e}`:`placeholder_${e.project}`,f=r.HP((e=>{(0,l.vU)(`Showing placeholder string for project ${e.project}`,{data:{placeholderText:e.text}})}),(e=>e.project)),b=(e,t={},a={})=>{try{return((e,t,a)=>{var n,b,S,y,E,I;const k=v(e);if((0,i.gQ)("renderStringIds"))return`string_${k}`;let w;if("number"==typeof e){let t=null===(S=null===(b=window.duo.l10n.strings[null!==(n=a.lang)&&void 0!==n?n:window.duo.uiLanguage])||void 0===b?void 0:b[e])||void 0===S?void 0:S[0];if(void 0===t){const a=null===(E=null===(y=window.duo.l10n.strings.en)||void 0===y?void 0:y[e])||void 0===E?void 0:E[0];if(void 0===a)throw Error(`Missing localization for string ${e}.`);(0,l.vU)(`Could not find string ${e}, falling back to en text`),t=a}w=t[1]}else(0,i.Au)()||f(e),w=e.text;(null!==(I=a.addRightToLeftMark)&&void 0!==I?I:h)&&(w=`‏${w}`),w=a.preprocess?a.preprocess(w):w,w=w.replace(u,(({},e)=>{let a;try{let t=e;Object.entries(m).forEach((([e,a])=>t=t.split(e).join(a))),a=JSON.parse(t)}catch(t){a=e.split(",")}const s=t[a.pop().slice(2,-2)];return a[_(o.h9)(s)]})),w=w.replace(d,(({},e)=>`{{#_iv}}{{${e}}}{{/_iv}}`));const T=g.test(w);w=w.replace(p,(({},e)=>{if(!(e in t))return(0,l.vU)(`Missing variable: ${e} for string ID ${k}`,{once:!0}),"";const a=t[e];return"string"!=typeof a&&"number"!=typeof a?((0,l.vU)(`Invalid variable value for: ${e} for string ID ${k}`,{data:{localizedString:w},once:!0,sample:.01}),""):T?r.YU(`${a}`):`${a}`})),w=w.replace(c,(({},e)=>{var t;const s=window.duo.l10n.undeclared[null!==(t=a.lang)&&void 0!==t?t:window.duo.uiLanguage];return s&&e in s?s[e]:e.split("||")[0]}));const{postprocess:C=(e=>e)}=a;if(a.stripTags&&(w=(e=>{if(!g.test(e))return e;try{const t=document.createElement("div");for(t.innerHTML=e;t.firstElementChild;)t.removeChild(t.firstElementChild);if(null===t.textContent)throw Error();return t.textContent}catch(t){return e.replace(/<([^>]+?)([^>]*?)>(.*?)<\/\1>/gi,"")}})(w)),w=C(w),"fr"===window.duo.uiLanguage&&(w=w.replace(/(\u00AB) | ([?!:;\u00BB])/g,"$1 $2")),(0,i.gQ)("longStrings")&&(w=`${w} ${w}`),a.exportTags)return w;let R=T?s.createElement("span",{dangerouslySetInnerHTML:{__html:w}}):w;return(0,i.gQ)("stringIdTooltips")&&(R=s.createElement("span",{title:`string_${k}`},R)),R})(e,t,a)}catch(e){return(0,l.vU)("Localization failed",{ex:e}),""}},S=(e,t={},a={})=>{const s=b(e,t,a);if("number"==typeof s||"string"==typeof s)return s.toString();try{const t=document.createElement("div");return t.innerHTML=n.uS(s),(0,i.gQ)("stringIdTooltips")?`${t.innerText} (string_${v(e)})`:t.innerText}catch(t){return(0,l.vU)("Failed to convert ReactElement to string",{data:{stringId:e}}),""}},y=["AT","BE","BG","CY","CZ","DK","DE","EE","EL","ES","FI","FR","GB","HR","HU","IE","IT","LT","LU","LV","MT","NL","PL","PT","RO","SE","SI","SK","UK"],E=e=>!!e.ipCountry&&y.includes(e.ipCountry);var I;!function(e){e.DEFAULT=", ",e.zh="、",e.ar="، ",e.ja="・"}(I||(I={}));const k=["ar","el","en","hi","ko","zh"],w=e=>k.includes(o.h9)?`${e%12||12}${e<12?"am":"pm"}`:`${e}:00`,T=()=>[S(18415),S(11602),S(667),S(974),S(21780),S(19860),S(14040)],C=()=>[S(30377),S(30378),S(30379),S(30380),S(30381),S(30382),S(30383)],R=()=>[S(34912),S(34913),S(34914),S(34915),S(34916),S(34917),S(34918)],L=()=>[S(36297),S(36298),S(36299),S(36300),S(36301),S(36302),S(36303),S(36304),S(36305),S(36306),S(36307),S(36308)],O=()=>[S(30384),S(30385),S(30386),S(30387),S(30388),S(30389),S(30390),S(30391),S(30392),S(30393),S(30394),S(30395)],P=(e,t={day:"numeric",month:"long"})=>new Intl.DateTimeFormat((0,o.M$)(window.duo.uiLanguage),t).format(e),A=["zh-CN","zh-TW","ja","ko","th"].includes(window.duo.uiLanguage),D=async(e,t)=>{const s=await a(55081)(`./${e}.duostrings`);window.duo.l10n.strings[e]=Object.assign(Object.assign({},window.duo.l10n.strings[e]),t?r.ei(s.sources,t):s.sources)},x=(e,t,a)=>e.replace(/<a href="(.*?)">/g,`<a class="${t}" href="$1"${void 0===a?"":`target="${a}"`}>`),N=()=>{var e,t;const a=(0,o.BE)(),s=/^([a-z]{2,3})(?:-([a-z]{3})(?=$|-))?(?:-([a-z]{4})(?=$|-))?(?:-([a-z]{2}|\d{3})(?=$|-))?/i.exec(a);return((e,t)=>{const a="AEAFBHDJDZEGIQIRJOKWLYOMQASDSY".match(/../g),s="AGARASAUBDBRBSBTBWBZCACNCODMDOETGTGUHKHNIDILINJMJPKEKHKRLAMHMMMOMTMXMZNINPPAPEPHPKPRPTPYSASGSVTHTTTWUMUSVEVIWSYEZAZW".match(/../g),n="amasbndzengnguhehiidjajvkmknkolomhmlmrmtmyneomorpapssdsmsnsutatethtnurzhzu".match(/../g);return e?(null==s?void 0:s.includes(e))?0:(null==a?void 0:a.includes(e))?6:1:(null==n?void 0:n.includes(t))?0:["ar","arq","arz","fa"].includes(t)?6:1})(null!==(e=null==s?void 0:s[4])&&void 0!==e?e:null,null!==(t=null==s?void 0:s[1])&&void 0!==t?t:"en")},F=e=>{let t;return null===(t=/(.*)<([\w]+)>(.*)<\/\2>(.*)/g.exec(e))||void 0===t?["","",""]:[t[1],t[3],t[4]]}},60752:(e,t,a)=>{"use strict";a.d(t,{b:()=>g});var s=a(47987),n=a(50498),r=a(51158),i=a(18804),o=a(79465);const l="duolingo";let c,d=!1;const u=()=>(0,i.A5)({type:"UNMOUNT"}),p=(e,t)=>{switch(t){case 0:{const t=e;t.createObjectStore("prefetchedSessions"),t.createObjectStore("submittableSessions",{keyPath:"id"})}case 1:e.deleteObjectStore("prefetchedSessions"),e.createObjectStore("prefetchedSessions");case 2:{const t=e;t.deleteObjectStore("submittableSessions"),t.createObjectStore("submittableRequests",{autoIncrement:!0})}case 3:e.deleteObjectStore("prefetchedSessions"),e.createObjectStore("prefetchedSessions");case 4:e.deleteObjectStore("submittableRequests"),e.createObjectStore("submittableRequests",{autoIncrement:!0});case 5:e.deleteObjectStore("prefetchedSessions"),e.createObjectStore("prefetchedSessions");case 6:case 7:e.deleteObjectStore("submittableRequests"),e.createObjectStore("submittableRequests",{autoIncrement:!0});case 8:e.deleteObjectStore("prefetchedSessions"),e.createObjectStore("prefetchedSessions")}},g=async()=>(c||(c=m()),c),m=async()=>{try{const e=await(0,s.X3)(l,9,{blocked:(e,t)=>{(0,o.track)("indexeddb_connection_blocked",{indexeddb_requested_version:t,indexeddb_version:e})},blocking:(t,a)=>{e.close(),d||((0,o.track)("indexeddb_connection_blocking",{indexeddb_requested_version:a,indexeddb_version:t}),d=!0,u())},terminated:()=>{(0,r.Kp)("IndexedDB connection was terminated abnormally",{once:!0}),c=void 0},upgrade:p});return e}catch(e){if("VersionError"===e.name){const e=(await indexedDB.databases()).find((e=>e.name===l));(0,o.track)("indexeddb_version_conflict",{indexeddb_requested_version:9,indexeddb_version:null==e?void 0:e.version}),u(),await(0,n.f)()}throw e}}},1930:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n,kv:()=>i,w0:()=>r});var s=a(59737);const n=a(2407).cn,r=s.w0,i=s.kv},80728:(e,t,a)=>{"use strict";a.d(t,{n:()=>s});const s="jotai"===(0,a(53229).vl)().leaderboardStateOverride||!0===window.duo.leaderboardStateExperiment},43633:(e,t,a)=>{"use strict";a.d(t,{$k:()=>l,eG:()=>d,gh:()=>u,nx:()=>o,zJ:()=>c});var s=a(2407),n=a(60106),r=a(1930);let i;const o=()=>null==i?void 0:i.persister,l=()=>null==i?void 0:i.reduxAtom,c=()=>null==i?void 0:i.store,d=(0,r.cn)(null);d.debugLabel="globalStore";const u=({persister:e,reduxStore:t})=>{var a;if(void 0!==i)throw Error("configureGlobalStore called twice");const o=(0,s.MT)();o.set(d,o);const l=(0,r.cn)(t.getState());l.debugLabel="globalRedux",t.subscribe((()=>{o.set(l,t.getState())}));const c=new n.Z(null!==(a=e.get())&&void 0!==a?a:{});c.subscribe((()=>{e.set((()=>c.getAll()))})),i={persister:c,reduxAtom:l,store:o}}},28818:(e,t,a)=>{"use strict";a.d(t,{Dv:()=>c,oR:()=>l,wq:()=>o});var s=a(27378),n=a(70644),r=a(43633);const i=s.createContext(void 0),o=({children:e,storeOverride:t})=>s.createElement(i.Provider,{value:null!=t?t:(0,r.zJ)()},e),l=()=>{const e=s.useContext(i);if(void 0===e)throw Error("useStore must be used within a JotaiProvider");return e},c=e=>{const t=l();return(0,n.useSyncExternalStore)(s.useCallback((a=>{let s=!1;const n=t.sub(e,(()=>{s||a()}));return()=>{s=!0,setTimeout((()=>n()),0)}}),[t,e]),s.useCallback((()=>t.get(e)),[t,e]))}},97252:(e,t,a)=>{"use strict";a.d(t,{mV:()=>Ce,Zr:()=>we,tR:()=>Ie,KK:()=>Ne,EF:()=>Me,i2:()=>Pe,G9:()=>Ue,kc:()=>Ge,SF:()=>Ve,Q0:()=>He,_B:()=>Be,Yp:()=>je,xk:()=>Te,wN:()=>ke,Z5:()=>Ee,Rj:()=>xe,_w:()=>Re,mS:()=>Oe,YM:()=>Ae,ro:()=>ze});var s=a(27378),n=a(99369),r=a(42659),i=a(51399),o=a(83936),l=a(43464),c=a(81149),d=a(87471),u=a(51158),p=a(12125),g=a(81621);const m=({signal:e}={})=>async(t,a)=>{var s;const n=(0,r.np)(a()),i=0===(0,o._C)(a()),[u,g,m,_]=await Promise.all([(0,d.ud)(n)?l.dQ.get(l.dQ.LEAGUES_ID,n.id,i):Promise.resolve(void 0),(0,d.ud)(n)&&"experiment"===(0,c.j6)("gweb_diamond_tournament_dogfooding",void 0)?l.dQ.get(l.dQ.TOURNAMENT_DOGFOODING_LEADERBOARD_ID,n.id,i):Promise.resolve(void 0),n.classroomLeaderboardsEnabled?l.dQ.get(l.dQ.SCHOOLS_CLASSROOM_LEADERBOARD_ID,n.id):Promise.resolve(void 0),n.classroomLeaderboardsEnabled?l.bu.getUserClassroomLeaderboardInfo(n.id):Promise.resolve(void 0)]);if(null==e?void 0:e.aborted)return;const v=!!(null==g?void 0:g.active),f=null===(s=null!=m?m:v?g:u)||void 0===s?void 0:s.active;if(f){const e=f.cohort.rankings.findIndex((e=>e.userId===f.userId));-1!==e&&(t({reaction:f.cohort.rankings[e].reaction,type:"SET_USER_REACTION"}),t(h()))}else if((0,d.ud)(n)){const a=await l.dQ.getReactionUncohorted(l.dQ.LEAGUES_ID,n.id);if(null==e?void 0:e.aborted)return;t({reaction:a,type:"SET_USER_REACTION"})}let b;if(m&&_){if(m.active){const e=m.active.cohort.rankings.reduce(((e,t)=>(e[t.userId]=t,e)),{});m.active.cohort.rankings=(0,p.Y)(_.eligible_students.map((t=>{var a,s,n,r,i,o;return{avatarUrl:t.avatar_url,displayName:t.display_name,hasRecentActivity:null!==(s=null===(a=e[t.user_id])||void 0===a?void 0:a.hasRecentActivity)&&void 0!==s&&s,reaction:null!==(r=null===(n=e[t.user_id])||void 0===n?void 0:n.reaction)&&void 0!==r?r:"NONE",score:null!==(o=null===(i=e[t.user_id])||void 0===i?void 0:i.score)&&void 0!==o?o:0,userId:t.user_id}})))}b={alias:"classroom",classroomId:_.classroom_id,classroomName:_.classroom_name,learningLanguageId:_.learning_language_id,socialDisabledUsers:_.eligible_students.flatMap((e=>e.social_enabled?[]:[e.user_id])),state:m}}t({classroomLeaderboard:b,leagues:v?{alias:"tournament",state:g}:u?{alias:"leagues",state:u}:void 0,type:"UPDATE_LEADERBOARDS"})},h=()=>async(e,t)=>{var a,s;const n=(0,r.Mb)(t()),o=(0,i.po)(t()),c=(0,i.Ug)(t());if(Math.random()>=(null!==(a=n.featureFlags.web_fetch_leaderboard_streak)&&void 0!==a?a:0))return;if(!(null===(s=null==c?void 0:c.state.active)||void 0===s?void 0:s.cohort.rankings))return;const d=(null==o?void 0:o.cohortId)!==c.state.active.cohort.id,p=c.state.active.cohort.rankings.map((e=>e.userId)),g=await Promise.all(p.map((e=>d||void 0===(null==o?void 0:o.streakLengths[e])?(async e=>{var t;try{return(await l.Vi.userInfoPartial(e,["streak"])).streak}catch(e){return(0,l.Hx)(e)&&404===(null===(t=e.response)||void 0===t?void 0:t.status)?null:void(0,u.Kp)("failed to fetch leaderboard streaks with redux",{ex:e})}})(e):o.streakLengths[e])));e({streaks:{cohortId:c.state.active.cohort.id,streakLengths:p.reduce(((e,t,a)=>(e[t]=g[a],e)),{})},type:"SET_LEADERBOARD_STREAKS"})};var _=a(1930),v=a(43633);const f=new WeakMap,b=e=>{let t=f.get(e);return void 0===t&&(t=(0,_.cn)((t=>{const a=(0,v.$k)();if(void 0===a)throw Error("Redux state atom not found");return e(t(a))})),t.debugLabel=`atomFromReduxSelector(${e.name})`,f.set(e,t)),t};var S=a(80728),y=a(28818),E=a(30427),I=a(80254);const k=e=>async(t,a)=>{var s=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]])}return a}(a,[]);const n=()=>{if(0===Object.keys(s).length)throw Error("All requests aborted")},r=(e,t,a=void 0)=>{const n=s[e];delete s[e],void 0!==n&&(void 0===a?void 0!==t?n.resolver.resolve(t):n.resolver.reject(Error(`Fetcher failed to fetch data for ${e.toString()}`)):n.resolver.reject(a))};try{Object.keys(s).forEach((e=>{var t;const a=null===(t=s[e])||void 0===t?void 0:t.resolver.signal;(null==a?void 0:a.aborted)?delete s[e]:null==a||a.addEventListener("abort",(()=>{delete s[e]}))})),await e({batch:s,batchKey:t,resolveField:r,resolveIndexField:r,throwIfAllAborted:n}),Object.keys(s).forEach((e=>{var t;null===(t=s[e])||void 0===t||t.resolver.reject(Error("Request not resolved by fetcher"))}))}catch(e){Object.keys(s).forEach((t=>{var a;null===(a=s[t])||void 0===a||a.resolver.reject(e)}))}},w=e=>{let t=e.filter((e=>!e.signal.aborted));if(t.length<=1)return e[0];const a=new AbortController;return t.forEach((e=>{e.signal.addEventListener("abort",(()=>{t=t.filter((t=>t!==e)),0===t.length&&a.abort()}))})),{reject:e=>{t.forEach((t=>{t.reject(e)}))},resolve:e=>{t.forEach((t=>{t.resolve(e)}))},signal:a.signal}},T=e=>{const t=new WeakMap,a=new WeakMap;return(...s)=>{let n=t;for(const e of s)n.has(e)||n.set(e,new WeakMap),n=n.get(e);if(a.has(n))return a.get(n);const r=e(...s);return a.set(n,r),r}},C=T((e=>JSON.stringify(e,(({},e)=>Array.isArray(e)||"object"!=typeof e||null===e?e:Object.keys(e).sort().reduce(((t,a)=>(t[a]=e[a],t)),{}))))),R=e=>{switch(typeof e){case"boolean":case"number":case"string":return JSON.stringify(e);case"undefined":return"undefined";case"object":return null===e?"null":C(e);default:throw Error("Unhandled type "+typeof e)}},L=(e,t,a)=>s=>{const n={};s.forEach((({params:a,resolver:s})=>{const r=a[0],i="function"==typeof t?t:t[r],o="function"==typeof e?()=>e(...a):()=>e[r](a[1]),[l,c]=o(),d=R(l);let u=n[d];void 0===u&&(u=[l,{}],n[d]=u);const p=u[1][r];u[1][r]=void 0===p?{params:c,resolver:s}:{params:i(p.params,c,r),resolver:w([p.resolver,s])}})),Object.values(n).forEach((([e,t])=>{a(e,t)}))},O=(e,t=0)=>{let a,s=[];return n=n=>{s.push(n),void 0===a&&(a=setTimeout((()=>{a=void 0;const t=s;s=[],e(t)}),t))},e=>t=>new Promise(((a,s)=>{n({params:e,resolver:{reject:s,resolve:a,signal:t}})}));var n};const P=O(L({classroomLeaderboard:({userId:e})=>[{userId:e},{}],leaguesLeaderboard:e=>{var{userId:t}=e,a=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]])}return a}(e,["userId"]);return[{userId:t},Object.assign({},a)]},reaction:({userId:e})=>[{userId:e},{}]},{classroomLeaderboard:()=>({}),leaguesLeaderboard:(e,t)=>({wasUnlocked:e.wasUnlocked||t.wasUnlocked}),reaction:()=>({})},k((async({batch:e,batchKey:{userId:t},resolveField:a})=>{const s=void 0===e.leaguesLeaderboard?Promise.resolve(void 0):l.dQ.get(l.dQ.LEAGUES_ID,t,e.leaguesLeaderboard.params.wasUnlocked),n=void 0===e.leaguesLeaderboard||"control"===(0,c.j6)("gweb_diamond_tournament_dogfooding",void 0)?Promise.resolve(void 0):l.dQ.get(l.dQ.TOURNAMENT_DOGFOODING_LEADERBOARD_ID,t,e.leaguesLeaderboard.params.wasUnlocked),r=void 0===e.classroomLeaderboard?[Promise.resolve(void 0),Promise.resolve(void 0)]:[l.dQ.get(l.dQ.SCHOOLS_CLASSROOM_LEADERBOARD_ID,t),l.bu.getUserClassroomLeaderboardInfo(t)],[i,o,d,u]=await Promise.all([s,n,...r]),g=(null==o?void 0:o.active)?{alias:"tournament",state:o}:i?{alias:"leagues",state:i}:void 0,m=await(async()=>{var a,s;if(void 0===e.reaction)return;const n=null===(a=null!=d?d:null==g?void 0:g.state)||void 0===a?void 0:a.active,r=null===(s=null==n?void 0:n.cohort.rankings.find((e=>e.userId===t)))||void 0===s?void 0:s.reaction;return void 0!==r?r:l.dQ.getReactionUncohorted(l.dQ.LEAGUES_ID,t)})();a("classroomLeaderboard",(()=>{if(void 0!==d&&void 0!==u){if(d.active){const e=d.active.cohort.rankings.reduce(((e,t)=>(e[t.userId]=t,e)),{});d.active.cohort.rankings=(0,p.Y)(u.eligible_students.map((t=>{var a,s,n,r,i,o;return{avatarUrl:t.avatar_url,displayName:t.display_name,hasRecentActivity:null!==(s=null===(a=e[t.user_id])||void 0===a?void 0:a.hasRecentActivity)&&void 0!==s&&s,reaction:null!==(r=null===(n=e[t.user_id])||void 0===n?void 0:n.reaction)&&void 0!==r?r:"NONE",score:null!==(o=null===(i=e[t.user_id])||void 0===i?void 0:i.score)&&void 0!==o?o:0,userId:t.user_id}})))}return{alias:"classroom",classroomId:u.classroom_id,classroomName:u.classroom_name,learningLanguageId:u.learning_language_id,socialDisabledUsers:u.eligible_students.flatMap((e=>e.social_enabled?[]:[e.user_id])),state:d}}})(),void 0),a("leaguesLeaderboard",g,void 0),a("reaction",m,void 0)})))),A=(()=>{const e=O(L((()=>[null,null]),(()=>null),k((async({batch:e,resolveIndexField:t})=>{const a=e=>parseInt(e,10);(await Promise.all(Object.keys(e).map((async e=>{var t;try{return[e,(await l.Vi.userInfoPartial(a(e),["streak"])).streak,void 0]}catch(a){return(0,l.Hx)(a)&&404===(null===(t=a.response)||void 0===t?void 0:t.status)?[e,null,void 0]:[e,void 0,a]}})))).forEach((([e,s,n])=>{t(a(e),s,n)}))}))));return({userId:t})=>e([t,null])})();var D=a(68903);const x=e=>(t,a)=>{if(e in t)throw Error(`Property ${e} already exists`);t[e]=a},N=x("mount"),F=x("selfNetworkStatus"),M=x("refetch"),U=x("syncOverride"),H=e=>{const t=(0,_.cn)(null,((t,a,s,n)=>{a(e,{mutationFn:({update:e})=>(e({type:"override",value:s}),{status:n})})}));return U(e,t),e},j=(e,t)=>G(e,(e=>e),t),G=(e,t,a=_.cn)=>{const s=I.IH((()=>{const t=(0,v.nx)();if(void 0===t)throw Error("Jotai persister not found");return t.substate(e)})),n=I.IH((()=>a(s().get())));return(0,_.cn)((e=>e(n())),((e,a,r)=>{a(n(),r);const i=t(e(n()));s().set((()=>i))}))},B=I.HP((e=>t=>t[e])),V=(e,t)=>{const a=B(t),s=(0,_.kv)(e,a);return void 0===s.debugLabel&&(s.debugLabel=`${e.debugLabel}["${t}"]`),s},z=e=>"selfNetworkStatus"in e,Z=e=>e.includes("mutating")?"mutating":e.includes("loading")?"loading":"idle",$=T((e=>{const t=(0,_.cn)((t=>{const a=t(e).map((e=>t(W(e))));return Z(a)}));return t.debugLabel=`${e.debugLabel}.ionDependentNetworkStatus`,t})),W=T((e=>{const t=(0,_.cn)((t=>Z([...z(e)?[t(V(e.networkStatus,"value"))]:[],...t(z(e)?V(e.networkStatus,"deps"):V(e,"deps")).flatMap((e=>t(W(e))))])));return t.debugLabel=`${e.debugLabel}.ionNetworkStatus`,t})),q=e=>t=>{const a=[],s=e=>(a.push(e),t(V(e,"value")));s.record=e=>a.push(e),s.untracked=t;const n=e(s);return{deps:a,value:n}},Q=(e,t,a=Object.is)=>{const s=(0,_.kv)(V(e,"value"),t,a);void 0===s.debugLabel&&(s.debugLabel=`${e.debugLabel}.select_internal(${t.name})`);const n=[e],r=(0,_.cn)((e=>({deps:n,value:e(s)})));return r.debugLabel=`${e.debugLabel}.select(${t.name})`,r};const Y=(e,t,a,{blockOnDependencies:s=!0,fetchOnMount:n=!0,queryKeyHasher:r=(e=>e)}={})=>{const i=e=>R([e.refetchKey,r(e.queryKey)]),o=(0,_.w0)(0,((e,{})=>e+1));o.debugLabel=`${e}.refetchKey`;const l=(0,_.cn)({});l.debugLabel=`${e}.queryStatus`;const c=(0,_.cn)([]);c.debugLabel=`${e}.mutationStatus`;const d=(0,_.cn)(q((e=>{const t=e.untracked(o);return n||0!==t?a(e).map((e=>Object.assign(Object.assign({},e),{refetchKey:t}))):[]})));d.debugLabel=`${e}.query`;const p=(0,_.cn)(q((e=>{const t=e(d),a=e.untracked(l);return t.every((e=>{var t;return"settled"===(null===(t=a[i(e)])||void 0===t?void 0:t.state)}))})),((e,a,s,n)=>{const r=e(l)[i(s.query)];void 0!==r&&"settled"!==r.state&&r.controller===s.controller&&(e(c).length>0?a(l,(e=>{const t=Object.assign({},e);return t[i(s.query)]={controller:s.controller,query:s.query,result:n,state:"awaitingSettlement"},t})):(a(t,n),a(l,(e=>{const t=Object.assign({},e);return t[i(s.query)]={query:s.query,state:"settled"},t}))))}));p.debugLabel=`${e}.querySettle`;const g=(0,_.cn)((e=>{const t=Object.assign({},e(l)),a=[],n=new Set;return e(c).length>0?[]:((s&&"idle"!==e($(V(d,"deps")))?[]:e(V(d,"value"))).forEach((e=>{const s=i(e),r=t[s];if(void 0===r){if(n.has(s))throw Error("Duplicate query key");a.push({action:"start",query:e})}else"awaitingSettlement"===r.state&&a.push({action:"settle",query:r}),delete t[s]})),[...Object.values(t).map((e=>({action:"abort",query:e}))),...a])}),((e,t,a)=>{const s=e(v.eG);if("teardown"===a)return Object.values(e(l)).forEach((e=>{"running"===e.state&&e.controller.abort()})),void t(l,{});const n=e(g);if(0===n.length)return;const r=I.vM(n,"action"),{abort:o,settle:c,start:d}=r,u=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]])}return a}(r,["abort","settle","start"]);if(!I.xb(u))throw(0,D.RJ)(null),Error(`Unexpected network action types: ${JSON.stringify(Object.keys(u))}`);null==c||c.forEach((({query:e})=>{t(p,e,e.result)}));const m=Object.assign({},e(l));null==o||o.forEach((({query:e})=>{"settled"!==e.state&&e.controller.abort(),delete m[i(e.query)]})),null==d||d.forEach((({query:e})=>{const t=new AbortController,a={controller:t,query:e};m[i(e)]=Object.assign({state:"running"},a),(async()=>{let n;try{n={type:"network-success",value:await e.queryFn(e.queryKey)(t.signal)}}catch(e){n={ex:e,type:"network-failure"}}s.set(p,a,{queryKey:e.queryKey,result:n,type:"network-result"})})()})),t(l,m)}));g.debugLabel=`${e}.queryAction`;const m=(0,_.cn)(q((e=>e.untracked(c).length>0?"mutating":e(p)?"idle":"loading")));m.debugLabel=`${e}.networkState`;const h=(0,_.cn)(q((e=>(e.record(d),e.untracked(t)))),((a,s,n)=>{const r=a(v.eG);let i=!0;const d={update:(...e)=>{i?s(t,...e):r.set(t,...e)}},p=a(c),g=({status:e})=>{switch(e){case"invalidated":s(o,"refetch");break;case"superseded":s(l,(e=>I.Xc(e,(e=>({query:e.query,state:"settled"})))));break;case"unaffected":break;default:throw(0,D.RJ)(e),Error(`Unknown mutation result status ${e}`)}},m=n.mutationFn(d);var h;null!==(h=m)&&"object"==typeof h&&"function"==typeof h.then?(i=!1,s(c,[...p,n]),(async()=>{const{status:t}=await(async()=>{try{return await m}catch(t){return(0,u.Kp)(`Network error during mutation for ${e}`,{ex:t}),{status:"unaffected"}}})();g({status:t}),s(c,(e=>e.filter((e=>e!==n))))})()):g(m)}));return h.debugLabel=`${e}.final`,N(h,(e=>{const t=e.sub(g,(()=>{e.set(g,"update")}));return e.set(g,"update"),()=>{t(),e.set(g,"teardown")}})),F(h,m),M(h,o),h},K=b((e=>e.config.featureFlags)),J=((e,t)=>{const a=(0,_.cn)(Math.random());a.debugLabel=`featureFlag.${e}.random`;const s=(0,_.cn)((t=>{var s;return t(a)<(null!==(s=t(K)[e])&&void 0!==s?s:0)}),(({},e,{})=>{e(a,Math.random())}));return s.debugLabel=`featureFlag.${e}`,s})("web_fetch_leaderboard_streak"),X=(e,t)=>{const a=t();return a.debugLabel=e,a},ee=b(r.dY),te=b((e=>e.user.classroomLeaderboardsEnabled)),ae=b(E.P1(r.np,d.ud)),se=(0,D.p)(["network-result","override"]),ne=e=>(t,a)=>{if(!(e=>{if("object"!=typeof e||null===e)return!1;const{type:t}=e;return"string"==typeof t&&se(t)})(a))return e(t,a);switch(a.type){case"override":{const s="function"==typeof a.value?a.value(t):a.value;return e(t,{type:"new-value",value:s})}case"network-result":return"network-failure"===a.result.type?((0,u.vU)("Failed to fetch leaderboard",{ex:a.result.ex}),t):e(t,{type:"new-value",value:a.result.value});default:throw(0,D.RJ)(a),Error(`Unhandled action type ${a.type}`)}},re=H(Y("classroomLeaderboard",j("classroomLeaderboard",(e=>(0,_.w0)(e,ne(((e,t)=>{switch(t.type){case"new-value":return t.value;case"clear-ended":return void 0===e?((0,u.Kp)("Attempting to clear ended leaderboard with no state"),e):(0,n.setIn)(e,["state","ended"],[]);default:throw(0,D.RJ)(t),Error(`Unhandled action type ${t.type}`)}}))))),(e=>{const t=e.untracked(ee);return void 0!==t&&e.untracked(te)?[{queryFn:P,queryKey:["classroomLeaderboard",{userId:t}]}]:[]}),{fetchOnMount:!1}));re.debugLabel="classroomLeaderboard";const ie=X("leaguesLeaderboard",(()=>{const e=j("leaguesLeaderboard",(e=>(0,_.w0)(e,ne(((e,t)=>{switch(t.type){case"clear-ended":return void 0===e?((0,u.Kp)("Attempting to clear ended leaderboard with no state"),e):(0,n.setIn)(e,["state","ended"],[]);case"new-value":{const a=t.value;if(void 0===a)return e;const s=null==e?void 0:e.state.numSessionsRemainingToUnlock,r=a.state.numSessionsRemainingToUnlock;return(0,n.setIn)(a,["state","numSessionsRemainingToUnlock"],void 0===s||void 0===r?r:Math.max(0,Math.min(s,r)))}default:throw(0,D.RJ)(t),Error(`Unhandled action type ${t.type}`)}}))))),t=(0,_.kv)(e,(e=>0===(null==e?void 0:e.state.numSessionsRemainingToUnlock)));t.debugLabel="leaguesLeaderboard.isUnlocked";const a=Y("leaguesLeaderboard",e,(e=>{const a=e.untracked(ae),s=e.untracked(ee);if(!a||void 0===s)return[];const n=e.untracked(t);return[{queryFn:P,queryKey:["leaguesLeaderboard",{userId:s,wasUnlocked:n}]}]}),{fetchOnMount:!1,queryKeyHasher:([e,t])=>[e,I.CE(t,"wasUnlocked")]});return H(a)})),oe=X("leaderboardReaction",(()=>{const e=j("leaderboardReaction",(e=>(0,_.w0)(e,ne(((e,t)=>{if("new-value"===t.type)return t.value;throw(0,D.RJ)(t.type),Error(`Unhandled action type ${t.type}`)})))));return Y("leaderboardReaction",e,(e=>{const t=e.untracked(ee);return void 0===t?[]:[{queryFn:P,queryKey:["reaction",{userId:t}]}]}),{fetchOnMount:!1})})),le=X("leaderboardSessionEndData",(()=>j("leaderboardSessionEndData",(e=>(0,_.w0)(e,((e,t)=>{const a="leaderboardMoveUpPrompt"!==t.slideType?null!==(n=null===(s=null==e?void 0:e.moveUpPrompts)||void 0===s?void 0:s.numShown)&&void 0!==n?n:0:void 0===e||t.cohortId!==e.moveUpPrompts.cohortId?1:e.moveUpPrompts.numShown+1;var s,n;return{lastShownDate:t.shownDate,moveUpPrompts:{cohortId:t.cohortId,numShown:a}}})))))),ce=X("leaderboardStreaks",(()=>{const e=j("leaderboardStreaks",(e=>(0,_.w0)(e,((e,t)=>{if("network-failure"===t.result.type)return(0,u.Kp)("Failed to fetch leaderboard streak",{ex:t.result.ex}),e;const{cohortId:a,userId:s}=t.queryKey;return a!==(null==e?void 0:e.cohortId)?{cohortId:a,streakLengths:{[t.queryKey.userId]:t.result.value}}:(0,n.setIn)(e,["streakLengths",s],t.result.value)}))));return Y("leaderboardStreaks",e,(t=>{const a=t(pe),s=t(ue);if(void 0===a||void 0===s||!t.untracked(J))return[];const n=t.untracked(e);return s.flatMap((e=>(null==n?void 0:n.cohortId)===a&&void 0!==n.streakLengths[e]?[]:[{queryFn:A,queryKey:{cohortId:a,userId:e}}]))}),{blockOnDependencies:!1})})),de=(0,_.cn)((e=>e(te)?e(re):e(ie)),((e,t,{},a,s)=>{const n=e(te)?"classroom":"leagues";a.alias!==n&&(0,u.Kp)("Attempted to set unexpected leaderboard",{data:{expectedLeaderboard:n,newLeaderboard:a.alias}}),"classroom"===a.alias?t(re.syncOverride,a,s):t(ie.syncOverride,a,s)})),ue=X("activeCohortUserIds",(()=>Q(de,(e=>{var t;return null===(t=null==e?void 0:e.state.active)||void 0===t?void 0:t.cohort.rankings.map((e=>e.userId))}),I.Xy))),pe=X("activeCohortId",(()=>Q(de,(e=>{var t;return null===(t=null==e?void 0:e.state.active)||void 0===t?void 0:t.cohort.id})))),ge=(0,_.cn)(null,((e,t,a)=>{const s=e(ee),n=e(V(pe,"value"));if(void 0===s)throw Error("Cannot set reaction without user ID");t(oe,{mutationFn:async({update:e})=>(e({type:"override",value:a}),void 0===n?await l.dQ.setReactionUncohorted(l.dQ.LEAGUES_ID,s,a):await l.dQ.setReactionCohorted(n,s,a),{status:"superseded"})})})),me=(0,_.cn)(null,((e,t)=>{t(ie.syncOverride,(e=>void 0===e?void 0:(0,n.updateIn)(e,["state","numSessionsRemainingToUnlock"],(e=>void 0===e?e:e-1))),"unaffected")})),he=(0,_.cn)(null,((e,t,a)=>{if("leagues"===a){const t=e(b(r.np));if(!(0,g.Ud)(t)||!(0,d.ud)(t))return;(0,n.setIn)(t,["referralInfo","hasReachedCap"],!1)}const s=e(ee);t("classroom"===a?re:ie,{mutationFn:async({update:e})=>(e({type:"clear-ended"}),await l.dQ.patch("classroom"===a?l.dQ.SCHOOLS_CLASSROOM_LEADERBOARD_ID:"tournament"===a?l.dQ.TOURNAMENT_DOGFOODING_LEADERBOARD_ID:l.dQ.LEAGUES_ID,s),{status:"invalidated"})})})),_e=(0,_.cn)(null,((e,t)=>{t(re.refetch,"refetch"),t(ie.refetch,"refetch"),t(oe.refetch,"refetch")}));var ve=a(18804);const fe=()=>{const e=(0,v.zJ)();if(void 0===e)throw Error("Global Jotai store not initialized");return e},be=b((e=>e.uiPersisted.leaderboardPositionState)),Se=(0,_.cn)(q((e=>{var t,a,s;const n=e.untracked(be);if((null==n?void 0:n.cohortId)===(null===(s=null===(a=null===(t=e(de))||void 0===t?void 0:t.state.active)||void 0===a?void 0:a.cohort)||void 0===s?void 0:s.id))return n}))),ye=(e,t)=>[()=>S.n?(0,y.Dv)(V(t,"value")):(0,ve.Fx)(e),({getState:a})=>S.n?fe().get(V(t,"value")):e(a())],[Ee,Ie]=ye(i.wG,Se),[ke,we]=ye(i.Ug,de),[Te,Ce]=ye(i.L_,re),[Re,Le]=ye(i.po,ce),[Oe,Pe]=ye(i.S2,ie),[Ae,De]=ye(o._C,(0,_.cn)(q((e=>{var t;return null===(t=e(ie))||void 0===t?void 0:t.state.numSessionsRemainingToUnlock})))),[xe,Ne]=ye((e=>e.leaderboards.userReaction),oe),[Fe,Me]=ye((e=>e.leaderboards.sessionEndData),(0,_.cn)(q((e=>e.untracked(le))))),Ue=e=>({dispatch:t,getState:a})=>{var s,o,l;if(!S.n){const s=(0,i.Ug)(a());if("leagues"!==(null==s?void 0:s.alias))return;const o=(0,r.dY)(a());return void t((({leaderboardPositionState:e,leaderboard:t,userId:a,xpGained:s})=>r=>{var i,o,l;if(!(null==t?void 0:t.state.active))return;const c=(0,d.Tm)(t.state.active.cohort.rankings,a);if(-1!==c){const u=t.state.active.cohort.rankings,p=(0,d.TL)({rankings:u,score:u[c].score+s,userId:a}),g=(0,d.Tm)(p,a);r({leaderboardPositionState:{cohortId:t.state.active.cohort.id,lastPositionSeen:null!==(i=null==e?void 0:e.lastPositionSeen)&&void 0!==i?i:c,lastScoreSeen:null!==(o=null==e?void 0:e.lastScoreSeen)&&void 0!==o?o:u[c].score,placesMoved:(null!==(l=null==e?void 0:e.lastPositionSeen)&&void 0!==l?l:c)-g},type:"SET_LEADERBOARD_POSITION_STATE"});const m=(0,n.setIn)(t,["state","active","cohort","rankings"],p);r(Object.assign(Object.assign({},"classroom"===m.alias?{classroomLeaderboard:m}:{leagues:m}),{type:"UPDATE_LEADERBOARDS"}))}})({leaderboard:s,leaderboardPositionState:(0,i.wG)(a()),userId:o,xpGained:e}))}const c=fe(),u=c.get(ee),p=c.get(de).value;if("leagues"!==(null==p?void 0:p.alias))return;if(!(null==p?void 0:p.state.active))return;const g=p.state.active.cohort.rankings,m=(0,d.Tm)(g,u);if(-1===m)return;const h=g[m].score,_=(0,d.TL)({rankings:g,score:h+e,userId:u}),v=(0,d.Tm)(_,u),f=(0,n.setIn)(p,["state","active","cohort","rankings"],_);c.set(de,"syncOverride",f,"unaffected");const b=c.get(Se).value;t({leaderboardPositionState:{cohortId:p.state.active.cohort.id,lastPositionSeen:null!==(s=null==b?void 0:b.lastPositionSeen)&&void 0!==s?s:m,lastScoreSeen:null!==(o=null==b?void 0:b.lastScoreSeen)&&void 0!==o?o:h,placesMoved:(null!==(l=null==b?void 0:b.lastPositionSeen)&&void 0!==l?l:m)-v},type:"SET_LEADERBOARD_POSITION_STATE"})},He=e=>{if(!S.n){if("no-active-leaderboard"===e.onlyIf){const t=(0,i.Ug)(e.getState());if(null==t?void 0:t.state.active)return}return void e.dispatch(m())}const t=fe();if("no-active-leaderboard"===e.onlyIf){const e=t.get(de).value;if(null==e?void 0:e.state.active)return}t.set(_e)},je=e=>({dispatch:t})=>{S.n?fe().set(ge,e.reaction):t((({cohortId:e,reaction:t,userId:a})=>s=>{s({reaction:t,type:"SET_USER_REACTION"}),void 0===e?l.dQ.setReactionUncohorted(l.dQ.LEAGUES_ID,a,t).catch((e=>{var t;(0,l.Hx)(e)&&400===(null===(t=e.response)||void 0===t?void 0:t.status)?s(m()):Promise.reject(e)})):l.dQ.setReactionCohorted(e,a,t)})(e))},Ge=e=>({dispatch:t})=>{S.n?fe().set(he,e):t(((e,t)=>async(a,s)=>{const n=(0,r.np)(s());if("classroom"===e)a({type:"CLEAR_CLASSROOM_LEADERBOARD_ENDED"});else{if(!(0,g.Ud)(n)||!(0,d.ud)(n))return;a({type:"CLEAR_LEAGUES_ENDED"})}await l.dQ.patch("classroom"===e?l.dQ.SCHOOLS_CLASSROOM_LEADERBOARD_ID:"tournament"===e?l.dQ.TOURNAMENT_DOGFOODING_LEADERBOARD_ID:l.dQ.LEAGUES_ID,n.id),await a(m({signal:t}))})(e))},Be=e=>({dispatch:t})=>{t(e),S.n&&fe().set(me)},Ve=e=>({dispatch:t})=>{S.n?fe().set(le,e):t(Object.assign(Object.assign({},e),{type:"LEADERBOARD_SESSION_END_SHOWN"}))},ze=()=>{s.useEffect((()=>{if(!S.n)return;const e=fe(),t=[re,ie,oe,ce].map((t=>t.mount(e)));return()=>{t.forEach((e=>null==e?void 0:e()))}}),[])}},88268:(e,t,a)=>{"use strict";a.d(t,{b:()=>s});const s=(e,t,a)=>{let s;switch(t){case"choice":return s=parseInt(e.key,10)-1,s===a.index&&!e.ctrlKey;case"debug":return e.ctrlKey&&e.altKey&&"KeyD"===e.code;case"number":return s=parseInt(e.key,10)-1,s>=0&&s<9&&!e.ctrlKey;case"slowTts":return e.ctrlKey&&e.shiftKey&&" "===e.key;case"tts":return e.ctrlKey&&!e.shiftKey&&" "===e.key}return!1}},93746:(e,t,a)=>{"use strict";a.d(t,{AP:()=>i,h9:()=>D,Py:()=>v,vI:()=>d,M$:()=>u,b7:()=>p,Jl:()=>S,lx:()=>I,vY:()=>E,BE:()=>g,EU:()=>k,Ux:()=>w,k4:()=>N,D3:()=>f,TS:()=>y,zp:()=>O,nV:()=>P,jO:()=>T,OK:()=>R,vx:()=>A,Dz:()=>b});var s=a(80254);const n=JSON.parse('[{"from_language_id":"ar","learning_language_id":"de","phase":3},{"from_language_id":"ar","learning_language_id":"en","phase":3},{"from_language_id":"ar","learning_language_id":"es","phase":1},{"from_language_id":"ar","learning_language_id":"fr","phase":3},{"from_language_id":"ar","learning_language_id":"sv","phase":3},{"from_language_id":"bn","learning_language_id":"en","phase":3},{"from_language_id":"cs","learning_language_id":"en","phase":3},{"from_language_id":"de","learning_language_id":"en","phase":3},{"from_language_id":"de","learning_language_id":"es","phase":3},{"from_language_id":"de","learning_language_id":"fr","phase":3},{"from_language_id":"de","learning_language_id":"it","phase":3},{"from_language_id":"el","learning_language_id":"en","phase":3},{"from_language_id":"en","learning_language_id":"ar","phase":3},{"from_language_id":"en","learning_language_id":"cs","phase":3},{"from_language_id":"en","learning_language_id":"cy","phase":3},{"from_language_id":"en","learning_language_id":"da","phase":3},{"from_language_id":"en","learning_language_id":"de","phase":3},{"from_language_id":"en","learning_language_id":"el","phase":3},{"from_language_id":"en","learning_language_id":"eo","phase":3},{"from_language_id":"en","learning_language_id":"es","phase":3},{"from_language_id":"en","learning_language_id":"fi","phase":3},{"from_language_id":"en","learning_language_id":"fr","phase":3},{"from_language_id":"en","learning_language_id":"ga","phase":3},{"from_language_id":"en","learning_language_id":"gd","phase":3},{"from_language_id":"en","learning_language_id":"he","phase":3},{"from_language_id":"en","learning_language_id":"hi","phase":3},{"from_language_id":"en","learning_language_id":"ht","phase":3},{"from_language_id":"en","learning_language_id":"hu","phase":3},{"from_language_id":"en","learning_language_id":"hv","phase":3},{"from_language_id":"en","learning_language_id":"hw","phase":3},{"from_language_id":"en","learning_language_id":"id","phase":3},{"from_language_id":"en","learning_language_id":"it","phase":3},{"from_language_id":"en","learning_language_id":"ja","phase":3},{"from_language_id":"en","learning_language_id":"ko","phase":3},{"from_language_id":"en","learning_language_id":"la","phase":3},{"from_language_id":"en","learning_language_id":"mi","phase":1},{"from_language_id":"en","learning_language_id":"nl-NL","phase":3},{"from_language_id":"en","learning_language_id":"no-BO","phase":3},{"from_language_id":"en","learning_language_id":"nv","phase":3},{"from_language_id":"en","learning_language_id":"pl","phase":3},{"from_language_id":"en","learning_language_id":"pt","phase":3},{"from_language_id":"en","learning_language_id":"ro","phase":3},{"from_language_id":"en","learning_language_id":"ru","phase":3},{"from_language_id":"en","learning_language_id":"sv","phase":3},{"from_language_id":"en","learning_language_id":"sw","phase":3},{"from_language_id":"en","learning_language_id":"tlh","phase":2},{"from_language_id":"en","learning_language_id":"tr","phase":3},{"from_language_id":"en","learning_language_id":"uk","phase":3},{"from_language_id":"en","learning_language_id":"vi","phase":3},{"from_language_id":"en","learning_language_id":"yi","phase":3},{"from_language_id":"en","learning_language_id":"zh","phase":3},{"from_language_id":"en","learning_language_id":"zu","phase":3},{"from_language_id":"es","learning_language_id":"ca","phase":3},{"from_language_id":"es","learning_language_id":"de","phase":3},{"from_language_id":"es","learning_language_id":"en","phase":3},{"from_language_id":"es","learning_language_id":"eo","phase":3},{"from_language_id":"es","learning_language_id":"fr","phase":3},{"from_language_id":"es","learning_language_id":"gn","phase":3},{"from_language_id":"es","learning_language_id":"it","phase":3},{"from_language_id":"es","learning_language_id":"pt","phase":3},{"from_language_id":"es","learning_language_id":"qc","phase":1},{"from_language_id":"es","learning_language_id":"ru","phase":3},{"from_language_id":"es","learning_language_id":"sv","phase":3},{"from_language_id":"es","learning_language_id":"yu","phase":1},{"from_language_id":"fr","learning_language_id":"de","phase":3},{"from_language_id":"fr","learning_language_id":"en","phase":3},{"from_language_id":"fr","learning_language_id":"eo","phase":2},{"from_language_id":"fr","learning_language_id":"es","phase":3},{"from_language_id":"fr","learning_language_id":"it","phase":3},{"from_language_id":"fr","learning_language_id":"pt","phase":3},{"from_language_id":"hi","learning_language_id":"en","phase":3},{"from_language_id":"hu","learning_language_id":"de","phase":3},{"from_language_id":"hu","learning_language_id":"en","phase":3},{"from_language_id":"id","learning_language_id":"en","phase":3},{"from_language_id":"it","learning_language_id":"de","phase":3},{"from_language_id":"it","learning_language_id":"en","phase":3},{"from_language_id":"it","learning_language_id":"es","phase":3},{"from_language_id":"it","learning_language_id":"fr","phase":3},{"from_language_id":"ja","learning_language_id":"en","phase":3},{"from_language_id":"ja","learning_language_id":"fr","phase":3},{"from_language_id":"ja","learning_language_id":"ko","phase":3},{"from_language_id":"ja","learning_language_id":"zh","phase":3},{"from_language_id":"ko","learning_language_id":"en","phase":3},{"from_language_id":"ko","learning_language_id":"zh","phase":1},{"from_language_id":"nl-NL","learning_language_id":"de","phase":3},{"from_language_id":"nl-NL","learning_language_id":"en","phase":3},{"from_language_id":"nl-NL","learning_language_id":"fr","phase":3},{"from_language_id":"pa","learning_language_id":"en","phase":1},{"from_language_id":"pl","learning_language_id":"en","phase":3},{"from_language_id":"pt","learning_language_id":"de","phase":3},{"from_language_id":"pt","learning_language_id":"en","phase":3},{"from_language_id":"pt","learning_language_id":"eo","phase":3},{"from_language_id":"pt","learning_language_id":"es","phase":3},{"from_language_id":"pt","learning_language_id":"fr","phase":3},{"from_language_id":"pt","learning_language_id":"it","phase":3},{"from_language_id":"ro","learning_language_id":"en","phase":3},{"from_language_id":"ru","learning_language_id":"de","phase":3},{"from_language_id":"ru","learning_language_id":"en","phase":3},{"from_language_id":"ru","learning_language_id":"es","phase":3},{"from_language_id":"ru","learning_language_id":"fr","phase":3},{"from_language_id":"ru","learning_language_id":"sv","phase":1},{"from_language_id":"ru","learning_language_id":"uk","phase":1},{"from_language_id":"te","learning_language_id":"en","phase":3},{"from_language_id":"th","learning_language_id":"en","phase":3},{"from_language_id":"tl","learning_language_id":"en","phase":3},{"from_language_id":"tr","learning_language_id":"de","phase":3},{"from_language_id":"tr","learning_language_id":"en","phase":3},{"from_language_id":"tr","learning_language_id":"fr","phase":1},{"from_language_id":"tr","learning_language_id":"ru","phase":3},{"from_language_id":"uk","learning_language_id":"en","phase":3},{"from_language_id":"vi","learning_language_id":"en","phase":3},{"from_language_id":"vi","learning_language_id":"zh","phase":3},{"from_language_id":"zh","learning_language_id":"de","phase":1},{"from_language_id":"zh","learning_language_id":"en","phase":3},{"from_language_id":"zh","learning_language_id":"es","phase":2},{"from_language_id":"zh","learning_language_id":"fr","phase":3},{"from_language_id":"zh","learning_language_id":"it","phase":2},{"from_language_id":"zh","learning_language_id":"ja","phase":3},{"from_language_id":"zh","learning_language_id":"ko","phase":2},{"from_language_id":"zh","learning_language_id":"zh-HK","phase":3}]'),r=JSON.parse('{"ar":{"abbrev":"ar","label":"العربية","name":"Arabic","plural_forms":["zero","one","two","few","many","other"],"plural_rule":"n === 0 ? 0 : n === 1 ? 1 : n === 2 ? 2 : n % 100 >= 3 && n % 100 <= 10 ? 3 : n % 100 >= 11 ? 4 : 5","script_direction":"rtl"},"bn":{"abbrev":"bn","label":"বাংলা","name":"Bengali","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"ca":{"abbrev":"ca","label":"català","name":"Catalan","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"cs":{"abbrev":"cs","label":"Čeština","name":"Czech","plural_forms":["one","few","other"],"plural_rule":"(n === 1) ? 0 : (n >= 2 && n <= 4) ? 1 : 2","script_direction":"ltr"},"cy":{"abbrev":"cy","label":"Cymraeg","name":"Welsh","plural_forms":["one","two","other","many"],"plural_rule":"(n === 1) ? 0 : (n === 2) ? 1 : (n !== 8 && n !== 11) ? 2 : 3","script_direction":"ltr"},"da":{"abbrev":"da","label":"dansk","name":"Danish","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"de":{"abbrev":"de","label":"Deutsch","name":"German","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"el":{"abbrev":"el","label":"Ελληνικά","name":"Greek","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"en":{"abbrev":"en","label":"English","name":"English","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"eo":{"abbrev":"eo","label":"Esperanto","name":"Esperanto","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"es":{"abbrev":"es","label":"Español","name":"Spanish","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"fi":{"abbrev":"fi","label":"suomen kieli","name":"Finnish","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"fr":{"abbrev":"fr","label":"Français","name":"French","plural_forms":["one","other"],"plural_rule":"(n > 1) ? 1 : 0","script_direction":"ltr"},"ga":{"abbrev":"ga","label":"Gaeilge","name":"Irish","plural_forms":["one","two","few","many","other"],"plural_rule":"n === 1 ? 0 : n === 2 ? 1 : n < 7 ? 2 : n < 11 ? 3 : 4","script_direction":"ltr"},"gd":{"abbrev":"gd","label":"Gàidhlig","name":"Scottish Gaelic","plural_forms":["one","two","few","other"],"plural_rule":"(n === 1 || n === 11) ? 0 : (n === 2 || n === 12) ? 1 : (n !== 0 && n < 20) ? 2 : 3","script_direction":"ltr"},"gn":{"abbrev":"gn","label":"Avañe\'ẽ","name":"Guarani","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"he":{"abbrev":"he","label":null,"name":"Hebrew","plural_forms":["one","two","many","other"],"plural_rule":"(n === 1) ? 0 : (n === 2) ? 1 : (n > 10 && n % 10 === 0) ? 2 : 3","script_direction":"rtl"},"hi":{"abbrev":"hi","label":"हिंदी","name":"Hindi","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"ht":{"abbrev":"ht","label":"Kreyòl ayisyen","name":"Haitian Creole","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"hu":{"abbrev":"hu","label":"Magyar","name":"Hungarian","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"hv":{"abbrev":"hv","label":"Valyria","name":"High Valyrian","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"hw":{"abbrev":"hw","label":"Ōlelo Hawaiʻi","name":"Hawaiian","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"id":{"abbrev":"id","label":"Bahasa Indonesia","name":"Indonesian","plural_forms":["other"],"plural_rule":"0","script_direction":"ltr"},"it":{"abbrev":"it","label":"Italiano","name":"Italian","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"ja":{"abbrev":"ja","label":"日本語","name":"Japanese","plural_forms":["other"],"plural_rule":"0","script_direction":"ltr"},"ko":{"abbrev":"ko","label":"한국어","name":"Korean","plural_forms":["other"],"plural_rule":"0","script_direction":"ltr"},"la":{"abbrev":"la","label":"Lingua latīna","name":"Latin","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"mi":{"abbrev":"mi","label":null,"name":"Māori","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"nl-NL":{"abbrev":"dn","label":"Nederlands","name":"Dutch","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"no-BO":{"abbrev":"nb","label":"bokmål","name":"Norwegian (Bokmål)","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"nv":{"abbrev":"nv","label":"Diné bizaad","name":"Navajo","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"pa":{"abbrev":"pa","label":"ਪੰਜਾਬੀ","name":"Punjabi (Gurmukhi)","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"pl":{"abbrev":"pl","label":"Polski","name":"Polish","plural_forms":["one","few","many"],"plural_rule":"n === 1 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2","script_direction":"ltr"},"pt":{"abbrev":"pt","label":"Português","name":"Portuguese","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"qc":{"abbrev":"qc","label":null,"name":"K\'iche\'","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"ro":{"abbrev":"ro","label":"Română","name":"Romanian","plural_forms":["one","few","other"],"plural_rule":"n === 1 ? 0 : (n === 0 || (n % 100 > 0 && n % 100 < 20)) ? 1 : 2","script_direction":"ltr"},"ru":{"abbrev":"ru","label":"Русский","name":"Russian","plural_forms":["one","few","many"],"plural_rule":"n % 10 === 1 && n % 100 !== 11 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2","script_direction":"ltr"},"sv":{"abbrev":"sv","label":"svenska","name":"Swedish","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"sw":{"abbrev":"sw","label":"Kiswahili","name":"Swahili","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"te":{"abbrev":"te","label":"తెలుగు","name":"Telugu","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"th":{"abbrev":"th","label":"ภาษาไทย","name":"Thai","plural_forms":["other"],"plural_rule":"0","script_direction":"ltr"},"tl":{"abbrev":"tl","label":"Tagalog","name":"Tagalog","plural_forms":["one","other"],"plural_rule":"(n % 10 === 4 || n % 10 === 6 || n % 10 === 9) ? 1 : 0","script_direction":"ltr"},"tlh":{"abbrev":"kl","label":"tlhIngan Hol","name":"Klingon","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"tr":{"abbrev":"tr","label":"Türkçe","name":"Turkish","plural_forms":["one","other"],"plural_rule":"(n > 1) ? 1 : 0","script_direction":"ltr"},"uk":{"abbrev":"uk","label":"Українською","name":"Ukrainian","plural_forms":["one","few","many"],"plural_rule":"n % 10 === 1 && n % 100 !== 11 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2","script_direction":"ltr"},"vi":{"abbrev":"vi","label":"Tiếng Việt","name":"Vietnamese","plural_forms":["other"],"plural_rule":"0","script_direction":"ltr"},"xx-ZB":{"abbrev":"xz","label":"Español","name":"Spanish","plural_forms":["other"],"plural_rule":"0","script_direction":"ltr"},"yi":{"abbrev":"yi","label":"ייִדיש","name":"Yiddish","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"rtl"},"yu":{"abbrev":"yu","label":null,"name":"Yucatec","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"zh":{"abbrev":"zs","label":"中文","name":"Chinese","plural_forms":["other"],"plural_rule":"0","script_direction":"ltr"},"zh-HK":{"abbrev":"zc","label":"廣東話","name":"Chinese (Cantonese)","plural_forms":["other"],"plural_rule":"0","script_direction":"ltr"},"zu":{"abbrev":"zu","label":"isiZulu","name":"Zulu","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"}}');var i,o=a(81149),l=a(68903),c=a(51158);!function(e){e[e.Active=1]="Active",e[e.Beta=2]="Beta",e[e.Inactive=0]="Inactive",e[e.Released=3]="Released"}(i||(i={}));const d=(e,t)=>"zh"===e?t?"zh-TW":"zh-CN":R(e)?e:"en",u=e=>e.startsWith("zh")?"zh":e.startsWith("nl")?"nl":C(e)?e:((0,c.vU)("UI language not able to be converted to LanguageId.",{data:{languageId:e}}),"en"),p=e=>["bn","hi","pa","ta","te","tl","uk"].includes(e)?"auto":"nl-NL"===e?"nl":"zh-CN"===e?"zh":e,g=()=>{var e;return(null===(e=navigator.languages)||void 0===e?void 0:e[0])||navigator.language||"en"},m=s.Xc(r,(e=>e.abbrev)),h=s.U_(m),_=s.jj(n.filter((e=>e.phase>=i.Active)).flatMap((e=>"zh"===e.from_language_id?["zh-CN","zh-TW"]:e.from_language_id))),v=e=>h[e],f=e=>m[e],b=Object.keys(r),S=s.Xc(s.vM(n.filter((e=>e.phase>=i.Beta)),"from_language_id"),(e=>s.jg(e,"learning_language_id").sort())),y=e=>{if(void 0===e)throw Error("Course is undefined when checking if it is a beta course. It could be caused by the user being languageless.");return"BETA"===e.status},E=e=>r[e].name,I=e=>r[e].label,k=e=>r[e].plural_rule,w=e=>r[e].script_direction,T=(0,l.p)(b),C=((0,l.p)(s.XP(h)),(0,l.p)(["ar","bn","cs","de","el","en","es","fr","hi","hu","id","it","ja","ko","nl","pa","pl","pt","ro","ru","ta","te","th","tl","tr","uk","vi","zh"])),R=(0,l.p)(_),L=s.Xc(s.vM(n,"from_language_id"),(e=>s.jg(e,"learning_language_id").sort())),O=(e,t)=>{var a;return!0===(null===(a=L[t])||void 0===a?void 0:a.includes(e))},P=(e,t)=>{var a;return!0===(null===(a=S[t])||void 0===a?void 0:a.includes(e))},A=e=>["zh-CN","zh-TW","zs"].includes(e),D=(x=window.duo.uiLanguage).startsWith("zh")?"zh":T(x)?x:((0,c.vU)("UI language not able to be converted to LanguageId.",{data:{languageId:x}}),"en");var x;const N=(e,t,a)=>{const s={ja:{en:"use_new_hint_tokenization_ja_en_web_v2"},zh:{en:"use_non_legacy_hint_tokenization_zhcn_en"}};return e in s&&t in s[e]&&a===e&&"experiment"===(0,o.j6)(s[e][t],void 0)||!["ja","th","zh","zh-HK"].includes(e)}},1398:(e,t,a)=>{"use strict";a.d(t,{N:()=>n,Z:()=>r});var s=a(27378);const n=e=>"preload"in e,r=e=>{let t,a,n="uninitialized";const r=async()=>{t=e(),n="pending";try{a=(await t).default,n="resolved"}catch(e){a=e,n="rejected"}},i=s.forwardRef(((e,i)=>{if("uninitialized"===n&&r(),"resolved"===n)return s.createElement(a,Object.assign(Object.assign({},e),{ref:i}));throw null!=a?a:t}));return i.hasLoaded=()=>"resolved"===n,i.getError=()=>"rejected"===n?a:void 0,i.isLoading=()=>"pending"===n,i.preload=async()=>{"uninitialized"===n&&r(),await t},i}},87471:(e,t,a)=>{"use strict";a.d(t,{Ep:()=>f,NO:()=>v,PR:()=>g,TL:()=>I,Tm:()=>E,XU:()=>y,ZL:()=>h,c$:()=>b,dt:()=>w,em:()=>S,fY:()=>k,hn:()=>m,rj:()=>p,u4:()=>_,ud:()=>T});var s=a(99369),n=a(65908),r=a(66586),i=a(25324),o=a(80388),l=a(17135),c=a(63301),d=a(81621),u=a(20028);const p=(e,t)=>t.filter((t=>"CURRENCY"===t.rewardType&&(t.tier===e||null===t.tier))).reduce(((e,t)=>(e[t.rank]=t.itemQuantity,e)),{}),g=(e,t)=>{if(!(null===t||e>=t.length))return t[e]},m=(e,t)=>{if(null!==t&&0!==e)return t[e-1]},h=(e,t)=>!!t&&e<t,_=(e,t,a)=>!!a&&t-e-1<a,v=(e,t)=>{const a=t.map((({cohort:{rankings:e}})=>e.map((({userId:e})=>e)))),s=t.map((({cohort:{tier:e}})=>e)),n=t.map((({contest:{ruleset:{rewards:e}}})=>e)),r=a.map((t=>t.indexOf(e))),i=r[r.length-1],o=s[s.length-1],l=t[t.length-1].contest.ruleset,c=l.cohortSize,d=g(o,l.numPromoted),u=m(o,l.numDemoted),v=h(i,d),f=_(i,c,u);return{lingots:t.map((({},e)=>p(s[e],n[e])[r[e]]||0)).reduce(((e,t)=>e+t),0),rank:v?"PROMOTED":f?"DEMOTED":"STAY"}},f=(e,t,a,s,n)=>0===e?"GOLD":1===e?"SILVER":2===e?"BRONZE":h(e,s)?"GREEN":_(e,t,a)?"RED":n?"GRAY":"WHITE",b=(e,t,a)=>{var s,n,r,i;if((null===(s=null==e?void 0:e.leaderboard)||void 0===s?void 0:s.activeContest)&&e.active){const{cohortSize:s,numDemoted:o,numPromoted:c,numLosers:d,numWinners:u}=e.leaderboard.activeContest.ruleset,p=null!==(n=e.active.cohort.tier)&&void 0!==n?n:e.tier,v=e.active.cohort.rankings,f=E(v,e.active.userId),b=p!==e.tier,S=Date.now(),y=b&&p===(null==c?void 0:c.length)?u:g(p,c),I=b&&0===p?d:m(p,o);if(e.ended&&e.ended.length>=1&&e.active.cohort.rankings.length>=5)return{lastPositionSeen:void 0,lastScoreSeen:void 0,type:"leaderboardJoin"};if(t&&t.placesMoved>=1){if(f<=2&&t.lastPositionSeen>=3)return{lastPositionSeen:t.lastPositionSeen,lastScoreSeen:t.lastScoreSeen,type:"leaderboardTopThree"};if(!h(t.lastPositionSeen,y)&&h(f,y))return{lastPositionSeen:t.lastPositionSeen,lastScoreSeen:t.lastScoreSeen,type:"leaderboardPromoZone"};if(_(t.lastPositionSeen,s,I)&&!_(f,s,I))return{lastPositionSeen:t.lastPositionSeen,lastScoreSeen:t.lastScoreSeen,type:"leaderboardDemoZone"};if(t.placesMoved>=3)return{lastPositionSeen:t.lastPositionSeen,lastScoreSeen:t.lastScoreSeen,type:"leaderboardRankIncreaseLarge"};if(t.placesMoved>0&&t.placesMoved<3)return{lastPositionSeen:t.lastPositionSeen,lastScoreSeen:t.lastScoreSeen,type:"leaderboardRankIncreaseSmall"}}else if(f>=1&&v[f-1].score-v[f].score<=10&&v[f-1].score-v[f].score>0&&(0,l.t8)(e.active.cohort.creationDate,S)>=1&&(0,l.t8)(null!==(r=null==a?void 0:a.lastShownDate)&&void 0!==r?r:0,S)>=1&&(null!==(i=null==a?void 0:a.moveUpPrompts.numShown)&&void 0!==i?i:0)<4)return{lastPositionSeen:void 0,lastScoreSeen:void 0,type:"leaderboardMoveUpPrompt"}}},S=e=>{if(!e)return"default";const t=(0,c.ky)("debugLeaderboards");if(t&&["wait","register","maintenance","locked"].includes(t))return t;const{active:a,ended:s,leaderboard:n,numSessionsRemainingToUnlock:r,tier:i}=e;if(!(null==n?void 0:n.activeContest)||!(null==a?void 0:a.contest)&&!(null==s?void 0:s.length)&&0===r&&-1===i)return"maintenance";const{activeContest:{registrationState:o}}=n;if(void 0!==r&&r>0)return"locked";if(!a&&"CLOSED"===o)return"wait";if(!a&&"OPEN"===o)return"register";if(a)return"contest";throw Error("No view applicable for current league state")},y=e=>{switch(e){case 0:return r;case 1:return i;case 2:return n;default:return}},E=(e,t)=>e.findIndex((e=>e.userId===t)),I=({forceFinalRank:e,rankings:t,score:a,userId:n})=>{const r=E(t,n),i=(0,s.setIn)(t,[r,"score"],a),o=(0,s.asMutable)(i);if(void 0!==e&&e>=0&&e<t.length){if(e===r)return o;const t=Math.min(e,r),a=Math.max(e,r),s=e===t?-1:1;return o.map(((n,o)=>o===e?i[r]:o<t||o>a?n:i[o+s]))}return o.sort(((e,t)=>e.score>t.score?-1:e.score<t.score?1:0))},k=e=>(0,u.jq)(e)&&!(0,d.rt)(e),w=e=>!(0,o.J9)()&&k(e)&&!e.classroomLeaderboardsEnabled,T=e=>(0,d.rt)(e)||(0,d.Ud)(e)&&!e.classroomLeaderboardsEnabled},95941:(e,t,a)=>{"use strict";a.d(t,{gj:()=>O,WP:()=>T,Vq:()=>L,L:()=>C,nw:()=>R,lf:()=>P,Ri:()=>A});const s=a.p+"images/leagues/7f895707cd44583692d20481dcd9e0d0.svg";var n=a(39631);const r=a.p+"images/leagues/192181672ada150becd83a74a4266ae9.svg";var i=a(80869),o=a(83577),l=a(92902);const c=a.p+"images/leagues/c10ac490f8e87c53bd93780fb532127f.svg",d=a.p+"images/leagues/17c5f311f2564d5c8c0e9e4e24eac35c.svg",u=a.p+"images/leagues/a8fc54b1bbe42cfc873ba4a621993102.svg",p=a.p+"images/leagues/f480e032c5222395e73dac88ce3592bb.svg";var g=a(83831);const m=a.p+"images/leagues/0e249b5f869b806da7406b815f4d60c6.svg";var h=a(8466);const _=a.p+"images/leagues/57f0c6b260d33493a0cddc4ab38d6833.svg";var v=a(8146);const f=a.p+"images/leagues/f902954eeaa88fd2cb12f9168b4f68cb.svg";var b=a(79815);const S=a.p+"images/leagues/74d6ab6e5b6f92e7d16a4a6664d1fafd.svg";var y=a(9175);const E=a.p+"images/leagues/3ced84eb1f0274ec0f02b24ae6e3d29b.svg";var I=a(40301);const k=a.p+"images/leagues/8148b17e32d8706a82c02688f559e9ef.svg";var w=a(26858);const T=["bronze","silver","gold","sapphire","ruby","emerald","amethyst","pearl","obsidian","diamond"],C=[r,k,m,E,S,p,s,f,_,o],R=[i,w,h,I,y,g,n,b,v,l],L=[321,21153,6276,10705,2028,3777,23232,11453,14693,9894],O=[3726,2804,10599,2970,9356,5746,16491,19007,12827,10357],P=[c,d,u],A=[30969,31162,31163]},37825:(e,t,a)=>{"use strict";a.d(t,{Hl:()=>d,M_:()=>l,Vp:()=>i,b2:()=>u,d:()=>o,lZ:()=>c,z:()=>r});var s=a(81149),n=a(23275);const r=3,i=()=>"experiment"===(0,s.j6)("mcoach_web_legendary_real_hearts_v2",void 0),o=e=>["practice","skill","story"].includes(e),l=e=>e.includes("/legendary"),c=e=>(0,n.Ol)({levelType:"unit_review",path:e}).some((e=>e.finishedSessions>0)),d=e=>{switch(e){case"practice":return"path_practice";case"skill":return"path_skill";case"story":return"path_story";default:return"path_level"}},u=e=>{switch(e){case"practice":return"promo_practice";case"skill":return"promo_skill";default:return"session_end"}}},26506:(e,t,a)=>{"use strict";a.d(t,{U:()=>n,_:()=>r});class s{constructor(){this.disabled=!1,this.handlers=new WeakMap}addListener(e,t,a,s){var n;const r=null!==(n=this.handlers.get(a))&&void 0!==n?n:e=>{this.disabled||a(e)};this.handlers.set(a,r),e.addEventListener(t,r,s)}removeListener(e,t,a,s){const n=this.handlers.get(a);n&&(this.handlers.delete(a),e.removeEventListener(t,n,s))}enableListeners(){this.disabled=!1}disableListeners(){this.disabled=!0}}const n=new s,r=new s},41364:(e,t,a)=>{"use strict";a.d(t,{U:()=>o,p:()=>c});var s=a(80254);let n,r=0;const i=e=>{null==n||n(e),r=e},o=e=>{n=e},l={GET_USER:1e4,SYNC_STORED_PROGRESS:2e4},c=e=>t=>async(...a)=>{let n,o;const c=s.IH((()=>{n&&window.clearInterval(n),o&&window.clearTimeout(o),i(0)})),d=Date.now(),u=!r;if(u){i(.001);const t=l[e];n=window.setInterval((()=>{const e=(Date.now()-d)/t,a=1-Math.exp(-e);i(a)}),200),o=window.setTimeout(c,2e4)}let p;try{p={type:"value",value:await t(...a)}}catch(e){p={error:e,type:"error"}}u&&c();const g=Date.now()-d;if(l[e]=g,"error"===p.type)throw p.error;return p.value}},39852:(e,t,a)=>{"use strict";a.d(t,{$U:()=>c,JE:()=>y,ar:()=>h,bP:()=>v,cM:()=>m,qr:()=>_,s1:()=>g,si:()=>b});var s=a(99369),n=a(80254),r=a(17135),i=a(63301),o=a(51158);const l={debug:"debug",error:"error",group:"info",groupCollapsed:"info",info:"info",log:"info",warn:"warning"},c=Symbol("EXCLUDE_FROM_ROLLBAR_TELEMETRY"),d=[],u={},p=e=>{d.push(e),d.length>100&&d.shift()},g=()=>{let e=!1;return d.map((t=>"action"===t.type?e?n.CE(t,"state"):(e=!0,t):t))},m=(e,t,a)=>f("log",e,t,a),h=(e,t,a,n)=>{var l;if((0,i.Au)()){const i=null!==(l=null==n?void 0:n.timestamp)&&void 0!==l?l:(0,r.Ux)();v("action",t.type,[{data:(0,s.asMutable)(e),name:"prev state"},{data:t,name:"action"},{data:(0,s.asMutable)(a),name:"next state"}],Object.assign(Object.assign({},n),{excludeFromRollbarTelemetry:!0,timestamp:i})),p({action:t,state:a,timestamp:i,type:"action"})}o.cj(t)},_=(e,t,a,s={})=>{const n=s.localOverride?`Condition ${e} overridden from experiment ${t} in HOF local override`:s.queryOverride?`Condition ${e} overridden from experiment ${t} in HOF query string`:s.url?s.cache?`Condition ${e} retrieved from cache for URL experiment ${t}`:s.default?`Condition control queried from URL experiment ${t}, but experiment record not found`:`Condition ${e} queried from URL experiment ${t}`:`Condition ${e} queried from ${s.loggedOut?"logged out experiment":"experiment"} ${t} in context ${a}${s.cache?", provided by cache":s.default?", but record not found":s.notInRollout?", but user not in rollout":""}`;u[t]!==n&&((0,i.Au)()&&v("condition",`${t} in ${e}`,[{data:n,name:"detail"}],{excludeFromRollbarTelemetry:!0}),u[t]=n)},v=(e,t,a,s)=>{f("groupCollapsed",e,t,s),(0,i.Au)()&&(a.forEach((({name:e,data:t})=>E.log(`%c${e}:`,"font-weight: 700;",t))),E.groupEnd())},f=(e,t,a,s)=>{var n,c;if((0,i.Au)()){const i=((e,t,a,s)=>{const n=[];return"other"!==e&&n.push(e),n.push(`%c${t}`,`%c@ ${a}`),void 0!==s&&n.push(`%c(in ${s.toFixed(2)}ms)`),n.join(" ")})(t,a,(c=null!==(n=null==s?void 0:s.timestamp)&&void 0!==n?n:(0,r.Ux)(),`${S(c.getHours(),2)}:${S(c.getMinutes(),2)}:${S(c.getSeconds(),2)}.${S(c.getMilliseconds(),3)}`),null==s?void 0:s.duration);E[e](`%c${i}`,...((e,t)=>{const a=[];return"other"!==e&&a.push("color: gray; font-weight: lighter;"),a.push("font-weight: 700;","color: gray; font-weight: lighter;"),void 0!==(null==t?void 0:t.duration)&&a.push("color: gray; font-weight: lighter;"),a})(t,s))}l[e]&&!(null==s?void 0:s.excludeFromRollbarTelemetry)&&o.LZ(`[${t}] ${a}`,l[e])},b=(e,t,a)=>{var s;const n=`${e.pathname}${e.search}`,l=`${t.pathname}${t.search}`;if((0,i.Au)()){const i=null!==(s=null==a?void 0:a.timestamp)&&void 0!==s?s:(0,r.Ux)();v("route",`${n} → ${l}`,[{data:e,name:"from"},{data:t,name:"to"}],Object.assign(Object.assign({},a),{excludeFromRollbarTelemetry:!0,timestamp:i})),p({timestamp:i,to:t,type:"navigation"})}o.GN(n,l)},S=(e,t)=>`${e}`.padStart(t,"0"),y=()=>n.XP(console).forEach((e=>{if("function"==typeof console[e]){const t=console[e].bind(console);console[e]=(...a)=>{(0,i.Au)()&&t(...n.zu(a,c)),l[e]&&!a.includes(c)&&o.LZ(a[0],l[e])},E[e]=t}else E[e]=console[e]})),E={}},76578:(e,t,a)=>{"use strict";a.d(t,{J6:()=>i,KH:()=>s,TE:()=>n,bA:()=>o,t7:()=>r,vN:()=>l});const s=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),n=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),r=(e,t,a)=>e+(t-e)*a,i=e=>e.reduce(((e,t)=>e+t),0)/e.length,o=(e,t,a,s,n,r=!1)=>{const i=(e-t)*(n-s)/(a-t)+s;return r?Math.min(Math.max(i,s),n):i},l=(e,t)=>(e%t+t)%t},64865:(e,t,a)=>{"use strict";a.d(t,{A:()=>h,Ir:()=>v,JN:()=>u,TI:()=>g,VF:()=>m,WV:()=>b,ci:()=>f,fi:()=>p,fy:()=>_});var s=a(80388),n=a(53229),r=a(8654),i=a(93746),o=a(79465),l=a(74597);const c="https://af4a.adj.st/?adjust_t=mfg8p8a",d="https://af4a.adj.st/?adjust_t=ewm3ujy",u="https://app.adjust.com/u0fwvk3",p="https://app.adjust.com/hwy9on0",g=(...e)=>l.Z.android?h(...e):l.Z.ios?(0,r.H8)(22504,void 0,{addRightToLeftMark:!1}):l.Z.windowsPhone?(0,r.H8)(14998):void 0,m=({via:e})=>l.Z.android?v({via:e}):l.Z.ios?_({via:e}):l.Z.windowsPhone?(0,r.H8)(14998):void 0,h=({isAndroidBanner:e,utmCampaign:t,utmContent:a}={isAndroidBanner:!1,utmCampaign:"",utmContent:""})=>e?(0,s.J9)()?"http://zhushou.360.cn/detail/index/soft_id/361348":`${c}&adjust_label=android_banner`:(0,s.J9)()?"http://zhushou.360.cn/detail/index/soft_id/361348":`//play.google.com/store/apps/details?${(0,n.Vp)({hl:i.h9,id:"com.duolingo",referrer:`utm_source=duolingo.com&utm_medium=duolingo_web&utm_content=${a}&utm_campaign=${t}`})}`,_=({via:e})=>(0,s.J9)()?`https://app.adjust.com/u0fwvk3?&redirect=http%3A%2F%2Fa.app.qq.com%2Fo%2Fsimple.jsp%3Fpkgname%3Dcom.duolingo&campaign=${e}`:l.Z.hasMobileApp||"mobile_web_to_app_conversion"===e?"share_profile"===e?`${d}`:`${c}&adjust_label=${e}`:(0,r.H8)(22504,void 0,{addRightToLeftMark:!1}),v=({isAndroidBanner:e,via:t})=>e?(0,s.J9)()?"http://zhushou.360.cn/detail/index/soft_id/361348":`${c}&adjust_label=android_banner`:(0,s.J9)()?"http://zhushou.360.cn/detail/index/soft_id/361348":l.Z.hasMobileApp?"share_profile"===t?`${d}`:`${c}&adjust_label=${t}`:h({utmCampaign:t,utmContent:"download_button"}),f=e=>{const t=document.createElement("a");t.href="https://android-release.duolingo.cn/Duo.latest.apk",t.download="duolingo.apk",t.click(),(0,o.track)("china_apk_download",{via:e}),window.URL.revokeObjectURL(t.href)},b=e=>!e&&(l.Z.ios||l.Z.android)},35160:(e,t,a)=>{"use strict";var s,n;a.d(t,{W:()=>n,t:()=>s}),function(e){e.Achievement="ACHIEVEMENT",e.AgeRestrictedLeaderboardsIntro="AGE_RESTRICTED_LEADERBOARDS_INTRO",e.Alert="ALERT",e.AllowMicrophone="ALLOW_MICROPHONE",e.B2bDownloadCodes="B2B_DOWNLOAD_CODES",e.B2bRemoveLearner="B2B_REMOVE_LEARNER",e.B2bSendCodes="B2B_SEND_CODES",e.CardUpdate="CARD_UPDATE",e.ChangeUiLanguage="CHANGE_UI_LANGUAGE",e.CharacterExpandedView="CHARACTER_EXPANDED_VIEW",e.Confirm="CONFIRM",e.Debug="DEBUG",e.DiamondTournamentEliminate="DIAMOND_TOURNAMENT_ELIMINATE",e.DiamondTournamentEntry="DIAMOND_TOURNAMENT_ENTRY",e.DiamondTournamentWin="DIAMOND_TOURNAMENT_WIN",e.DownloadText="DOWNLOAD_TEXT",e.EditFamily="EDIT_FAMILY",e.EfficacyPageMenu="EFFICACY_PAGE_MENU",e.EmailVerification="EMAIL_VERIFICATION",e.EmptyHearts="EMPTY_HEARTS",e.EmptyLegendaryHearts="EMPTY_LEGENDARY_HEARTS",e.FriendsQuestComplete="FRIENDS_QUEST_COMPLETE",e.FriendsQuestGift="FRIENDS_QUEST_GIFT",e.FriendsQuestIntro="FRIENDS_QUEST_INTRO",e.HeartsIntro="HEARTS_INTRO",e.HomeMessage="HOME_MESSAGE",e.InviteFamily="INVITE_FAMILY",e.InviteFriends="INVITE_FRIENDS",e.JoinClassroomConfirmation="JOIN_CLASSROOM_CONFIRMATION",e.LeaveClassroomConfirmation="LEAVE_CLASSROOM_CONFIRMATION",e.LegendaryPurchase="LEGENDARY_PURCHASE",e.LegendarySplash="LEGENDARY_SPLASH",e.MessageUser="MESSAGE_USER",e.MonthlyBadges="MONTHLY_BADGES",e.MonthlyChallengeIntro="MONTHLY_CHALLENGE_INTRO",e.NewCourseFork="NEW_COURSE_FORK",e.Notifications="NOTIFICATIONS",e.PickUiLanguage="PICK_UI_LANGUAGE",e.PremiumChange="PLUS_CHANGE",e.PremiumPurchase="PLUS_PURCHASE",e.PremiumPurchaseSecondary="PREMIUM_PURCHASE_SECONDARY",e.PremiumUnlimitedHearts="PREMIUM_UNLIMITED_HEARTS",e.ProfileCourses="PROFILE_COURSES",e.ProfileFollowSuggestions="PROFILE_FOLLOW_SUGGESTIONS",e.ProfileFriends="PROFILE_FRIENDS",e.ProfileFriendsInCommon="PROFILE_FRIENDS_IN_COMMON",e.ReportProfileUser="REPORT_PROFILE_USER",e.ReportSentence="REPORT_SENTENCE",e.SendNudge="SEND_NUDGE",e.SessionReview="SESSION_REVIEW",e.ShadowbanList="SHADOWBAN_LIST",e.ShadowbanUser="SHADOWBAN_USER",e.ShakeToReport="SHAKE_TO_REPORT",e.SignInUp="SIGN_IN_UP",e.StreakPanelExpanded="STREAK_PANEL_EXPANDED",e.TestingTools="TESTING_TOOLS",e.TransliterationSettings="TRANSLITERATION_SETTINGS",e.TrialWall="TRIAL_WALL",e.V2Intro="V2_INTRO"}(s||(s={})),function(e){e.Custom="style-custom",e.Super="style-super",e.White="style-white"}(n||(n={}))},16689:(e,t,a)=>{"use strict";a.d(t,{$A:()=>n,R8:()=>o,br:()=>l,oe:()=>r,oo:()=>i,te:()=>d,uP:()=>c});var s=a(41831);const n=e=>{var t;return null===(t=e.filter((e=>"MONTHLY_CHALLENGES"===e.category&&(0,s.FF)(e)))[0])||void 0===t?void 0:t.goalId},r=e=>{const t=null==e?void 0:e.images.find((e=>"CHALLENGE_HEADER"===e.component));return null==t?void 0:t.image.lightMode.svg},i=e=>e.illustrations.challengeSessionEnd.lightMode.svg,o=e=>{const t=null==e?void 0:e.text.find((e=>"CHALLENGE_HEADER"===e.component));return null==t?void 0:t.options[0].text.uiString},l=e=>{var t;return null===(t=e.icon)||void 0===t?void 0:t.enabled.lightMode.svg},c=e=>null==e?void 0:e.displayTexts.challengeIntro.uiString,d=e=>null==e?void 0:e.illustrations.challengeIntro.lightMode.svg},20041:(e,t,a)=>{"use strict";a.d(t,{Iu:()=>r,Qd:()=>o,WZ:()=>p,Z3:()=>v,Zw:()=>_,dS:()=>h,fu:()=>i,ky:()=>m,oI:()=>l,pC:()=>g});var s=a(81149),n=a(68903);const r=["convertLingotsToGemsWeb","charactersTabCallout","darkMode","dogfoodingPreview","dynamic","emailVerified","guidebookCallout","immersivePlusPromo","kudosOffer","kudosReceive","leaderboardsIntro","legendaryRebrandGoldColor","maintenanceBreak","marketingOptIn","mobileWebToAppConversion","newYearsDiscount","pathChange","pathMigration","pathSectionsCallout","pathSkipping","plusBadge","plusBadgeFamily","plusBadgeMigration","reactivatedWelcome","resurrectedWelcome","schoolsJoinedClassroom","shakeToReportAlert","skillTreeMigration","streakFreezeRecurringOffer","streakFreezeUsed","streakRepairOffer","streakRepairApplied","superPreviewEndingCallout","turningNotificationsOn","v2Intro","webToAppConversion","webToAppConversionAggressive"],i=["dogfoodingPreview","superPreviewEndingCallout"],o={emailVerified:"EMAIL_VERIFIED",leaderboardsIntro:"WEB_LEADERBOARDS_INTRODUCTION",skillTreeMigration:"NEW_TREE_CHANGE_V2",streakFreezeUsed:"STREAK_FREEZE_USED"},l=(0,n.p)(["CONFIRM","CONFIRM_SKIP_ALPHABET_GATE","FRIENDS_QUEST_GIFT","GENERIC_NOTIFICATION","LEGENDARY_WITH_LINGOTS","PRACTICE_HUB_SESSION_NOTIFICATION","REACTIONS","SEND_NUDGE","STREAK_PANEL_EXPANDED","SUPER_OFFBOARDING","convertLingotsToGemsWeb","darkMode","dogfoodingPreview","dynamic","emailVerified","immersivePlusPromo","legendaryRebrandGoldColor","kudosOffer","kudosReceive","maintenanceBreak","marketingOptIn","mobileWebToAppConversion","newYearsDiscount","pathChange","reactivatedWelcome","resurrectedWelcome","shakeToReportAlert","schoolsJoinedClassroom","skillTreeMigration","streakFreezeRecurringOffer","streakFreezeUsed","streakRepairApplied","streakRepairOffer","turningNotificationsOn","webToAppConversion","webToAppConversionAggressive"]),c=(0,n.p)(["kudosOffer","kudosReceive","legendaryRebrandGoldColor","marketingOptIn","pathChange","reactivatedWelcome","resurrectedWelcome","streakFreezeRecurringOffer","streakFreezeUsed","streakRepairOffer","turningNotificationsOn","v2Intro","webToAppConversion","webToAppConversionAggressive","convertLingotsToGemsWeb","newYearsDiscount"]),d=(0,n.p)(["streakRepairApplied"]),u=(0,n.p)(["emailVerified"]),p=(0,n.p)(["pathChange","pathMigration"]),g=e=>!i.includes(e),m=e=>e.every((e=>g(e))),h=(e,t)=>{if("pathChange"===e&&"control"===(0,s.j6)("path_web_path_change_notifications_v2",void 0))return!0;if(!l(e)||!c(e)||!t)return!1;switch(e){case"kudosOffer":case"kudosReceive":case"legendaryRebrandGoldColor":case"pathChange":case"reactivatedWelcome":case"resurrectedWelcome":case"streakFreezeRecurringOffer":case"streakFreezeUsed":case"streakRepairOffer":case"turningNotificationsOn":case"webToAppConversion":case"webToAppConversionAggressive":case"convertLingotsToGemsWeb":case"newYearsDiscount":case"marketingOptIn":return!0;default:return!1}},_=(e,t)=>!!(l(e)&&d(e)&&t)&&"streakRepairApplied"===e,v=(e,t)=>!!(l(e)&&u(e)&&t)&&"emailVerified"===e},18201:(e,t,a)=>{"use strict";a.d(t,{Z:()=>V});var s=a(81149),n=a(68903),r=a(1398),i=a(51158);const o=e=>{const t=(0,r.Z)(e);t.preload();const a=window.performance.now();return e=>(t.hasLoaded()||(0,i.Kp)(`Drawer ${e} was not preloaded at time of use`,{data:{isLoading:t.isLoading(),timeSincePreloadMS:window.performance.now()-a},ex:t.getError(),once:!0}),t)},l=o((()=>a.e(5137).then(a.bind(a,35137)))),c=o((()=>a.e(9272).then(a.bind(a,6729)))),d=(0,r.Z)((()=>a.e(638).then(a.bind(a,27032)))),u=(0,r.Z)((()=>a.e(9583).then(a.bind(a,62848)))),p=(0,r.Z)((()=>a.e(6333).then(a.bind(a,66333)))),g=(0,r.Z)((()=>a.e(555).then(a.bind(a,70555)))),m=(0,r.Z)((()=>a.e(3289).then(a.bind(a,40711)))),h=o((()=>a.e(8159).then(a.bind(a,8159)))),_=(0,r.Z)((()=>Promise.all([a.e(2668),a.e(2603),a.e(6976)]).then(a.bind(a,78631)))),v=o((()=>a.e(2659).then(a.bind(a,82384)))),f=(0,r.Z)((()=>a.e(3589).then(a.bind(a,83377)))),b=(0,r.Z)((()=>a.e(2732).then(a.bind(a,27510)))),S=(0,r.Z)((()=>a.e(969).then(a.bind(a,30969)))),y=(0,r.Z)((()=>a.e(7136).then(a.bind(a,47136)))),E=(0,r.Z)((()=>a.e(648).then(a.bind(a,30648)))),I=(0,r.Z)((()=>a.e(9494).then(a.bind(a,91779)))),k=(0,r.Z)((()=>a.e(7915).then(a.bind(a,51930)))),w=(0,r.Z)((()=>a.e(5537).then(a.bind(a,85537)))),T=(0,r.Z)((()=>a.e(9400).then(a.bind(a,79400)))),C=(0,r.Z)((()=>Promise.all([a.e(9981),a.e(230)]).then(a.bind(a,46809)))),R=(0,r.Z)((()=>Promise.all([a.e(9981),a.e(3970)]).then(a.bind(a,75924)))),L=(0,r.Z)((()=>a.e(7087).then(a.bind(a,67087)))),O=(0,r.Z)((()=>a.e(9522).then(a.bind(a,59522)))),P=(0,r.Z)((()=>Promise.all([a.e(9981),a.e(9387)]).then(a.bind(a,4040)))),A=(0,r.Z)((()=>a.e(7495).then(a.bind(a,94871)))),D=(0,r.Z)((()=>a.e(9559).then(a.bind(a,59858)))),x=(0,r.Z)((()=>Promise.all([a.e(8593),a.e(2515)]).then(a.bind(a,30194)))),N=(0,r.Z)((()=>Promise.all([a.e(7449),a.e(351),a.e(1186)]).then(a.bind(a,49639)))),F=(0,r.Z)((()=>a.e(1359).then(a.bind(a,61359)))),M=(0,r.Z)((()=>a.e(7733).then(a.bind(a,40736)))),U=(0,r.Z)((()=>Promise.all([a.e(4705),a.e(1030)]).then(a.bind(a,66672)))),H=(0,r.Z)((()=>Promise.all([a.e(4705),a.e(8284)]).then(a.bind(a,75281)))),j=(0,r.Z)((()=>Promise.all([a.e(9981),a.e(9933)]).then(a.bind(a,59996)))),G=(0,r.Z)((()=>a.e(9888).then(a.bind(a,82131)))),B=(0,r.Z)((()=>a.e(7384).then(a.bind(a,82791)))),V=e=>{switch(e){case"CONFIRM":return l(e);case"CONFIRM_SKIP_ALPHABET_GATE":return c(e);case"FRIENDS_QUEST_GIFT":return m;case"GENERIC_NOTIFICATION":return h(e);case"LEGENDARY_WITH_LINGOTS":return v(e);case"PRACTICE_HUB_SESSION_NOTIFICATION":return k;case"REACTIONS":return w;case"SEND_NUDGE":return O;case"STREAK_PANEL_EXPANDED":return N;case"SUPER_OFFBOARDING":return F;case"charactersTabCallout":return;case"convertLingotsToGemsWeb":return B;case"darkMode":return d;case"dogfoodingPreview":return u;case"dynamic":return p;case"emailVerified":return g;case"guidebookCallout":return;case"immersivePlusPromo":return _;case"kudosOffer":case"kudosReceive":return M;case"leaderboardsIntro":return;case"legendaryRebrandGoldColor":return b;case"maintenanceBreak":return G;case"marketingOptIn":return S;case"mobileWebToAppConversion":return y;case"newYearsDiscount":return I;case"pathChange":return"experiment"===(0,s.j6)("path_web_path_change_notifications_v2",void 0)?f:void 0;case"pathMigration":case"pathSectionsCallout":case"pathSkipping":case"plusBadge":case"plusBadgeFamily":case"plusBadgeMigration":return;case"reactivatedWelcome":return j;case"resurrectedWelcome":return R;case"schoolsJoinedClassroom":return L;case"shakeToReportAlert":return T;case"skillTreeMigration":return E;case"streakFreezeRecurringOffer":return P;case"streakFreezeUsed":return A;case"streakRepairApplied":return x;case"streakRepairOffer":return D;case"superPreviewEndingCallout":return;case"turningNotificationsOn":return C;case"v2Intro":return;case"webToAppConversion":return H;case"webToAppConversionAggressive":return U;case void 0:return;default:throw(0,n.RJ)(e),Error()}}},25447:(e,t,a)=>{"use strict";a.d(t,{c:()=>s});const s=e=>{const t=Object.entries(e.message)[0],a=t[0],s=t[1];return{displayText:e.displayText,id:a,payload:s}}},99644:(e,t,a)=>{"use strict";a.d(t,{_u:()=>l,g2:()=>c,uP:()=>o,yY:()=>i});var s=a(99369),n=a(68903),r=a(11811);const i=(e,t,a,n)=>{const r=e[a.unitIndex].levels[a.levelIndex];if("active"!==r.state)return e;let i=e;if(t&&(i=(0,s.setIn)(i,[a.unitIndex,"levels",a.levelIndex,"finishedSessions"],r.totalSessions)),i=(0,s.setIn)(i,[a.unitIndex,"levels",a.levelIndex,"state"],"passed"),n&&"duo_radio"===r.type){const t=e[a.unitIndex].levels.findIndex((e=>"locked"===e.state));if(t>=0||a.unitIndex+1<e.length){const e=t>=0?a.unitIndex:a.unitIndex+1,n=t>=0?t:0;i=(0,s.setIn)(i,[e,"levels",n,"state"],"active")}return i}const o=e[a.unitIndex].levels.length-1===a.levelIndex,l=a.unitIndex+(o?1:0);if(l<e.length){const e=o?0:a.levelIndex+1;return(0,s.setIn)(i,[l,"levels",e,"state"],"active")}return i},o=(e,t,a)=>{const n=t.findIndex((e=>e.levels.some((e=>e.id===a)))),r=t[n].levels.findIndex((e=>e.id===a)),i=t[n].levels[r];let o=t;return e.unitIndex===n&&e.levelIndex>r&&"duo_radio"===i.type&&i.finishedSessions<i.totalSessions&&(o=(0,s.setIn)(o,[e.unitIndex,"levels",e.levelIndex,"state"],"locked"),o=(0,s.setIn)(o,[n,"levels",r,"state"],"active")),o},l=(e,t,a)=>{let o=a;switch(e){case r.FF.Legendary:case r.FF.LegendaryLevel:case r.FF.LegendaryLexemePractice:case r.FF.Lesson:case r.FF.LexemePractice:case r.FF.LevelReview:case"story":{const a=Math.min(t.level.totalSessions,Math.max(t.level.finishedSessions,t.level.finishedSessions+1));o=a===t.level.totalSessions?(0,n.gB)(e,[r.FF.Legendary,r.FF.LegendaryLevel,r.FF.LegendaryLexemePractice])?(0,s.setIn)(o,[t.unitIndex,"levels",t.levelIndex,"state"],"legendary"):i(o,!0,t):(0,s.setIn)(o,[t.unitIndex,"levels",t.levelIndex,"finishedSessions"],a);break}case r.FF.UnitReview:o=i(o,!0,t);break;default:throw Error(`Offline path update not implemented for session type ${e}`)}return o},c=(e,t,a)=>{if(void 0===e.skillId)return a;let n=a[e.skillId];return void 0===n?a:(t.level.finishedSessions+1===t.level.totalSessions?(n=(0,s.set)(n,"finishedLevels",n.finishedLevels+1),n=(0,s.set)(n,"finishedLessons",0)):n=(0,s.set)(n,"finishedLessons",n.finishedLessons+1),Object.assign(Object.assign({},a),{[e.skillId]:n}))}},93890:(e,t,a)=>{"use strict";a.d(t,{KA:()=>l,m3:()=>d,ul:()=>r,zK:()=>o});var s=a(80254),n=a(17135);const r=(e,t,a)=>{const s=c(a.xpSummaries),n=[],r=t.inventory.society_streak_freeze,i=u(r,s,a.timezoneOffset),o=Math.min(i,e);void 0!==r&&o>0&&n.push(Object.assign(Object.assign({},r),{quantity:r.quantity-o}));const l=e-o,d=t.inventory.streak_freeze,p=u(d,s,a.timezoneOffset),g=Math.min(p,l);if(void 0!==d&&g>0&&n.push(Object.assign(Object.assign({},d),{quantity:d.quantity-g})),o+g!==e)throw Error("Streak freezes consumed does not match streak freezes to use");return n},i=(e,t)=>{const a=(0,n.zM)(e,t);return(0,n.VV)(a)/1e3},o=(e,t,a)=>{const s=c(a.xpSummaries);if(void 0===s)return 0;const r=i(e,a.timezoneOffset),o=Math.max(0,(0,n.t8)(1e3*s,1e3*r)-1),l=u(t.inventory.society_streak_freeze,s,a.timezoneOffset),d=u(t.inventory.streak_freeze,s,a.timezoneOffset);return Math.min(o,l+d)},l=(e,t,a)=>{const{streakData:s,xpSummaries:r}=a;if(!s.currentStreak)return{streakData:s,xpSummaries:r};const o=c(r);if(void 0===o)return{streakData:s,xpSummaries:r};const l=(0,n.zM)(o),d={dailyGoalXp:a.xpGoal,frozen:!1,gainedXp:0,numSessions:0,repaired:!1,streakExtended:!1,userId:a.id},u={};for(let e=0;e<t;e++){l.setDate(l.getDate()+1);const e=Object.assign(Object.assign({},d),{date:(0,n.g8)(l),frozen:!0});u[(0,n.zK)(e.date)]=e}const p=i(e,a.timezoneOffset);return{streakData:Math.max(0,(0,n.t8)(1e3*(0,n.g8)(l),1e3*p)-1)<1?{currentStreak:Object.assign(Object.assign({},s.currentStreak),{endDate:(0,n.zK)((0,n.g8)(l))}),longestStreak:s.longestStreak,previousStreak:s.previousStreak}:{currentStreak:null,longestStreak:s.longestStreak,previousStreak:s.currentStreak},xpSummaries:Object.assign(Object.assign({},r),u)}},c=e=>{const t=s.VO(e).filter((e=>void 0!==e&&(e.frozen||e.repaired||e.streakExtended)));if(0!==t.length)return Math.max(...t.map((e=>e.date)))},d=(e,t)=>{var a,s;const{streakData:r,xpSummaries:o}=t,l=c(o),d=i(e.time,t.timezoneOffset),u=Math.max(0,(0,n.t8)(1e3*(null!=l?l:0),1e3*d)),p=(0,n.zK)(d),g=o[p],m=void 0===g?{dailyGoalXp:t.xpGoal,date:d,frozen:!1,gainedXp:e.xp,numSessions:0,repaired:!1,streakExtended:!0,userId:t.id}:Object.assign(Object.assign({},g),{gainedXp:(null!==(a=null==g?void 0:g.gainedXp)&&void 0!==a?a:0)+e.xp}),h=Object.assign(Object.assign({},o),{[p]:m});return{streakData:u>1||null===r.currentStreak?{currentStreak:{endDate:p,length:1,startDate:p},longestStreak:r.longestStreak,previousStreak:r.currentStreak}:u>0?{currentStreak:Object.assign(Object.assign({},r.currentStreak),{endDate:p,length:(null===(s=r.currentStreak)||void 0===s?void 0:s.length)+1}),longestStreak:r.longestStreak,previousStreak:r.previousStreak}:r,xpSummaries:h}},u=(e,t,a)=>{if(void 0===e)return 0;const s=i(e.purchaseDate,a);return t&&s>t?0:e.quantity}},7432:(e,t,a)=>{"use strict";a.d(t,{HN:()=>p,Oy:()=>o,mI:()=>u});var s=a(43464),n=a(17135),r=a(11811),i=a(97106);const o=(e,t,a)=>{const s=e.hasXpBoost?i.K3:1,n=(e.isLegendaryMode?i.BX:e.isFeaturedStoryInPracticeHub?i.Zy:e.isV2Redo?i.MR:a?a.fixedXpAward:t)*s,r=e.completedBonusChallenge?i.Cz:0;return{awardedXp:n+r,nextMode:void 0,sessionEndSlides:[{amount:n,bonusAmount:r,type:"XP"}],trackingProperties:{story_xp:n,xp_gained:n+r}}},l=e=>{const t=e.beginner?i.dr:i.nF;return Math.min(Math.max(0,e.heartsLeft),t)},c=e=>{var t;const a=e.challenges.length,s=null!==(t=e.maxInLessonStreak)&&void 0!==t?t:0;return a>0&&s>0&&s<=a?Math.ceil(5*s/a):0},d=e=>e.hasBoost?i.K3:1,u=(e,t)=>{const a={skillId:e.skillId,time:e.endTime};switch(e.type){case r.FF.Legendary:case r.FF.LegendaryLevel:case r.FF.LegendaryLexemePractice:return void 0!==e.xpPromised?Object.assign(Object.assign({},a),{xp:e.xpPromised}):e.shouldLearnThings?Object.assign(Object.assign({},a),{xp:(i.BX+l(e)+c(e))*d(e)}):Object.assign(Object.assign({},a),{xp:i.Ms});case r.FF.Lesson:case r.FF.LexemePractice:return void 0!==e.xpPromised?Object.assign(Object.assign({},a),{eventType:e.type===r.FF.Lesson?s.Vi.EventType.LESSON:void 0,xp:e.xpPromised}):Object.assign(Object.assign({},a),{eventType:e.type===r.FF.Lesson?s.Vi.EventType.LESSON:void 0,xp:(i.Lu+l(e)+c(e))*d(e)});case r.FF.LevelReview:{const n="skill"===t.level.type&&"grammar"!==t.level.subtype;return Object.assign(Object.assign({},a),{eventType:s.Vi.EventType.PRACTICE,xp:(n?i.pu+c(e):10)*d(e)})}case r.FF.UnitReview:return Object.assign(Object.assign({},a),{xp:(i.mX+l(e)+c(e))*d(e)});default:throw Error(`Offline XP calculation not implemented for session type ${e.type}`)}},p=e=>({eventType:s.Vi.EventType.PRACTICE,time:(0,n.Zo)(),xp:e.awardedXp})},36914:(e,t,a)=>{"use strict";a.d(t,{BA:()=>c,iR:()=>h,kL:()=>u,lE:()=>p,m8:()=>_,qB:()=>m,u$:()=>d,xc:()=>g});var s=a(81149),n=a(68903),r=a(8654),i=a(93746),o=a(79465),l=a(16086);const c=["hi","getStarted","coursePicker","hdyhau","learningReason","proficiency","courseOverview","dailyGoal","notificationPrimer","accountLink","choosePath","pathReactionOptional","pathReaction"],d=(0,n.p)(["hi","getStarted","pathReactionOptional","pathReaction"]);var u;!function(e){e[e.Casual=10]="Casual",e[e.Intense=50]="Intense",e[e.Regular=20]="Regular",e[e.Serious=30]="Serious"}(u||(u={}));const p="welcomeStep",g=(e,t={})=>{var a,s;switch(e){case"hi":return(0,r.H8)(38600);case"getStarted":return(0,r.H8)(38601);case"coursePicker":return(0,r.H8)(38599);case"hdyhau":return(0,r.H8)(25725);case"learningReason":switch(t.learningReason){case void 0:return(0,r.H8)(34656,{language_name:null!==(a=t.languageName)&&void 0!==a?a:""});case"brain":return(0,r.H8)(38581);case"fun":return(0,r.H8)(38585);case"family":return(0,r.H8)(38580);case"school":return(0,r.H8)(38582);case"travel":return(0,r.H8)(38584);case"work":return(0,r.H8)(38583);default:return(0,r.H8)(38586)}case"proficiency":switch(t.proficiency){case void 0:return(0,r.H8)(29828,{language_name:null!==(s=t.languageName)&&void 0!==s?s:""});case 1:return(0,r.H8)(38590);case 2:return(0,r.H8)(38591);case 3:return(0,r.H8)(38592);default:return(0,r.H8)(38589)}case"courseOverview":return(0,r.H8)(38587);case"dailyGoal":switch(t.dailyGoal){case void 0:return(0,r.H8)(38579);case u.Regular:return(0,r.H8)(43420,{num:50},{exportTags:!0});case u.Serious:return(0,r.H8)(43420,{num:75},{exportTags:!0});case u.Intense:return(0,r.H8)(43420,{num:100},{exportTags:!0});default:return(0,r.H8)(43420,{num:25},{exportTags:!0})}case"notificationPrimer":return(0,r.H8)(38578);case"accountLink":return(0,r.H8)(20676);case"choosePath":return(0,r.H8)(38572);case"pathReactionOptional":return(0,r.H8)(38866);case"pathReaction":return"start"===t.pathChoice?(0,r.H8)(38867):(0,r.H8)(38573);default:return(0,n.RJ)(e),""}},m=(e,t,a)=>{if("en"===t)return(0,r._i)(43008);const s=a.find((a=>a.fromLanguageId===e&&a.learningLanguageId===t));if(!s)return;const n=(0,i.vY)(t),o=s.numLearners;if(o<1e6)return(0,r._i)(42628,{language_name:n,num:(1e3*Math.floor(o/1e3)).toLocaleString()});const l=Math.floor(o/1e6);return l<10?(0,r._i)(42665,{language_name:n,num:l}):l<100?(0,r._i)(42666,{language_name:n,num:l}):(0,r._i)(42667,{language_name:n,num:l})},h=(e,t,a={})=>{switch(e){case"hi":(0,o.track)("duo_introduction_tap",{target:t});break;case"getStarted":(0,o.track)("journey_introduction_tap",{target:t});break;case"coursePicker":(0,o.track)("course_picker_tap",{target:t,via:"onboarding"});break;case"hdyhau":(0,o.track)("acquisition_survey_reason_tap","continue"===t?{selected_value:a.surveyChoice,target:t}:{target:t});break;case"learningReason":(0,o.track)("learning_reason_tap","continue"===t?{selected_value:a.learningReason,target:t}:{target:t});break;case"proficiency":(0,o.track)("prior_proficiency_tap",{target:t});break;case"courseOverview":(0,o.track)("continue"===t?"course_preview_next_click":"course_preview_back_click",{});break;case"dailyGoal":(0,o.track)("daily_goal_tap","continue"===t?{selected_value:a.dailyGoal,target:t}:{target:t});break;case"notificationPrimer":(0,o.track)("notification_primer_tap",{target:t});break;case"accountLink":(0,o.track)("welcome_signup_tap",{target:"continue"===t?"skip":"back"});break;case"choosePath":(0,o.track)("welcome_fork_tap","continue"===t?{selected_value:"start"===a.pathChoice?"basics":"placement",target:t}:{target:t});break;case"pathReactionOptional":case"pathReaction":break;default:(0,n.RJ)(e)}},_=e=>(0,l.Pc)()&&void 0!==e&&!["CN","IN"].includes(e)&&"experiment"===(0,s.j6)("ginfra_web_disable_social_registration",void 0)},89803:(e,t,a)=>{"use strict";a.d(t,{Bf:()=>p,VB:()=>d,o7:()=>u,u6:()=>g,vi:()=>c});var s=a(80254),n=a(54412),r=a(53229),i=a(93746),o=a(79465),l=a(16086);const c=s.IH((()=>{if((0,n.d8)(n.Vj.TimeSiteLoaded,Date.now().toString()),(0,l.Pc)())(0,n.ej)(n.Vj.LandingPage)||(0,n.d8)(n.Vj.LandingPage,n.m_),(0,n.ej)(n.Vj.LandingURL)||(0,n.d8)(n.Vj.LandingURL,n.m_),(0,n.ej)(n.Vj.InitialReferrer)||(0,n.d8)(n.Vj.InitialReferrer,n.m_);else if((0,n.ej)(n.Vj.LandingURL)||(0,n.d8)(n.Vj.LandingURL,window.location.href),(0,n.ej)(n.Vj.InitialReferrer)||(0,n.d8)(n.Vj.InitialReferrer,window.document.referrer||"$direct"),!(0,n.ej)(n.Vj.LastReferrer)){const e=document.referrer;/duolingo\.(cn|com)/.test(e)||(0,n.d8)(n.Vj.LastReferrer,document.referrer)}})),d=e=>{let t=!0;(0,n.ej)(n.Vj.LandingPage)?t=!1:(0,n.d8)(n.Vj.LandingPage,e),(0,o.track)("landing_page_load",{initial_landing:t,page:e,ui_language:(0,i.D3)(i.h9)})},u=e=>{const t=(0,r.vl)(e.search),a=t.email_type;if(a){const e=t.day_offset;(0,o.track)("email_tap",{day_offset:e?parseInt(e,10):void 0,email_type:a,target:t.target})}},p=(e,t)=>{(0,o.track)("splash load",Object.assign(Object.assign(Object.assign({},(0,o.getCampaignInfo)("acquisition_")),(0,o.getCampaignInfo)("latest_")),{has_cookie:!!(0,n.ej)(n.Vj.LoggedOutUUID),subpage:t,use_nweb:!0})),d(t),u(e)},g=s.IH((()=>{const e=(0,n.ej)(n.Vj.TimeSiteLoaded),t={};if(e)try{const a=parseInt(e,10);t.time_since_open=Math.round((Date.now()-a)/1e3)}catch(e){}(0,o.track)("app_close",t)}))},74971:(e,t,a)=>{"use strict";a.d(t,{JZ:()=>p,U9:()=>o,Xb:()=>u,ZX:()=>g});var s=a(50548),n=a(79465),r=a(74597),i=a(16086);const o=void 0!==window.OptanonWrapper,l="onetrust-banner-sdk";const c=()=>{var e,t,a;return!((0,i.Pc)()||null!==(a=null===(t=null===(e=window.OneTrust)||void 0===e?void 0:e.IsAlertBoxClosed)||void 0===t?void 0:t.call(e))&&void 0!==a&&a)};o&&new class{constructor(){this.updateBannerVisibility=()=>{const e=!r.Z.desktop&&window.location.pathname.startsWith("/year-in-review/"),t=!r.Z.desktop&&window.location.pathname.startsWith("/weekly-report"),a=(0,i.Pc)()||e||t;void 0===this.hidingStyleComponent?a&&(this.hidingStyleComponent=(e=>{const t=document.createElement("style");return t.textContent=e,document.head.append(t),t})(`#${l} { display: none !important; }`)):a||(this.hidingStyleComponent.remove(),this.hidingStyleComponent=void 0)},this.updateBannerHeight=()=>{var e;const t=document.getElementById(l),a=null!==(e=null==t?void 0:t.clientHeight)&&void 0!==e?e:0;document.body.style.setProperty("--onetrust-banner-height",`${a}px`)},this.startWatchingForBannerUpdates=(e=!1)=>{if(window.clearInterval(this.bannerUpdateInterval),!c()&&!e)return;let t=20;this.bannerUpdateInterval=window.setInterval((()=>{this.updateBannerHeight(),t-=1,0===t&&window.clearInterval(this.bannerUpdateInterval)}),100)},s.m8.listen(this.updateBannerVisibility),window.OptanonWrapper=()=>{this.startWatchingForBannerUpdates(!0),window.OnetrustActiveGroups&&(0,n.track)("cookie_consent_updated",{cookie_consent_groups:window.OnetrustActiveGroups})},window.addEventListener("resize",(()=>this.startWatchingForBannerUpdates())),this.updateBannerVisibility(),this.startWatchingForBannerUpdates()}};const d={targeting:"C0004"},u=e=>{var t,a;return!o||null!==(a=null===(t=window.OnetrustActiveGroups)||void 0===t?void 0:t.includes(`,${d[e]},`))&&void 0!==a&&a},p=()=>{var e,t;null===(t=null===(e=window.OneTrust)||void 0===e?void 0:e.ToggleInfoDisplay)||void 0===t||t.call(e)},g=()=>{var e,t,a;return null!==(a=null===(t=null===(e=window.OneTrust)||void 0===e?void 0:e.GetDomainData)||void 0===t?void 0:t.call(e).CookieSettingButtonText)&&void 0!==a?a:"Cookie Settings"}},23275:(e,t,a)=>{"use strict";a.d(t,{$:()=>B,B9:()=>E,Bm:()=>_,E0:()=>H,Eb:()=>X,G7:()=>Z,II:()=>b,Ib:()=>K,Kq:()=>U,Mj:()=>z,Nc:()=>$,Nk:()=>h,OE:()=>O,Ol:()=>y,P6:()=>P,TH:()=>V,Tw:()=>Y,U8:()=>I,Wc:()=>G,aw:()=>ne,cy:()=>M,d$:()=>v,dN:()=>Q,e4:()=>J,eK:()=>N,f:()=>ae,f2:()=>D,kL:()=>F,m8:()=>R,mH:()=>W,mo:()=>w,pG:()=>A,qM:()=>te,s6:()=>j,sz:()=>se,tX:()=>x,tr:()=>C,u6:()=>T,w1:()=>L,xV:()=>ee,xY:()=>q,yK:()=>k,yP:()=>m});var s=a(80254),n=a(43464),r=a(63301),i=a(81149),o=a(68903),l=a(8654),c=a(93746),d=a(37825),u=a(53171),p=a(12125),g=a(97106);const m=500,h=(e,t)=>e.unitIndex!==t.unitIndex?e.unitIndex-t.unitIndex:e.levelIndex-t.levelIndex,_=e=>R(e,(e=>"active"===e.state)),v=e=>R(e,(e=>["active","passed"].includes(e.state)&&f(e)),void 0,{findLast:!0}),f=e=>["skill","story","practice"].includes(e.type)||"unit_review"===e.type&&!G(e.state),b=({levelType:e,path:t})=>t.flatMap((e=>e.levels)).some((t=>t.type===e)),S=({levelType:e,path:t})=>t.flatMap(((e,t)=>e.levels.map((e=>Object.assign({unitIndex:t},e))))).filter((t=>!e||t.type===e)),y=({levelType:e,path:t})=>{const a=_(t),s=null==a?void 0:a.unitIndex,n=t.slice(0,void 0===s?-1:s+1);return S({levelType:e,path:n}).filter((e=>G(e.state)))},E=({section:e})=>S({path:e}).filter((e=>G(e.state))).length,I=({levelType:e,path:t})=>{const a=_(t),s=null==a?void 0:a.unitIndex,n=t.slice(0,void 0===s?-1:s+1);return S({levelType:e,path:n}).map((e=>e.finishedSessions)).reduce(((e,t)=>e+t),0)},k=e=>{const t=y({levelType:"skill",path:e}).map((e=>{const t=e.pathLevelClientData;return{finishedSessions:e.finishedSessions,levelId:e.id,skillId:t.skillId,state:e.state,subtype:e.subtype,type:e.type,unitIndex:e.unitIndex}})),a=_(e),n=[...a&&"skill"===a.level.type?[...t,{finishedSessions:a.level.finishedSessions,levelId:a.level.id,skillId:a.level.pathLevelClientData.skillId,state:a.level.state,subtype:a.level.subtype,type:a.level.type,unitIndex:a.unitIndex}]:t].reverse();return s.jj(n,!1,s.Cb("skillId"))},w=(e,t=-1,a)=>{const n=k(e).filter((e=>(!(null==a?void 0:a.includes(e.type))&&!(null==a?void 0:a.includes(e.subtype))||"experiment"!==(0,i.j6)("mcoach_web_ph_filter_grammar_skills",void 0))&&!!e.skillId)).slice(0,t);console.log("New skill pool",n);const r=s.MX(0,n.length-1);return console.log("New selected skill",n[r]),n[r]},T=(e,{alignment:t,blocksHomeMessages:a,focus:s,id:n,isPathVisible:r,offset:i}={})=>{const o=[{alignment:t,behavior:r?"smooth":void 0,blocksHomeMessages:null==a||a,id:n,ignoreBlocker:!r,levelId:e,name:"PATH_LEVEL_CENTER",offset:i}];return s&&o.push({blocksHomeMessages:!0,levelId:e,name:"PATH_LEVEL_FOCUS"}),o},C=e=>R(e,(e=>"passed"===e.state&&(0,d.d)(e.type))),R=(e,t,a,s)=>{var n;if(a){const s=null===(n=e[a.unitIndex])||void 0===n?void 0:n.levels[a.levelIndex];if(s&&t(s))return Object.assign(Object.assign({},a),{level:e[a.unitIndex].levels[a.levelIndex],unitNumber:e[a.unitIndex].unitNumber})}if(null==s?void 0:s.findLast){for(let a=e.length-1;a>=0;a--)for(let s=e[a].levels.length-1;s>=0;s--)if(t(e[a].levels[s]))return{level:e[a].levels[s],levelIndex:s,unitIndex:a,unitNumber:e[a].unitNumber}}else for(let a=0;a<e.length;a++)for(let s=0;s<e[a].levels.length;s++)if(t(e[a].levels[s]))return{level:e[a].levels[s],levelIndex:s,unitIndex:a,unitNumber:e[a].unitNumber}},L=e=>{var t;const a=W(e);if((0,r.gQ)("lessonIndex"))return parseInt(null!==(t=(0,r.ky)("lessonIndex"))&&void 0!==t?t:"",10);if((0,p.R0)(null==a?void 0:a.status)&&void 0!==(null==a?void 0:a.lessonsCompleted))return Math.min(a.lessonsCompleted,e.totalSessions);if(("grammar"===e.subtype||"practice"===e.type)&&G(ee(e))){const t=e.totalSessions-(e.hasLevelReview?1:0);return s.MX(t-1)}return e.finishedSessions},O=(e,t)=>{const a=e[t.unitIndex].levels[t.levelIndex+1],s=e[t.unitIndex].unitNumber;if(a)return{level:a,levelIndex:t.levelIndex+1,unitIndex:t.unitIndex,unitNumber:s};const n=e[t.unitIndex+1];return n?{level:n.levels[0],levelIndex:0,unitIndex:t.unitIndex+1,unitNumber:n.unitNumber}:void 0},P=(e,t,a={})=>{const s=[...T(e.id,a),{blocksHomeMessages:!0,delay:a.isPathVisible?void 0:m,levelId:e.id,name:"PATH_LEVEL_STATE",prevState:"active"}];return t&&(s.push(...T(t.id,{focus:!0,isPathVisible:!0})),s.push({blocksHomeMessages:!0,levelId:t.id,name:"PATH_LEVEL_STATE",prevState:"locked"}),"practice"!==t.type&&"skill"!==t.type||s.push({blocksHomeMessages:!0,levelId:t.id,name:"PATH_LEVEL_PROGRESS_FADE"}),s.push({blocksHomeMessages:!0,levelId:t.id,name:"PATH_LEVEL_TOOLTIP_FADE"})),s},A=(e,t,a={})=>{const s=[...T(e.id,a),{blocksHomeMessages:!0,delay:a.isPathVisible?void 0:m,levelId:e.id,name:"PATH_LEVEL_STATE",prevIsActiveAssignment:!0,prevState:"active"}];return t&&(s.push(...T(t.id,{focus:!0,isPathVisible:!0})),"skill"===t.type&&s.push({blocksHomeMessages:!0,levelId:t.id,name:"PATH_LEVEL_PROGRESS_FADE"}),s.push({blocksHomeMessages:!0,levelId:t.id,name:"PATH_LEVEL_TOOLTIP_FADE"})),s},D=e=>[...T(e.levels[0].id,{alignment:"top"}),{blocksHomeMessages:!0,delay:m,name:"PATH_UNIT_STATE",prevState:"passed",unitIndex:e.unitIndex},...e.levels.map((e=>({blocksHomeMessages:!0,levelId:e.id,name:"PATH_LEVEL_STATE",prevState:"passed"})))],x=({level:e,levelIndex:t,unitIndex:a,isLegendary:s=!1,isSectionTest:n=!1,sectionIndex:i=0})=>{if("alphabet_gate"===e.type)return"/characters";const o=(0,r.gQ)("debugPath"),l=void 0!==W(e);if(s)return`/lesson/unit/${a+1}/legendary/${t+1}`;if(n&&void 0!==i)return`/lesson/section/${i+1}/test`;if(o||G(e.state)||l)return`/lesson/unit/${a+1}/level/${t+1}${o?"?debugPath=1":""}`;switch(e.state){case"active":return"/lesson";case"unit_test":return`/lesson/unit/${a+1}/test`;default:throw Error(`Unable to retrieve URL for ${e.state} level.`)}},N=e=>{let t=0,a=0,s=0,n=0,r=0,i=!1;for(const o of e){n++;let e=!0,l=!0;for(const s of o.levels){const n=G(s.state);i||void 0===s.dailyRefreshInfo||(i=!0),n&&(t++,"skill"===s.type&&a++),e=e&&n,l=l&&"legendary"===s.state}e&&s++,l&&r++}return{num_levels_completed:t,num_skill_levels_completed:a,num_units_completed:s,num_units_legendary:r,path_complete:i?s>=n-1:s===n}},F=e=>{var t,a;return null!==(a=null!==(t=_(e))&&void 0!==t?t:C(e))&&void 0!==a?a:(e=>{const t=e[e.length-1],a=t.levels.length-1;return{level:t.levels[a],levelIndex:a,unitIndex:e.length-1,unitNumber:t.unitNumber}})(e)},M=e=>[...T(e.id,{focus:!0}),{blocksHomeMessages:!0,delay:m,levelId:e.id,name:"PATH_LEVEL_STATE",prevState:"unit_test"},{blocksHomeMessages:!0,levelId:e.id,name:"PATH_LEVEL_PROGRESS_FADE"},{blocksHomeMessages:!0,levelId:e.id,name:"PATH_LEVEL_TOOLTIP_FADE"}],U=(e,t)=>t.findIndex((t=>t.units.some((t=>t.unitIndex===e)))),H=e=>e.levels.findIndex((e=>"unit_test"===e.state)),j=e=>e.every((e=>e.levels.every((e=>G(e.state))))),G=e=>!!e&&["legendary","passed"].includes(e),B=e=>e.hasLevelReview&&L(e)===e.totalSessions-1,V=e=>"unit_test"===e.state,z=e=>e?"isPathExtension"in e.pathLevelClientData&&e.pathLevelClientData.isPathExtension:void 0,Z=e=>"skill"===(null==e?void 0:e.type)?e.pathLevelClientData.crownLevelIndex:void 0,$=(e,t,a)=>{if(G(a.level.state))return!1;const n=((e,t)=>{const a=[],{unitIndex:s,levelIndex:n}=t;for(let r=s;r<e.length;r++)for(let i=r===s?n:0;i<e[r].levels.length;i++){const s=e[r].levels[i];if(s.id!==t.level.id){if(s.isInProgressSequence)return a;a.push(s.id)}}return a})(e,a);if(0===n.length)return!1;const r=y({path:e}).map((e=>e.id)),i=y({path:t}).map((e=>e.id)),o=s.e5(i,r),l=[a.level.id,...n];return!!s.Xy(o,l)},W=e=>{let t;switch(e.type){case"skill":case"story":t=e.pathLevelClientData.assignmentInfo}return null!=t?t:void 0},q=e=>{const t=W(e);return!(void 0===t||!(0,p.R0)(t.status))&&0!==t.lessonsCompleted&&t.lessonsCompleted<t.lessonsToComplete},Q=e=>{const t=W(e);return!(void 0===t||!(0,p.R0)(t.status)||t.type!==n.bu.AssignmentType.SKILL)&&t.lessonsCompleted===t.lessonsToComplete-1},Y=e=>e[0].toLocaleUpperCase(c.h9)+e.slice(1),K=(e,t)=>void 0!==t&&void 0!==e&&t.assignmentId===e.assignmentId,J=(e,t,a,s)=>{var n;switch(e.type){case"alphabet_gate":case"chest":return;case"duo_radio":return e.pathLevelClientData.duoRadioSummary.name;case"practice":if("unit_practice"===e.subtype&&s){const t=null===(n=e.pathLevelClientData)||void 0===n?void 0:n.skillIds[0],a=s.levels.find((e=>"skill"===e.type&&e.pathLevelClientData.skillId===t&&void 0!==e.pathLevelClientData.teachingObjective));if(void 0===a)return(0,l.H8)(39844);const r=a.pathLevelClientData.teachingObjective;return Y(r)}return(0,l.H8)(39844);case"skill":{const t="teachingObjective"in e.pathLevelClientData?e.pathLevelClientData.teachingObjective:void 0;return t?Y(t):G(e.state)?(0,l.H8)(36805):(0,l.H8)(39121)}case"story":return"storyName"in e.pathLevelClientData?e.pathLevelClientData.storyName:void 0;case"unit_review":return a?(0,l.H8)(43037):(0,l.H8)(38614,{unit_num:t});default:return void(0,o.RJ)(e.type)}},X=e=>{const t=W(e);return(0,p.Zv)(null==t?void 0:t.status)&&!["unit_test","active"].includes(e.state)},ee=(e,t)=>{const a=W(e),s=(0,p.R0)(null==a?void 0:a.status),n=(0,p.Zv)(null==a?void 0:a.status);if("duo_radio"===e.type&&t&&(0,u.yf)(t))return"legendary";const r=n&&!["unit_test","active"].includes(e.state);return s?"assigned":r?"passed":e.state},te=(e,t)=>"unit_test"===e.state||!!(0,d.d)(e.type)&&"legendary"===t&&!(0,d.Vp)(),ae=e=>"unit_review"===e.type?g.mX:"duo_radio"===e.type?e.finishedSessions<e.totalSessions?g.dY:g.tL:G(ee(e))?g.ix:"story"===e.type&&"fixedXpAward"in e.pathLevelClientData?e.pathLevelClientData.fixedXpAward:B(e)?g.pu:g.Lu,se=()=>["experiment"===(0,i.j6)("path_web_sections",void 0)||"control"!==(0,i.j6)("path_web_sections_v2",void 0),"experiment"===(0,i.j6)("path_web_sections",void 0)||"sections_and_persistent"===(0,i.j6)("path_web_sections_v2",void 0)],ne=e=>"INTRO"===e?"A1":e},89065:(e,t,a)=>{"use strict";a.d(t,{Fz:()=>l,SJ:()=>g,U_:()=>c,X7:()=>u,df:()=>d,uu:()=>o,y2:()=>p});var s=a(68903),n=a(8654),r=a(23275),i=a(41631);const o=[i.t.ROOKIE,i.t.EXPLORER,i.t.TRAVELER,i.t.TRAILBLAZER,i.t.ADVENTURER,i.t.DISCOVERER,i.t.DAREDEVIL,i.t.NAVIGATOR,i.t.CHAMPION,i.t.DAILY_REFRESH],l=6,c=e=>{var t;return"personalized_practice"===e.type?i.t.CHAMPION:"daily_refresh"===e.type?i.t.DAILY_REFRESH:null!==(t=o[e.index])&&void 0!==t?t:i.t.CHAMPION},d=e=>{const t=e.units.flatMap((e=>e.levels.map((e=>e.state))));return t.includes("active")?"active":t.every((e=>(0,r.Wc)(e)))?"complete":"locked"},u=e=>{switch(e){case i.t.ROOKIE:return(0,n.H8)(42986);case i.t.EXPLORER:return(0,n.H8)(42987);case i.t.TRAVELER:return(0,n.H8)(42988);case i.t.TRAILBLAZER:return(0,n.H8)(27636);case i.t.ADVENTURER:return(0,n.H8)(42990);case i.t.DISCOVERER:return(0,n.H8)(42991);case i.t.DAREDEVIL:return(0,n.H8)(42992);case i.t.NAVIGATOR:return(0,n.H8)(42993);case i.t.CHAMPION:return(0,n.H8)(42994);case i.t.DAILY_REFRESH:return(0,n.H8)(42995);default:throw(0,s.RJ)(e),Error(`Unexpected Path Section type: ${e}`)}},p=(e,t)=>{switch(e){case i.t.ROOKIE:return(0,n.H8)(40024);case i.t.EXPLORER:return(0,n.H8)(40025);case i.t.TRAVELER:return(0,n.H8)(40026);case i.t.TRAILBLAZER:return(0,n.H8)(40027);case i.t.ADVENTURER:return(0,n.H8)(40028);case i.t.DISCOVERER:return(0,n.H8)(40029);case i.t.DAREDEVIL:return(0,n.H8)(40030);case i.t.NAVIGATOR:return(0,n.H8)(40031);case i.t.DAILY_REFRESH:return(0,n.H8)(42996);case i.t.CHAMPION:return(0,n.H8)(40032,{language_name:t});default:throw(0,s.RJ)(e),Error(`Unexpected Path Section type: ${e}`)}},g=e=>{var t;const a=o.findIndex((t=>t===e));return null!==(t=o[a+1])&&void 0!==t?t:i.t.CHAMPION}},53171:(e,t,a)=>{"use strict";a.d(t,{$V:()=>_,Hi:()=>o,L4:()=>r,YP:()=>i,Zi:()=>l,b1:()=>h,in:()=>m,lg:()=>d,lo:()=>u,qM:()=>c,wM:()=>g,wP:()=>s,yf:()=>v});var s,n=a(5768);!function(e){e[e.Left=0]="Left",e[e.CenterLeft=.1794]="CenterLeft",e[e.Center=.5]="Center",e[e.CenterRight=.8206]="CenterRight",e[e.Right=1]="Right"}(s||(s={}));const r={height:93,width:98},i={height:83,width:99},o={height:90,width:80},l={height:80,width:100},c={height:93,width:112},d={height:65,width:70},u={height:89,width:105},p=[{assets:[n.Z.DUO_TWIRL,n.Z.DUO_WHISTLING,n.Z.DUO_JUMPFLAP],character:"duo"},{assets:[n.Z.LILY_SHIRTS,n.Z.LILY_RAINCLOUD,n.Z.LILY_DOOMSCROLL],character:"lily"},{assets:[n.Z.OSCAR_FLOWER,n.Z.OSCAR_COMB,n.Z.OSCAR_BONSAI],character:"oscar"},{assets:[n.Z.DUO_GLOBE,n.Z.DUO_BALL,n.Z.DUO_GEM],character:"duo"},{assets:[n.Z.JUNIOR_ICECREAM,n.Z.JUNIOR_SLEEP,n.Z.JUNIOR_FROG],character:"junior"},{assets:[n.Z.ZARI_KICK,n.Z.ZARI_LOLLIPOP,n.Z.ZARI_GAMING],character:"zari"},{assets:[n.Z.DUO_JUMPFLAP,n.Z.DUO_HEADPHONES,n.Z.DUO_POTION],character:"duo"},{assets:[n.Z.LUCY_WALKIETALKIE,n.Z.LUCY_CAT,n.Z.LUCY_WALKIETALKIE],character:"lucy"},{assets:[n.Z.EDDY_BASKETBALL,n.Z.EDDY_JUMPROPE,n.Z.EDDY_BASKETBALL],character:"eddy"},{assets:[n.Z.DUO_BOOKS,n.Z.DUO_GEM,n.Z.DUO_WHISTLING],character:"duo"},{assets:[n.Z.BEA_SMORES,n.Z.BEA_TENNIS,n.Z.BEA_SMORES],character:"bea"},{assets:[n.Z.VIKRAM_GRILL,n.Z.VIKRAM_PANSIES,n.Z.VIKRAM_NOODLES],character:"vikram"},{assets:[n.Z.DUO_POTION,n.Z.DUO_SUNGLASSES,n.Z.DUO_TWIRL],character:"duo"},{assets:[n.Z.LIN_BIKE,n.Z.LIN_BIKEKISS,n.Z.LIN_BIKE],character:"lin"},{assets:[n.Z.FALSTAFF_EATING,n.Z.FALSTAFF_SNOOZE,n.Z.FALSTAFF_SNEEZING],character:"falstaff"},{assets:[n.Z.DUO_BUTTERFLY,n.Z.DUO_CHEER,n.Z.DUO_HEADPHONES],character:"duo"},{assets:[n.Z.LILY_DOOMSCROLL,n.Z.LILY_SHIRTS,n.Z.LILY_RAINCLOUD],character:"lily"},{assets:[n.Z.OSCAR_PAINTING,n.Z.OSCAR_BONSAI,n.Z.OSCAR_FLOWER],character:"oscar"},{assets:[n.Z.DUO_GLOBE,n.Z.DUO_BALL,n.Z.DUO_BOOKS],character:"duo"},{assets:[n.Z.JUNIOR_FROG,n.Z.JUNIOR_POGO,n.Z.JUNIOR_ICECREAM],character:"junior"},{assets:[n.Z.ZARI_GAMING,n.Z.ZARI_KICK,n.Z.ZARI_LOLLIPOP],character:"zari"},{assets:[n.Z.DUO_JUMPFLAP,n.Z.DUO_HEADPHONES,n.Z.DUO_POTION],character:"duo"},{assets:[n.Z.LUCY_WALKIETALKIE,n.Z.LUCY_CAT,n.Z.LUCY_WALKIETALKIE],character:"lucy"},{assets:[n.Z.EDDY_BASKETBALL,n.Z.EDDY_JUMPROPE,n.Z.EDDY_BASKETBALL],character:"eddy"},{assets:[n.Z.DUO_BOOKS,n.Z.DUO_GEM,n.Z.DUO_WHISTLING],character:"duo"},{assets:[n.Z.BEA_SMORES,n.Z.BEA_TENNIS,n.Z.BEA_SMORES],character:"bea"},{assets:[n.Z.VIKRAM_NOODLES,n.Z.VIKRAM_PANCAKES,n.Z.VIKRAM_GRILL],character:"vikram"},{assets:[n.Z.DUO_POTION,n.Z.DUO_SUNGLASSES,n.Z.DUO_GLOBE],character:"duo"},{assets:[n.Z.LIN_BIKE,n.Z.LIN_BIKEKISS,n.Z.LIN_BIKE],character:"lin"},{assets:[n.Z.FALSTAFF_FISHING,n.Z.FALSTAFF_SNEEZING,n.Z.FALSTAFF_SNOOZE],character:"falstaff"},{assets:[n.Z.DUO_WHISTLING,n.Z.DUO_TWIRL,n.Z.DUO_JUMPFLAP],character:"duo"}],g=(e,t)=>e.reduce(((e,a,s)=>e+(s<t?a.height+a.marginBottom+a.marginTop:s===t?a.marginTop:0)),0),m=e=>0===e?p[0]:p[(e-1)%(p.length-1)+1],h=()=>[{assets:[n.Z.DUO_BOOKS],character:"duo"}],_=e=>e.levels.every((e=>"passed"===e.state)),v=e=>e.levels.every((e=>"legendary"===e.state||"duo_radio"===e.type))},71371:(e,t,a)=>{"use strict";a.d(t,{Z:()=>_});var s=a(63301),n=a(39852),r=a(12301),i=a(51158),o=a(18804),l=a(79465);const c={challenge_continue:800,challenge_grade:300,challenge_typing:60,character_animation_play:300,explanation_open:3e3,language_switch:1e3,lesson_start:3e3,login_success_or_fail:1e3,open_leaderboard_profile:300,open_profile:300,purchase_item_in_shop:1e3,registration_success_or_fail:3e3,session_end_grade:1e3,speech_grade:300,splash_to_home:3e3,splash_to_intro:5e3,story_completion_delay:3e3,story_start:3e3,stripe_elements_load:3e3,subscription_delivery:3e3,trial_user_creation:3e3,tts_play:50,welcome_fork_to_session_start:3e3},d={stripe_elements_load:1,subscription_delivery:1},u={},p=e=>{if(!m(e))return void((0,s.Au)()&&console.warn(`Timer event "${e}" finished but it was never started. Please make sure you start the timer on all relevant code paths. If the timer was intentionally removed or you reloaded the page you can ignore this warning.`));const t=window.performance.now(),a=t-u[e];a>=0?g(e,a):(0,i.Kp)(`Performance timer negative for ${e}`,{data:{duration:a,endTime:t,startTime:u[e]}}),h(e)},g=(e,t)=>{var a,u,p,g;t=Math.round(t),(0,s.Au)()&&t>c[e]&&((0,n.cM)("timer",`${e}`,{duration:t}),console.warn(`Timer event "${e}" took ${t}ms. This exceeds the allowed event duration of ${c[e]}ms.`));try{const s=null!==(p=null!==(a=d[e])&&void 0!==a?a:null===(u=(0,o.qg)())||void 0===u?void 0:u.config.featureFlags.web_timer_tracker_sampling_rate)&&void 0!==p?p:0;if(Math.random()<s){const a=null===(g=(0,o.qg)())||void 0===g?void 0:g.player,n=r.q.getPersistedStateVersion();(0,l.track)("app_performance_timer",{challenge_index:(null==a?void 0:a.session)?a.currentIndex:void 0,challenge_type:(null==a?void 0:a.session)?a.session.challenges[a.currentIndex].type:void 0,millisecond_duration:t,performance_timer_subtype:e,restored_state_version:"state-persisted"===n.type?`${n.version}`:void 0,sampling_rate:s})}}catch(t){(0,i.vU)(`Failed to track performance timer for ${e}`,{ex:t})}},m=e=>void 0!==u[e],h=e=>delete u[e],_={finish:p,finishOptional:e=>{m(e)&&p(e)},has:m,remove:h,start:(e,{startTime:t}={})=>u[e]=null!=t?t:window.performance.now()}},12301:(e,t,a)=>{"use strict";a.d(t,{q:()=>l});var s=a(80728),n=a(60106),r=a(68903),i=a(11908);const o=66+(s.n?1:0),l=new class{constructor(e,t){this.initialize=(e,t)=>{if(void 0!==this.substateCache)throw Error("initialize called twice");const a=t=>(console.log(`${t}; using new blank state`),this.didUsePersistedState=!1,e()),s=(()=>{const e=this.storage.get();if(!e)return a("No local state found");if(e.version!==this.supportedVersion)return a("Local state outdated");const s=null==t?void 0:t(e.state);return void 0!==s?a(s):(console.log("Using locally persisted state"),this.didUsePersistedState=!0,e.state)})();this.substateCache=new n.Z(s),this.substateCache.subscribe((0,r.rw)((()=>{this.storage.set((()=>({state:this.getSubstateCache().getAll(),version:this.supportedVersion})))}),100))},this.bindSubstate=e=>this.getSubstateCache().substate(e),this.getCurrentState=()=>this.getSubstateCache().getAll(),this.getPersistedStateVersion=()=>void 0===this.didUsePersistedState?{type:"unknown"}:this.didUsePersistedState?{type:"state-persisted",version:this.supportedVersion}:{type:"state-was-reset"},this.persistState=(e,t)=>{this.getSubstateCache().substate(e).set(t)},this.getSubstateCache=()=>{if(void 0===this.substateCache)throw Error("Persister not initialized");return this.substateCache},this.supportedVersion=e,this.storage=t}}(o,{get:()=>(0,i.rV)(i.Qt.State),set:e=>(0,i.LS)(i.Qt.State,e())})},44637:(e,t,a)=>{"use strict";a.d(t,{Dk:()=>y,GR:()=>b,Ks:()=>E,L1:()=>f,SB:()=>w,UV:()=>v,ct:()=>S,gZ:()=>T,vx:()=>C,yn:()=>k});var s=a(80254),n=a(42659),r=a(93540),i=a(88528),o=a(95332),l=a(94778),c=a(17135),d=a(37971),u=a(68903),p=a(23275),g=a(89260),m=a(79465),h=a(34704),_=a(11811);const v=1e3*parseFloat(i.Z["duration-slide"]),f=(e,t)=>{let a=0,s=0;for(let n=0;n<e.session.challenges.length;n++){const r={challenge:e.session.challenges[n],challengeIndex:n,sectionChallengeIndex:s,sectionIndex:a};if(t(r))return r;s<e.challengeIdSections[a].length-1?s++:(a++,s=0)}return{challenge:void 0,challengeIndex:void 0,sectionChallengeIndex:void 0,sectionIndex:void 0}},b=e=>{const[t]=y(e),a=[],s=e.sessionParams.isFinalLevel&&!e.session.failed&&!e.session.shouldLearnThings;return f(e,(({challenge:e,sectionIndex:n})=>!(void 0!==e.gradingResult&&(!s||void 0===t||t>n)&&(a.push(e),1)))),a},S=(e,t)=>(0,l.j4)({challenge:e,challengeState:t})?d.c.Guessing:d.c.Showing,y=e=>{const{sectionIndex:t,sectionChallengeIndex:a}=f(e,(({challengeIndex:t})=>t===e.currentIndex));return[t,a]},E=e=>{const t=(0,n.jv)(e),a=(0,n.B8)(e),s=(0,n.mu)(e,Date.now()),i=(0,r.HF)(e),l=(0,n.lA)(e),d=(0,h.hg)(e),{coachDuo:u,completedWithHeartsRemaining:m,numInLessonTipOpens:v,levelData:f,session:{challenges:b,startTime:S},sessionParams:{isFinalLevel:y},sessionPrefetchedTimestamp:E,speakIneligibleReasons:k=[],via:w}=l,{globalPlacementSessionStarts:T}=a,C=b.some((e=>(0,g.tq)().includes(e.type))),R=b.some((e=>(0,g.bc)().includes(e.type)));return Object.assign(Object.assign({},I({path:i,player:l})),{already_completed:(0,p.Wc)(null==f?void 0:f.level.state),coach_shown:u.allShowReasons.length>0,contained_listen_challenge:C,contained_speak_challenge:R,did_complete_all_segments:y?m:void 0,disabled_listen_challenges:S<t.listenDisabledUntil&&C,disabled_speak_challenges:S<t.speakDisabledUntil&&R,num_challenges_skipped:b.filter((e=>e.skipped)).length,num_characters_shown:b.map((e=>o.yH.includes(e.type)?e.type===_.Sm.Dialogue?e.dialogue.filter((e=>{var t;return void 0!==(null===(t=e.character)||void 0===t?void 0:t.avatarIconImage)})).length:e.character?1:0:0)).reduce(((e,t)=>e+t),0),num_explanation_opens:v,num_placement_starts:null!=T?T:0,num_times_transliteration_toggled:l.numTimesTransliterationToggled,offlined_session:void 0!==E,offlined_session_timestamp:E,speak_count:(0,g.A2)(b),speak_ineligible:k.length>0,speak_ineligible_reasons:k.join(","),time:(0,c.Zo)(),transliteration_setting:d?d.enabled?d.trackingName:"off":void 0,upload_timestamp:0,via:w,xp_boost_equipped:s})},I=({path:e,player:t})=>{var a,n,r,i,o,l,c;const{currentIndex:d,sessionParams:g,session:{adaptiveChallenges:m,challenges:h}}=t,_=h.slice(0,d+1),v=m?s.ZP.intersection(m.map((e=>e.id)),_.map((e=>e.id))).length:0,f=null!==(a=null==g?void 0:g.generatorIdentifiersOfRecentMistakes)&&void 0!==a?a:[],b=_.filter((e=>{var t;return null===(t=e.gradingResult)||void 0===t?void 0:t.correct})).filter((e=>e.challengeGeneratorIdentifier)).map((e=>e.challengeGeneratorIdentifier)),S=f.filter((e=>(0,u.cY)(b,e))).length;return Object.assign(Object.assign({},s.ZP.pick((0,p.eK)(e),"num_levels_completed","num_skill_levels_completed","num_units_completed","path_complete")),{contained_adaptive_challenge:v>0,level_index:g.levelIndex,level_index_in_unit:null===(n=t.levelData)||void 0===n?void 0:n.levelIndex,level_session_index:g.levelSessionIndex,num_adaptive_challenges:v,num_mistakes_completed:S,path_extension:!!(0,p.Mj)(null===(r=t.levelData)||void 0===r?void 0:r.level),path_level_id:null===(o=null===(i=t.levelData)||void 0===i?void 0:i.level)||void 0===o?void 0:o.id,session_is_legendary:g.isFinalLevel,session_subtype:g.isGrammarSkill?"grammar":void 0,skill_id:g.skillId,skill_ids:null===(l=g.skillIds)||void 0===l?void 0:l.join(","),unit_index:null===(c=t.levelData)||void 0===c?void 0:c.levelIndex})},k=({challenge:e,challengeState:t,isDesktop:a,session:s,sessionParams:n})=>{switch(s.type){case _.FF.AlphabetLesson:case _.FF.GlobalPractice:case _.FF.MistakesReview:case _.FF.Legendary:case _.FF.LegendaryLevel:case _.FF.LegendaryLexemePractice:case _.FF.Lesson:case _.FF.LevelReview:case _.FF.LexemePractice:case _.FF.LexemeSkillLevelPractice:case _.FF.SectionTest:case _.FF.SpecifiedMatchPractice:case _.FF.TargetPractice:case _.FF.UnitReview:case _.FF.UnitRewind:case _.FF.UnitTest:case _.FF.UnitPractice:if(t.hasBrokenTts)return"broken-tts";if((0,g.bc)().includes(e.type))return"cant-speak";if((0,g.tq)().includes(e.type))return"cant-listen";if(n.isGrammarSkill||n.isFinalLevel||s.type===_.FF.Legendary||s.type===_.FF.LegendaryLevel||s.type===_.FF.LegendaryLexemePractice||s.type===_.FF.SectionTest||s.type===_.FF.SpecifiedMatchPractice||s.type===_.FF.TargetPractice||s.type===_.FF.UnitTest||s.type===_.FF.UnitReview||s.type===_.FF.UnitRewind)return;if(a)return"skip";break;case _.FF.PlacementTest:return"skip";case _.FF.DuoRadio:case _.FF.LegendaryUnitPractice:case _.FF.ListeningPractice:case _.FF.SpeakingPractice:return;default:return(0,u.RJ)(s.type)}},w=e=>e>=11?"fox":e>=6?"bee":"owl",T=(e,t)=>{var a;const s=(()=>{if(e.response){switch(e.response.status){case 401:return"authentication_error";case 403:return"forbidden_error";case 404:return"not_found_error";case 410:return"route_gone_error"}return e.response.status>=500&&e.response.status<600?"server_error":"unknown_error"}return"ECONNABORTED"===e.code?"timeout_error":"network_error"})();(0,m.track)("session_end_fail",{http_status_code:null===(a=e.response)||void 0===a?void 0:a.status,request_error_type:s,type:t})},C=({currentCourseHistory:e,hasXpBoost:t,path:a,player:s,transliterationSetting:n})=>{const{currentIndex:r,levelData:i,session:o,session:{challenges:l,challengeTimeTakenCutoff:c},speakIneligibleReasons:d=[]}=s,{globalPlacementSessionStarts:u}=e,h=l.map((e=>e.timeTaken?Math.min(c,e.timeTaken)/1e3:0)).reduce(((e,t)=>e+t)),_=l.slice(0,r+1);(0,m.track)("session_quit",Object.assign(Object.assign(Object.assign({},I({path:a,player:s})),o.trackingProperties),{already_completed:(0,p.Wc)(null==i?void 0:i.level.state),num_challenges_at:l.length,num_challenges_ct:s.session.challenges.filter((e=>{var t;return null===(t=e.gradingResult)||void 0===t?void 0:t.correct})).length,num_challenges_skipped:l.filter((e=>e.skipped)).length,num_placement_starts:null!=u?u:0,num_times_transliteration_toggled:s.numTimesTransliterationToggled,speak_count:(0,g.A2)(_),speak_ineligible:d.length>0,speak_ineligible_reasons:d.join(","),sum_time_taken:h,transliteration_setting:n?n.enabled?n.trackingName:"off":void 0,xp_boost_equipped:t}))}},95975:(e,t,a)=>{"use strict";a.d(t,{$:()=>i,S:()=>r});var s=a(20028);const n=[["en","es"],["en","fr"],["es","en"],["pt","en"]],r=(e,t,a)=>a.creationDate<Date.now()-604800&&!(0,s.pN)(a)&&void 0!==e&&e>=3&&t%7==0&&n.some((e=>e[0]===a.fromLanguage&&e[1]===a.learningLanguage)),i="https://podcast.duolingo.com"},84401:(e,t,a)=>{"use strict";a.d(t,{dY:()=>f,Fb:()=>v,Am:()=>D,Dk:()=>g,hz:()=>V,Br:()=>O,$7:()=>b,pj:()=>y,az:()=>m,sU:()=>h,tL:()=>M,qv:()=>w,W7:()=>j,Jk:()=>W,gw:()=>H,a8:()=>S,d0:()=>U,FG:()=>L,IP:()=>$,gv:()=>x,rK:()=>F,Mn:()=>Z,z8:()=>I,Hk:()=>A,yi:()=>P,Lf:()=>E,qL:()=>k,PH:()=>R,J_:()=>T,T8:()=>G});var s=a(80254),n=a(17135),r=a(63301),i=a(59815),o=a(68903),l=a(8654),c=a(23275),d=a(11811),u=a(43464),p=a(79465);const g="READ",m=e=>(e?(0,c.Ol)({levelType:"story",path:e}):[]).map((e=>e.pathLevelClientData.storyId)),h=async(e,t,a,n)=>{var r,i;const o=j(n);if(void 0===o)throw Error("Tried to update practice hub stories without practice hub data.");const l=null===(r=null==o?void 0:o.featuredStory)||void 0===r?void 0:r.storyId;if(void 0!==l){const n=await(async({featuredStoryId:e,fromLanguage:t,learningLanguage:a})=>{try{return await u.Mw.getPracticeHubStories(e,t,a)}catch(e){(0,p.trackAndLogApiError)("stories_listing_update","Failed to fetch practice hub stories",e)}})({featuredStoryId:l,fromLanguage:t,learningLanguage:a}),r=s.HK(null!==(i=null==n?void 0:n.stories)&&void 0!==i?i:[],"id");if(void 0!==n)return{featuredStory:n.featuredStory,featuredStoryId:l,libraryStories:e.flatMap((e=>{const t=r[e];return void 0===t?[]:[t]}))}}return{featuredStory:void 0,featuredStoryId:"",libraryStories:[]}};var _=a(51158);const v=10,f=30,b=async({countLimit:e,courseId:t,includeListening:a,includeSpeaking:s})=>{if(void 0===t)return[];const n=await u.wO.getMistakes({countLimit:e,courseId:t,includeListening:a,includeSpeaking:s});return null!=n?n:[]},S=async({countLimit:e,courseId:t,cutOffTimestamp:a,includeListening:s,includeSpeaking:n})=>void 0!==t?(await u.wO.getMistakes({countLimit:e,courseId:t,includeListening:s,includeSpeaking:n})).filter((e=>e.inInboxSinceTimestamp/1e3>a)):[],y=e=>{const t=e.challengeIdentifier.specificType,a=e.prompt;switch(t){case"assist":return(0,l._i)(19598,{word:a});case"character_intro":return(0,l._i)(15437);case"character_select":return(0,l._i)(25329,{string_1:a});case"complete_reverse_translation":return(0,l._i)(21271);case"definition":return(0,l._i)(1831,{string_1:a});case"form":return(0,l._i)(20300);case"judge":return(0,l._i)(8914);case"listen":return(0,l._i)(6961);case"listen_comprehension":return(0,l._i)(8769);case"listen_tap":return(0,l._i)(10461);case"name":return(0,l._i)(24291,{word:a});case"select":return(0,l._i)(28895);case"select_pronunciation":case"select_transcription":return(0,l._i)(21070);case"speak":return(0,l._i)(11803);case"tap":case"tap_gap":case"translate":case"reverse_tap":case"reverse_translate":return(0,l._i)(9221);case"transliterate":return(0,l._i)(20190);default:return void(0,_.Kp)(`Unsupported mistakes challenge specific type ${t} was returned`,{once:!0})}},E=e=>{const t=e.challengeIdentifier.specificType;return!["assist","character_select","definition","name"].includes(t)},I=e=>{switch(e.challengeIdentifier.specificType){case"assist":case"character_select":case"definition":case"form":case"name":case"select":case"select_pronunciation":case"select_transcription":return void 0!==y(e);case"character_intro":case"complete_reverse_translation":case"judge":case"listen":case"listen_comprehension":case"listen_tap":case"speak":case"tap":case"tap_gap":case"translate":case"reverse_tap":case"reverse_translate":return void 0!==y(e)&&null!==e.prompt;default:return!1}},k=(e,t)=>{const a=1e3*t;return 0!==a&&a<e.inInboxSinceTimestamp},w=({isListenEnabled:e,isSpeakEnabled:t,sessionType:a})=>{switch(a){case d.FF.ListeningPractice:if(!e)return"listen-disabled";break;case d.FF.SpeakingPractice:if(!t)return"speak-disabled";case d.FF.TargetPractice:case d.FF.UnitRewind:}},T=({dispatch:e,isListenEnabled:t,isSpeakEnabled:a,sessionName:s})=>{const n=w({isListenEnabled:t,isSpeakEnabled:a,sessionType:U(s)});return void 0!==n&&(e({options:{allowSwitchSession:!1,name:"PRACTICE_HUB_SESSION_NOTIFICATION",sessionName:s,type:n},type:"TOGGLE_DRAWER"}),!0)};var C=a(81149);const R=()=>"experiment"===(0,C.j6)("mcoach_web_words_list_dev",void 0),L=e=>void 0===e?[]:(0,c.yK)(e).reverse().filter((e=>e.skillId)).map((e=>(["locked","unit_test"].includes(e.state)&&(0,_.vU)("Unexpected locked level when fetching words list lexeme data.",{data:e,once:!0}),{finishedLevels:"active"===e.state?0:1,finishedSessions:e.finishedSessions,skillId:{id:e.skillId}}))),O=()=>({specifiedWordTranslationPairs:[],type:d.FF.SpecifiedMatchPractice}),P=(e,t,a)=>void 0!==e&&(!!(0,r.gQ)("forceShowPracticeHub")||!(!a.hasPlus&&!t)&&(0,c.Ol)({levelType:"skill",path:e}).length>=1),A=(e,t)=>t&&void 0!==e,D=["listen-up","perfect-pronunciation","target-practice","unit-rewind"],x=(0,o.p)(D),N=(0,o.p)(["listening-practice","speaking-practice"]),F=e=>[d.FF.ListeningPractice,d.FF.SpeakingPractice,d.FF.SpecifiedMatchPractice,d.FF.TargetPractice,d.FF.UnitRewind].includes(e),M=e=>{switch(e){case d.FF.ListeningPractice:return"listen-up";case d.FF.SpeakingPractice:return"perfect-pronunciation";case d.FF.TargetPractice:return"target-practice";case d.FF.UnitRewind:return"unit-rewind";default:throw Error(`Unrecognized practice hub session type: ${e}`)}},U=e=>{switch(e){case"listen-up":case"listening-practice":return d.FF.ListeningPractice;case"perfect-pronunciation":case"speaking-practice":return d.FF.SpeakingPractice;case"target-practice":return d.FF.TargetPractice;case"unit-rewind":return d.FF.UnitRewind;default:throw(0,o.RJ)(e),Error(`Unrecognized practice hub session path name: ${e}`)}},H=e=>{switch(e){case"listen-up":return"listening_practice";case"perfect-pronunciation":return"speaking_practice";case"target-practice":return"target_practice";case"unit-rewind":return"unit_rewind";case"mistakes-review":return"mistakes_review_collections";case"listening-practice":return"listening_practice_collections";case"speaking-practice":return"speaking_practice_collections";default:throw(0,o.RJ)(e),Error(`Unrecognized practice hub session path name: ${e}`)}},j=e=>{var t;const a=e.currentCourseId;return null===(t=e.practiceHubInfo)||void 0===t?void 0:t[null!=a?a:""]},G=({dispatch:e,forceRefresh:t,includeListening:a,includeSpeaking:r,path:i,user:o})=>{const l=o.currentCourseId,d=j(o),u=null==d?void 0:d.timestampGenerated;if(!t&&u&&(0,n.zk)((0,n.zM)(u)))return;if(void 0===l||void 0===i||(0,c.U8)({levelType:"skill",path:i})<1)return;const p=B({includeListening:a,includeSpeaking:r,path:i}),g=z({includeListening:a,includeSpeaking:r,path:i,practiceType:p});if(void 0===p||void 0===g)throw Error("Tried to refresh practice hub featured session when no practice types are eligible");var h;e({courseId:l,practiceHubCourseInfo:{courseId:l,featuredSession:{completed:!1,sessionParams:g},featuredStory:{completed:!1,storyId:(h=m(i),s.UP(h.slice(Math.max(h.length-30,0))))},timestampGenerated:Date.now()/1e3},type:"REFRESH_PRACTICE_HUB"})},B=({excludedSessions:e,includeListening:t,includeSpeaking:a,path:n})=>{const r=D.filter((s=>!(null==e?void 0:e.includes(s))&&Z({includeListening:t,includeSpeaking:a,path:n,sessionType:U(s)})));return s.UP(r)},V=({dispatch:e,includeListening:t,includeSpeaking:a,path:s,practiceType:n,user:r})=>{if(!r.hasPlus)throw new i.w(`Non subscriber user tried to load ${n} session`);if(N(n)){const e=z({includeListening:t,includeSpeaking:a,path:s,practiceType:n});if(void 0===e)throw Error(`Tried to load ${n} session when unavailable`);return e}G({dispatch:e,includeListening:t,includeSpeaking:a,path:s,user:r});const o=j(r);if(void 0===o)throw Error("Failed to update and save practice hub sessions for the current course");const l=o.featuredSession;if(void 0===l)throw Error(`Tried to load ${n} featured session when unavailable`);if(n!==M(l.sessionParams.type))throw Error("Tried to load a non-featured practice hub session type");return l.sessionParams},z=({includeListening:e,includeSpeaking:t,path:a,practiceType:s})=>{if(Z({includeListening:e,includeSpeaking:t,path:a,sessionType:U(s)}))switch(s){case"listen-up":case"listening-practice":return{skillId:(0,c.mo)(a,10,["grammar"]).skillId,type:d.FF.ListeningPractice};case"perfect-pronunciation":case"speaking-practice":return{skillId:(0,c.mo)(a,10,["grammar"]).skillId,type:d.FF.SpeakingPractice};case"target-practice":{const e=(0,c.mo)(a,10,["grammar"]);return{skillIds:[e.skillId],type:d.FF.TargetPractice,unitIndex:e.unitIndex}}case"unit-rewind":return $(a);default:throw(0,o.RJ)(s),Error(`Unrecognized practice hub session type: ${s}`)}},Z=({includeListening:e,includeSpeaking:t,path:a,sessionType:s})=>{const n=(0,c.Bm)(a),r=null==n?void 0:n.unitIndex;switch(s){case d.FF.ListeningPractice:return e;case d.FF.SpeakingPractice:return t;case d.FF.TargetPractice:return!0;case d.FF.UnitRewind:return r&&r>=1||(0,c.Ol)({path:a}).length>1;default:throw Error(`Unrecognized practice hub session type: ${s}`)}},$=e=>{var t,a;const n=(0,c.Ol)({path:e}),r=null!==(a=null===(t=n[n.length-1])||void 0===t?void 0:t.unitIndex)&&void 0!==a?a:0,i=s.MX(Math.max(r-3,0),r-1),o=e[i].levels;return{skillIds:o[o.length-1].pathLevelClientData.skillIds,type:d.FF.UnitRewind,unitIndex:i}},W=e=>{switch(e){case d.FF.ListeningPractice:return(0,l._i)(39413,{num:10});case d.FF.SpeakingPractice:return(0,l._i)(31472,{num:10});case d.FF.SpecifiedMatchPractice:return(0,l._i)(37048);case d.FF.TargetPractice:return(0,l._i)(39368,{num:10});case d.FF.UnitRewind:return(0,l._i)(39371,{num:10});default:throw Error(`Unrecognized practice hub session type: ${e}`)}}},2439:(e,t,a)=>{"use strict";a.d(t,{j:()=>r,q:()=>i});var s=a(35160),n=a(79465);const r=(e,t)=>{(0,n.track)("premium_ad_click",e.trackingProps),i(e,t)},i=(e,t,a)=>{t({options:Object.assign(Object.assign({},e),{name:a?s.t.PremiumPurchaseSecondary:s.t.PremiumPurchase}),type:a?"TOGGLE_SECONDARY_MODAL":"TOGGLE_MODAL"})}},67280:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>c,p4:()=>l,xp:()=>o});var s=a(63301),n=a(68903),r=a(11811);const i=e=>void 0!==e&&(0,n.gB)(e.discountType,r.SP),o=e=>(0,s.gQ)("debugNypDisabled")||null==e?void 0:e.find(i),l=(e,t)=>{const a=o(e);return a&&t<a.expirationTime?a:void 0},c=(e,t=Date.now())=>void 0!==l(e,t)},77747:(e,t,a)=>{"use strict";a.d(t,{AW:()=>i,Ak:()=>d,BY:()=>r,m6:()=>l,sP:()=>c,zh:()=>u});var s=a(43464),n=a(79465);const r=10,i=1e3,o="https://forms.gle/6S9RV1pyxZBZQ28M6",l=e=>({ar:"https://forms.gle/s9G48vL74JHABGiWA",bn:o,cs:"https://forms.gle/Qp7R8kVhvg6Y9n6u5",de:"https://forms.gle/6FsEyLmecYH5nviA7",el:"https://forms.gle/iJvbmQziwriaJgfP6",en:o,es:"https://forms.gle/Ep43BcZyn8Mz5m2H7",fr:"https://forms.gle/brGLWurDEubHijSE6",hi:"https://forms.gle/GjDnx9es4r7GBDgN8",hu:"https://forms.gle/H8ens9JVNh5NMVtF9",id:"https://forms.gle/BnCiKkkEfzsSAeED6",it:"https://forms.gle/ZmTRJi3ewWot7KjUA",ja:"https://forms.gle/SAbMtGDZG9ZDmKkV7",ko:"https://forms.gle/k7oC7tFwVc3iZkc48","nl-NL":"https://forms.gle/Zwmwywphainrux3x7",pa:o,pl:"https://forms.gle/EVsSmifCJb5Uuy1J6",pt:"https://forms.gle/zswjrRH6KBY6VR8E8",ro:"https://forms.gle/vsmCw6taXvxYmdTs7",ru:"https://forms.gle/xSmogNiMiFMXrtJr8",te:o,th:"https://forms.gle/PB6EeexbfJyPAdQw7",tl:"https://forms.gle/G9hDUwW8xxfpcNCh8",tr:"https://forms.gle/dXhLaHkSoAkJixRY9",uk:"https://forms.gle/1dJxFALxadvDS2LP9",vi:"https://forms.gle/aiRf8jEJ1rzYdkXA9","zh-CN":"https://forms.gle/TFpQd2zvya3Sch8W9","zh-TW":"https://forms.gle/TFpQd2zvya3Sch8W9"}[null!=e?e:"en"]),c="business_landing_page",d=e=>{var t;return null===(t=e.web_enable_b2b_page)||void 0===t||t},u=async e=>{let t;try{t=await s.a1.getB2BPricingData(e)}catch(a){(0,n.trackAndLogApiError)("b2b_pricing_failed","Unable to fetch B2B pricing data from subscriptions-backend",a,{queryParams:{countryCode:e},response:t})}return t}},6545:(e,t,a)=>{"use strict";a.d(t,{N2:()=>D,Nh:()=>M,Pr:()=>H,Sz:()=>E,UZ:()=>O,ZQ:()=>R,dS:()=>A,eH:()=>y,ew:()=>P,fQ:()=>f,h:()=>x,r:()=>N,sK:()=>S,uS:()=>j,z:()=>U});var s=a(27378),n=a(33467),r=a(80164),i=a(50498),o=a(17135),l=a(63301),c=a(81149),d=a(68903),u=a(42464),p=a(8654),g=a(2439),m=a(67280),h=a(51158),_=a(18804),v=a(11811);const f=2024,b=["debugNypExpiresAt","debugNypExpiresIn"],S=()=>!(0,l.gQ)("debugNypDisabled")&&b.some((e=>(0,l.gQ)(e))),y=()=>async e=>{const t=(()=>{if((0,l.gQ)("debugNypExpiresAt")){const e=(0,l.ky)("debugNypExpiresAt");return void 0!==e?Date.parse(e)-Date.now():NaN}if((0,l.gQ)("debugNypExpiresIn")){const e=(0,l.ky)("debugNypExpiresIn");return e?(0,o.iN)(e):void 0}})();var a;void 0!==t&&((isNaN(t)||t<0)&&(0,h.vU)(`Invalid expiration when trying to create fake NYP discount with ${a=b.find((e=>(0,l.gQ)(e))),a&&`${a}: ${(0,l.ky)(a)}`}`,{once:!0}),e({apiDiscount:{discountType:v.tm.NewYears2024Fake,secondsUntilExpiration:t/1e3},type:"ADD_SUPER_DISCOUNT"}),await(0,i._v)(100))},E=()=>{const[e,t]=s.useState(Date.now()+(0,l.nn)()),a=()=>t(Date.now()+(0,l.nn)());return s.useEffect((()=>(T(a),()=>C(a))),[]),e};let I,k,w=[];const T=e=>{w.push(e),I||k||(k=setTimeout((()=>{I=setInterval((()=>w.forEach((e=>e()))),1e3)}),1e3-(0,o.Ux)().getMilliseconds()))},C=e=>{w=w.filter((t=>t!==e)),0===w.length&&(k&&(clearTimeout(k),k=void 0),I&&(clearInterval(I),I=void 0))},R=e=>{const t=(0,_.Fx)(r.I9),a=(0,_.Fx)(r.tE),n="registration_soft_wall"===e||"redeem"===e,[i,o]=s.useState((()=>a?(0,m.p4)(t,Date.now()):void 0));if((0,u.Z)((()=>{i&&i.expirationTime<Date.now()&&o(void 0)}),void 0===i?void 0:5e3),s.useEffect((()=>{o(a?(0,m.p4)(t,Date.now()):void 0)}),[t,a]),!n)return i},L=(e,t)=>{const a=e.expirationTime-t;return a<o.Mb||a<2*o.Mb&&a<1e3*(0,o.dz)({hours:"experiment"===(0,c.j6)("spack_new_years_2024_last_chance",void 0)?48:24})},O=e=>{const t=R(e),[a,n]=s.useState((()=>void 0!==t&&L(t,Date.now())));return s.useEffect((()=>{void 0===t&&n(!1)}),[t]),(0,u.Z)((()=>{n(void 0!==t&&L(t,Date.now()))}),t?5e3:void 0),a},P=e=>void 0!==R(e),A=(e,t,a)=>e&&t&&a,D=({discount:e,product:t,step:a,withPlusContext:s,hasUsNypPlan:r})=>{const i=a&&[n.K.Packages,n.K.BillingInfo].includes(a);switch(e?i?"package-selection":"default-new-years":"default-plus"){case"package-selection":return(null==t?void 0:t.isNewYears)?(0,p._i)(34149,{discount:j(r)}):(0,p._i)(34199);case"default-new-years":return s?(0,p._i)(34149,{discount:j(r)}):(0,p._i)(1819,{discount:j(r)});default:return(0,p._i)(34199)}},x=(e,t,a,s)=>{if(!e)return null;const{hoursTotal:n,minutes:r,seconds:i}=F(e,t),o=n<=0&&r<=0?(0,p.H8)(27121,{minutes:r,seconds:i}):(0,p.H8)(2519,{hours:n,minutes:r});return"verbose_explanation"===s&&["PF","Package"].includes(a)?(0,p._i)(49290,{remaining:o}):(0,p._i)(27637,{duration:o})},N=(e,t)=>{const a=E(),s=(0,_.Fx)(r.I9);return((e,t,a,s,n)=>[(()=>{switch(n){case"control":return"Package"===s?(0,p._i)(6007,{discount:j(a)}):(0,p._i)(11586);case"twenty_five_percent":return(0,p._i)(50019);case"verbose_explanation":return"HM"===s?(0,p._i)(49288):(0,p._i)(49289);default:throw(0,d.RJ)(n),Error("NYP discount explanation experiment condition is not matched")}})(),x(e,t,s,n)])((0,m.p4)(s,a),a,(0,_.Fx)(r.W),e,t)},F=(e,t)=>(0,o.zj)(e.expirationTime-t),M=()=>{const e=(0,_.Fx)(r.I9),t=E(),a=(0,m.p4)(e,t);return a?((e,t)=>{const{hoursTotal:a,minutes:s,seconds:n}=(0,o.zj)(e.expirationTime-t);return`${a<10?"0":""}${a}:${s<10?"0":""}${s}:${n<10?"0":""}${n}`})(a,t):""},U=e=>["new_years_home_drawer","new_years_shop_banner"].includes(e)?n.K.Benefits:n.K.Features,H=(e,t)=>()=>{(0,g.j)({customStartStep:U(t),trackingProps:{iap_context:t}},e)},j=e=>"twenty_five_percent"===(0,c.j6)("spack_new_years_2024_discount_explain",void 0)?e?25:20:60},25062:(e,t,a)=>{"use strict";a.d(t,{B5:()=>I,G$:()=>b,H7:()=>s,J_:()=>h,Rg:()=>S,T4:()=>E,XL:()=>n,eV:()=>m,hp:()=>_,k0:()=>y,kk:()=>g,uJ:()=>f});var s,n,r=a(61079),i=a(80254),o=a(43464),l=a(63301),c=a(93746),d=a(51158),u=a(79465);!function(e){e.AmericanExpress="AMERICAN_EXPRESS",e.DinersClub="DINERS_CLUB",e.Discover="DISCOVER",e.JCB="JCB",e.MasterCard="MASTERCARD",e.Unknown="UNKNOWN",e.Visa="VISA"}(s||(s={})),function(e){e.StripeVendor="STRIPE"}(n||(n={}));const p={AT:"EUR",AU:"AUD",BE:"EUR",BR:"BRL",CA:"CAD",CY:"EUR",DE:"EUR",EE:"EUR",ES:"EUR",FI:"EUR",FR:"EUR",GB:"GBP",GR:"EUR",IE:"EUR",IT:"EUR",JP:"JPY",LT:"EUR",LU:"EUR",LV:"EUR",MX:"MXN",NL:"EUR",PT:"EUR",SI:"EUR",SK:"EUR",US:"USD"},g=e=>{var t;return null!==(t=p[e])&&void 0!==t?t:"USD"},m=(s.AmericanExpress,s.DinersClub,s.Discover,s.JCB,s.MasterCard,s.Visa,{[s.AmericanExpress]:"amex",[s.DinersClub]:"diners",[s.Discover]:"discover",[s.JCB]:"jcb",[s.MasterCard]:"mastercard",[s.Visa]:"visa"}),h={[s.AmericanExpress]:"American Express",[s.DinersClub]:"Diners Club",[s.Discover]:"Discover",[s.JCB]:"JCB",[s.MasterCard]:"MasterCard",[s.Visa]:"Visa"};var _;!function(e){e.Schools="DUOLINGO_SCHOOLS",e.Duolingo="DUOLINGO"}(_||(_={}));const v=async(e,t)=>{const a=(0,l.gQ)("debugStripe")?t:e;r.loadStripe.setLoadParameters({advancedFraudSignals:!1});const s=await(0,r.loadStripe)(a,{betas:["elements_enable_deferred_intent_beta_1"]});if(null===s)throw Error("stripe could not be loaded");return s},f=i.IH((async()=>await v("pk_live_wGV2ziRFq7KJLNaVUAJgrzDf","pk_test_bpwxgxXy49mckw94PW2hhVnS"))),b=i.IH((async()=>await v("pk_live_51LsRThCLCQAemjDAxnfWuDhC82PfhQ4l7iOkoytUPpkDEiNEpDge4l8umm5BZHtCTTfAtBjIULU5ft0G3MNVSlk000nW3pIJse","pk_test_51LsRThCLCQAemjDAJSRyXRbH24iEVGIUBnK5VKr34QEO5MTwJn9Cub0RLzJ3jC7nXXky2Ie8KT5dhxTVh1jCGfEM005g2c0iKg"))),S=i.IH((async()=>{const e=await f(),t=window.ApplePaySession;if(t&&(t.canMakePaymentsWithActiveCard=()=>Promise.resolve(t.canMakePayments())),e){const t=e.paymentRequest({country:"US",currency:"usd",total:{amount:1e3,label:"Test Amount"}}),a=await t.canMakePayment();(0,u.track)("supported_web_payment_options",{supported_web_payment_options:a?a.applePay?"ApplePay":"PaymentRequestAPI":"None"})}})),y=async(e,t,a)=>{var s;if(!e)throw Error("no cardNumberElement provided");{const n=await f(),{token:r,error:i}=await n.createToken(e,Object.assign({name:t},a&&{address_zip:a}));if(i)throw Error(null!==(s=i.code)&&void 0!==s?s:"unknown error creating token");if(r)return r.id}throw Error("unknown error creating token")},E=(e,t,a,s)=>{const n=`${(0,c.M$)(window.duo.uiLanguage)}-${null!=a?a:"US"}`,r=Intl.NumberFormat.supportedLocalesOf(n,{localeMatcher:"lookup"}).length>0?n:(0,c.BE)(),i=s?{maximumFractionDigits:0,minimumFractionDigits:0}:{};if(""===t)return(0,d.Kp)("formatPrice called with empty currency",{data:{country:a,price:e},once:!0}),`$${new Intl.NumberFormat(r,Object.assign({currency:"USD",style:"currency"},i)).format(e/100).replace(/[A-Z]*/,"")}`;const o=new Intl.NumberFormat(r,Object.assign({currency:t,style:"currency"},i)).format(e/100);return"AUD"!==t||o.includes("A")?"CAD"!==t||o.includes("CA")?"MXN"!==t||o.includes("MX")?"USD"!==t||o.includes("US")?o:`${o} USD`:`${o} MXN`:`${o} CAD`:`${o} AUD`},I=e=>[o.qF.LE.Admin,o.qF.LE.IOS,o.qF.LE.Android].includes(e)},74541:(e,t,a)=>{"use strict";a.d(t,{$M:()=>r,l1:()=>n});var s=a(43464);const n=(e,t,a)=>{switch(null==e?void 0:e.itemName){case s.qF.lV.SUPER:case s.qF.lV.IMMERSIVE_SUPER:return t;case s.qF.lV.MAX:return a;default:return}},r=e=>(null==e?void 0:e.itemName)===s.qF.lV.MAX},32499:(e,t,a)=>{"use strict";a.d(t,{$2:()=>B,DK:()=>Z,G4:()=>O,Jc:()=>C,Nf:()=>E,RD:()=>A,SY:()=>f,Wt:()=>b,X0:()=>S,_A:()=>F,_C:()=>w,_r:()=>I,b1:()=>L,dR:()=>N,dY:()=>x,eA:()=>y,eh:()=>k,ek:()=>H,fE:()=>T,gD:()=>M,hJ:()=>U,jF:()=>R,kI:()=>V,kY:()=>D,oi:()=>z,tA:()=>j,tJ:()=>P,vM:()=>G});var s=a(33467),n=a(9249),r=a(43464),i=a(17135),o=a(81149),l=a(1),c=a(68903),d=a(93746),u=a(2439),p=a(25062),g=a(51158),m=a(88868),h=a(79465),_=a(16086),v=a(20028);const f=(e,t)=>{var a;if(!e)return!1;const s=null!==(a=e.subscriptionInfo)&&void 0!==a?a:{renewer:void 0,renewing:void 0},i=s.renewer,o=i&&(i!==r.qF.LE.Stripe||void 0!==s.renewing);return o||t(n.w4(e.purchaseId)),!!o},b=(e,t)=>!e.inventory.premium_subscription&&!e.inventory.gold_subscription&&!e.inventory.schools_pro_subscription&&!(0,v.d1)(t)&&(!(0,v.jq)(t)||(0,l.GQ)(t))&&!(0,v.pN)(t),S=(e,t)=>{var a;return b(e,t)&&!e.inventory.immersive_subscription&&!window.duo.disableMonetization&&((null===(a=e.subscriptions)||void 0===a?void 0:a.subscriptionPlans)?e.subscriptions.subscriptionPlans.length>0:void 0)},y="com.duolingo.subscription.premium.prepaid",E="com.duolingo.subscription.premium.b2b_universal_clock";var I;!function(e){e[e.OneMonth=0]="OneMonth",e[e.TwelveMonth=1]="TwelveMonth",e[e.FamilyPlan=2]="FamilyPlan"}(I||(I={}));const k=(e,t)=>(0,p.T4)(Math.ceil(e.priceInCents/e.periodLengthInMonths),e.planCurrency,t),w=(e,t)=>(0,p.T4)(e.priceInCents,e.planCurrency,t),T=14,C=2,R=(e,t)=>{var a;return null!==(a=e.find((e=>e.planType===(null!=t?t:I.TwelveMonth))))&&void 0!==a?a:e[0]},L=e=>void 0===e?0:e.length,O=e=>void 0!==e&&["PREPAID","B2B_UNIVERSAL_CLOCK"].includes(e.type),P="com.duolingo.immersive_free_trial_subscription",A=e=>e===P,D=e=>"USD"!==e.planCurrency,x=e=>{var t,a,s,n,r,o,l;const c=null!==(a=null===(t=e.subscriptionInfo)||void 0===t?void 0:t.expectedExpiration)&&void 0!==a?a:i.wD,d=null!==(n=null===(s=e.subscriptionInfo)||void 0===s?void 0:s.extendedFreeTrialLength)&&void 0!==n?n:(0,i.dz)({days:T}),u=e.purchaseDate+d<=c;return u!==(null===(r=e.subscriptionInfo)||void 0===r?void 0:r.isFreeTrialPeriod)&&(0,g.Kp)("Unexpected difference between isFreeTrialPeriod and manually calculated free trial period",{data:{subscription:e},once:!0}),null!==(l=null===(o=e.subscriptionInfo)||void 0===o?void 0:o.isFreeTrialPeriod)&&void 0!==l?l:u},N=e=>!!e.subscriptionInfo&&e.subscriptionInfo.renewer===r.qF.LE.Stripe,F=e=>!!e.familyPlanInfo,M=e=>e.subscriptionInfo?(0,i.zM)(e.subscriptionInfo.expectedExpiration).toLocaleString((0,d.M$)(window.duo.uiLanguage),{day:"numeric",month:"long",year:"numeric"}):"",U=(e,t)=>{if(!t.subscriptionInfo)return 0;const a=t.subscriptionInfo.expectedExpiration;return(0,i.t8)(e,1e3*a,"ceil")},H=(e,t)=>{if(!t.subscriptionInfo)return;const a=(0,i.zM)(t.subscriptionInfo.expectedExpiration);return(0,i.J8)(e,a)},j=async(e,t)=>{await r.Vi.patchUserShopItem(e.purchaseId,{subscriptionInfo:{renewing:!0}}),await t(n.w4(e.purchaseId))},G=e=>{switch(e.periodLengthInMonths){case 1:return"one_month";case 6:return"six_month";case 12:return"twelve_month";default:throw Error(`Unknown premium product period length ${(0,c.RJ)(e.periodLengthInMonths)}`)}},B=e=>(0,_.Pc)()&&"experiment"===(0,o.j6)("spack_web_fp_init_page",void 0)?s.K.Features:e,V=(e,t,a,n)=>{(0,h.track)("premium_ad_show",{iap_context:"registration_soft_wall"}),(0,u.q)({customStartStep:s.K.Benefits,didClickFreeTrial:!0,onBeforeClose:a,trackingProps:{iap_context:"registration_soft_wall"},welcomeRedirect:()=>{e.push(m.B6),t({options:void 0,type:"TOGGLE_MODAL"})}},t,n)},z=(e,t,a,s,n)=>s&&n&&"experiment"===(0,o.j6)("spack_web_registration_softwall_v2",void 0)?{closeModalOnLogin:!1,goBack:()=>V(e,t,a,!0)}:{},Z=2},88787:(e,t,a)=>{"use strict";a.d(t,{Hd:()=>b,S1:()=>f,ZK:()=>v,eV:()=>S,og:()=>y,r1:()=>_});var s=a(43464),n=a(50498),r=a(51158),i=a(79465),o=a(74597),l=a(16086);let c,d=!1,u=null;const p=e=>{const t=e.endpoint;return t.startsWith("https://android.googleapis.com/gcm/send")&&e.subscriptionId&&!t.includes(e.subscriptionId)?e.subscriptionId:t.split("/").pop()},g=()=>{if(void 0===c)throw Error("Push notifications not initialized yet");return c},m=async e=>{try{return void await h()}catch(e){(0,r.Kp)("Failed to subscribe to push notifications",{ex:e})}try{if(await _(!1),null==e?void 0:e.aborted)return;await h()}catch(e){(0,r.Kp)("Failed to update notification subscription",{ex:e})}},h=async()=>{const e=g(),t=(e=>{const t=(e+"=".repeat(1)).replace(/-/g,"+").replace(/_/g,"/"),a=atob(t),s=new Uint8Array(a.length);for(let e=0;e<a.length;++e)s[e]=a.charCodeAt(e);return s})("BOfu40JfHSmIGu-08T0bvngwcoDkpA3hwdQiQnQxyCHQTpZjI5v_bNND-ERl5UYNZ9l4S2VCmEjKSgTeZxDsHgk"),a=await e.pushManager.subscribe({applicationServerKey:t,userVisibleOnly:!0});console.log("Subscribed to push notifications"),s._s.registerDevice(p(a),JSON.stringify(a)),u=a},_=async e=>{if(null===u)return;const t=g(),a=await t.pushManager.getSubscription();a&&(await a.unsubscribe(),console.log("Unsubscribed from push notifications"),e||s._s.unregisterDevice(p(a)).catch((e=>(0,i.trackAndLogApiError)("unregister_device_failed","Failed to unregister device",e))),u=null)},v=async e=>{(0,i.track)("chrome_notification_dialog_load",{via:e});const t=(async()=>{const t=await new Promise((e=>{try{Notification.requestPermission().then(e)}catch(t){Notification.requestPermission(e)}}));(0,i.track)("chrome_notification_dialog_tap",{target:{default:"close",denied:"deny",granted:"allow"}[t],via:e}),m()})();if(!o.Z.safari){const a=new AbortController,s=a.signal;(0,n._v)(1e4).then((()=>{s.aborted||(0,r.Kp)("requestPermission is taking a long time (10+ seconds)",{data:{userAgent:navigator.userAgent,via:e}})})),await t,a.abort()}},f=async e=>{if(null===u){if(!("serviceWorker"in navigator))throw Error("Browser doesn't support service workers");c=await navigator.serviceWorker.getRegistration(),await navigator.serviceWorker.ready,e.aborted||await(async e=>{if(!("showNotification"in window.ServiceWorkerRegistration.prototype))throw Error("Notifications unsupported");const t=window.Notification.permission;if("denied"!==t){if(!("PushManager"in window))throw Error("Push messaging unsupported");console.log("Push notifications initialized"),d=!0,"granted"===t&&(0,l.Pc)()&&await m(e)}else console.log("User denied notification permission")})(e)}else console.log("Push notifications already initialized")},b=()=>d,S=async e=>{e({isVisible:!0,type:"TOGGLE_REQUEST_NOTIFICATION_PERMISSION"});try{await v("notification_primer")}catch(e){console.error(e)}e({isVisible:!1,type:"TOGGLE_REQUEST_NOTIFICATION_PERMISSION"})},y=e=>e&&b()&&"default"===window.Notification.permission},4517:(e,t,a)=>{"use strict";a.d(t,{E:()=>s});const s=new(a(58525).S)},30004:(e,t,a)=>{"use strict";a.d(t,{Lw:()=>r,wQ:()=>i});var s=a(42783),n=a(4517);const r=e=>(0,s.h)({queries:e}),i=(e,t={})=>{var{exact:a=!0}=t,s=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]])}return a}(t,["exact"]);return n.E.getQueryData(e,Object.assign({exact:a},s))}},90110:(e,t,a)=>{"use strict";a.d(t,{G1:()=>D,GH:()=>H,Gq:()=>j,OC:()=>B,Pe:()=>F,Se:()=>N,Sk:()=>I,Zp:()=>y,be:()=>M,f7:()=>U,gW:()=>E,kl:()=>k,vI:()=>G});var s=a(80254),n=a(85394),r=a(42659),i=a(73520),o=a(74462),l=a(43464),c=a(17135),d=a(81149),u=a(41831),p=a(68903),g=a(60752),m=a(51551),h=a(6661),_=a(79465),v=a(86073),f=a(97106);const b=({goals:e,monthlyChallengeThreshold:t,progress:a,user:s})=>(n,r)=>{n({payload:{updates:a},type:"SET_MONTHLY_CHALLENGE_PROGRESS_UPDATE"});const o=e.progress&&e.monthlyQuest?e.progress[e.monthlyQuest]:void 0,l=void 0===o?void 0:o+a,d=(0,i.gD)(r());void 0!==o&&o<t&&void 0!==l&&a>=t&&d&&n({earnedBadges:[...e.earnedBadges,{badgeId:d,earned:!0,earnedTimestamp:(0,c.Ux)().toISOString(),earnedTimezone:s.timezone}],type:"SET_EARNED_BADGES"})},S=async({isZombieMode:e,progress:t,user:a})=>{if(e){const e=await(0,g.b)();await e.add("submittableRequests",{request:{batchUpdate:{metricUpdates:[{metric:"QUESTS",quantity:t}]},timestamp:(0,c.Ux)(),timezone:a.timezone},type:"goals-progress"})}else await l.JV.sendBatchUpdate(a.id,{metricUpdates:[{metric:"QUESTS",quantity:t}]},(0,c.Ux)(),a.timezone)},y=(e,t)=>e.rewardBundles.find((e=>e.rewardBundleType===t)),E=e=>{const t=y(e,"DAILY_GOAL_DOUBLE");if(void 0!==t&&t.rewards.length>0)return t.rewards[0]},I=(e,t,a)=>{l.Vi.consumeReward(t,a.id),a.currency===v.N5?e({gems:a.amount,type:"UPDATE_USER_GEMS"}):e({lingots:a.amount,type:"UPDATE_USER_LINGOTS"}),e({type:"CONSUME_DAILY_GOAL_REWARD"})},k=({availableQuests:e,goals:t,items:a,monthlyChallengeThreshold:s,updateLocally:n=!0,user:i})=>(o,l)=>{var c;const p=l(),g=(0,r.df)(p),m=(0,r.mu)(p,Date.now()),h=null===(c=t.progressUpdate)||void 0===c?void 0:c.updates,{totalCompletedQuests:v}=(0,u.wn)({difficulty:t.difficulty,oldProgress:t.progress,progress:h,quests:e});(0,u.i3)({difficulty:t.difficulty,oldProgress:t.progress,progress:h,quests:e});const f="experiment"===(0,d.j6)("gweb_tiered_daily_quests_v3",void 0),S=f?e.flatMap(((e,a)=>(0,u.wU)({difficulty:t.difficulty,oldProgress:t.progress,progress:h,quest:e})?[u.xD[a]]:[])):void 0,y=f&&S?T({hasXpBoost:m,items:a,slotsCompleted:S,user:i}):C({hasXpBoost:m,items:a,questsCompleted:v,user:i});o({dailyQuestRewards:y,type:"SET_PENDING_DAILY_QUEST_REWARDS"});const E=y.map((e=>e.reward));E.forEach((e=>{const t=N(e)?"gems":F(e)?"streak_freeze":M(e)?"xp_boost":void 0;t&&(0,_.track)("daily_quest_reward_claim",{context:"session_end",reward_amount:N(e)?e.amount:void 0,reward_type:t})})),n&&E.forEach((e=>{o(D(e))}));const I=E.length;o(b({goals:t,monthlyChallengeThreshold:s,progress:I,user:i})),w({dispatch:o,isZombieMode:g,rewards:E,user:i})},w=async({dispatch:e,isZombieMode:t,rewards:a,user:s})=>{if(t){const e=await(0,g.b)();for(const t of a)await e.add("submittableRequests",{rewardRequest:{rewardId:t.id,source:"daily-quest",userPartial:{fromLanguage:s.fromLanguage,id:s.id,learningLanguage:s.learningLanguage}},type:"reward"})}else await Promise.all(a.map((e=>l.Vi.consumeReward(s,e.id)))),a.some((e=>M(e)||F(e)))&&e((0,n.J0)());a.length>0&&S({isZombieMode:t,progress:a.length,user:s})},T=({hasXpBoost:e,items:t,slotsCompleted:a,user:s})=>{const n=[],r=[];for(const i of a){let a;switch(i){case"DAILY":a=y(s,u.bf[0]);break;case"CORE":a=y(s,u.bf[1]);break;case"HARD":a=y(s,u.bf[2]);break;default:(0,p.RJ)(i)}if(a){const o=R(a,{hasXpBoost:e,items:t,rewardsSoFar:n,user:s});o&&(n.push(o),r.push({reward:o,slotType:i}))}}return r},C=({hasXpBoost:e,questsCompleted:t,user:a,items:s})=>{const n=((e,t)=>{const a=u.bf.map((t=>y(e,t))).filter(p.$K),s=t+a.reduce(((e,t)=>t.rewards.some((e=>e.consumed))?e:e+1),0)-u.bf.length;return a.slice(0,Math.max(0,s))})(a,t),r=[];return n.forEach((t=>{const n=R(t,{hasXpBoost:e,items:s,rewardsSoFar:r,user:a});n&&r.push(n)})),r.map((e=>({reward:e,slotType:void 0})))},R=(e,{hasXpBoost:t,items:a,rewardsSoFar:s,user:n})=>{const r=e.rewardBundleType;switch(r){case"DAILY_QUEST_FIRST":{const t=O(e,{items:a,rewardsSoFar:s,user:n});return void 0!==t?t:L(e)}case"DAILY_QUEST_SECOND":return L(e);case"DAILY_QUEST_THIRD":{const r=O(e,{ignoreProbability:!0,items:a,rewardsSoFar:s,user:n});if(void 0!==r)return r;if(!t&&"experiment"===(0,d.j6)("gweb_tiered_daily_quests_v3",void 0)){const t=A(e);if(void 0!==t)return t}return L(e)}default:return void(0,p.RJ)(r)}},L=e=>s.MR(e.rewards.filter(N),(e=>e.amount))[0],O=(e,{ignoreProbability:t,items:a,rewardsSoFar:s,user:n})=>{var r,i;const o=P(e);if(o&&!s.find((e=>x(e)&&"STREAK_FREEZE"===e.itemId))&&!(0,h.pS)(null!==(i=null===(r=n.streakData.currentStreak)||void 0===r?void 0:r.length)&&void 0!==i?i:0)&&(0,m.RB)(a,n,t))return o},P=e=>{const t=e.rewards.filter((e=>x(e)&&"STREAK_FREEZE"===e.itemId));return t.length>0?t[0]:void 0},A=e=>{const t=e.rewards.filter((e=>x(e)&&e.itemId===f.zL.ITEM_NAME_15_MIN));return t.length>0?t[0]:void 0},D=e=>t=>{N(e)&&(e.currency===v.N5?t({gems:e.amount,type:"UPDATE_USER_GEMS"}):t({lingots:e.amount,type:"UPDATE_USER_LINGOTS"})),t({rewardId:e.id,type:"CONSUME_DAILY_QUEST_REWARD"})},x=e=>"itemId"in e,N=e=>(e=>"currency"in e)(e)&&[v.pP,v.N5].includes(e.currency),F=e=>x(e)&&e.itemId===v.TV,M=e=>"itemId"in e&&Object.values(f.zL).some((t=>t===e.itemId)),U=e=>y(e,"SKILL_COMPLETION"),H=({receivingBoost:e,user:t})=>async(a,s)=>{if((0,r.mu)(s(),Date.now())||e){const e=y(s().user,"SKILL_COMPLETION");if(e){const s=e.rewards[0];await l.Vi.consumeReward(t,s.id),s.currency===v.N5?a({gems:s.amount,type:"UPDATE_USER_GEMS"}):a({lingots:s.amount,type:"UPDATE_USER_LINGOTS"})}}else try{await l.Vi.purchaseUserShopItem(f.zL.ITEM_NAME_15_MIN,{isFree:!0,learningLanguage:t.learningLanguage}),await a((0,n.J0)())}catch(e){(0,_.trackAndLogApiError)("purchase_user_shop_item_failed",`Failed to purchase xp boost item ${f.zL.ITEM_NAME_15_MIN}`,e)}},j=()=>(e,t)=>{var a;const s=(0,i.D_)(t()),d=(0,i.Ap)(t()),u=(0,r.np)(t()),p=(0,o.r0)(t()),m=u.rewardBundles.find((e=>"FRIENDS_QUEST_GEMS"===e.rewardBundleType)),h=u.rewardBundles.find((e=>"FRIENDS_QUEST_XP_BOOST"===e.rewardBundleType)),_=(0,r.df)(t()),v=G(u);if(!(null===(a=s.friendsQuest)||void 0===a?void 0:a.details)||!(null==m?void 0:m.rewards.length)||!(null==h?void 0:h.rewards.length)||m.rewards.some((e=>e.consumed))||h.rewards.some((e=>e.consumed))||void 0===v)return;const{goalId:f,questId:y,questPoints:E}=s.friendsQuest.details;e({type:"ACKNOWLEDGE_FRIENDS_QUEST_COMPLETE"}),e(p?{gems:v,type:"UPDATE_USER_GEMS"}:{lingots:v,type:"UPDATE_USER_LINGOTS"}),e(b({goals:s,monthlyChallengeThreshold:d,progress:E,user:u})),S({isZombieMode:_,progress:E,user:u}),_?(async()=>{const e=await(0,g.b)();await e.add("submittableRequests",{rewardRequest:{rewardId:m.rewards[0].id,source:"friends-quest",userPartial:{fromLanguage:u.fromLanguage,id:u.id,learningLanguage:u.learningLanguage}},type:"reward"}),await e.add("submittableRequests",{rewardRequest:{rewardId:h.rewards[0].id,source:"friends-quest",userPartial:{fromLanguage:u.fromLanguage,id:u.id,learningLanguage:u.learningLanguage}},type:"reward"})})():(l.Vi.consumeReward(u,m.rewards[0].id),l.JV.postQuestComplete({goalId:f,questId:y,questSlot:"FRIENDS",timestamp:(0,c.Ux)(),timezone:u.timezone,userId:u.id}),(async()=>{await B((0,r.__)(t()),"Friends Quest Reward"),await l.Vi.consumeReward(u,h.rewards[0].id),e((0,n.J0)())})(),e({type:"CONSUME_FRIENDS_QUEST_GEMS"}),e({type:"CONSUME_FRIENDS_QUEST_XP_BOOST"}))},G=e=>{var t,a,s;const n=null===(s=null===(a=null===(t=e.rewardBundles.find((e=>"FRIENDS_QUEST_GEMS"===e.rewardBundleType)))||void 0===t?void 0:t.rewards[0])||void 0===a?void 0:a.items)||void 0===s?void 0:s[0];if(void 0!==n&&("GEM"===n.itemType||"LINGOT"===n.itemType))return n.count},B=async(e,t)=>{for(const a of Object.values(f.zL))if(void 0!==e.inventory[a])try{await l.Vi.useUserShopItem(a)}catch(e){(0,_.trackAndLogApiError)("use_user_shop_item_failed",`Failed to delete xp boost item ${a} from ${t}`,e)}}},51158:(e,t,a)=>{"use strict";a.d(t,{fZ:()=>A,cj:()=>z,LZ:()=>Z,GN:()=>$,vU:()=>q,c2:()=>W,um:()=>Q,S1:()=>H,D_:()=>j,yB:()=>G,YJ:()=>T,_b:()=>C,av:()=>B,Kp:()=>Y});var s=a(36056),n=a(60074),r=a(59118),i=a.n(r),o=a(85078),l=a.n(o),c=a(74053),d=a.n(c),u=a(37847),p=a.n(u),g=a(58866),m=a.n(g),h=a(80254),_=a(43464),v=a(17135),f=a(63301),b=a(94358),S=a(80728),y=a(11908);const E=(e,t=1)=>{if(e&&"object"==typeof e){if(Array.isArray(e)){if(t>0){const a=e.map((e=>E(e,t-1)));return a.length?`[${a.join(", ")}]`:"[]"}return e.length?`Array(${e.length})`:"[]"}if(t>0){const a=Object.entries(e).map((([e,a])=>(/^[a-zA-Z$_][a-zA-Z$_\d]*$/.test(e)||(e=`'${e}'`),[e,E(a,t-1)])));return a.length?`{ ${a.map((([e,t])=>`${e}: ${t}`)).join(", ")} }`:"{}"}return Object.keys(e).length?"{…}":"{}"}return"string"==typeof e?`'${e}'`:`${e}`},I=()=>{if((0,f.NY)())return!1;try{let e=(0,y.rV)(y.Qt.RollbarThrottling);return void 0===e||e.firstErrorTimestamp<(0,v.HR)(-300)?e={errorCount:1,firstErrorTimestamp:Date.now()}:e.errorCount++,(0,y.LS)(y.Qt.RollbarThrottling,e),e.errorCount>10}catch(e){try{(0,y.cl)(y.Qt.RollbarThrottling)}catch(e){}return!1}};let k=null,w=null;const T=e=>{k=e},C=e=>{w=e},R=["d35aaqx5ub95lt\\.cloudfront\\.net","duolingo\\.com","localhost","webpack://","webpack-internal://"],L=R.map((e=>e.replace("\\.","."))),O=["CHALLENGE_GUESS_CHANGE","MODAL_MOUNTED","MODAL_UNMOUNTED"],P=[".cloudfront.net/smart_tip_",".doubleclick.net",".fullstory.com",".google-analytics.com",".px-cloud.net","://brb.duolingo.com","://zombie.duolingo.com"],A=[429,500,502,503,504],D=["Access is denied|Acceso denegado","Empty session","file://","Network Error","[Nn]etwork ?[Ee]rror","NS_ERROR","reactInternalInstance",`Request failed with status code (${A.join("|")})`,"sascdn","SecurityError: The operation is insecure\\.","[Ss]cript error","setData","SSTIEd|sssied","\\btimeout of \\d+ms exceeded\\b","zaloJSV2"],x=RegExp(D.join("|"),"m");let N=0,F=0;const M={};let U;i().setComponents({instrumenter:l(),scrub:d(),telemeter:p(),truncation:m()});const H=()=>{var e;return U=i().init({accessToken:"4616870b92be48ed9d9971e11a435814",autoInstrument:{log:!1,navigation:!1},captureUncaught:!0,captureUnhandledRejections:!0,checkIgnore:(e,t,a)=>{var s,n,r,i,o,l;const c=a;try{c.custom=null!==(s=c.custom)&&void 0!==s?s:{},c.custom.fullStoryUrl=(0,b.nP)(),c.custom.leaderboardsStateManagement=S.n?"jotai":"redux";const a=Array.from(t).find(_.Hx);if(a&&(c.custom.request={code:a.code,method:a.method,responseData:null===(n=a.response)||void 0===n?void 0:n.data,status:null===(r=a.response)||void 0===r?void 0:r.status,url:a.url}),!navigator.onLine)return!0;if(a&&void 0===a.response)return!0;if(c.body.trace){const e=null===(i=c.body.trace.frames.slice(-1)[0])||void 0===i?void 0:i.filename;if(!new RegExp(R.join("|")).test(e))return!0;if(/Loading( CSS)? chunk .+? failed\./.test(null!==(o=c.body.trace.exception.message)&&void 0!==o?o:""))return null==k||k(c),!0}if(x.test(JSON.stringify(c.body)))return!0;if(I())return console.log("Ignoring because throttling limit reached:",c),!0;if(e){if(null==w||w(c),F>=5)return console.log("Ignoring because item reporting limit reached:",c),!0;F++,c.custom=null!==(l=c.custom)&&void 0!==l?l:{},c.custom.isUncaught=!0}}catch(e){console.error(e)}return!1},enabled:!!(null===(e=window.duo.l10n)||void 0===e?void 0:e.strings),filterTelemetry:e=>{const t=e;return"network"===t.type&&("xhr"===t.body.subtype||"fetch"===t.body.subtype)&&P.some((e=>t.body.url.includes(e)))},hostBlockList:[],hostSafeList:R,ignoredMessages:["script error"],payload:{client:{javascript:{code_version:window.duo.versionHash,guess_uncaught_frames:!0,source_map_enabled:!0}},environment:(0,f.oj)()?"preview":(0,f.NY)()?"staging":"production"},verbose:(0,f.Au)(),wrapGlobalEventHandlers:!1})},j=()=>{var e;s.S({allowUrls:L,attachStacktrace:!0,beforeSend:(e,t)=>{var a;return navigator.onLine?I()||(0,_.Hx)(t.originalException)&&void 0===t.originalException.response&&void 0===(null===(a=e.tags)||void 0===a?void 0:a.message)?null:e:null},dsn:"https://c5ab8b73d726e87132e8e0502de636e0@o4506106988134400.ingest.sentry.io/4506139970502656",enabled:!!(null===(e=window.duo.l10n)||void 0===e?void 0:e.strings),environment:(0,f.oj)()?"preview":(0,f.NY)()?"staging":"production",ignoreErrors:D,release:window.duo.versionHash})},G=e=>{var t;const a=Object.assign(Object.assign({},null===(t=U.options.payload)||void 0===t?void 0:t.custom),{isZombieMode:e});U.configure({payload:{custom:a}}),n.YA("isZombieMode",e.toString())},B=e=>{var t;const a=Object.assign(Object.assign({},null===(t=U.options.payload)||void 0===t?void 0:t.custom),{experiments:e.experiments?Object.fromEntries(h.XP(e.experiments).filter((t=>e.experiments[t].treated)).map((t=>[t,e.experiments[t].condition]))):void 0}),s={id:e.id,username:e.username};U.configure({payload:{custom:a,person:s}}),n.av({id:e.id,username:e.username})},V=(e,t="info",a=5)=>(s,r={})=>{let i=s instanceof Error?[s.name,s.message].filter((e=>e)).join(": "):s;if(N>=a)return void console.log("Ignoring because item reporting limit reached:",i);const{data:o,ex:l,once:c=!1,sample:d=1}=r;if(c){if(M[i])return void console.log("Ignoring because reported already:",i);M[i]=!0}if(d<1){if(Math.random()>d)return void console.log("Ignoring due to sampling:",i);i=`${i} (sampled at ${100*d}%)`}const u=[i];s instanceof Error&&u.push(s),"object"!=typeof o&&"string"!=typeof o||u.push(o),s instanceof Error||void 0===l||(l instanceof Error?u.push(l):console.error("Tried to report non-Error as Error:",l)),N+=1;const p={extra:"object"==typeof o?o:{data:o},level:t,tags:{limit_once_per_page:c,message:i,sample_rate:d}},g=s instanceof Error?s:l;return void 0===g?n.uT(i,p):n.Tb(g,p),e(...u)},z=e=>{if(!O.includes(e.type))try{const t="QUEUE_ANIMATIONS"===e.type&&e.animations.some((e=>e.name.startsWith("PATH_")))?3:1;U.captureEvent("log",{message:`dispatch(${E(e,t)})`},"debug")}catch(e){}},Z=(e,t)=>U.captureEvent("log",{message:e},t),$=(e,t)=>U.captureEvent("navigation",{from:e,to:t},"info"),W=()=>{var e,t;return null!==(t=null===(e=U.telemeter)||void 0===e?void 0:e.queue)&&void 0!==t?t:[]},q=(e,t)=>V(U.error.bind(U),"error")(e,t),Q=(e,t)=>V(U.info.bind(U),"warning")(e,t),Y=(e,t)=>V(U.warning.bind(U),"info")(e,t)},88868:(e,t,a)=>{"use strict";a.d(t,{$R:()=>E,B6:()=>p,Eg:()=>S,Eq:()=>b,Iw:()=>D,KE:()=>k,Oy:()=>R,PG:()=>m,Ql:()=>c,UG:()=>y,Vb:()=>d,Z2:()=>u,Zs:()=>L,a9:()=>f,a_:()=>C,cd:()=>P,fu:()=>A,gg:()=>O,o_:()=>x,op:()=>_,sg:()=>g,v$:()=>T,wl:()=>v});var s=a(3620),n=a(80254),r=a(50498),i=a(53229),o=a(51158),l=a(16086);const c={de:"https://blog.duolingo.com/de",en:"https://blog.duolingo.com",es:"https://blog.duolingo.com/es",pt:"https://blog.duolingo.com/pt"}[window.duo.uiLanguage],d="incubator-testbed.duolingo.com",u="www.duolingo.com",p="/learn",g="/sections",m="/welcome?welcomeStep=choosePath",h=window.duo.oldWebUrlWhitelist.map((e=>new RegExp(e))),_="/settings/super",v="/super",f=["/plus","/getplus","/youtubeplus",v],b="/practice-hub",S="/practice-hub/stories",y="/practice-hub/mistakes",E="/practice-hub/words",I=[...f,_,"/family-plan","/redeem","/settings/family-report","/welcome","/classroom/:classroomCode","/bango/:reseller/:token","/family","/business/checkout","/business/admin/:page","/lesson","/lesson/unit/:pathUnitNumber/level/:pathLevelNumber","/stories/:storyId"],k=e=>I.some((t=>(0,s.LX)(e,{exact:!0,path:t}))),w=[...f,"/attribution","/auto-renewal-agreement","/bango/:reseller/:token","/classroom/:classroomCode","/cookies","/cross-border-data-transfer-agreement","/duocon","/duocon2022","/duocon2021","/duocon2020","/duocon2019","/family","/family-plan","/privacy","/redeem","/register","/terms","/welcome","/business/checkout","/business/admin/:page"],T=e=>w.some((t=>(0,s.LX)(e,{exact:!0,path:t}))),C="preview.duolingo.com",R=["","/errors/404.html"].join(""),L=async(e,t)=>{void 0===e?window.location.reload(!0):t?window.location.replace(e):window.location.href=e,await(0,r.f)()},O=e=>e.replace(window.location.host,C),P=(e=(0,l.Pc)())=>e?p:"/",A=n.HP((e=>h.some((t=>t.test(e))))),D=n.HP(((e,t=!0)=>{if(e.startsWith("javascript:")||e.startsWith("//"))return!1;try{const a=document.createElement("a");return a.href=e,!(a.origin!==window.location.origin||A(a.pathname)&&(t&&(0,o.um)("Routable URL is owned by old web",{data:{url:e},once:!0}),1))}catch(e){return!1}})),x=(e,t=!0)=>{let{pathname:a}=e,s=new URLSearchParams(e.search);const n=a,r=e.hash;if(r&&"/"===a&&(a=r.replace(/^#\/*(.*)/,"/$1"),console.log("Removed # from URL"),t&&(0,o.um)("Removed # from URL",{data:{hash:r,originalPathname:n,pathname:a,searchParams:s}})),a.includes("$")&&a.includes("=")&&!a.includes("?")&&(a=a.replace("$","?"),console.log("Replaced $ with ? in URL"),t&&(0,o.um)("Replaced $ with ? in URL",{data:{hash:r,originalPathname:n,pathname:a,searchParams:s}})),a.includes("?")){const e=a.split("?");a=e[0],s=new URLSearchParams((0,i.Lm)(e[1])),t&&(0,o.um)("Split ? from new path",{data:{hash:r,originalPathname:n,pathname:a,searchParams:s}})}(0,l.Pc)()&&s.delete("isLoggingIn");const c=s.toString();return{pathname:a,search:0===c.length?"":`?${c}`}}},12125:(e,t,a)=>{"use strict";a.d(t,{wn:()=>c,Qs:()=>h,YN:()=>g,XU:()=>m,Nx:()=>d,R0:()=>_,Zv:()=>v,S2:()=>u,Y:()=>p});var s=a(80254);const n=a.p+"images/schools/leaderboards/0e0f9617bdef7c1e2e6f82363e093eb7.svg",r=a.p+"images/schools/leaderboards/7417a8ffc61c46d8ea49c3a209f2bf81.svg",i=a.p+"images/schools/leaderboards/8d3ba3746a937cee2a89b1b71b586980.svg";var o=a(17135),l=a(8654);const c=6,d=(e,t,a)=>s.MR(t.map((t=>t.userId===e?Object.assign(Object.assign({},t),{score:t.score+a}):t)),"score").reverse(),u=(e,t,a)=>{if(!(null==t?void 0:t.active)||a<=0)return!1;const s=p(t.active.cohort.rankings),n=s.findIndex((t=>t.userId===e));return 0!==n&&-1!==n&&s[n].score+a>s[n-1].score},p=e=>[...e].sort(((e,t)=>e.score===t.score?e.displayName.localeCompare(t.displayName,void 0,{sensitivity:"base"}):e.score<t.score?1:-1)),g=e=>{switch(e){case 0:return"GOLD";case 1:return"SILVER";case 2:return"BRONZE";default:return"GREEN"}},m=e=>{switch(e){case 0:return n;case 1:return r;case 2:return i;default:return}},h=e=>{const t=(0,o.pY)(e),a=(0,o.Gz)(e);if(t)return(0,l._i)(30308,{date:a.getDate(),day:(0,l.Q7)()[a.getDay()],month:(0,l.mD)()[a.getMonth()]});const{days:s,hours:n}=(0,o.zj)(e-Date.now());return s>0?(0,l._i)(30308,{date:a.getDate(),day:(0,l.Q7)()[a.getDay()],month:(0,l.mD)()[a.getMonth()]}):(0,l._i)(30309,{num:n})},_=e=>void 0!==e&&"completed"!==e&&"late"!==e,v=e=>void 0!==e&&("completed"===e||"late"===e)},89260:(e,t,a)=>{"use strict";a.d(t,{A2:()=>V,HI:()=>C,LJ:()=>w,TD:()=>W,Uj:()=>N,VC:()=>B,Xd:()=>G,ZX:()=>O,bc:()=>L,l$:()=>T,mi:()=>k,oT:()=>$,tq:()=>R,u4:()=>P});var s=a(80254),n=a(42659),r=a(93540),i=a(40387),o=a(43464),l=a(94778),c=a(95351),d=a(17135),u=a(63301),p=a(94786),g=a(68903),m=a(53229),h=a(23275),_=a(84401),v=a(51158),f=a(80820),b=a(59096),S=a(68564),y=a(36571),E=a(79465),I=a(11811);const k=e=>{const[,t,a,s,n,r]=e.split("/");return{lessonType:n,levelNumber:r,pathType:t,scopeType:a,unitOrSectionNumber:s}},w=e=>[I.FF.PlacementTest,I.FF.SectionTest,I.FF.UnitTest].includes(e),T=e=>[I.FF.PlacementTest].includes(e),C=e=>[I.FF.LegendaryLevel,I.FF.LegendaryLexemePractice].includes(e),R=()=>[I.Sm.Listen,I.Sm.ListenComplete,I.Sm.ListenComprehension,I.Sm.ListenMatch,I.Sm.ListenIsolation,I.Sm.ListenSpeak,I.Sm.ListenTap,I.Sm.SelectPronunciation,I.Sm.SelectTranscription],L=()=>[I.Sm.Speak,I.Sm.ListenSpeak],O=e=>[I.FF.GlobalPractice,I.FF.Lesson,I.FF.LevelReview,I.FF.LexemePractice,I.FF.LexemeSkillLevelPractice,I.FF.ListeningPractice,I.FF.PlacementTest,I.FF.SectionTest,I.FF.TargetPractice,I.FF.UnitTest,I.FF.UnitRewind].includes(e),P=async({dispatch:e,getState:t,includeFreeform:a,includeListening:s,includeSmartTips:l,includeSpeaking:p,params:g,levelData:m,sessionWillStartRightAway:h})=>{const _=t(),b=(0,n.Oz)(_),S=(0,n.B8)(_),k=(0,n.df)(_),w=(0,n.oe)(_),T=(0,n.np)(_),{fromLanguage:C,learningLanguage:O}=T,P=(0,d.Zo)(),M=(0,r.DN)(_),U=(0,r.HF)(_),H="mistakes-review"===g.type?(await o.wO.getMistakes({countLimit:10,courseId:b.id,includeListening:s,includeSpeaking:p})).map((e=>e.challengeIdentifier)):void 0;let G;"practice"===g.type?G=(0,c.K)({currentCourseHistory:S,sessionType:I.FF.GlobalPractice,timestamp:P}):"path-level"===g.type&&(G=(0,c.K)({currentCourseHistory:S,levelData:m,sessionType:I.FF.LevelReview}));let B=!1;if(m&&"skill"===m.level.type){const{skillId:e}=m.level.pathLevelClientData;B=N(T,e)}const V=A(),z=await D(V),Z=x(),$=(0,u.ky)("levelIndex"),W=(0,u.ky)("skillId"),q=F({alphabetsPathProgressKey:b.alphabetsPathProgressKey,crowns:b.crowns,debugChallengeTypes:V,debugChallenges:z,debugGeneratorIds:Z,debugLevelIndex:$,debugSkillId:W,dispatch:e,flattenedPath:U,fromLanguage:C,generatorIdentifiersOfRecentMistakes:G,includeListening:s,includeSmartTips:l,includeSpeaking:p,isExplanationSeen:B,learningLanguage:O,levelData:m,mistakeGeneratorIds:H,params:g,pathExperiments:b.pathExperiments,sectionedPath:M,skills:w,user:T}),Q=V.length>0||z.length>0||Z.length>0||void 0!==$||void 0!==W||(0,u.gQ)("latest")||(0,u.gQ)("debugShowAllStoryChallenges")||(0,u.gQ)("debugShowStoriesOnboarding"),Y=m&&(0,f.tr)(m.level)?(0,f.gL)({generatorIdsOfRecentMistakes:null==G?void 0:G.map((e=>e.generatorId)),includeSmartTips:l,isExplanationSeen:B,pathLevel:m.level}):void 0;let K,J,X;if(Y&&!Q)try{[K,J,X]=await(0,f.vS)(Y)}catch(e){(0,v.Kp)("Unable to retrieve cached session",{ex:e})}if(!K||X&&!k){if(k)throw Error("Cannot fetch a new session in Zombie mode");try{const t="story"===q.type?o.Mw.getStory(q):o.Vi.sessionCreate(q);h||!Y||Q||await(0,f.fB)(Y,t,(0,d.Zo)(),e),K=await t,"type"in K&&K.type===I.FF.SectionTest&&q.type===I.FF.SectionTest&&void 0!==q.sectionIndex&&(K.sectionIndex=q.sectionIndex-1),"type"in K&&K.type===I.FF.MistakesReview&&o.wO.clearUngeneratableMistakes({courseId:b.id,expectedMistakes:H,session:K})}catch(e){throw"story"===q.type?(0,E.trackAndLogApiError)("stories_load_story","Failed to load story",e):((0,E.trackAndLogApiError)("create_session_failed","Failed to create session",e),"mistakes-review"===g.type&&o.wO.clearUngeneratableMistakes({courseId:b.id,expectedMistakes:H,session:void 0}),"practice-hub"===g.type&&(0,v.Kp)("Failed to create practice hub session",{data:{session:K,sessionParams:q,sessionRouteParams:g}})),e}}else void 0!==Y&&!X&&h&&await(0,f.yI)(Y);const ee="story"===q.type?{session:K,sessionParams:q,sessionPrefetchedTimestamp:J,type:"story"}:{session:K,sessionParams:q,sessionPrefetchedTimestamp:J,type:"regular"};return"regular"===ee.type?(k&&(ee.session.challenges=ee.session.challenges.filter((e=>e.type!==I.Sm.Name))),s||(ee.session=(0,i.qz)(ee.session,R())),p||(ee.session=(0,i.qz)(ee.session,L())),ee.session.type===I.FF.GlobalPractice&&(null==G?void 0:G.length)&&(ee.session.isMistakesGlobalPractice=!0),await j({debugChallengeTypes:V,debugChallenges:z,debugGeneratorIds:Z,levelData:m,session:ee.session,sessionParams:ee.sessionParams})):"story"!==ee.type||a&&!k||(ee.session.elements=ee.session.elements.filter((e=>!(0,y.Eo)(e)))),ee},A=()=>{let e=[];return(0,u.gQ)("type")&&(e=(0,m.vl)().type.split(",").filter((e=>l.KT.includes(e))),e.length||console.warn("Unknown debug challenge type(s)")),e},D=async e=>{var t;const s=(0,u.ky)("sampleSession");return s?(await a(63198)(`./sampleChallenges${null!==(t={ar_puzzle:"PuzzleArabic",es:"Spanish",ja:"Japanese",ko:"Korean",ko_puzzle:"PuzzleKorean",speak:"Speak",svg_puzzle:"SvgPuzzle",trace:"Trace",write:"CharacterWrite"}[s])&&void 0!==t?t:""}.json`)).default.filter((t=>0===e.length||e.includes(t.type))):[]},x=()=>{const e=(0,u.ky)("generatorId");return e?e.split(","):[]},N=(e,t)=>{const{explanationsSeen:a}=e;return!!(null==a?void 0:a[t])},F=({alphabetsPathProgressKey:e,crowns:t,debugChallengeTypes:a,debugChallenges:s,debugGeneratorIds:n,debugLevelIndex:r,debugSkillId:i,dispatch:o,flattenedPath:c,fromLanguage:d,generatorIdentifiersOfRecentMistakes:u,includeListening:p,includeSmartTips:m,includeSpeaking:v,isExplanationSeen:f,learningLanguage:S,levelData:y,mistakeGeneratorIds:E,params:k,pathExperiments:w,sectionedPath:T,skills:C,user:R})=>{const L=(0,h.Wc)(null==y?void 0:y.level.state);let O;switch(void 0!==T&&T.length>0&&(c=T.flatMap((e=>e.units))),k.type){case"alphabets":O={alphabetSessionId:k.alphabetSessionId,alphabetsPathProgressKey:e,type:I.FF.AlphabetLesson};break;case"legendary":O=H(t,null==y?void 0:y.level);break;case"mistakes-review":O={generatorIdentifiersOfRecentMistakes:E,type:I.FF.MistakesReview};break;case"placement":O={type:I.FF.PlacementTest};break;case"practice":O={generatorIdentifiersOfRecentMistakes:u,type:I.FF.GlobalPractice};break;case"practice-hub":if(!c)throw Error("Missing path information for practice hub session request.");if("words"===k.practiceType){O=(0,_.Br)();break}O=(0,_.hz)({dispatch:o,includeListening:p,includeSpeaking:v,path:c,practiceType:k.practiceType,user:R});break;case"preview":O={lessonIndex:k.lesson?parseInt(k.lesson,10):0,levelIndex:0,skillId:k.skillId,type:I.FF.Lesson};break;case"path-level":if(!y)throw Error("Missing level information for V2 session request.");if("story"===y.level.type){const{mode:e,storyId:a}=y.level.pathLevelClientData;return U({crowns:t,mode:e.toUpperCase(),storyId:a})}O=M({debugLevelIndex:r?parseInt(r,10):void 0,flattenedPath:c,fromLanguage:d,generatorIdentifiersOfRecentMistakes:u,isExplanationSeen:f,isRedoingPassedNode:L,learningLanguage:S,levelData:y,pathExperiments:w,sectionedPath:T,skills:C});break;case"story":return U({crowns:t,mode:k.mode,storyId:k.storyId});default:throw(0,g.RJ)(k),Error("Unknown session type.")}const P=/^zh-(hant|hk|mo|tw)/.exec(navigator.language.toLowerCase())?"zt":/^zh-(cn|hans|my|sg)/.exec(navigator.language.toLowerCase())?"zs":void 0,A={};return!s.length&&n.length&&(A.challengeIds=n,A.forceChallengeTypes=!0),!s.length&&a.length&&(A.challengeTypes=a,A.forceChallengeTypes=!0),!s.length&&i&&(A.skillId=i),Object.assign(Object.assign({challengeTypes:l.KT,fromLanguage:d,isFinalLevel:!1,isV2:!0,juicy:!0,learningLanguage:S,locale:P,smartTipsVersion:m?b.fH:void 0},O),A)},M=({debugLevelIndex:e,flattenedPath:t,fromLanguage:a,generatorIdentifiersOfRecentMistakes:s,isExplanationSeen:n,isRedoingPassedNode:r,learningLanguage:i,levelData:o,pathExperiments:l,sectionedPath:c,skills:d})=>{var u,p;const m=o.level,_=(0,h.w1)(m),v="assigned"===(0,h.xV)(m);let f;if((0,h.TH)(m)&&!v&&t){const{skillIds:e}=m.pathLevelClientData;if(c&&c.length>0&&"locked"===c[(0,h.Kq)(o.unitIndex,c)].status){const t=(0,h.Kq)(o.unitIndex,c);f={sectionIndex:t,sectionType:c[t].type,skillIds:e,type:I.FF.SectionTest}}else f={skillIds:e,type:I.FF.UnitTest}}else switch(m.type){case"alphabet_gate":case"chest":case"story":throw Error(`Tried to create regular session params for unsupported level type: ${m.type}`);case"duo_radio":f={duoRadioEpisodeId:m.pathLevelClientData.duoRadioSummary.episode_id,duoRadioSessionId:m.pathLevelClientData.duoRadioSummary.id,pathExperiments:l,type:I.FF.DuoRadio};break;case"practice":{const{finishedSessions:e,hasLevelReview:t,pathLevelClientData:a,subtype:n,totalSessions:r}=m,{skillIds:i}=a;f={generatorIdentifiersOfRecentMistakes:s,lexemePracticeType:t&&e===r-1?"practice_level_review":"practice_level",pathExperiments:l,skillIds:i,type:"unit_practice"===n?I.FF.UnitPractice:I.FF.LexemePractice};break}case"skill":{const{skillId:t,crownLevelIndex:c}=m.pathLevelClientData,g=null!=e?e:c,_=d[t],b="custom_intro"===m.subtype,S="grammar"===m.subtype,y=r&&S,E=(0,h.Eb)(m);f=(0,h.$)(m)?{generatorIdentifiersOfRecentMistakes:s,levelIndex:g,pathExperiments:l,skillId:t,type:I.FF.LevelReview}:!S&&(r&&!v||E)?{levelIndex:g,pathExperiments:l,skillIds:[t],type:I.FF.LexemeSkillLevelPractice}:{isCustomIntroSkill:b,isGrammarSkill:S,levelIndex:g,pathExperiments:l,showGrammarSkillSplash:z({hasExplanation:!!(null===(u=_.explanation)||void 0===u?void 0:u.url),isExplanationSeen:n,isGrammarSkill:S,isRedoingGrammarSkill:y,pathLevelState:m.state})||Z({fromLanguage:a,hasExplanation:!!(null===(p=_.explanation)||void 0===p?void 0:p.url),isCustomIntroSkill:b,isExplanationSeen:n,learningLanguage:i,levelData:o}),skillId:t,type:I.FF.Lesson};break}case"unit_review":{const{skillIds:e}=m.pathLevelClientData;if("passed"===m.state)throw Error("Tried to create session for passed unit_review level");f={skillIds:e,type:I.FF.UnitReview};break}default:throw(0,g.RJ)(m.type),Error(`Unrecognized level type: ${m.type}`)}return Object.assign(Object.assign({},f),{levelSessionIndex:_})},U=({crowns:e,isLegendaryMode:t=!1,mode:a,storyId:s})=>({crowns:e,debugShowAllChallenges:(0,u.gQ)("debugShowAllStoryChallenges"),debugShowOnboarding:(0,u.gQ)("debugShowStoriesOnboarding")?"newUser":void 0,illustrationFormat:"svg",isDesktop:!0,isLegendaryMode:t,masterVersion:"true"===(0,u.ky)("latest"),mode:a,storyId:s,supportedElements:(0,y.b5)().join(","),type:"story"}),H=(e,t)=>{if(void 0===t)throw Error("Tried to create legendary per node session params for undefined level");if("passed"!==t.state)throw Error("Tried to create legendary per node session params for non-passed node");switch(t.type){case"alphabet_gate":case"chest":case"duo_radio":case"unit_review":throw Error(`Tried to create legendary per node session params for unsupported level type: ${t.type}`);case"practice":{const{skillIds:e}=t.pathLevelClientData;return{isFinalLevel:!0,skillIds:e,type:"unit_practice"===t.subtype?I.FF.LegendaryUnitPractice:I.FF.LegendaryLexemePractice}}case"skill":{const{skillId:e,crownLevelIndex:a}=t.pathLevelClientData;return{isFinalLevel:!0,levelIndex:a,skillId:e,type:I.FF.LegendaryLevel}}case"story":{const{mode:a,storyId:s}=t.pathLevelClientData;return U({crowns:e,isLegendaryMode:!0,mode:a.toUpperCase(),storyId:s})}default:throw(0,g.RJ)(t.type),Error(`Unrecognized legendary per node level type: ${t.type}`)}},j=async({debugChallengeTypes:e,debugChallenges:t,debugGeneratorIds:n,levelData:r,session:i,sessionParams:o})=>{var l,c,d;const p=t.length?(0,u.gQ)("adaptiveChallenges")&&"0"!==(0,u.ky)("adaptiveChallenges")?"force":"remove":(0,u.gQ)("adaptiveChallenges")?"0"===(0,u.ky)("adaptiveChallenges")?"remove":"force":"preserve";let g,m="force"===p?(await a.e(1711).then(a.t.bind(a,40430,19))).default:[];switch(e.length&&(m=m.filter((t=>e.includes(t.type)))),t.length&&(i.challenges=t),p){case"force":i.adaptiveChallenges=m;break;case"preserve":break;case"remove":i.adaptiveChallenges=void 0}if(n.length&&(i.challenges=i.challenges.filter((e=>{var t;const a=null===(t=e.challengeGeneratorIdentifier)||void 0===t?void 0:t.generatorId;return a&&n.includes(a)}))),e.length&&(i.challenges.sort(((t,a)=>e.indexOf(t.type)-e.indexOf(a.type))),null===(l=i.adaptiveChallenges)||void 0===l||l.sort(((t,a)=>e.indexOf(t.type)-e.indexOf(a.type)))),(0,u.gQ)("length")){const e=parseInt(null!==(c=(0,u.ky)("length"))&&void 0!==c?c:"-1",10);e>0&&(i.challenges=i.challenges.slice(0,o.isFinalLevel?Math.max(2,e):e))}if((0,u.gQ)("debugCharacters"))if("0"===(0,u.ky)("debugCharacters"))i.challenges=i.challenges.map((e=>Object.assign(Object.assign({},e),{character:void 0})));else{const e=(await a.e(1711).then(a.t.bind(a,88877,19))).default;i.challenges=i.challenges.map(((t,a)=>Object.assign(Object.assign({},t),{character:e[a%e.length]})))}if([i.challenges,g]=s.uK(i.challenges,(e=>(0,u.gQ)("sampleSession")?e.type!==I.Sm.Speak||S.c:o.challengeTypes.includes(e.type))),g.length){const e=s.jj(s.jg(g,"type")).sort();(0,v.vU)("Received unwanted challenge types",{data:{levelType:null===(d=null==r?void 0:r.level)||void 0===d?void 0:d.type,sessionType:i.type,types:e},sample:.01})}},G=e=>{switch(e){case I.FF.AlphabetLesson:return p.Q.AlphabetLesson;case I.FF.DuoRadio:return p.Q.DuoRadio;case I.FF.GlobalPractice:return p.Q.GlobalPractice;case I.FF.Lesson:return p.Q.Lesson;case I.FF.MistakesReview:return p.Q.MistakesReview;case I.FF.PlacementTest:return p.Q.PlacementTest;case I.FF.SpeakingPractice:return p.Q.SpeakingPractice;case I.FF.Legendary:return p.Q.Legendary;case I.FF.LegendaryLevel:return p.Q.LegendaryLevel;case I.FF.LegendaryLexemePractice:return p.Q.LegendaryLexemePractice;case I.FF.LegendaryUnitPractice:return p.Q.LegendaryUnitPractice;case I.FF.LevelReview:return p.Q.LevelReview;case I.FF.LexemePractice:return p.Q.LexemePractice;case I.FF.LexemeSkillLevelPractice:return p.Q.LexemeSkillLevelPractice;case I.FF.ListeningPractice:return p.Q.ListeningPractice;case I.FF.SectionTest:return p.Q.SectionTest;case I.FF.SpecifiedMatchPractice:return p.Q.SpecifiedMatchPractice;case I.FF.TargetPractice:return p.Q.TargetPractice;case I.FF.UnitPractice:return p.Q.UnitPractice;case I.FF.UnitReview:return p.Q.UnitReview;case I.FF.UnitRewind:return p.Q.UnitRewind;case I.FF.UnitTest:return p.Q.UnitTest;default:return(0,g.RJ)(e),p.Q.Lesson}},B=e=>e.type===I.FF.MistakesReview?-e.challenges.filter((e=>e.correct)).length:[I.FF.Lesson,I.FF.LexemePractice,I.FF.GlobalPractice,I.FF.LevelReview].includes(e.type)?s.jj(e.challenges.filter((e=>!e.correct)),!1,(e=>e.id)).length:0,V=e=>s.jj(e.filter((e=>!e.skipped&&L().includes(e.type))),!1,(e=>e.id)).length,z=({hasExplanation:e,isExplanationSeen:t,isGrammarSkill:a,isRedoingGrammarSkill:s,pathLevelState:n})=>a&&e&&!t&&!(0,h.Wc)(n)&&!s,Z=({fromLanguage:e,hasExplanation:t,isCustomIntroSkill:a,isExplanationSeen:s,learningLanguage:n,levelData:r})=>a&&"ja"===n&&"en"===e&&t&&0===r.level.finishedSessions&&r.unitIndex<7&&!s,$=(e,t)=>{const a=Math.floor(e.length/t),s=new Array(t),n=e.length%t;let r=t-1,i=0;for(let o=e.length-1;o>=0;o--){const l=e[o];(s[r]=s[r]||[]).unshift(l.id),i++,i>=a+(n>0&&t-r>=n?1:0)&&(r--,i=0)}return s},W=e=>{var t;return{activity_uuid:e.session.trackingProperties.activity_uuid,skill_id:e.session.skillId,skill_name:e.session.trackingProperties.skill_name,skill_tree_id:e.session.trackingProperties.skill_tree_id,type:G(e.session.type),unit_index:null===(t=e.levelData)||void 0===t?void 0:t.unitIndex}}},80820:(e,t,a)=>{"use strict";a.d(t,{_x:()=>m,fB:()=>g,gL:()=>v,rb:()=>y,tr:()=>f,vS:()=>_,yI:()=>b});var s=a(80715),n=a(42659),r=a(93540),i=a(17135),o=a(68903),l=a(60752),c=a(23275),d=a(51158);const u=(0,i.dz)({days:30}),p={},g=async(e,t,a,s)=>{const n=t.then((async t=>{try{const n=await(0,l.b)();await n.add("prefetchedSessions",{prefetchTimestamp:a,session:t,stale:!1},e),s({key:e,type:"sessionCache/ADD"})}catch(e){(0,d.Kp)("Unable to store prefetched session",{ex:e})}return t}));p[e]=n,await n,delete p[e]},m=async e=>{const t=e.dispatch.bind(e),a=(0,r.cb)(e.getState()),s=(0,n.Rv)(e.getState()),o=(0,n.iH)(e.getState()),d=(0,r.HF)(e.getState()),p=await(0,l.b)();let g=await p.transaction("prefetchedSessions").store.openCursor();const m=e=>{if(!d)throw Error("Cannot determine level position without path");if(!a)return!0;const t=(0,c.m8)(d,(t=>t.id===e));return!t||(0,c.Nk)(t,a)<0},_=[];for(;g;)((0,i.pY)(1e3*(g.value.prefetchTimestamp+u))||g.value.session.fromLanguage!==s||g.value.session.learningLanguage!==o||m(S(g.key).pathLevel.id))&&_.push(h(g.key,t)),g=await g.continue();await Promise.all(_)},h=async(e,t)=>{const a=await(0,l.b)();await a.delete("prefetchedSessions",e),t({key:e,type:"sessionCache/REMOVE"})},_=async e=>{const t=p[e];if(void 0!==t)return[await t,void 0,!1];const a=await(0,l.b)(),s=await a.get("prefetchedSessions",e);return[null==s?void 0:s.session,null==s?void 0:s.prefetchTimestamp,null==s?void 0:s.stale]},v=({generatorIdsOfRecentMistakes:e,includeSmartTips:t,isExplanationSeen:a,pathLevel:s})=>JSON.stringify({generatorIdsOfRecentMistakes:e,includeSmartTips:t,isExplanationSeen:a,pathLevelFinishedSessions:s.finishedSessions,pathLevelId:s.id,pathLevelState:s.state}),f=e=>"active"===e.state&&(0,o.gB)(e.type,["practice","skill","story","unit_review"]),b=async e=>{const t=await(0,l.b)(),a=await t.get("prefetchedSessions",e);a&&await t.put("prefetchedSessions",Object.assign(Object.assign({},a),{stale:!0}),e)},S=e=>{const{generatorIdsOfRecentMistakes:t,includeSmartTips:a,isExplanationSeen:s,pathLevelFinishedSessions:n,pathLevelId:r,pathLevelState:i}=JSON.parse(e);return{generatorIdsOfRecentMistakes:t,includeSmartTips:a,isExplanationSeen:s,pathLevel:{finishedSessions:n,id:r,state:i}}},y=async e=>{const t=e.dispatch.bind(e),a=e.getState().sessionCache.keys,n=await(0,l.b)(),r=await n.getAllKeys("prefetchedSessions");(0,s.dC)((()=>{const e=r.filter((e=>!a.includes(e)));for(const a of e)t({key:a,type:"sessionCache/ADD"});const s=a.filter((e=>!r.includes(e)));for(const e of s)t({key:e,type:"sessionCache/REMOVE"})}))}},53146:(e,t,a)=>{"use strict";a.d(t,{l:()=>d,r:()=>c});var s=a(80254),n=a(43464),r=a(63301),i=a(68903),o=a(79465);const l=["sessionComplete","finalLevelPartialXp","dailyQuestComplete","dailyQuestReward","streakExtended","placementTestResult","checkpointComplete","levelUp","finalLevelLesson","mistakesInboxEmpty","finalLevelFailed"],c=async(e,{isZombieMode:t,useOnboardingBackend:a})=>{const i=e.map((e=>e.type));return(await(async()=>{var e,o;if(!t)try{return(null!==(o=null===(e=await n.zi.getSessionEndMessages(i,a))||void 0===e?void 0:e.sessionEndMessageDisplayInfo)&&void 0!==o?o:[]).map((e=>s.ZP.keys(e.sessionEndMessageId)[0]))}catch(e){if((0,r.Au)())return[]}return l.filter((e=>i.includes(e)))})()).flatMap((t=>e.filter((e=>e.type===t))))},d=e=>{var t,a;const s=null!==(t=(e=>{switch(e.slide.type){case"achievementUnlocked":return"achievement_level_up";case"courseCompletionTrophy":return"course_completion_trophy";case"dailyQuestComplete":return"daily_quest_complete";case"dailyQuestFirst":return"daily_quest_first";case"dailyQuestHalfway":return"daily_quest_halfway";case"dailyQuestReward":return"daily_quest_reward";case"dailyRefreshOnboarding":return"daily_refresh_onboarding";case"finalLevelFailed":return"final_level_failed";case"finalLevelLesson":return"final_level_session";case"finalLevelPartialXp":return"final_level_partial_xp";case"finalLevelPromotion":return"final_level_promotion";case"friendsQuestComplete":return"friends_quest_complete";case"friendsQuestGift":return"friends_quest_gifting";case"friendsQuestProgress":return"friends_quest_progress";case"friendsQuestReward":return"friends_quest_rewards";case"immersivePlus":return"immersive_plus_welcome";case"leaderboardDemoZone":return"leaderboard_demo_zone";case"leaderboardJoin":return"leaderboard_join";case"leaderboardMoveUpPrompt":return"leaderboard_move_up_prompt";case"leaderboardPromoZone":return"leaderboard_promo_zone";case"leaderboardRankIncreaseLarge":return"leaderboard_rank_increase_large";case"leaderboardRankIncreaseSmall":return"leaderboard_rank_increase_small";case"leaderboardTopThree":return"leaderboard_top_three";case"levelUp":return"skill_level_upgrade";case"levelUpChest":return"capstone_xp_boost_reward";case"chestLingotsReward":return"chest_lingots_reward";case"milestoneStreakFreeze":return"milestone_streak_freeze";case"mistakesInboxEmpty":return"mistakes_inbox_empty";case"monthlyChallengeComplete":return"monthly_challenge_complete";case"monthlyGoal":return"monthly_goal";case"nativeAd":return"juicy_native_ad";case"plusNewYears":return"plus_new_years_promotion_carousel_offer";case"placementTestResult":switch(e.slide.view){case"startFromBasics":return"failed_placement_test";case"testComplete":return"placement_test_pass";default:return void(0,i.RJ)(e.slide)}case"plusPromoCarousel":return"plus_offer_carousel";case"plusPromoInterstitial":return"plus_promo_interstitial";case"podcastAd":return"podcast_ad";case"practiceHubPromo":return"practice_hub_promo";case"schoolsClassroomLeaderboardMoveUp":return"schools_classroom_leaderboard_move_up";case"sessionComplete":return"completion_screen";case"streakExplainer":return"streak_explainer";case"streakExtended":return"one_lesson_streak_progress";case"streakFreezeGift":return"streak_freeze_gift";case"streakFreezeChestReward":return"variable_chest_reward";case"earlyStreakMilestonePrompt":return"new_streak_goal";case"streakWager":return"item_gift";case"createProfile":return"registration_wall";case"checkpointComplete":switch(e.slide.view){case"sectionTestFailed":return"section_test_failed";case"unitReview":return"unit_review";case"unitTestFailed":return"unit_test_failed";case"unitTestPassed":return"unit_test";default:return void(0,i.RJ)(e.slide)}case"heartRefill":return"heart_refilled_vc";case"streakNudge":return"streak_nudge";case"streakSociety":return"streak_society";case"streakSocietyFreezes":return"streak_society_freezes";case"streakSocietyVip":return"streak_society_vip";case"streakSocietyVipUpdate":return"streak_society_vip_update";case"streakSocietyWelcomeChest":return"streak_society_welcome_chest";default:return void(0,i.RJ)(e.slide)}})(e))&&void 0!==t?t:"";(0,o.track)("session_end_screen_shown",Object.assign(Object.assign({},null!==(a=e.tracking)&&void 0!==a?a:{}),{message_name:e.slide.type,session_end_screen_name:s,streak_freeze_gift_reason:"streak_freeze_gift"===s?"new_streak":void 0,time_spent_session_end_screen:e.time.map((([e,t])=>(null!=t?t:e)-e)).reduce(((e,t)=>e+t),0)})),"cta"===e.action?(0,o.track)("session_end_message_cta_clicked",{message_name:e.slide.type,session_end_screen_name:s}):"dismiss"===e.action&&(0,o.track)("session_end_message_dismiss_clicked",{message_name:e.slide.type,session_end_screen_name:s})}},51551:(e,t,a)=>{"use strict";a.d(t,{Fk:()=>d,K:()=>S,N4:()=>m,PR:()=>h,RB:()=>v,SG:()=>c,cy:()=>b,sz:()=>f});var s=a(17135),n=a(63301),r=a(1),i=a(11908),o=a(6661),l=a(97106);const c=2,d=e=>e?200:10,u="web_streak_wager_session_end";var p;!function(e){e[e.SUNDAY=0]="SUNDAY",e[e.MONDAY=1]="MONDAY",e[e.TUESDAY=2]="TUESDAY",e[e.WEDNESDAY=3]="WEDNESDAY",e[e.THURSDAY=4]="THURSDAY",e[e.FRIDAY=5]="FRIDAY",e[e.SATURDAY=6]="SATURDAY"}(p||(p={}));const g=(e,t)=>`duo.experiments.${t}.last_shown_${e}`,m=e=>{((e,t)=>{const a=g(e,t),n=(0,s.Zo)();(0,i.LS)(a,n)})(e,u)},h=(e,t,a)=>{var n,o;const c=(0,r.GQ)(t),d=c?void 0===e.inventory.gem_wager:void 0===e.inventory.rupee_wager,p=c?e.shop.misc.gem_wager:e.shop.misc.rupee_wager,m=c?t.gemsConfig.gems:t.lingots,h=!!p&&p.price<=m,{timezoneOffset:_,xpGains:v,xpGoal:f}=t,b=(0,l.ab)(_,v)+a>=f,S=((e,t)=>{const a=g(e,t),n=(0,i.rV)(a);return"number"==typeof n&&(0,s.zk)((0,s.zM)(n))})(t.id,u);return(null!==(o=null===(n=t.streakData.currentStreak)||void 0===n?void 0:n.length)&&void 0!==o?o:0)<7&&d&&!!p&&h&&b&&!S},_=(e,t=1)=>{const a=e.shop.misc.streak_freeze,s=a?e.inventory[a.id]:void 0;return!!s&&s.quantity>=t},v=(e,t,a=!1)=>{var s,r;return!_(e,c)&&(!!(0,n.gQ)("dailyGoalStreakFreeze")||(null!==(r=null===(s=t.streakData.currentStreak)||void 0===s?void 0:s.length)&&void 0!==r?r:0)>=2&&(a||Math.random()<.75))},f=(e,t)=>!_(e)&&1===t,b=e=>e.shop.misc.final_level_attempt,S=(e,t)=>{var a,s,n;if(!(0,o.pS)(e)||!(null===(a=t.shop.misc.streak_freeze)||void 0===a?void 0:a.id)||_(t,c))return 0;const r=c-(null!==(n=null===(s=t.inventory.streak_freeze)||void 0===s?void 0:s.quantity)&&void 0!==n?n:0);return Math.max(r,0)}},6986:(e,t,a)=>{"use strict";a.d(t,{MG:()=>d,gT:()=>c,oV:()=>o,ub:()=>i,yI:()=>u});var s=a(43464),n=a(8654),r=a(11908);const i=()=>(0,r.cl)(r.Qt.LastLogin),o=(e,t)=>{const a=l(e,t);(0,r.LS)(r.Qt.LastLogin,a)},l=(e,t)=>t.email?{email:t.email,hasFacebook:"social"===e?!!t.facebookId:void 0,hasGoogle:"social"===e?!!t.googleId:void 0,name:"email"===e&&t.email?t.email:t.name,picture:t.picture,type:e}:null,c=async e=>{var t,a;const n=await s.Vi.userSearchByEmail(e),r=n&&n.length>0?n[0]:null;return r?{hasFacebook:!!r.hasFacebookId,hasGoogle:!!r.hasGoogleId,name:null!==(a=null!==(t=r.name)&&void 0!==t?t:r.username)&&void 0!==a?a:"",picture:r.picture}:null},d=()=>(0,r.rV)(r.Qt.LastLogin),u=(e,t,a)=>a&&!t&&(0,n.k_)(e)},59096:(e,t,a)=>{"use strict";a.d(t,{C8:()=>v,P9:()=>f,RZ:()=>w,U:()=>g,b0:()=>_,cz:()=>S,fH:()=>p,pT:()=>y,qj:()=>b,r8:()=>h,u5:()=>k});var s=a(80254),n=a(43464),r=a(83719),i=a(17135),o=a(68903),l=a(30004),c=a(51158),d=a(79465),u=a(11811);const p=2,g=86400,m=[u.Sm.CompleteReverseTranslation,u.Sm.Form,u.Sm.GapFill,u.Sm.Translate],h=e=>y(e.identifier,e.trigger.smart_tip.variables),_=e=>((0,l.Lw)([...e.smartTips].map((e=>({queryFn:async()=>{try{return await n.s3.getSmartTip(e.url)}catch(t){throw console.warn(`Failed to download Smart Tip ${e.smartTipId}.`),t}},queryKey:["smartTip",e],staleTime:108e5})))),null),v=(e,t,a,n,o,p)=>{const{session:{type:g},sessionParams:{levelIndex:_,skillId:v},shownSmartTipIds:f}=n;if(!m.includes(t.type))return;if(!a||0===a.length)return;if(e&&[r.Oj.MissingWord,r.Oj.WrongWord].includes(e))return void(0,d.track)("smart_tips_rules_fired",{blame:e,challenge_type:t.type,did_match_any_rule:!1,fired_rules:"[]",has_content:!0,number_of_matched_rules:0,probably_tap:t.type===u.Sm.Translate&&t.choices.length>0,type:g});const b=a,S=b.map((e=>{const t=(a=e.smart_tip.id,(0,l.wQ)(["smartTip"],{exact:!1,predicate:({queryKey:e})=>e[1].smartTipId===a}));var a;if(t)return Object.assign(Object.assign({},t),{correctSolution:y(t.correctSolution,e.smart_tip.variables),trigger:e});(0,d.track)("smart_tip_failure",{reason:"no_content_was_fetched",rule_id:e.smart_tip.id})})).filter((e=>void 0!==e)).filter((e=>E(e)));if((0,d.track)("smart_tips_rules_fired",{blame:e,challenge_type:t.type,did_match_any_rule:b.length>0,fired_rules:JSON.stringify(b.map((e=>e.smart_tip.id))),has_content:S.length>0,number_of_matched_rules:b.length,probably_tap:t.type===u.Sm.Translate&&t.choices.length>0,type:g}),0===S.length||f.length>3||void 0===_||void 0===v)return;const I=o[v].row,k=S.filter((e=>!f.includes(e.identifier))).filter((e=>{var t,a;return e.policy.allowedSkillLevels.includes(_)&&I>=(null!==(t=e.policy.earliestRow)&&void 0!==t?t:0)&&I<=(null!==(a=e.policy.latestRow)&&void 0!==a?a:Number.MAX_VALUE)})).filter((e=>{var t;const a=h(e);return!(null===(t=p.recentlySeenSmartTips)||void 0===t?void 0:t[a])||p.recentlySeenSmartTips[a]>(0,i.Zo)()}));if(0===k.length)return;const w=k[0],T=w.elements.filter((e=>"challenge"===e.type));if(1!==T.length)return void(0,c.vU)("Smart Tip doesn't have exactly one challenge.",{data:{smartTipId:w.identifier}});const C=T[0].element.options.map((e=>y(e.text,w.trigger.smart_tip.variables)));if(2===C.length)if(C.length===s.jj(C).length){if(w)return(0,d.track)("smart_tip_will_show",{blame:e,challenge_type:t.type,for_rule_with_id:w.identifier,level_index:_,method:"graph_based",num_tips_shown_so_far:f.length,probably_tap:t.type===u.Sm.Translate&&t.choices.length>0,smart_tip_id:w.identifier,smart_tip_name:w.name,tree_level:v?o[v].row:void 0,type:g}),w}else(0,c.vU)("Smart Tip challenge options are not unique.",{data:{challengeId:t.id,smartTipId:w.identifier}});else(0,c.vU)("Smart Tip challenge has incorrect number of options.",{data:{numOptions:C.length,smartTipId:w.identifier}})},f=e=>{const t=e.elements.filter((e=>"challenge"===e.type));if(1!==t.length)return(0,c.vU)("Smart Tip that doesn't have exactly one challenge",{data:{smartTipId:e.identifier}}),0;const a=t[0].element.options.findIndex((e=>e.isCorrect));return-1===a?((0,c.vU)("Smart Tip that doesn't have a correct answer",{data:{smartTipId:e.identifier}}),0):a},b=new RegExp("({{ .*? }})","g"),S=e=>`{{ ${e.name} }}`,y=(e,t)=>{if(void 0===t)return e;let a=e;return t.forEach((e=>{a=a.replace(new RegExp(S(e),"g"),e.value)})),a},E=e=>{const t=e.trigger.smart_tip.variables.map((e=>S(e))),a=[e.correctSolution,...e.elements.map((e=>I(e))).flat()].every((e=>{var a;return(null!==(a=e.match(b))&&void 0!==a?a:[]).every((e=>t.includes(e)))}));return a||(0,d.track)("smart_tip_failure",{reason:"template_filling_failed",rule_id:e.identifier}),a},I=e=>{const t=e=>{var t;return[e.text.styledString.text,...e.subtext?[null===(t=e.subtext)||void 0===t?void 0:t.styledString.text]:[]]};switch(e.type){case"audioSample":return[e.element.sampleText.text,e.element.description.styledString.text];case"captionedImage":return[e.element.text.styledString.text];case"challenge":return e.element.options.map((e=>e.text));case"dialogue":return e.element.phrases.flatMap((e=>t(e)));case"example":return t(e.element);case"exampleCaptionedImage":return e.element.examples.map(t).flat();case"expandable":return e.element.elements.map(I).flat();case"pathSectionsCefrTable":case"lineBreak":case"verticalSpace":return[];case"table":return e.element.cells.map((e=>e.map((e=>e.styledString.text)))).flat();case"text":return[e.element.styledString.text];default:throw(0,o.RJ)(e),Error(`Unexpected explanation item type "${e.type}"`)}},k=(e,t)=>{var a,s;return null===(s=null===(a=e.options.find((({},e)=>t===e)))||void 0===a?void 0:a.smartTips)||void 0===s?void 0:s.map((e=>({smart_tip:e})))},w=(e,t)=>{switch(e){case u.FF.LexemeSkillLevelPractice:return!0;case u.FF.GlobalPractice:case u.FF.Lesson:case u.FF.LexemePractice:case u.FF.MistakesReview:case u.FF.UnitReview:return!t.isFinalLevel;case u.FF.AlphabetLesson:case u.FF.DuoRadio:case u.FF.LevelReview:case u.FF.Legendary:case u.FF.LegendaryLevel:case u.FF.LegendaryLexemePractice:case u.FF.LegendaryUnitPractice:case u.FF.ListeningPractice:case u.FF.PlacementTest:case u.FF.SectionTest:case u.FF.SpeakingPractice:case u.FF.SpecifiedMatchPractice:case u.FF.TargetPractice:case u.FF.UnitPractice:case u.FF.UnitTest:case u.FF.UnitRewind:return!1;default:return(0,o.RJ)(e),void(0,c.vU)("Received invalid session type",{data:e})}}},419:(e,t,a)=>{"use strict";a.d(t,{Q:()=>s});const s=e=>{const t={link:"https://www.facebook.com/duolingo"},a={link:"https://www.instagram.com/duolingo"},s={link:"https://www.tiktok.com/@duolingo"},n={link:"https://twitter.com/duolingo"};switch(e){case"de":return{facebook:{link:"https://www.facebook.com/DuolingoDeutschland"},instagram:{link:"https://www.instagram.com/duolingodeutschland/"},tiktok:s,twitter:n};case"es":return{facebook:{link:"https://www.facebook.com/duolingoespanol"},instagram:{link:"https://www.instagram.com/duolingoespanol/"},tiktok:s,twitter:{link:"https://twitter.com/duolingoespanol"}};case"fr":return{facebook:{link:"https://www.facebook.com/duolingofrance"},instagram:{link:"https://www.instagram.com/duolingofrance"},tiktok:s,twitter:{link:"https://twitter.com/duolingofrance"}};case"hi":return{facebook:{link:"https://www.facebook.com/Duolingo-India-108456034999544"},instagram:{link:"https://www.instagram.com/duolingo_india/"},tiktok:s,twitter:{link:"https://twitter.com/duolingoindia"}};case"ja":return{facebook:t,instagram:a,tiktok:s,twitter:{link:"https://twitter.com/Duolingo_Japan"}};case"pt":return{facebook:{link:"https://www.facebook.com/duolingobrasil"},instagram:{link:"https://www.instagram.com/duolingobrasil"},tiktok:{link:"https://www.tiktok.com/@duolingobrasil"},twitter:{link:"https://twitter.com/duolingobrasil"}};default:return{facebook:t,instagram:a,tiktok:s,twitter:n}}}},68564:(e,t,a)=>{"use strict";a.d(t,{c:()=>n});var s=a(74597);const n=!!window.webkitSpeechRecognition&&(s.Z.chrome||s.Z.edge)},11908:(e,t,a)=>{"use strict";a.d(t,{LS:()=>u,No:()=>c,Qt:()=>s,cl:()=>d,rV:()=>o});var s,n=a(51158);!function(e){e.REDUX_AgeRestrictedLeaderboardsIntro="duo.ageRestrictedLeaderboards",e.REDUX_DailyQuests="duo.dailyQuests",e.REDUX_DarkMode="duo.darkMode",e.REDUX_FriendsQuestNextStart="duo.friendsQuestNextStart",e.REDUX_LastSeenMonthlyChallengeId="duo.lastSeenMonthlyChallengeId",e.REDUX_StreakSocietyInduction="duo.streakSocietyInduction",e.BrowserSessionDebugFlags="duo.sessionDebugFlags",e.DebugExperimentOverrides="duo.experimentOverrides",e.DebugFlags="duo.persistentDebugFlags",e.DisableBigRedButton="duo.disableBrb",e.GradingConfig="duo.clientSideGradingConfig",e.GradingConfigTimestamp="duo.clientSideGradingConfig.timestamp",e.InviteCode="duo.inviteCode",e.LanguageTokens="duo.languageTokens",e.LastAppCrashes="duo.lastAppCrashes",e.LastLogin="duo.lastLogin",e.LoggedOutExperiments="duo.loggedOutExperiments",e.RollbarThrottling="duo.rollbarThrottling",e.State="duo.state"}(s||(s={}));const r=(()=>{const e=new Map;return{clear:()=>e.clear(),getItem:t=>{var a;return null!==(a=e.get(t))&&void 0!==a?a:null},key:t=>Array.from(e.keys())[t],get length(){return e.size},removeItem:t=>e.delete(t),setItem:(t,a)=>e.set(t,a)}})();let i=!1;const o=(e,t)=>{try{const a=l(t).getItem(e);return a?JSON.parse(a):void 0}catch(e){return}},l=e=>(null==e?void 0:e.useSessionStorage)?sessionStorage:localStorage||(i||((0,n.um)("localStorage unavailable. Falling back to memoryStorage."),i=!0),r),c=(e,t)=>{try{return e in l(t)}catch(e){return!1}},d=(e,t)=>{try{l(t).removeItem(e)}catch(e){}},u=(e,t,a)=>{const s=JSON.stringify(t);try{l(a).setItem(e,s)}catch(t){let a;try{a=localStorage["duo.state"].length}catch(e){a="error accessing localStorage"}(0,n.Kp)("Failed to set localStorage item",{data:{localStorageKey:e,localStorageSize:a,message:t.message,newItemSize:s.length},once:!0,sample:.001})}}},18804:(e,t,a)=>{"use strict";a.d(t,{A5:()=>v,CC:()=>I,Fx:()=>E,Gl:()=>_,qg:()=>f,tX:()=>y,xC:()=>k});var s=a(80715),n=a(45106),r=a(35870),i=a(99369),o=a(80254),l=a(9990),c=a(42659),d=a(17135),u=a(63301),p=a(39852),g=a(51158),m=a(11908);const h=["achievementsV3","brb","browserSettings","charactersPersisted","config","courseHistories","courses","friends","goals","items","leaderboards","notifications","paymentMethods","sessionCache","skills","student","subscriptions","uiPersisted","user","heartsState","yearInReview"],_=()=>(0,i.from)({}),v=e=>null==b?void 0:b.dispatch(e),f=()=>null==b?void 0:b.getState();let b;const S=(e,t,a,s=((e,t)=>e===t))=>{let n;const r=()=>{const r=t(e.getState());s(n,r)||a(r),n=r},i=e.subscribe(r);return r(),i},y=()=>(0,s.I0)(),E=(0,s.gR)(),I=(0,s.fw)(),k=({persister:e,rootReducer:t})=>{var a;const s=(0,u.Au)()&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||n.qC,i=(0,n.MT)(t,e.get(),s((0,n.md)(r.Z,(e=>t=>a=>{const s=e.getState(),n=(0,d.Ux)();let r,i;try{r=t(a)}catch(e){i=e}if((0,p.ar)(s,a,e.getState(),{duration:(0,d.Ux)().getTime()-n.getTime(),timestamp:n}),i)throw i;return r})))),_=(0,c.np)(i.getState()),v=(0,c.dY)(i.getState());return void 0!==v&&(i.dispatch((0,l.AO)(v)),i.dispatch((0,l.S8)(v,null===(a=_.streakData.currentStreak)||void 0===a?void 0:a.length)),i.dispatch((0,l.LQ)(v))),S(i,(e=>o.ei(e,h)),(t=>e.set((()=>t))),((e,t)=>void 0!==e&&o.BD(e,t))),S(i,c.df,(e=>g.yB(e))),S(i,c.np,(e=>g.av(e))),S(i,(e=>[(0,c.dY)(e),e.browserSettings.darkMode]),(([e,t])=>{e&&(0,m.LS)(m.Qt.REDUX_DarkMode,Object.assign(Object.assign({},(0,m.rV)(m.Qt.REDUX_DarkMode)),{[e]:t}))}),o.Xy),S(i,(e=>[(0,c.dY)(e),e.ui.inductedIntoStreakSociety]),(([e,t])=>{e&&(0,m.LS)(m.Qt.REDUX_StreakSocietyInduction,Object.assign(Object.assign({},(0,m.rV)(m.Qt.REDUX_StreakSocietyInduction)),{[e]:t}))}),o.Xy),S(i,(e=>[(0,c.dY)(e),e.goals.lastSeenMonthlyChallengeId]),(([e,t])=>{e&&t&&(0,m.LS)(m.Qt.REDUX_LastSeenMonthlyChallengeId,Object.assign(Object.assign({},(0,m.rV)(m.Qt.REDUX_LastSeenMonthlyChallengeId)),{[e]:t}))}),o.Xy),S(i,(e=>[(0,c.dY)(e),e.ui.canShowAgeRestrictedLeaderboardsIntro]),(([e,t])=>{e&&(0,m.LS)(m.Qt.REDUX_AgeRestrictedLeaderboardsIntro,Object.assign(Object.assign({},(0,m.rV)(m.Qt.REDUX_AgeRestrictedLeaderboardsIntro)),{[e]:t}))}),o.Xy),S(i,(e=>[(0,c.dY)(e),e.goals.lastSeenNextFriendsQuestStart]),(([e,t])=>{e&&0!==t&&(0,m.LS)(m.Qt.REDUX_FriendsQuestNextStart,Object.assign(Object.assign({},(0,m.rV)(m.Qt.REDUX_FriendsQuestNextStart)),{[e]:t}))}),o.Xy),S(i,(e=>[(0,c.dY)(e),{coreQuest:e.goals.coreQuest,dailyQuest:e.goals.dailyQuest,hardQuest:e.goals.hardQuest,lastUpdated:e.goals.lastUpdated}]),(([e,{coreQuest:t,dailyQuest:a,hardQuest:s,lastUpdated:n}])=>{[t,a,s,n,e].some((e=>void 0===e))||(0,m.LS)(m.Qt.REDUX_DailyQuests,Object.assign(Object.assign({},(0,m.rV)(m.Qt.REDUX_DailyQuests)),{[e]:{coreQuest:t,dailyQuest:a,hardQuest:s,lastUpdated:n}}))}),o.Xy),b=i,i}},8718:(e,t,a)=>{"use strict";a.d(t,{Au:()=>S,BT:()=>T,Bc:()=>L,C7:()=>w,E$:()=>D,HD:()=>h,IG:()=>C,JW:()=>v,P3:()=>d,UZ:()=>O,WF:()=>f,Xq:()=>R,YL:()=>m,_L:()=>u,aJ:()=>k,dM:()=>A,e:()=>E,f1:()=>b,sB:()=>_,yy:()=>I,z$:()=>p,z_:()=>y});var s=a(80254),n=a(63301),r=a(68903),i=a(93746),o=a(51158);const l=["ARRANGE","SELECT_PHRASE","TYPE_TEXT","SUBHEADING","HINT_ONBOARDING"],c=["ARRANGE","FREEFORM_WRITING","MATCH","MULTIPLE_CHOICE","POINT_TO_PHRASE","SELECT_PHRASE","TYPE_TEXT"],d=e=>void 0!==e&&c.includes(e.type),u=e=>{if(!d(e))return!1;switch(e.type){case"ARRANGE":case"POINT_TO_PHRASE":case"SELECT_PHRASE":case"TYPE_TEXT":return!0;case"MULTIPLE_CHOICE":return!e.question;case"MATCH":case"FREEFORM_WRITING":return!1;default:return(0,r.RJ)(e),!1}},p=e=>void 0!==e&&l.includes(e.type)||(e=>"MULTIPLE_CHOICE"===(null==e?void 0:e.type)&&void 0===e.question)(e),g=["POINT_TO_PHRASE","MULTIPLE_CHOICE","FREEFORM_WRITING"],m=e=>void 0!==e&&g.includes(e.type),h=e=>{var t,a;let r=1;if(!e.storyElements)return r;const i=null===(t=e.storyElements)||void 0===t?void 0:t.filter((e=>"LINE"===e.type)).length,o=(0,n.gQ)("debugSkipToStoryLine")?parseInt(null!==(a=(0,n.ky)("debugSkipToStoryLine"))&&void 0!==a?a:"",10):void 0;return void 0!==o?o>=1&&o<=i?r=o:console.error(`Cannot skip to lineIndex ${o} because it's out of bounds.`):(0,n.gQ)("debugSkipToLastStoryLine")&&(r=i),((e,t)=>{let a=0;return s.cx(t,(t=>["LINE","HEADER"].includes(t.type)&&++a===e))})(r,e.storyElements)},_=(e,t)=>{var a,n;const r=e.text,i=e.hints,o=s.MR(e.hintMap,(e=>e.rangeFrom)).filter((e=>!t||t.every((t=>e.rangeTo<t.start||e.rangeFrom>t.end)))),l=[];let c=0,d=0;for(;c<r.length;){let e;o[d]&&c>=o[d].rangeFrom?(e=Math.min(o[d].rangeTo,r.length-1),l.push({hint:i[o[d].hintIndex],rangeFrom:c,rangeTo:e,text:r.slice(c,e+1)}),d++):(e=(null!==(n=null===(a=o[d])||void 0===a?void 0:a.rangeFrom)&&void 0!==n?n:r.length)-1,l.push({rangeFrom:c,rangeTo:e,text:r.slice(c,e+1)})),c=e+1}return l},v=e=>((0,n.gQ)("debugSlides")||(e.some((e=>"streakFreezeChestReward"===e.type))&&(e=e.filter((e=>"chestLingotsReward"!==e.type))),e.some((e=>"streakSocietyFreezes"===e.type))&&(e=e.filter((e=>"milestoneStreakFreeze"!==e.type)))),e),f=e=>e.flatMap((e=>"attachedSlides"in e?[e,...e.attachedSlides]:[e])),b=(e,t)=>{if(e.length>0)for(let a=0;a<e.length;a++)if((null==t?void 0:t[a].type)!==e[a].type)return(0,o.Kp)("Expected attached slides to follow main slide, but found a mismatch",{data:{expected:e[a],found:null==t?void 0:t[a]}}),!1;return!0},S=e=>({keypoints:[{audioStart:0,rangeEnd:e.content.text.length}],url:e.ttsURL}),y=e=>{switch(e.type){case"HEADER":return e.learningLanguageTitleContent;case"LINE":return e.line.content;case"FREEFORM_WRITING_EXAMPLE_RESPONSE":return Object.assign(Object.assign({},e.content),{audio:S(e)});default:return}},E=e=>e?"custom":"generic",I=(e,t)=>{const a=e.elementIndex-t;return a>0?{elementIndex:t+1}:a<0?{elementIndex:t-1}:e},k=(e,t)=>{var a,s;if(e){const n=e.filter((e=>"MATCH"===e.type))[0];if("MATCH"===(null==n?void 0:n.type)){const e=null===(a=n.matches)||void 0===a?void 0:a.map((e=>e.phrase)).filter((e=>t.toLowerCase().includes(e.toLowerCase())));return null!==(s=null==e?void 0:e.length)&&void 0!==s?s:0}}return 0},w=e=>{if(e){const t=e.filter((e=>"FREEFORM_WRITING"===e.type))[0];if("FREEFORM_WRITING"===(null==t?void 0:t.type))return{custom_prompt_option:t.customPromptOption,custom_prompt_type:t.customPromptType,generic_prompt_type:t.genericPromptType,has_freeform_writing_examples:t.hasExamples,prompt_type:E(t.customPrompt)}}return[]},T=(e,t)=>t.findIndex((t=>"LINE"===t.type&&C(t)===e+1)),C=e=>{if("LINE"===e.type)return e.trackingProperties.line_index;throw Error(`Tried to get line index for ${e.type} element`)},R=(e,t,a,s)=>{const n=[e,...null!=s?s:[]],r=[t,...a];return n.includes(t)&&n.every((e=>r.includes(e)))},L=e=>{const t=[];let a=null;for(const s of e){if("CHALLENGE_PROMPT"===(null==a?void 0:a.type)&&"LINE"===s.type&&s.line.content.imageUrl){const e={imageUrl:s.line.content.imageUrl,trackingProperties:s.trackingProperties,type:"ILLUSTRATION"};t.splice(t.length-1,0,e);const a=Object.assign({},s);a.line.content.imageUrl=void 0,t.push(a)}else t.push(s);a=s}return t},O=e=>e.maxScore-e.score,P=e=>{if(0===e.length)return!1;return e.split("").some((e=>e.charCodeAt(0)>=1536&&e.charCodeAt(0)<=1791))},A=(e,t,a)=>{var s,n,r,o,l;if(!e||!t||!a)return!1;switch(null==e?void 0:e.type){case"type-text":case"freeform-writing":return P(e.answer);case"multiple-choice":return P(null!==(n=null===(s=e.answers[0])||void 0===s?void 0:s.text)&&void 0!==n?n:"");case"select-phrases":return P(null!==(r=e.answers[0])&&void 0!==r?r:"");case"point-to-phrase":return P(null!==(l=null===(o=e.parts[0])||void 0===o?void 0:o.text)&&void 0!==l?l:"");case"match":return"rtl"===(0,i.Ux)(a);default:return"rtl"===(0,i.Ux)(t)}},D=e=>{const t=x(e);return t.filter((e=>P(e))).length/t.length>.5},x=e=>e.map((e=>e.text)).join(" ").replace(/[\p{P}\p{S}]/gu,"").split(" ").filter((e=>e.trim().length>0))},77042:(e,t,a)=>{"use strict";a.d(t,{EU:()=>i,FG:()=>r,xL:()=>n});var s=a(97236);const n=(e,t)=>{const a=Date.now(),n=e,r=a;for(const e of n){if(a!==r)return;const n={};for(const i of e.audioInfos){const o=()=>{n[i.url]=!0,e.audioInfos.every((({url:e})=>n[e]))&&a===r&&t(e.elementIndex)};(async()=>{try{await(0,s.IZ)(i.url)}catch(e){throw(0,s.N$)(i),e}o()})()}if(a!==r)return}},r=e=>{e.forEach((e=>{if("LINE"===e.type){const t=e.line.content;(0,s.Ms)(t.audio.url),t.audioPrefix&&(0,s.Ms)(t.audioPrefix.url),t.audioSuffix&&(0,s.Ms)(t.audioSuffix.url)}}))},i=e=>t=>({audioSyncModel:e.audioSyncModel,duration:e.duration,fadeDown:e.fadeDown,instructionId:t.instructionId+1,playState:e.playState,seekTo:e.seekTo,speed:e.speed})},18513:(e,t,a)=>{"use strict";a.d(t,{Ag:()=>C,Bv:()=>O,FE:()=>S,M6:()=>u,Om:()=>w,PH:()=>b,Q5:()=>y,S5:()=>E,WF:()=>L,a3:()=>I,pg:()=>T,tE:()=>R,v5:()=>p,vX:()=>k});var s=a(99369),n=a(80254),r=a(83719),i=a(68903),o=a(8654),l=a(51158),c=a(8718),d=a(79465);const u=(e,t)=>{(0,d.track)("stories_challenge_start",Object.assign(Object.assign({},e.trackingProperties),t.trackingProperties))},p=e=>{var t,a;return(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{timeline:[...null!==(a=null===(t=e.storySession)||void 0===t?void 0:t.timeline)&&void 0!==a?a:[],{time:Date.now()/1e3,type:"challenge-start"}]})})},g=e=>e.replace(/\([^()]*\)\s*/g,"").trim(),m=e=>g(e).toLowerCase(),h=e=>/^\d+$/.test(e),_=e=>e?13:19,v=(e,t,a)=>(t=n.XP(t).reduce(((e,t)=>(e[m(t)]=!0,e)),{}),e.map((e=>Object.assign(Object.assign({},e),{translation:g(e.translation)}))).filter((e=>{const s=_(a);if(e.phrase.length>s||e.translation.length>s)return!1;const n=m(e.phrase),r=m(e.translation);return!(h(n)||h(r)||t[n]||t[r]||(t[n]=!0,t[r]=!0,0))}))),f=(e,t)=>{if("POINT_TO_PHRASE"!==e.type)return-1;let a=-1;return n.cx(e.transcriptParts,(e=>(e.selectable&&a++,a===t)))},b=(e,t)=>{var a,s;const n=null===(a=e.storySession)||void 0===a?void 0:a.hintsUsed;if("POINT_TO_PHRASE"!==(null==t?void 0:t.type)||!n||0===n.length)return!1;const r=null===(s=t.transcriptParts[f(t,t.correctAnswerIndex)])||void 0===s?void 0:s.text;return!r||n.some((e=>e.phrase===r))},S=(e,t,a,s,r,i)=>{const o={completed:!1,elementIndex:t,mistakeCount:0,trackingProperties:e.trackingProperties};return(()=>{var t,l;switch(e.type){case"ARRANGE":return Object.assign(Object.assign({},o),{arrangedPhrases:0,phraseOrder:e.phraseOrder,selectedIncorrectIndices:[],shuffledPhrases:e.selectablePhrases,type:"arrange"});case"MATCH":{const l=5;let c=[];const d=_(s),u=null===(t=e.matches)||void 0===t?void 0:t.filter((e=>e.phrase.length<=d&&e.translation.length<=d));if(u&&u.length>=l)c=n.TV([...u]).slice(0,l);else{c=n.TV(v([...a],{},s)).slice(0,l);const t=[...e.fallbackHints];if(c.length<l){const e={};c.forEach((t=>{e[t.phrase]=!0,e[t.translation]=!0}));const a=n.TV(v(t,e,s)).slice(0,l-c.length);c=[...c,...a]}}const p={},g=[];return c.forEach((e=>{p[`from:${e.phrase}`]=e.translation,p[`from:${e.translation}`]=e.phrase,g.push({language:i,status:"initial",text:e.phrase}),g.push({language:r,status:"initial",text:e.translation})})),Object.assign(Object.assign({},o),{dictionary:p,tokens:n.TV(g),type:"match"})}case"MULTIPLE_CHOICE":return Object.assign(Object.assign({},o),{additionalCorrectAnswerIndices:e.additionalCorrectAnswerIndices,answers:e.answers,correctAnswerIndex:e.correctAnswerIndex,question:e.question,selectedIndices:[],type:"multiple-choice"});case"POINT_TO_PHRASE":{let t=0;const a=e.transcriptParts.map((e=>(t+=e.text.length,Object.assign(Object.assign({},e),{rangeTo:t})))),s=f(e,e.correctAnswerIndex),n=[];return null===(l=e.additionalCorrectAnswerIndices)||void 0===l||l.forEach((t=>n.push(f(e,t)))),Object.assign(Object.assign({},o),{additionalCorrectAnswerIndices:n,correctAnswerIndex:s,parts:a,question:e.question,selectedIndices:[],type:"point-to-phrase"})}case"SELECT_PHRASE":return Object.assign(Object.assign({},o),{answers:e.answers,correctAnswerIndex:e.correctAnswerIndex,selectedIndices:[],type:"select-phrases"});case"TYPE_TEXT":return Object.assign(Object.assign({},o),{answer:"",grading:e.grading,text:e.text,type:"type-text"});case"FREEFORM_WRITING":return Object.assign(Object.assign({},o),{answer:"",characterMinimum:e.characterCount,customPrompt:e.customPrompt,customPromptType:e.customPromptType,didScroll:!1,genericPromptType:e.genericPromptType,hasExamples:e.hasExamples,numberOfCorrectionsDismissed:0,prompt:e.promptContent.prompt,showPrompt:e.showPrompt,skipped:!1,starterPhrases:e.promptContent.starterPhrases,type:"freeform-writing"});case"LINE":return Object.assign(Object.assign({},o),{skipped:!1,type:"speak"});default:return void console.error("no setup for challenge type: ",e.type)}})()},y=e=>{var t,a,s;if(null===(a=null===(t=e.storySession)||void 0===t?void 0:t.challengeSession)||void 0===a?void 0:a.completed)throw Error("Challenge already completed");if(!(null===(s=e.storySession)||void 0===s?void 0:s.challengeSession))throw Error("No challenge session found when grading challenge");const n=e.storySession.challengeSession;if(null==n?void 0:n.completed)throw Error("Challenge already completed");const r=0!==n.mistakeCount||("speak"===n.type||"freeform-writing"===n.type)&&n.skipped?0:1;let i=e.storySession.speakCount;"speak"===n.type&&i++;const o="freeform-writing"===n.type?{customPromptType:n.customPromptType,freeformChallengePrompt:n.prompt.text,freeformChallengePromptType:(0,c.e)(n.customPrompt),freeformChallengeSubmittedResponse:n.answer,freeformChallengeSumTimeTaken:(Date.now()-n.startTime)/1e3,genericPromptType:n.genericPromptType,hasExamples:n.hasExamples}:{};return Object.assign(Object.assign({},e),{storySession:Object.assign(Object.assign(Object.assign({},e.storySession),o),{challengeSession:Object.assign(Object.assign({},n),{completed:!0}),completedBonusChallenge:"freeform-writing"===n.type||e.storySession.completedBonusChallenge,maxScore:e.storySession.maxScore+1,score:e.storySession.score+r,speakCount:i})})},E=e=>{var t,a,s,n,r,i,o;const l=null===(t=e.storySession)||void 0===t?void 0:t.score;return(0,d.track)("stories_challenge_complete",Object.assign(Object.assign(Object.assign({},e.trackingProperties),null===(s=null===(a=e.storySession)||void 0===a?void 0:a.challengeSession)||void 0===s?void 0:s.trackingProperties),{challenge_type:null===(r=null===(n=e.storySession)||void 0===n?void 0:n.challengeSession)||void 0===r?void 0:r.type,success:!l||!!(null===(i=e.storySession)||void 0===i?void 0:i.score)&&e.storySession.score>l,used_keyboard:null===(o=e.storySession)||void 0===o?void 0:o.usedKeyboardForMatchChallenge})),e},I=e=>{var t;if(e.completed)switch(e.type){case"freeform-writing":return{correct:!0,sticky:!1,title:r.zD};case"arrange":case"match":return{correct:!0,sticky:!1,title:(0,o.H8)((0,r.ub)())};case"multiple-choice":case"point-to-phrase":case"select-phrases":return 0===e.mistakeCount?{correct:!0,sticky:!1,title:(0,o.H8)((0,r.ub)())}:void 0;case"type-text":{const a=e.gradingResult;if(a){let s,n=null!==(t=a.closestSolution)&&void 0!==t?t:e.text,i=a.correct||!1;const l=a.highlights;if(a.blameType)switch(a.blameType){case"accent":s=18634;break;case"missing_word":i=!1,s=8435;break;case"wrong_word":i=!1,s=576;break;case"missing_space":i=!0,s=18757;break;case"extra_space":i=!0,s=4476;break;case"typo":s=4081;break;default:return}else a.correct?(i=!0,s=(0,r.ub)(),n=void 0):(i=!1,s=23926);return{blame:n,blameHighlight:l,correct:i,sticky:!0,title:(0,o.H8)(s)}}return void(0,l.vU)("Missing Stories type challenge grading information")}case"speak":if(e.skipped)return{blame:(0,o.H8)(15747),correct:void 0,skipped:!0,sticky:!1,title:(0,o.H8)(12946)};if(0===e.mistakeCount)return;return{correct:!1,sticky:!1,title:(0,o.H8)(6840)};default:return void(0,i.RJ)(e)}},k=(e,t)=>{var a,n;const r=null===(a=e.storySession)||void 0===a?void 0:a.challengeSession;if("type-text"!==(null==r?void 0:r.type))throw Error("Unexpected type");if(!(null===(n=r.grading)||void 0===n?void 0:n.automaton))throw Error("No grading automaton found for type text challenge");return(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{challengeSession:(0,s.merge)(r,{editDistance:t.highlights&&"accent"!==t.blameType?t.highlights.length:0,gradingResult:t,mistakeCount:t.correct?0:1})})})},w=e=>{var t;const a=null===(t=e.storySession)||void 0===t?void 0:t.challengeSession;if("freeform-writing"!==(null==a?void 0:a.type))throw Error("Unexpected type");return e},T=300,C=60,R=e=>{switch(e){case 50:case 60:return 10;case 70:case 80:case 90:return 15;default:return 20}},L=e=>e.trim().split(/\s+/).filter((e=>""!==e)).length,O=e=>{const t=e.answer,a=L(t),s=e.characterMinimum;return a>=R(s)&&a<=C}},20662:(e,t,a)=>{"use strict";a.d(t,{Bu:()=>i,IN:()=>l,YE:()=>r,gu:()=>o});var s=a(68903),n=a(8718);const r=e=>{switch(e){case"READ":return"normal";case"LISTEN":return"listen";case"CONVERSATION":return"conversation";default:throw(0,s.RJ)(e),Error(`Unexpected line mode "${e}"`)}},i=e=>{switch(e){case"READ":return 0;case"LISTEN":return 1;case"REVIEW":case"CONVERSATION":return 2;default:throw(0,s.RJ)(e),Error(`Unexpected story mode "${e}"`)}},o=({mode:e,listenModeCharacterIds:t,conversationModeSpeakCharacterIds:a,line:s,nextElement:r,lineIndex:i,conversationModeSpeakLineIds:o})=>"READ"===e||"CHARACTER"!==s.type||(0,n._L)(r)?"READ":o.includes(i)&&a.includes(s.characterId)?"SPEAK":(({listenModeCharacterIds:e,line:t,nextElement:a})=>!("CHARACTER"!==t.type||!e.includes(t.characterId)||(0,n._L)(a)))({line:s,listenModeCharacterIds:t,nextElement:r})?"LISTEN":"READ",l=({storyId:e,mode:t,practiceHubStoryType:a})=>{const s=a?`&practiceHubStory=${a}`:"";return`/stories/${e}?mode=${t.toLowerCase()}${s}`}},36571:(e,t,a)=>{"use strict";a.d(t,{Eo:()=>d,b5:()=>o,cG:()=>l,fC:()=>c});var s=a(63301);const n=["FREEFORM_WRITING","FREEFORM_WRITING_EXAMPLE_RESPONSE","FREEFORM_WRITING_PROMPT"],r=["ARRANGE","CHALLENGE_PROMPT","DUO_POPUP",...n,"HEADER","HINT_ONBOARDING","LINE","MATCH","MULTIPLE_CHOICE","POINT_TO_PHRASE","SECTION_HEADER","SELECT_PHRASE","SENDER_RECEIVER","SUBHEADING","TYPE_TEXT"],i=["ILLUSTRATION","SENDER_RECEIVER"],o=()=>(0,s.gQ)("debugSkipStoriesFinalMatchChallenge")?r.filter((e=>"MATCH"!==e)):r,l=e=>void 0!==e&&r.includes(e.type),c=e=>void 0!==e&&i.includes(e.type),d=e=>void 0!==e&&n.includes(e.type)||"DUO_POPUP"===(null==e?void 0:e.type)&&"BONUS_XP"===e.popupType},43094:(e,t,a)=>{"use strict";a.d(t,{D5:()=>u,DG:()=>c,Nh:()=>l,O$:()=>p,SU:()=>g,cw:()=>i,lo:()=>d,tl:()=>o});var s=a(99369),n=a(80254),r=a(8718);const i=(e,t)=>!e&&!t||!(!e||!t)&&e.elementIndex===t.elementIndex&&e.textIndex===t.textIndex,o=(e,t)=>{const a=e=>void 0===e?-1:e;return!(!e||t&&(e.elementIndex<t.elementIndex||!(e.elementIndex>t.elementIndex||a(e.textIndex)>a(t.textIndex))))},l=(e,t)=>o(t,e),c=(e,t)=>{let a=(0,s.merge)(e.storySession,{selectedPosition:t});return a&&o(t,a.furthestPosition)&&(a=(0,s.set)(a,"furthestPosition",t)),(0,s.set)(e,"storySession",a)},d=(e,t,a)=>{for(let s=t;s>=0;s--){if(["LINE","FREEFORM_WRITING_EXAMPLE_RESPONSE"].includes(e[s].type))return s;if("FREEFORM_WRITING"===e[s].type&&a)return s}return 0},u=(e,t)=>t.filter(((t,a)=>"LINE"===t.type&&a<=e)).length-1,p=(e,t)=>n.cx(e.slice(t),r.P3)+t,g=(e,t)=>{var a;const s=e.keypoints.find((e=>e.rangeEnd>=t));return null!==(a=null==s?void 0:s.audioStart)&&void 0!==a?a:e.keypoints.slice(-1)[0].audioStart}},6661:(e,t,a)=>{"use strict";a.d(t,{Yt:()=>C,xv:()=>I,_s:()=>w,kD:()=>$,$t:()=>Q,wW:()=>M,cA:()=>F,lw:()=>L,eU:()=>H,wh:()=>Z,KJ:()=>z,Fd:()=>x,gm:()=>U,Yv:()=>G,NE:()=>j,Po:()=>B,pS:()=>O,dr:()=>V,Iv:()=>N});var s=a(80254),n=a(21778);const r=a.p+"images/streakCalendar/409e32ae79150d9809948154defb09f5.svg",i=a.p+"images/streakCalendar/4e0a0177dbfbbcf30f6a633d825a1460.svg",o=a.p+"images/streakCalendar/fdfafca4c421c6ab3c0c8b10a4ae4ff6.svg",l=a.p+"images/streakCalendar/1a7bd9123609523cb07efd902a0ee2d5.svg",c=a.p+"images/streakCalendar/1137fd970b51b6219b90fce9896e55c9.svg",d=a.p+"images/streakCalendar/fbdc5a60b0f33c7d4beb3af40f2287d5.svg";var u=a(26219),p=a(57127),g=a(34049);const m=a.p+"images/streakCalendar/b708a2274da80a9dbe333a7a0d090aa6.svg";var h=a(17135),_=a(81149),v=a(8654),f=a(93746),b=a(76578),S=a(37111),y=a(97106);const E=[99.7,98.3,97.7,97.2,96.8,96.4,96.2,95.9,95.7,95.5,95.3,95.2,95,94.9,94.8,94.7,94.6,94.6,94.5,94.4,94.3,94.3,94.2,94.2,94.1,94,94,93.9,93.8,93.7,93.6,93.5,93.4,93.2,93,92.8,92.6,92.2,91.8,91.4,90.9,90.3,89.7,89,88.3,87.5,86.6,85.8,84.9,84,83.1,82.2,81.3,80.4,79.6,78.7,77.9,77.1,76.3,75.5,74.8,74,73.2,72.5,71.8,71.1,70.4,69.7,69,68.3,67.7,67,66.4,65.8,65.1,64.5,63.8,63.2,62.5,61.9,61.3,60.7,60.1,59.4,58.8,58.2,57.6,57,56.4,55.8,55.2,54.6,54,53.4,52.8,52.2,51.6,50.9,50.3,49.66,49,48.33,47.66,46.99,46.3,45.6,44.9,44.18,43.45,42.72,41.98,41.22,40.44,39.63,38.8,37.94,37.04,36.11,35.14,34.12,33.08,31.98,30.87,29.74,28.58,27.37,26.14,24.79,23.38,21.92,20.43,18.93,17.4,15.8,13.98,12.11,10.26,8.46,6.78,5.4,4.15,2.99,1.92,.9,0],I=[10,11,12,13],k=[7,14,30,50,75,100,125,150,200,250,300,365];var w;!function(e){e[e.FROZEN=0]="FROZEN",e[e.UNEXTENDED=1]="UNEXTENDED",e[e.STREAK_SOCIETY=2]="STREAK_SOCIETY",e[e.MILESTONE=3]="MILESTONE",e[e.EXTENDED=4]="EXTENDED"}(w||(w={}));const T=e=>{const t=Math.max(1,Math.min(R.length,e))-1,a=R[t];return(0,v.H8)(a.stringId,a.variables)},C=5,R=[{stringId:14029,variables:void 0},{stringId:22012,variables:{days:3}},{stringId:8314,variables:{days:5}},{stringId:22012,variables:{days:5}},{stringId:8314,variables:{days:7}},{stringId:22012,variables:{days:7}},{stringId:13734,variables:void 0}],L=e=>{const t={days:e,streak:e,streak_plus_one:e+1},a={title:(0,v.H8)(17672,t),titleID:"session_end_miltstone_title_lower_no_dash"},n=s.UP([Object.assign(Object.assign({},a),{body:(0,v.H8)(26206),bodyID:"session_end_explain_streak_body_1"}),Object.assign(Object.assign({},a),{body:(0,v.H8)(26205),bodyID:"session_end_explain_streak_body_2"}),Object.assign(Object.assign({},a),{body:(0,v.H8)(26204),bodyID:"session_end_explain_streak_body_3"})]),r=[Object.assign(Object.assign({},a),{body:T(e),bodyID:"session_end_one_day_from_streak"}),Object.assign(Object.assign({},a),{body:T(e),bodyID:"session_end_two_days_from_streak"})][e%2],i=s.UP([Object.assign(Object.assign({},a),{body:(0,v.H8)(20415,t),bodyID:"session_end_streak_body_6"}),Object.assign(Object.assign({},a),{body:(0,v.H8)(21798,t),bodyID:"session_end_streak_body_7"}),Object.assign(Object.assign({},a),{body:(0,v.H8)(296,t),bodyID:"session_end_streak_body_8"}),{body:(0,v.H8)(10404,t),bodyID:"session_end_streak_body_9",title:(0,v.H8)(20343,t),titleID:"session_end_streak_title_2"},{body:(0,v.H8)(19216,t),bodyID:"session_end_streak_body_10",title:(0,v.H8)(23641,t),titleID:"session_end_streak_title_4"}]),o=Object.assign(Object.assign({},a),{body:(0,v.H8)(1916,t),bodyID:"session_end_streak_body_milestone"});return O(e)?o:e<=3?n:e<7?r:i},O=e=>e<=365?k.includes(e):e%100==0,P=[31379,31380,31381,31382,31383,31384,31385],A=[31386,31387,31388,31389,31390,31391,31392],D=[{minutes:180,resetTime:">3hrs"},{minutes:120,resetTime:">2hrs"},{minutes:60,resetTime:">1hrs"},{minutes:45,resetTime:">45min"},{minutes:30,resetTime:">30min"},{minutes:15,resetTime:">15min"},{minutes:-1,resetTime:"<15min"}],x=(e,t,a)=>{const s=(0,h.Ko)(a),n=h.Nf-s,r=Math.floor(n/60),i=D.findIndex((e=>r>e.minutes)),o=D[i].resetTime,l=t?P[i]:A[i];return{body:(0,v._i)(l,{num:e}),resetTime:o}},N=(e,t,a)=>e>0&&!t&&(0,h.L3)(a)<4,F=(e,t,a)=>{const s=(0,v.k8)(),n=(e.getDay()-s+7)%7,r=t.slice(0,n).every(y.Qb);return r&&a?n+1:r?n:0},M=(e,t)=>t?(0,v._i)(30433):6===e?(0,v._i)(30432):3===e?(0,v._i)(30431):(0,v._i)(30430),U=(e,t)=>{const a=(0,v.k8)(),s=(e.getDay()-a+7)%7,n=t.slice(0,s).findIndex((e=>!(0,y.Qb)(e)));return-1!==n&&t.slice(n,s).every((e=>!(0,y.Qb)(e)))},H=e=>{const t={num:e+1},[a,n]=s.UP([[(0,v.H8)(49798,t),"se_streak_nudge_title_1"],[(0,v.H8)(49799,t),"se_streak_nudge_title_2"],[(0,v.H8)(49800,t),"se_streak_nudge_title_3"]]),[r,i]=s.UP([[(0,v.H8)(43653,t),"se_streak_nudge_body_1"],[(0,v.H8)(43654,t),"se_streak_nudge_body_2"],[(0,v.H8)(43655,t),"se_streak_nudge_body_3"]]);return{body:r,bodyID:i,title:a,titleID:n}},j=(e,t,a,s,n)=>!e&&t>=1&&t<=3&&((null!=a?a:0)<3||s!==n)&&"experiment"===(0,_.j6)("gweb_streak_nudge_session_end",void 0),G=(e,t,a)=>1===e&&(null!=t?t:0)<3&&(null!=a?a:0)/1e3<(0,h.RF)({days:30})&&"experiment"===(0,_.j6)("gweb_streak_explainer_session_end",void 0),B=e=>e>=S.jL[0]||e>=S.gt&&"experiment"===(0,_.j6)("gweb_start_ss_earlier",void 0),V=e=>!!e&&(e.frozen||e.repaired)&&!(null==e?void 0:e.streakExtended),z=(e,t,a,s,n)=>{if(n)return n;if(!a){const t=(0,h.$$)(e.getFullYear(),e.getMonth(),e.getDate()-1);return V((0,y.$W)(t,s))?w.FROZEN:w.UNEXTENDED}return t===S.jL[0]&&"control"===(0,_.j6)("gweb_start_ss_earlier",void 0)||t===S.gt&&"experiment"===(0,_.j6)("gweb_start_ss_earlier",void 0)?w.STREAK_SOCIETY:O(t)?w.MILESTONE:w.EXTENDED},Z=({excludeId:e,longestStreakData:t,minutesAfterMidnight:a,numStreakFreezeEquipped:s,panelState:_,showStreakCallout:y,streakExtendedTimes:I,streakLength:T,userTimezoneOffset:C,xpSummariesTwoWeeks:R})=>{var L,P;if(y){const e=h.rE-a;return Math.max(e,0)<=60?{ctaType:"extendStreak",icon:u,message:(0,v._i)(28048,{num:e}),trackingId:1}:{ctaType:"extendStreak",icon:u,message:(0,v._i)(28049,{num:Math.floor(e/60)}),trackingId:1}}if(_===w.STREAK_SOCIETY)return{ctaType:"seeBenefits",icon:m,message:(0,v._i)(34819),trackingId:2};if(S.jL.includes(T))return{icon:m,message:(0,v._i)(43358),trackingId:3};const A=null!==(L=null==t?void 0:t.length)&&void 0!==L?L:0;if(T>A||(null==t?void 0:t.achieveDate)&&(0,h.zk)((0,h.$I)(t.achieveDate)))return{icon:i,message:(0,v._i)(43360),trackingId:4};if(_===w.UNEXTENDED)return T>0?{ctaType:"extendStreak",icon:d,message:(0,v._i)(43361),trackingId:5}:{ctaType:"extendStreak",icon:d,message:(0,v._i)(45579),trackingId:5};if(_===w.FROZEN)return{ctaType:"extendStreak",icon:p,message:(0,v._i)(43362),trackingId:5};if(s<2)return{ctaType:"getStreakFreeze",icon:g,message:(0,v._i)(49512,{num:s}),trackingId:"streak_freeze_available"};if(_===w.MILESTONE)return{icon:c,message:(0,v._i)(43363),trackingId:6};const D=A+1-T;if([3,5,10].includes(D))return{icon:i,message:(0,v._i)(43364,{num:D}),trackingId:8};const x=(0,h.Ux)();x.setDate(x.getDate()+(e=>{var t;return(null!==(t=k.find((t=>t>e)))&&void 0!==t?t:100*(Math.floor(e/100)+1))-e})(T));const N=x.toLocaleString((0,f.M$)(window.duo.uiLanguage),{day:"numeric",month:"long"});if(O(T-1))return{icon:c,message:(0,v._i)(43365,{date:N}),trackingId:9};const F=W(I),M=I.filter((e=>(0,h.zk)((0,h.QB)(e.utcIsoDateString)))),U=W(M)[0],H=F.filter((e=>e<12)).length;if(void 0!==U&&H>1&&U<12&&10!==e)return{icon:l,message:(0,v._i)(43366,{num:H}),trackingId:10};const j=(0,b.J6)(R.map((e=>{var t;return null!==(t=e.gainedXp)&&void 0!==t?t:0}))),G=null===(P=R.find((e=>{const t=e.date-(0,h.Rw)(C)*h.Xx;return(0,h.bC)((0,h.zM)(t),-1)})))||void 0===P?void 0:P.gainedXp;if(j>0&&G&&G>j&&11!==e)return{icon:n,message:(0,v._i)(43367),trackingId:11};const B=W(I.filter((e=>!(0,h.zk)((0,h.QB)(e.utcIsoDateString))))),V=(0,b.J6)(B);if(void 0!==U&&F.length>0&&U<V&&12!==e)return{icon:r,message:(0,v._i)(43368,{num:V-U}),trackingId:12};const z=F.filter((e=>e===U)).length;if(z>1&&13!==e)return{icon:r,message:(0,v._i)(43369,{num:z}),trackingId:13};const Z=q(M)[0];if(void 0!==Z){const e=Z/10,t=E[Math.floor(e)],a=E[Math.ceil(e)],s=Math.round(100*(0,b.t7)(t,a,Z%10/10))/100;return{icon:o,message:(0,v._i)(43370,{percentage:s}),trackingId:14}}return{icon:c,message:(0,v._i)(43365,{date:N}),trackingId:9}},$=(e,t,a)=>{const s=(0,h.QB)(e.utcIsoDateString);return s.setUTCMinutes(s.getUTCMinutes()+e.timezoneOffsetMinutes),a.filter((e=>{const a=(0,h.QB)(e.utcIsoDateString);return a.setUTCMinutes(a.getUTCMinutes()+e.timezoneOffsetMinutes),s.getUTCDate()-a.getUTCDate()<=t}))},W=e=>e.map((e=>{const t=(0,h.QB)(e.utcIsoDateString);return t.setUTCMinutes(t.getUTCMinutes()-e.timezoneOffsetMinutes),t.getUTCHours()})),q=e=>e.map((e=>{const t=(0,h.QB)(e.utcIsoDateString);return t.setUTCMinutes(t.getUTCMinutes()-e.timezoneOffsetMinutes),60*t.getUTCHours()+t.getUTCMinutes()})),Q=e=>{const t=S.jL.find((t=>t>e)),a=100*(Math.floor(e/100)+1);return t?Math.min(t,a):a}},37111:(e,t,a)=>{"use strict";a.d(t,{E6:()=>m,ME:()=>l,P5:()=>v,TK:()=>o,fI:()=>r,gt:()=>c,jL:()=>d,kA:()=>_,mx:()=>i,wD:()=>h});var s=a(68903),n=a(8654);const r=30,i=100,o=3,l=365,c=7,d=[r,i,l],u=[15,7,3],p=[49,21,10,5],g=[182,30,21,14,7,3],m=e=>e>=l,h=e=>{if(null!=e&&0!==e)return e>=l?(0,n._i)(38404,{num:Math.floor(e/l)}):void 0},_=e=>{const t=l-e;if((0,s.p)(g)(t))switch(t){case 182:return(0,n._i)(35596);case 30:return(0,n._i)(35597,{num:1});case 21:case 14:case 7:return(0,n._i)(35598,{num:Math.floor(t/7)});case 3:return(0,n._i)(35599,{num:t});default:return void(0,s.RJ)(t)}const a=i-e;if((0,s.p)(p)(a))switch(a){case 49:return(0,n._i)(35594);case 21:return(0,n._i)(39578,{num:3});case 10:case 5:return(0,n._i)(35595,{num:a});default:return void(0,s.RJ)(a)}const o=r-e;if((0,s.p)(u)(o))switch(o){case 15:return(0,n._i)(35591);case 7:return(0,n._i)(35592,{num:1});case 3:return(0,n._i)(35593,{num:o});default:return void(0,s.RJ)(o)}},v=(e,t,a)=>void 0!==a&&a>=l||void 0!==t&&e.some((e=>{var a;return(null!==(a=t[e.userId])&&void 0!==a?a:0)>=l}))},43006:(e,t,a)=>{"use strict";a.d(t,{Dg:()=>i,HZ:()=>l,RF:()=>c,ls:()=>r,nx:()=>n,qv:()=>s});const s="___",n="-\\'!*()_|\\\\~=`{}\\[\\]:\";?,.‐¡¿·«»“”„–▶’。，、､‚｡；：「」『』（）？！─…《》〈〉．～،؟।—‧",r=`${n}@#$%^&+<>\\/`,i=(e,t=" ")=>e.replace(new RegExp(`[${r}]`,"g"),t).replace(/\s+/g,t).trim().toLowerCase(),o=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,l=e=>o.test(e.toLowerCase()),c=e=>[...e].length},54448:(e,t,a)=>{"use strict";a.d(t,{G:()=>n,g:()=>r});var s=a(64591);const n=(e,t,a,s)=>{const n=t.map(r);return Object.assign(Object.assign(Object.assign({},e),{challenges:n,dailyRefreshInfo:null==a?void 0:a.dailyRefreshInfo,pathLevelSpecifics:null==a?void 0:a.pathLevelMetadata}),s?{hasBoost:s,xpPromised:void 0}:{})},r=e=>{var t;const a=(0,s.Xh)(e);null===(t=a.gradingResult)||void 0===t||delete t.blameSubtext,delete a.startTime,!1===a.skipped&&delete a.skipped;const n=a.gradingResult?Object.assign(Object.assign({},a),a.gradingResult):Object.assign(Object.assign({},a),{correct:void 0});return delete n.gradingResult,"grader"in n&&delete n.grader,"smartTipsGraderV2"in n&&delete n.smartTipsGraderV2,n}},7113:(e,t,a)=>{"use strict";a.d(t,{J:()=>r,w:()=>n});var s=a(43006);const n=e=>{const t=e.match(/"[^"]*"|[^\s"]+/g),a=[];return null==t||t.forEach(((e,s)=>{let n=e;i(n[0])&&(a.push(n[0]),n=n.slice(1)),i(n[n.length-1])?(n.length>1&&a.push(n.slice(0,n.length-1)),a.push(n[n.length-1])):n.length>0&&a.push(n),s!==t.length-1&&a.push(" ")})),a},r=e=>{const t=e.match(/"[^"]*"|[^\s"]+/g),a=[];let s=0;return null==t||t.forEach(((e,n)=>{let r=e;i(r[0])&&(a.push({endIndexWithinSentence:s+1,startIndexWithinSentence:s,word:r[0]}),r=r.slice(1),s+=1),i(r[r.length-1])?(r.length>1&&(a.push({endIndexWithinSentence:s+r.length-1,startIndexWithinSentence:s,word:r.slice(0,r.length-1)}),s+=r.length-1),a.push({endIndexWithinSentence:s+1,startIndexWithinSentence:s,word:r[r.length-1]}),s+=1):r.length>0&&(a.push({endIndexWithinSentence:s+r.length,startIndexWithinSentence:s,word:r}),s+=r.length),n!==t.length-1&&(a.push({endIndexWithinSentence:s+1,startIndexWithinSentence:s,word:" "}),s+=1)})),a},i=e=>s.ls.includes(e)},79465:(e,t,a)=>{"use strict";a.r(t),a.d(t,{CAMPAIGN_PARAMETERS:()=>F,FULL_STORY_EXCLUDE:()=>w,accumulateTime:()=>K,alias:()=>x,canSetCampaignInfo:()=>M,getCampaignInfo:()=>j,getDistinctId:()=>P,removeCampaignInfo:()=>G,resetTime:()=>J,setCampaignInfo:()=>U,setDistinctId:()=>O,startTracking:()=>R,totalTimes:()=>Y,track:()=>B,trackAndLogApiError:()=>z,trackHomeShow:()=>W,trackLeaderboardApiEvent:()=>ee,trackRawEvent:()=>V,trackRedirection:()=>$,trackUserActive2022:()=>q});var s=a(80254),n=a(70488),r=a(42659),i=a(70220),o=a(43464),l=a(54412),c=a(17135),d=a(94358),u=a(67899),p=a(1),g=a(68903),m=a(80728),h=a(39852);const _="app-info://platform/microsoft-store";var v=a(51158),f=a(18804),b=a(6661),S=a(74597),y=a(16086),E=a(20028),I=a(97106);const k=["DISABLE_PERSONALIZED_ADS","DISABLE_THIRD_PARTY_TRACKING"],w="fs-exclude";let T;const C=new Promise((e=>{T=e})).then((e=>(console.log("Received fresh user model; tracking begins now"),e))),R=()=>{const e=(0,f.qg)();if(!e)throw Error("Store should be initialized set before calling startTracking.");const t=(0,r.Mb)(e),a=(0,r.df)(e),s=(0,r.np)(e),n=(0,r.Lm)(e);if(!a){const e="1"===navigator.doNotTrack;o.Vi.registerTrackingStatus(!e,P())}(()=>{const e=(0,f.qg)();return(e&&(0,r.np)(e).privacySettings?(0,r.np)(e).privacySettings:k).some((e=>k.includes(e)))})()||(0,u.dl)(),n&&!(0,E.jq)(s)&&(t.featureFlags.is_fullstory_recording_enabled||(0,E.ms)(s)||(0,E.Sk)(s))?d.IM(s.id):d.sT(),T()},L=s.IH((()=>{n.init(),n.setDebug(!1)})),O=e=>{L(),console.log(`Set distinct user id ${e}`),n.identify(`${e}`),(0,l.d8)(l.Vj.LoggedOutUUID,`${e}`),(0,y.Pc)()&&(0,l.d8)(l.Vj.LoggedIn,"true")},P=()=>(L(),`${n.getDistinctId()}`),A=async e=>{if(e)try{(0,y.Jb)(),await C}catch(e){}return(0,f.qg)()?!window.location.search.includes("dnt=1")&&(L(),!0):((0,v.vU)("Failed to track event: no store provided"),!1)},D=(e,t)=>(0,h.bP)("track",e,[{data:t,name:"properties"}],{excludeFromRollbarTelemetry:!0}),x=async e=>{if(await A(!1)){const t=n.getDistinctId();D("$create_alias",{alias:e,distinct_id:t}),n.alias(`${e}`)}},N={utm_campaign:"campaign_name",utm_content:"campaign_content",utm_medium:"campaign_medium",utm_source:"campaign_source",utm_term:"campaign_keywords"},F=s.XP(N),M=e=>s.jV(s.XP(e),F).length>0,U=e=>{const t=s.ei(e,...F);(0,l.d8)(l.Vj.UTMParameters,JSON.stringify(t))},H=(0,g.p)(F),j=e=>{const t={},a=(0,l.ej)(l.Vj.UTMParameters);if(void 0!==a){const n=JSON.parse(a);for(const[a,r]of Object.entries(n))H(a)&&(t[(s=a,`${e}${N[s]}`)]=r)}var s;const n={referrer:/"\$initial_referrer":[ ]*"(.+?)"/,referring_domain:/"\$initial_referring_domain":[ ]*"(.+?)"/};return document.cookie.split(";").forEach((a=>{a=decodeURIComponent(a),/ ?mp_.+?_mixpanel=/.test(a)&&Object.entries(n).forEach((([s,n])=>{const r=n.exec(a);r&&(t[e+s]=r[1])}))})),t},G=()=>{(0,l.nJ)(l.Vj.UTMParameters)},B=async(e,t,a=!0)=>{const s=(0,f.qg)();if(await A(a)&&s){const a=Object.assign(Object.assign({},(e=>{const t=(0,c.Zo)(),a={$app_version:window.duo.version,$current_url:window.location.href,Client:"web",app_version_hash:window.duo.versionHash,client_utc_datetime:t,cn_extension:!1,current_hearts_segments:(0,p.GQ)(e.user,e.heartsState)?e.heartsState.hearts:null,from_internet_org:!1,is_from_microsoft_store:(0,l.ej)(l.Vj.InitialReferrer)===_||document.referrer===_,is_pwa:window.matchMedia("(display-mode: standalone)").matches,is_zombie_mode:(0,r.df)(e),leaderboard_state_management:m.n?"jotai":"redux",logged_in:(0,y.Pc)(),mobile:!1,mobile_web_view:S.Z.mobile,prefers_reduced_motion:e.browserSettings.prefersReducedMotion||i.H,product:"learning_app",streak_extended:(0,I.ab)(e.user.timezoneOffset,e.user.xpGains)>0,time:t,user_agent:navigator.userAgent};window.location.hash&&(a.location_hash=window.location.hash.slice(1));const s=navigator.connection||navigator.mozConnection||navigator.webkitConnection;"object"==typeof s&&("downlink"in s&&(a.network_downlink=1e3*s.downlink),"effectiveType"in s&&(a.network_quality=s.effectiveType));const n=(0,u.Nf)();void 0!==n&&(a.is_google_tag_manager_enabled=n);const o=(0,r.np)(e);Object.assign(a,o.trackingProperties);const d=(0,r.Oz)(e);d&&Object.assign(a,d.trackingProperties),o.creationDate&&(a.creation_age=Date.now()-1e3*o.creationDate),a.email_opt_out=!o.emailPromotion;const g=(0,r.Mb)(e);return g.ipCountry&&(a.billing_country_code=g.ipCountry),a})(s)),t);return(0,u.KU)(e,a),D(e,a),new Promise((t=>{n.track(e,a,t)}))}},V=async(e,t)=>{const a=t;return((e,t)=>{(0,h.bP)("track",e,[{data:t,name:"properties"}],{excludeFromRollbarTelemetry:!0})})(e,a),new Promise((t=>{n.track(e,a,t)}))},z=(e,t,a,s,n)=>{var r;(0,o.Hx)(a)&&void 0!==(null===(r=a.response)||void 0===r?void 0:r.status)&&v.fZ.includes(a.response.status)?console.warn("Not reporting unactionable server error to Rollbar"):navigator.onLine&&((0,v.Kp)(t,Object.assign({data:s,ex:a},n)),B("api_error",{reason:e}))},Z=e=>{let t;if(e instanceof URL)t=e;else try{t=new URL(e)}catch(a){t=new URL(e,new URL(window.location.href).origin)}return t},$=(e,t,a,s=!0)=>{const n=Z(e);n.search="";const r=Z(t);return r.search="",B("client_side_redirection",{from_url:n.toString(),redirection_type:a,to_url:r.toString()},s)},W=e=>{var t,a;const s=(0,I.ab)(e.timezoneOffset,e.xpGains)>0,n=(0,b.Iv)(null!==(a=null===(t=e.streakData.currentStreak)||void 0===t?void 0:t.length)&&void 0!==a?a:0,s,e.timezoneOffset);B("show home",{is_dark_mode:window.matchMedia("(prefers-color-scheme: dark)").matches,streak_icon:n})},q=e=>{const t=(0,y.Pc)(),a=document.hidden,s=window.location.pathname;if(a||!t||"/reset_password"===s)return!1;const n={activity_screen:s,activity_trigger:null,is_foregrounded:!a,logged_in:t,product:"learning_app"},r=Object.assign(Object.assign({},n),e);return B("user_active_2022",r),!0},Q=[["admin",[/^debug\//,/^enroll/,/^o\//,/^logout$/,/^pearson$/,/^partner/,/^settings/,/^welcome/,/^admin_tools$/,/^juicy$/,/^courses/,/^course\//,/^referred$/,/^register_user$/,/^log-in/,/^register/]],["ads",[/^placeholderRegex/]],["game",[/^show_store/,/^shop/]],["learning",[/^guidebook\//,/^lesson($|\/)/,/^placement\//,/^practice\//,/^preview\//,/^new-comment$/,/^words$/,/^skill\//,/^stories/]],["loading",[/^placeholderRegex/]],["promos",[/^duocon/,/^abc(-privacy)?$/,/^redeem/,/^plus$/,/^getplus$/,/^youtubeplus$/]],["social",[/^profile\//]],["tree",[/^learn/]]],Y={admin:0,ads:0,deepest_node_learning:0,game:0,learning:0,loading:0,promos:0,social:0,tree:0,unknown:0},K=(e,t,a)=>{const s=t||((e=window.location.pathname)=>{const t=Q.find((([{},t])=>t.find((t=>t.test(e.slice(1))))));return t?t[0]:"unknown"})();Y[s]+=e,"learning"===s&&a&&(Y.deepest_node_learning+=e)},J=()=>{s.XP(Y).forEach((e=>{Y[e]=0}))};let X={};const ee=async(...e)=>{var t,a;await C;const s=e=>{var t;X[e]=(null!==(t=X[e])&&void 0!==t?t:0)+1};switch(s("leaderboard_stat_api_total"),e[0]){case"fetch":s("leaderboard_stat_api_fetch_total"),e[1].unlocked?s("leaderboard_stat_api_fetch_unlocked"):s("leaderboard_stat_api_fetch_locked");break;case"join":s("leaderboard_stat_api_join");break;case"clear_ended":s("leaderboard_stat_api_clear_ended");break;case"set_reaction":s("leaderboard_stat_api_set_reaction_total"),e[1].cohorted?s("leaderboard_stat_api_set_reaction_cohorted"):s("leaderboard_stat_api_set_reaction_uncohorted");break;case"fetch_reaction_uncohorted":s("leaderboard_stat_api_fetch_reaction_uncohort");break;default:(0,g.RJ)(e)}Math.random()>(null!==(a=null===(t=(0,f.qg)())||void 0===t?void 0:t.config.featureFlags.web_leaderboard_stats_sampling_rate)&&void 0!==a?a:.1)||(B("leaderboard_stats_aggregate",X),X={})}},34704:(e,t,a)=>{"use strict";a.d(t,{LP:()=>i,_G:()=>c,dN:()=>l,hg:()=>d,iZ:()=>o,lL:()=>u});var s=a(42659),n=(a(81149),a(11811));const r=["ja<en","zh<en"],i=(e,t)=>`${e}<${t}`,o=(e,t)=>{var a;return null===(a=e.transliterationTexts.find((e=>e.type===t)))||void 0===a?void 0:a.text},l=(e,t,a,s=!1)=>!(!a||!((e,t)=>!!r.includes(i(e,t)))(e,t))&&(a.enabled||s),c=e=>![n.FF.AlphabetLesson,n.FF.PlacementTest,n.FF.SectionTest,n.FF.UnitTest].includes(e),d=e=>{const t=(0,s.iH)(e),a=(0,s.Rv)(e);return e.browserSettings.transliterationsSettings[i(t,a)]},u={hiragana:{trackingName:"hiragana",transliterateNewWordsOnly:!1,type:"hiragana"},pinyin_all:{trackingName:"pinyin_all",transliterateNewWordsOnly:!1,type:"pinyin"},pinyin_new:{trackingName:"pinyin_new",transliterateNewWordsOnly:!0,type:"pinyin"},romaji:{trackingName:"romaji",transliterateNewWordsOnly:!1,type:"romaji"}}},11811:(e,t,a)=>{"use strict";var s,n,r;a.d(t,{A:()=>n,FF:()=>l,O4:()=>c,SP:()=>i,Sm:()=>s,tm:()=>r,y1:()=>o}),function(e){e.Assist="assist",e.CharacterIntro="characterIntro",e.CharacterMatch="characterMatch",e.CharacterPuzzle="characterPuzzle",e.CharacterSelect="characterSelect",e.CharacterTrace="characterTrace",e.CharacterWrite="characterWrite",e.CompleteReverseTranslation="completeReverseTranslation",e.Definition="definition",e.Dialogue="dialogue",e.Form="form",e.FreeResponse="freeResponse",e.GapFill="gapFill",e.Judge="judge",e.Listen="listen",e.ListenComplete="listenComplete",e.ListenComprehension="listenComprehension",e.ListenIsolation="listenIsolation",e.ListenMatch="listenMatch",e.ListenSpeak="listenSpeak",e.ListenTap="listenTap",e.Match="match",e.Name="name",e.OrderTapComplete="orderTapComplete",e.PartialListen="partialListen",e.PartialReverseTranslate="partialReverseTranslate",e.PatternTapComplete="patternTapComplete",e.ReadComprehension="readComprehension",e.ReverseAssist="reverseAssist",e.Select="select",e.SelectPronunciation="selectPronunciation",e.SelectTranscription="selectTranscription",e.SvgPuzzle="svgPuzzle",e.SyllableListenTap="syllableListenTap",e.SyllableTap="syllableTap",e.Speak="speak",e.TapCloze="tapCloze",e.TapClozeTable="tapClozeTable",e.TapComplete="tapComplete",e.TapCompleteTable="tapCompleteTable",e.TapDescribe="tapDescribe",e.Translate="translate",e.Transliterate="transliterate",e.TransliterationAssist="transliterationAssist",e.TypeCloze="typeCloze",e.TypeClozeTable="typeClozeTable",e.TypeComplete="typeComplete",e.TypeCompleteTable="typeCompleteTable",e.WriteComprehension="writeComprehension"}(s||(s={})),function(e){e.HardChallenge="HARD_CHALLENGE",e.LimitedTts="LIMITED_TTS",e.NewPattern="NEW_PATTERN",e.NewWord="NEW_WORD",e.PastMistake="PAST_MISTAKE",e.ReviewChallenge="REVIEW_CHALLENGE",e.WeakWord="WEAK_WORD"}(n||(n={})),function(e){e.NewYears2020Percent50="NEW_YEARS_2020_50",e.NewYears2020Percent60="NEW_YEARS_2020_60",e.NewYears2020Percent50Intro="NEW_YEARS_2020_50_INTRO",e.NewYears2020Percent60Intro="NEW_YEARS_2020_60_INTRO",e.NewYears2021Percent60="NEW_YEARS_2021",e.NewYears2021FT90="NEW_YEARS_2021_3MO",e.NewYears2022="NEW_YEARS_2022",e.NewYears2022FT="NEW_YEARS_2022_FT",e.NewYears2023="NEW_YEARS_2023_60",e.NewYears2023Fake="NEW_YEARS_2023_FAKE",e.NewYears2024="NEW_YEARS_2024",e.NewYears2024Fake="NEW_YEARS_2024_FAKE",e.Student="STUDENT_DISCOUNT_50",e.Winback25="WINBACK_25"}(r||(r={}));const i=[r.NewYears2024,r.NewYears2024Fake],o=[r.NewYears2024Fake];var l,c;!function(e){e.AlphabetLesson="ALPHABET_LESSON",e.GlobalPractice="GLOBAL_PRACTICE",e.Lesson="LESSON",e.MistakesReview="MISTAKES_REVIEW",e.PlacementTest="PLACEMENT_TEST",e.DuoRadio="DUORADIO",e.Legendary="LEGENDARY",e.LegendaryLevel="LEGENDARY_LEVEL",e.LegendaryLexemePractice="LEGENDARY_LEXEME_PRACTICE",e.LegendaryUnitPractice="LEGENDARY_UNIT_PRACTICE",e.LevelReview="LEVEL_REVIEW",e.LexemeSkillLevelPractice="LEXEME_SKILL_LEVEL_PRACTICE",e.LexemePractice="LEXEME_PRACTICE",e.ListeningPractice="LISTENING_PRACTICE",e.SectionTest="SECTION_TEST",e.SpeakingPractice="SPEAKING_PRACTICE",e.SpecifiedMatchPractice="SPECIFIED_MATCH_PRACTICE",e.TargetPractice="TARGET_PRACTICE",e.UnitPractice="UNIT_PRACTICE",e.UnitReview="UNIT_REVIEW",e.UnitRewind="UNIT_REWIND",e.UnitTest="UNIT_TEST"}(l||(l={})),function(e){e[e.Green=1]="Green",e[e.Gold=2]="Gold"}(c||(c={}))},86073:(e,t,a)=>{"use strict";a.d(t,{N5:()=>n,TV:()=>r,pP:()=>s});const s="LINGOTS",n="GEMS",r="STREAK_FREEZE"},55829:(e,t,a)=>{"use strict";var s;a.d(t,{S:()=>s}),function(e){e.ACTIVE="ACTIVE",e.FINISHED="FINISHED",e.NOT_STARTED="NOT_STARTED"}(s||(s={}))},41631:(e,t,a)=>{"use strict";var s;a.d(t,{t:()=>s}),function(e){e.ROOKIE="rookie",e.EXPLORER="explorer",e.TRAVELER="traveler",e.TRAILBLAZER="trailblazer",e.ADVENTURER="adventurer",e.DISCOVERER="discoverer",e.DAREDEVIL="daredevil",e.NAVIGATOR="navigator",e.CHAMPION="champion",e.DAILY_REFRESH="daily_refresh"}(s||(s={}))},3800:(e,t,a)=>{"use strict";a.d(t,{N:()=>s,h:()=>n});const s={autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",spellCheck:!1},n=window.location.search.includes("wantsPlainInfo=1")},81621:(e,t,a)=>{"use strict";a.d(t,{EO:()=>b,Lf:()=>d,Nr:()=>g,P2:()=>_,P_:()=>p,Ud:()=>u,eU:()=>v,i5:()=>E,nY:()=>I,pu:()=>S,rt:()=>c,sL:()=>m,tU:()=>o,yS:()=>f,z_:()=>l});var s=a(80254),n=a(17135),r=a(16086),i=a(20028);const o="//s3.amazonaws.com/duolingo-images/avatar/default_2",l=e=>e.includes("default_"),c=e=>!(e.privacySettings||[]).includes("DISABLE_SOCIAL")&&!(0,i.pN)(e),d=e=>!(e.privacySettings||[]).includes("DISABLE_MATURE_WORDS"),u=e=>!(e.privacySettings||[]).includes("DISABLE_LEADERBOARDS"),p=e=>{var t,a;return"CN"===e.ipCountry&&null!==(a=null===(t=e.featureFlags)||void 0===t?void 0:t.china_compliance_control)&&void 0!==a&&a},g=(e,t)=>{const a=[{streakFreezeUsed:!1}];e[e.length-1]>0&&t--;for(let s=e.length-2;s>=0&&t>0;s--){const n=0===e[s];a.unshift({streakFreezeUsed:n}),n||t--}return a},m=e=>e,h=e=>{var t;return Math.max(...(null!==(t=e.xpGains)&&void 0!==t?t:[]).filter((e=>e.xp>0)).map((e=>e.time)))},_=e=>{const t=h(e),a=(0,n.M)(t,Date.now());return a>=7&&a<30},v=e=>{const t=h(e),a=(0,n.M)(t,Date.now());return e.xpGains&&e.xpGains.length>0&&a>=30},f=e=>{var t;const a=(0,n.RF)({days:1}),s=(0,n.RF)({days:7});return(null!==(t=e.xpGains)&&void 0!==t?t:[]).some((e=>e.xp>0&&e.time<a&&e.time>s))},b=e=>(0,n.t8)(1e3*e.creationDate,Date.now())<=30,S=e=>y(e,Date.now()),y=(e,t)=>s.VO(e.xpSummaries).filter((e=>void 0!==e&&(0,n.M)(e.date,t)<=30&&e.gainedXp>0)).length,E=e=>{const t=e.lastResurrectionTimestamp;return t?(0,n.M)(t,Date.now()):Number.MAX_SAFE_INTEGER},I=(e,t)=>e.sort(((e,a)=>{let s=!1,n=!1;try{const t=(0,r.Jb)();s=t===e.id,n=t===a.id}catch(e){}const i=!!t[e.id]||s,o=!!t[a.id]||n;return i===o?a.totalXp-e.totalXp:(o?0:1)-(i?0:1)}))},74597:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});const s=a(23630).getParser(navigator.userAgent),n=void 0!==navigator.brave,r={android:"Android"===s.getOSName(),chrome:"Chrome"===s.getBrowserName()&&!n,desktop:"desktop"===s.getPlatformType(),edge:"Microsoft Edge"===s.getBrowserName(),firefox:"Firefox"===s.getBrowserName(),hasMobileApp:"iOS"===s.getOSName()||"Android"===s.getOSName()&&"Amazon Silk"!==s.getBrowserName(),inwechat:navigator.userAgent.toLowerCase().includes("micromessenger"),ios:"iOS"===s.getOSName(),macOS:"macOS"===s.getOSName(),mobile:"mobile"===s.getPlatformType(),safari:"Safari"===s.getBrowserName(),silk:"Amazon Silk"===s.getBrowserName(),windowsPhone:"Windows Phone"===s.getOSName()}},16086:(e,t,a)=>{"use strict";a.d(t,{Jb:()=>o,MJ:()=>i,Pc:()=>l});var s=a(80231),n=a(54412),r=a(51158);const i=e=>{try{return parseInt(JSON.parse(s.DS.decode(e.split(".")[1])).sub,10)}catch(t){return void(0,r.vU)("Failed to parse saved JWT",{data:{jwt:e},once:!0})}},o=()=>{const e=(0,n.ej)(n.Vj.JWT),t=e?i(e):void 0;if(!t)throw Error("JWT missing");return t},l=()=>{try{return o(),!0}catch(e){return!1}}},20028:(e,t,a)=>{"use strict";a.d(t,{AE:()=>p,B8:()=>v,E4:()=>_,GJ:()=>n,Go:()=>h,Jd:()=>d,Sk:()=>l,d1:()=>g,dE:()=>u,jq:()=>r,ms:()=>o,pN:()=>m,u:()=>c,vb:()=>i});var s=a(80254);const n=e=>(e.roles||[]).includes("admin"),r=e=>{var t;return(null!==(t=e.privacySettings)&&void 0!==t?t:[]).includes("AGE_RESTRICTED")},i=e=>(e.roles||[]).includes("community-admin"),o=e=>"ENROLLED"===e.betaStatus||c(e),l=e=>(e.roles||[]).some((e=>"admin"===e||"engineering-contractor"===e)),c=e=>!s.xb(e.globalAmbassadorStatus),d=e=>(e.roles||[]).includes("moderators"),u=e=>!s.xb(e.joinedClassroomIds),p=e=>!s.xb(e.observedClassroomIds),g=e=>u(e)||p(e),m=e=>!e.username,h=e=>{var t;return l(e)||(null===(t=e.roles)||void 0===t?void 0:t.some((e=>"ios-builds-download"===e||"localization-translator"===e)))},_=e=>!!e.canUseModerationTools,v=e=>n(e)||i(e)},64591:(e,t,a)=>{"use strict";a.d(t,{$f:()=>i,FL:()=>o,Xh:()=>r});var s=a(99369),n=a(80254);const r=e=>JSON.parse(JSON.stringify(e)),i=(e,t,a,r)=>{if(!t.length)return(0,s.merge)(e,a,r);const i=t.reduce(((e,t)=>{var a;return null!==(a=e[t])&&void 0!==a?a:{}}),e);return(0,s.setIn)(e,t,n.xb(i)?a:(0,s.merge)(i,a,r))},o=(e,t,a)=>i(e,t,a,{deep:!0})},97106:(e,t,a)=>{"use strict";a.d(t,{$W:()=>A,$Z:()=>G,BX:()=>y,CT:()=>p,Cz:()=>R,DI:()=>D,Ig:()=>g,JE:()=>H,K3:()=>T,Lu:()=>_,MR:()=>O,Ms:()=>E,Qb:()=>F,R7:()=>h,W0:()=>N,Zy:()=>L,a$:()=>U,ab:()=>m,dY:()=>f,dp:()=>d,dr:()=>I,fu:()=>C,g3:()=>V,h0:()=>B,ix:()=>w,jB:()=>c,mX:()=>S,nF:()=>k,o6:()=>u,pu:()=>v,tL:()=>b,tV:()=>M,uD:()=>x,xc:()=>P,zL:()=>j});var s=a(42659),n=(a(43464),a(17135)),r=a(11883),i=a(8654),o=a(23275),l=a(18804);const c=9e5,d=18e5,u=(e,t)=>{for(const a of[1,2,5])if(Math.ceil(e/a)<=t)return a;return 10*Math.ceil(e/t/10)},p=(e,t)=>void 0===t?0:Math.ceil(5*t/e),g=(e,t,a)=>{const{enableBonusPoints:s,maxInLessonStreak:n,session:r}=e,i=r.xpGain;return{bonusXp:s&&e.completedWithHeartsRemaining?p(r.challenges.length,n):0,hasXpBoost:a,totalXpThisSession:i,totalXpToday:t}},m=(e,t)=>h(e,t)[6],h=(e,t,a="0")=>{const s=[0,0,0,0,0,0,0];if(!t)return s;const r=(0,n.Ko)(e),i=-1*(0,n.Rw)(a)*3600,o=(0,n.Zo)();for(const e of t){const t=o-r+86400-1,a=Math.floor((t-(e.time+i))/86400);a>=0&&a<=6&&(s[6-a]+=e.xp)}return s},_=10,v=20,f=30,b=15,S=40,y=40,E=y/2,I=4,k=3,w=5,T=2,C=20,R=10,L=20,O=5,P=e=>{var t,a;return(null===(t=e.levelData)||void 0===t?void 0:t.level)&&(0,o.$)(e.levelData.level)?v+p(e.session.challenges.length,e.maxInLessonStreak):(0,o.Wc)(null===(a=e.levelData)||void 0===a?void 0:a.level.state)&&["LEXEME_PRACTICE","LESSON"].includes(e.session.type)?w+p(e.session.challenges.length,e.maxInLessonStreak):e.sessionParams.isFinalLevel?!e.completedWithHeartsRemaining&&e.partialXpGiven||y+(e.enableBonusPoints?p(e.session.challenges.length,e.maxInLessonStreak):0):void 0},A=(e,t)=>{const a=(0,n.cz)(e);return null==t?void 0:t[a]},D=(e,t,a)=>{const s=[],r=(0,n.Gz)(e);for(;r<=(0,n.Gz)(t);)s.push(A(r,a)),r.setDate(r.getDate()+1);return s},x=(e,t)=>{const a=e.getFullYear(),s=e.getMonth(),r=e.getDate(),o=(0,n.kJ)(a,s,(0,i.k8)()),l=7*Math.floor((r-1+o)/7)-o+1,c=[];for(let e=0;e<7;++e)c.push(A((0,n.$$)(a,s,l+e),t));return c},N=(e,t)=>{const a=[],s=(0,n.Ux)();for(let r=1;r<=e;++r){const e=A((0,n.$$)(s.getFullYear(),s.getMonth(),s.getDate()-r),t);void 0!==e&&a.push(e)}return a},F=e=>{var t;return null!==(t=null==e?void 0:e.streakExtended)&&void 0!==t&&t},M=e=>!!e&&(e.streakExtended||e.frozen||e.repaired),U=(e,t,a,s)=>{const r=x((0,n.$$)(e,t,a),s),i=r.every(F),o=r.some(F),l=r.every((e=>void 0===e));return i?"yes":o?"no":l?"none":"no_streak"},H=(e,t)=>e.map((e=>{const a=e[0],s=a.getFullYear(),r=a.getMonth(),i=a.getDate(),o=(0,n.$$)(s,r,i-1),l=(0,n.$$)(s,r,i+7);return[A(o,t),...e.map((e=>A(e,t))),A(l,t)]}));var j;!function(e){e.ITEM_NAME_15_MIN="xp_boost_15",e.ITEM_NAME_30_MIN="general_xp_boost"}(j||(j={}));const G={[j.ITEM_NAME_15_MIN]:c,[j.ITEM_NAME_30_MIN]:d},B=e=>{const t=Object.entries(G).map((([t,a])=>{var s;const n=null===(s=e[t])||void 0===s?void 0:s.purchaseDate;return[t,void 0===n?void 0:1e3*n+a]})).filter((([,e])=>void 0!==e));return t.length>0?t.sort((([,e],[,t])=>t-e))[0][0]:void 0},V=()=>{const e=(0,r.Z)(1e4);return(0,l.Fx)((t=>(0,s.mu)(t,e)))}},2945:(e,t,a)=>{"use strict";a.d(t,{Gi:()=>r,z9:()=>n}),a(88868);const s={ar:"ar",cs:"cs",de:"de",el:"el",en:"en-us",es:"es",fr:"fr",hi:"hi",hu:"hu",id:"id",it:"it",ja:"ja",ko:"ko","nl-NL":"nl",pl:"pl",pt:"pt-br",ro:"ro",ru:"ru",th:"th",tr:"tr",uk:"uk",vi:"vi","zh-CN":"zh-cn"},n=e=>{const t=r();return t?`https://support.duolingo.com/hc/${t}/articles/${e}`:"/help"},r=()=>s[window.duo.uiLanguage]},10391:(e,t,a)=>{"use strict";a.d(t,{iY:()=>n,jL:()=>i,mH:()=>s,tW:()=>r});const s=(e,t)=>{const a=Math.max(e.top,t.top),s=Math.min(e.bottom,t.bottom),n=Math.max(e.left,t.left),r=Math.min(e.right,t.right)-n,i=s-a;if(!(r<0||i<0))return new DOMRect(n,a,r,i)},n=(e,t)=>{const a=t.map(((t,a)=>"px"===t.unit?t.value:t.value*(a%2?e.width:e.height)/100)),s=e.bottom+a[2],n=e.left-a[3],r=e.right+a[1],i=e.top-a[0];return new DOMRect(n,i,r-n,s-i)},r=e=>e instanceof Element?e.getBoundingClientRect():new DOMRect(0,0,window.innerWidth,window.innerHeight),i=(e="0px")=>{const t=e.split(/\s+/).map((e=>{const t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw Error("rootMargin must be specified in pixels or percent");return{unit:t[2],value:parseFloat(t[1])}}));return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t}},5768:(e,t,a)=>{"use strict";a.d(t,{Z:()=>ca});const s=a.p+"images/pathCharacters/active/f6716f60d235309775505d851d765c85.svg",n=a.p+"images/pathCharacters/active/bdb3ba49eeb7f68dcd4b4310996757df.svg",r=a.p+"images/pathCharacters/active/c085c27e83dae9c384a1fa5623caf378.svg",i=a.p+"images/pathCharacters/active/2b8208acfd8a19539a7f1f0f583eedaa.svg",o=a.p+"images/pathCharacters/active/5fc71197a1416e4be54c4b5b29499f94.svg",l=a.p+"images/pathCharacters/active/2d9777e95d5de19a2093d197c46c1c0e.svg",c=a.p+"images/pathCharacters/active/349d9719f6303f61230e835ed661dbb5.svg",d=a.p+"images/pathCharacters/active/940d8a1e046b65de37bec0cbbd0cb7d5.svg",u=a.p+"images/pathCharacters/active/82bf5cd118b395613c530684ba24875d.svg",p=a.p+"images/pathCharacters/active/f5021878026faa91fba2d00ad725e595.svg",g=a.p+"images/pathCharacters/active/1d0f3d4cac09ecc764b48e4216971340.svg",m=a.p+"images/pathCharacters/active/1f3c7406207c51a83e70f51a8b278c9a.svg",h=a.p+"images/pathCharacters/active/a506d9752e476f9e29b898c8350e21c6.svg",_=a.p+"images/pathCharacters/active/7165a21f9d59c20266995311eac2b85b.svg",v=a.p+"images/pathCharacters/active/41ac3c186ece34d11eead4b83018deec.svg",f=a.p+"images/pathCharacters/active/e586e997ac5f61e9efc539a897ea97fa.svg",b=a.p+"images/pathCharacters/active/017db225b5af3a57e8c96ad6e68407f5.svg",S=a.p+"images/pathCharacters/active/6b1c65328a8b08a992ddfdac410f1e59.svg",y=a.p+"images/pathCharacters/active/505dc128d86274a4ae042aaff86e9ee8.svg",E=a.p+"images/pathCharacters/active/e8ca616fcc85da2b7103c5d3dab47c9e.svg",I=a.p+"images/pathCharacters/active/70f2dc0e9b24a7c1b75dcc4f06220def.svg",k=a.p+"images/pathCharacters/active/f33931b2e9c90975dc4f16385e3b9986.svg",w=a.p+"images/pathCharacters/active/b14deaeb92aba09a8db341eed854a510.svg",T=a.p+"images/pathCharacters/active/b130575f6cf5010b979252cc7082bff0.svg",C=a.p+"images/pathCharacters/active/bf0ea3175ff65517dbbcda2a51088310.svg",R=a.p+"images/pathCharacters/active/97f5073db4f9edb223cc3745fb101189.svg",L=a.p+"images/pathCharacters/active/42d8973fd7661278e821e6b443e3cd04.svg",O=a.p+"images/pathCharacters/active/f8ce8a90aa5638e8f8c6f911cab769c5.svg",P=a.p+"images/pathCharacters/active/8377ccd0d783587c5b29afba076dda3f.svg",A=a.p+"images/pathCharacters/active/768e7ac6704417d6a979e4f051ee4cfc.svg",D=a.p+"images/pathCharacters/active/68f281ca714a348cd289484f8922e06a.svg",x=a.p+"images/pathCharacters/active/c4ca05b766187c339c99a5e574a28ce4.svg",N=a.p+"images/pathCharacters/active/586f98637f46d0832a67b074714149dc.svg",F=a.p+"images/pathCharacters/active/0421ab9ac2e358694cf788b984f0a0f4.svg",M=a.p+"images/pathCharacters/active/b2c48eddbd0646c3c89d042125ef31e0.svg",U=a.p+"images/pathCharacters/active/b53ad129e94857a2d4c2affca721b2c8.svg",H=a.p+"images/pathCharacters/active/71d4f6db082a480c6e223c20a3e960af.svg",j=a.p+"images/pathCharacters/active/09b658f65939dd745b7c74c90ab26818.svg",G=a.p+"images/pathCharacters/active/c2fa6ca1ce048c415513d495475eec41.svg",B=a.p+"images/pathCharacters/active/8751c385f1b3a57ce6af336091dfcd4d.svg",V=a.p+"images/pathCharacters/active/ee46ea4ca925eaab1e5e02e9c3ac85e1.svg",z=a.p+"images/pathCharacters/active/ceb30a4743ccd7ac766338cc7a66b752.svg",Z=a.p+"images/pathCharacters/guidebook/53c8fcd21f5e6f8d4e532213964806fa.svg",$=a.p+"images/pathCharacters/guidebook/8f43a38bf751cb8dff793a838c89df0d.svg",W=a.p+"images/pathCharacters/guidebook/73d5e4f9fa2f1941ab8d05060e190940.svg",q=a.p+"images/pathCharacters/guidebook/939ebad747027f1a9d365e15fda3a4e1.svg",Q=a.p+"images/pathCharacters/guidebook/efc93544fcf3855e11f88bb2cfa5ae6a.svg",Y=a.p+"images/pathCharacters/guidebook/cb8f7d0a6699de6bef9bfd462d137c2a.svg",K=a.p+"images/pathCharacters/guidebook/b6c0d8b501a7f39c054475e567f2cd86.svg",J=a.p+"images/pathCharacters/guidebook/a0c36a29597aaa9f405737994609e4bf.svg",X=a.p+"images/pathCharacters/guidebook/9a365074d115c04b61aa34afba7d2bd5.svg",ee=a.p+"images/pathCharacters/guidebook/1ea369918b8e64958448ad6e7efc7344.svg",te=a.p+"images/pathCharacters/guidebook/f86794ff3b20c42b827f8f4e8bf28fc2.svg",ae=a.p+"images/pathCharacters/guidebook/40c909d8f85e07ad2f7d9d8d6da75902.svg",se=a.p+"images/pathCharacters/guidebook/61e3a5ac98e388bf0de9244e10da39cb.svg",ne=a.p+"images/pathCharacters/guidebook/c2c4bf353572100fb3f67e195e63c351.svg",re=a.p+"images/pathCharacters/guidebook/d0d8dc7a1a4e8e0a95ff0484fb9b17ae.svg",ie=a.p+"images/pathCharacters/guidebook/315a044a2d6f81b9c832db26bf62b215.svg",oe=a.p+"images/pathCharacters/guidebook/37f70fb52e74cb666f289cf53d520cc5.svg",le=a.p+"images/pathCharacters/guidebook/ff005cafd223412b5bfd7ad2d2ee0cdf.svg",ce=a.p+"images/pathCharacters/guidebook/120cbef6f780776c0022d557813e5f74.svg",de=a.p+"images/pathCharacters/guidebook/dcdb3d27bf8b8cb6cd6cf830964a39c8.svg",ue=a.p+"images/pathCharacters/guidebook/03f7ef1e0cb60e21264ca58ca9d71e03.svg",pe=a.p+"images/pathCharacters/guidebook/efacf57a4e0d5050d284ba87aa1c6c02.svg",ge=a.p+"images/pathCharacters/guidebook/b75147787f7b6802fd1586fe1c2cd41e.svg",me=a.p+"images/pathCharacters/guidebook/d5f85b5af625ee3ac0bf1649f76cd56f.svg",he=a.p+"images/pathCharacters/guidebook/c878e993696ae48c101701e1b724d53b.svg",_e=a.p+"images/pathCharacters/guidebook/156abbe091927eb035122b8e3761848b.svg",ve=a.p+"images/pathCharacters/guidebook/4eaafed54241c1649af93bd8c9a4d2f7.svg",fe=a.p+"images/pathCharacters/guidebook/9de3ba3ddfc50cfa99c5bd1afac683df.svg",be=a.p+"images/pathCharacters/guidebook/f840f12b8161bb2c8fcbbf303fad60fb.svg",Se=a.p+"images/pathCharacters/guidebook/98e0df0e56367f7642df7a1ffa127faf.svg",ye=a.p+"images/pathCharacters/guidebook/f75ac5f895a988580dc58c17440092f9.svg",Ee=a.p+"images/pathCharacters/guidebook/d16b76c27fcfaabd59f258018d3cf8bb.svg",Ie=a.p+"images/pathCharacters/guidebook/34e2fb16e4c6ad068a2004dc08823397.svg",ke=a.p+"images/pathCharacters/guidebook/0a7807397bc9125928ba9c642aec48b3.svg",we=a.p+"images/pathCharacters/guidebook/83d237fc9ab23cadf31b0923048de22d.svg",Te=a.p+"images/pathCharacters/guidebook/16c6a73cb17b74b555c33b8ba90130b1.svg",Ce=a.p+"images/pathCharacters/guidebook/8304c27670dcb005c76d2a2f858f3238.svg",Re=a.p+"images/pathCharacters/guidebook/e1216e99a0b4f3e2b41220dba8805cc4.svg",Le=a.p+"images/pathCharacters/guidebook/6b51686fcb4d14ca3ea3dedaf6a120ef.svg",Oe=a.p+"images/pathCharacters/guidebook/86b2ffcca31cec80a8f443a03ab7a552.svg",Pe=a.p+"images/pathCharacters/guidebook/d982595bad4aeecdb7fb143357591000.svg",Ae=a.p+"images/pathCharacters/guidebook/4c6f1af016a2d198bb198a690889b303.svg",De=a.p+"images/pathCharacters/locked/91e7b42fcfad51403e221227646d6bf7.svg",xe=a.p+"images/pathCharacters/locked/712983de6ee1534605ff11e8e7db1f9d.svg",Ne=a.p+"images/pathCharacters/locked/ec557effb34d21d0bc4ec743cc6b88eb.svg",Fe=a.p+"images/pathCharacters/locked/5a84d39927b1f9ff52797b8dd305c8e9.svg",Me=a.p+"images/pathCharacters/locked/b2aa4648b65477fa276fbf2987575756.svg",Ue=a.p+"images/pathCharacters/locked/e33954c3ceeea67f43937613c3f4cc0a.svg",He=a.p+"images/pathCharacters/locked/b77ce87b8d78bf56fbec23b9abe2ff51.svg",je=a.p+"images/pathCharacters/locked/bf1a9ccba05390a74cf13a0f7c9a665d.svg",Ge=a.p+"images/pathCharacters/locked/905c171ee1863bfa3cfff749ce7b0fda.svg",Be=a.p+"images/pathCharacters/locked/061c9a310ba3cb90a5165046e9b807c4.svg",Ve=a.p+"images/pathCharacters/locked/40203307d51ccadc8592fb18c9b3495e.svg",ze=a.p+"images/pathCharacters/locked/6fec8b4fbf961af1323716a1f94ef6a3.svg",Ze=a.p+"images/pathCharacters/locked/a226369d1c7123b2cab8b94c876217c2.svg",$e=a.p+"images/pathCharacters/locked/3b85864235b8ff1dca19e95e5626b581.svg",We=a.p+"images/pathCharacters/locked/9c2dab526f9f8d5bbbf6640f8dceb3be.svg",qe=a.p+"images/pathCharacters/locked/5fd0a5a8769f5dba24bca6378f8d50f0.svg",Qe=a.p+"images/pathCharacters/locked/0e95d11fb22f79166a6e1a234fbd588c.svg",Ye=a.p+"images/pathCharacters/locked/9b47b796e62017999b87844189101f6f.svg",Ke=a.p+"images/pathCharacters/locked/f328bd6af7a695e18b14151d41af0bb7.svg",Je=a.p+"images/pathCharacters/locked/895382cc24dd06b9051d91b0aede65d1.svg",Xe=a.p+"images/pathCharacters/locked/553fbab291d8d785159c3f37dc0a08b8.svg",et=a.p+"images/pathCharacters/locked/f9390df95434c7fde9b81bee083a1b1b.svg",tt=a.p+"images/pathCharacters/locked/6d779e83712860a01164c3145c65818a.svg",at=a.p+"images/pathCharacters/locked/6c7e2a7843e764cbb4ed665ba22f0015.svg",st=a.p+"images/pathCharacters/locked/4fe84a0544799c74348afb28bb9833da.svg",nt=a.p+"images/pathCharacters/locked/dbd618958ac83871a1b1a43983ef9e11.svg",rt=a.p+"images/pathCharacters/locked/34443969dabd59f00795cc94457c1b3b.svg",it=a.p+"images/pathCharacters/locked/3f3753f97c661eb8dcc99b6b9296f5c0.svg",ot=a.p+"images/pathCharacters/locked/f0170ea1b382b18bf20cc8542319d737.svg",lt=a.p+"images/pathCharacters/locked/79487c035b5b5851604e1cbad2a08ce5.svg",ct=a.p+"images/pathCharacters/locked/9ebf7d48e9584e3cf5664e48045f76a5.svg",dt=a.p+"images/pathCharacters/locked/738a67cd7d33976c73a2894b741bb6eb.svg",ut=a.p+"images/pathCharacters/locked/57c584002faafd3eb2eac6fc3a9cb1b5.svg",pt=a.p+"images/pathCharacters/locked/f1a8ca7d22677f84c9781b7e9034f688.svg",gt=a.p+"images/pathCharacters/locked/1a590fb861a96e0bf266bfa51b4c49f2.svg",mt=a.p+"images/pathCharacters/locked/2cd0458ca11c7750844aec70009447a1.svg",ht=a.p+"images/pathCharacters/locked/a39bec2df6719a6ccfaedce0dadb8186.svg",_t=a.p+"images/pathCharacters/locked/4da08f8ab837264583efa654925e6c60.svg",vt=a.p+"images/pathCharacters/locked/f61b069908217e296577a477e58e00a5.svg",ft=a.p+"images/pathCharacters/locked/a0cb3a88f573417a7c8947a27ca0fdf5.svg",bt=a.p+"images/pathCharacters/locked/e489245b60a7f45968e3cf497d7e4a13.svg",St=a.p+"images/pathCharacters/locked/51c2fae37ac6000a32b56b49452300c1.svg",yt=a.p+"images/pathCharacters/dark/d04961b6ab7a67fc666c31ddb9ae7300.svg",Et=a.p+"images/pathCharacters/dark/d8c966fb8b990397836029468874b3c7.svg",It=a.p+"images/pathCharacters/dark/6424c07838b740553d47b194169b9687.svg",kt=a.p+"images/pathCharacters/dark/e34ed8cd1c855f7a0bd355aa753f6187.svg",wt=a.p+"images/pathCharacters/dark/c9379a6ea0a3d2304db5107c87e9cd8d.svg",Tt=a.p+"images/pathCharacters/dark/9edc1bab8bb64e35d1a6ad46acf6f21f.svg",Ct=a.p+"images/pathCharacters/dark/063b19fbbfec48f887c7d5ad2b1849d7.svg",Rt=a.p+"images/pathCharacters/dark/c4419cac8477c25a1761abbf438cf531.svg",Lt=a.p+"images/pathCharacters/dark/05164af290313e637e51f5a30c472e96.svg",Ot=a.p+"images/pathCharacters/dark/297a3a905c8cabf3728dc123e9eed2ae.svg",Pt=a.p+"images/pathCharacters/dark/f8fa790433c0f5cb4eccf8b15ec17cb7.svg",At=a.p+"images/pathCharacters/dark/b82d75c2859ed7eb6fc32415cd4a049a.svg",Dt=a.p+"images/pathCharacters/dark/8f596552d9922c0053afb1595fd17e4d.svg",xt=a.p+"images/pathCharacters/dark/e46e218ccaf58ee7b0828b2d7823f67e.svg",Nt=a.p+"images/pathCharacters/dark/a182083228ca9ae7caa6e04c67ba3319.svg",Ft=a.p+"images/pathCharacters/dark/7c9adeb1fe285009c6e2a66237a1d67c.svg",Mt=a.p+"images/pathCharacters/dark/61a06d7064f6e9faf54ad90f2e91f82b.svg",Ut=a.p+"images/pathCharacters/dark/7dee264e444be67317676501571d1adf.svg",Ht=a.p+"images/pathCharacters/dark/0658130f08ebff08d9fec5f63de374ad.svg",jt=a.p+"images/pathCharacters/dark/9614e10008fe07d7cc143883a76bed81.svg",Gt=a.p+"images/pathCharacters/dark/2d30e5a86c537dac04b7f87e50faa495.svg",Bt=a.p+"images/pathCharacters/dark/c45923336541ef5a8309a1758ff5ca91.svg",Vt=a.p+"images/pathCharacters/dark/0666681732336ff1a9740bba04bd0920.svg",zt=a.p+"images/pathCharacters/dark/6f31bc33f041ccb7009072ddeebefd54.svg",Zt=a.p+"images/pathCharacters/dark/4830ce54059fde22c292153f044eea5b.svg",$t=a.p+"images/pathCharacters/dark/f389b81e89cdb9c91f1c11d0e2b43c6c.svg",Wt=a.p+"images/pathCharacters/dark/a3e1fd17f6d11b10ecae6bf5bc1ca701.svg",qt=a.p+"images/pathCharacters/dark/fd54597a7b5e285bce32a8a97860b9c1.svg",Qt=a.p+"images/pathCharacters/dark/497f3d136d0af6285e915ed47c4a8f36.svg",Yt=a.p+"images/pathCharacters/dark/24b858c7608560bff72d1eacc89467e1.svg",Kt=a.p+"images/pathCharacters/dark/7a6f4ccab9ff546c3f3780d33a0641ff.svg",Jt=a.p+"images/pathCharacters/dark/5c67588a2c368e997aeabe4f1d349593.svg",Xt=a.p+"images/pathCharacters/dark/9d3aea4743e0cb72d2449a5b400de680.svg",ea=a.p+"images/pathCharacters/dark/350eb5e80d4ddc292088d0acc5ef3e2d.svg",ta=a.p+"images/pathCharacters/dark/c43181b8aff6b93a60c67aa9683352bd.svg",aa=a.p+"images/pathCharacters/dark/1c076601edde48ff382d23b0929d277e.svg",sa=a.p+"images/pathCharacters/dark/d2df0451dcc78faeba2fd5e4bb0d1422.svg",na=a.p+"images/pathCharacters/dark/b3ae4979d0f3a2d284727d3aa8b6d755.svg",ra=a.p+"images/pathCharacters/dark/365b784b66dd40dab60da28e065b8b9a.svg",ia=a.p+"images/pathCharacters/dark/791fc3429e145eafb9419778f922f13e.svg",oa=a.p+"images/pathCharacters/dark/096e4bb633b6c35eba1a2ec2f814e7d4.svg",la=a.p+"images/pathCharacters/dark/379c41f243b0bac4ec06e120ad03e9fc.svg",ca={BEA_SMORES:{activeImage:s,guidebookHeaderImage:Z,lockedImage:De,darkImage:yt,animation:a.p+"lottie/pathCharacters/1607e4d7d34a90b7801f1c47d6f9c6ea.json"},BEA_TENNIS:{activeImage:n,guidebookHeaderImage:$,lockedImage:xe,darkImage:Et,animation:a.p+"lottie/pathCharacters/fe36d90699c984de29ff7981c9cc2d05.json"},DUO_BALL:{activeImage:r,guidebookHeaderImage:W,lockedImage:Ne,darkImage:It,animation:a.p+"lottie/pathCharacters/241a1daf9e1650c59c2421aa73744336.json"},DUO_BOOKS:{activeImage:i,guidebookHeaderImage:q,lockedImage:Fe,darkImage:kt,animation:a.p+"lottie/pathCharacters/dc7f54a73e6340a16176a91bf0d18b83.json"},DUO_BUTTERFLY:{activeImage:o,guidebookHeaderImage:Q,lockedImage:Me,darkImage:wt,animation:a.p+"lottie/pathCharacters/192edd4e5f1a09d2d53f8ab605b05695.json"},DUO_CHEER:{activeImage:l,guidebookHeaderImage:Y,lockedImage:Ue,darkImage:Tt,animation:a.p+"lottie/pathCharacters/7e038d7ac140bbafc9a6665404f0efe1.json"},DUO_GEM:{activeImage:c,guidebookHeaderImage:K,lockedImage:He,darkImage:Ct,animation:a.p+"lottie/pathCharacters/c61c8f0fe4a9e1a9ae4f443eb7c314f0.json"},DUO_GLOBE:{activeImage:d,guidebookHeaderImage:J,lockedImage:je,darkImage:Rt,animation:a.p+"lottie/pathCharacters/71886a73198014f8277ba04fa5f5fbf0.json"},DUO_HEADPHONES:{activeImage:u,guidebookHeaderImage:X,lockedImage:Ge,darkImage:Lt,animation:a.p+"lottie/pathCharacters/db2060dfa323f5380a5aad451b089ae8.json"},DUO_JUMPFLAP:{activeImage:p,guidebookHeaderImage:ee,lockedImage:Be,darkImage:Ot,animation:a.p+"lottie/pathCharacters/8bb6c897c3f01efa2cbd0c138772ef67.json"},DUO_POTION:{activeImage:g,guidebookHeaderImage:te,lockedImage:Ve,darkImage:Pt,animation:a.p+"lottie/pathCharacters/320a1cd60f7d26a3d4b7801fecc7f01e.json"},DUO_SUNGLASSES:{activeImage:m,guidebookHeaderImage:ae,lockedImage:ze,darkImage:At,animation:a.p+"lottie/pathCharacters/f872318ec63a7e667458456703a51513.json"},DUO_TWIRL:{activeImage:h,guidebookHeaderImage:se,lockedImage:Ze,darkImage:Dt,animation:a.p+"lottie/pathCharacters/01a1427cc5613179ea3d7568a5f7445b.json"},DUO_WHISTLING:{activeImage:_,guidebookHeaderImage:ne,lockedImage:$e,darkImage:xt,animation:a.p+"lottie/pathCharacters/9eaf4990aaf1c6a96ea3960cf159c787.json"},EDDY_BASKETBALL:{activeImage:v,guidebookHeaderImage:re,lockedImage:We,darkImage:Nt,animation:a.p+"lottie/pathCharacters/a6b12fd04248e71c10fb618c21728f64.json"},EDDY_JUMPROPE:{activeImage:f,guidebookHeaderImage:ie,lockedImage:qe,darkImage:Ft,animation:a.p+"lottie/pathCharacters/67844ded0243177e653006a90ff2d123.json"},FALSTAFF_EATING:{activeImage:b,guidebookHeaderImage:oe,lockedImage:Qe,darkImage:Mt,animation:a.p+"lottie/pathCharacters/2b220ab845add3699ee05c74616256a2.json"},FALSTAFF_FISHING:{activeImage:S,guidebookHeaderImage:le,lockedImage:Ye,darkImage:Ut,animation:a.p+"lottie/pathCharacters/ae34cc76c0de53ade116ac8805199ba2.json"},FALSTAFF_SNEEZING:{activeImage:y,guidebookHeaderImage:ce,lockedImage:Ke,darkImage:Ht,animation:a.p+"lottie/pathCharacters/08a9aac28d225ce2bedcbdb26327bf7f.json"},FALSTAFF_SNOOZE:{activeImage:E,guidebookHeaderImage:de,lockedImage:Je,darkImage:jt,animation:a.p+"lottie/pathCharacters/f1ef5bf2963d4a07a873b19b97452c17.json"},JUNIOR_FROG:{activeImage:I,guidebookHeaderImage:ue,lockedImage:Xe,darkImage:Gt,animation:a.p+"lottie/pathCharacters/88d9353d9f8743e369eff8bb7e903e08.json"},JUNIOR_ICECREAM:{activeImage:k,guidebookHeaderImage:pe,lockedImage:et,darkImage:Bt,animation:a.p+"lottie/pathCharacters/094c591bedc6b367a58332bbe4da9319.json"},JUNIOR_POGO:{activeImage:w,guidebookHeaderImage:ge,lockedImage:tt,darkImage:Vt,animation:a.p+"lottie/pathCharacters/35a6eb069de131103f1a217dc839974d.json"},JUNIOR_SLEEP:{activeImage:T,guidebookHeaderImage:me,lockedImage:at,darkImage:zt,animation:a.p+"lottie/pathCharacters/c522eaf9eba484ed712bb6d2235e8b92.json"},LILY_DOOMSCROLL:{activeImage:C,guidebookHeaderImage:he,lockedImage:st,darkImage:Zt,animation:a.p+"lottie/pathCharacters/c89e727c30b2be9affdbe76d869f45fa.json"},LILY_RAINCLOUD:{activeImage:R,guidebookHeaderImage:_e,lockedImage:nt,darkImage:$t,animation:a.p+"lottie/pathCharacters/884f551952f9476c7b9b98a344fb6119.json"},LILY_SHIRTS:{activeImage:L,guidebookHeaderImage:ve,lockedImage:rt,darkImage:Wt,animation:a.p+"lottie/pathCharacters/a3579eb9c6bb2fd6ee757fe0e7e415ad.json"},LIN_BIKE:{activeImage:O,guidebookHeaderImage:fe,lockedImage:it,darkImage:qt,animation:a.p+"lottie/pathCharacters/bbdaf0d9b14a9aedddf9677b081b2ccb.json"},LIN_BIKEKISS:{activeImage:P,guidebookHeaderImage:be,lockedImage:ot,darkImage:Qt,animation:a.p+"lottie/pathCharacters/5e697e3598a488b072c5c9a26b0698a9.json"},LUCY_CAT:{activeImage:A,guidebookHeaderImage:Se,lockedImage:lt,darkImage:Yt,animation:a.p+"lottie/pathCharacters/ba26a1174d78ad0448028049f9caf665.json"},LUCY_WALKIETALKIE:{activeImage:D,guidebookHeaderImage:ye,lockedImage:ct,darkImage:Kt,animation:a.p+"lottie/pathCharacters/ed60015b3035b85cf593ec1e2c941077.json"},OSCAR_BONSAI:{activeImage:x,guidebookHeaderImage:Ee,lockedImage:dt,darkImage:Jt,animation:a.p+"lottie/pathCharacters/949e42a5121007d24252cc1f13dc5340.json"},OSCAR_COMB:{activeImage:N,guidebookHeaderImage:Ie,lockedImage:ut,darkImage:Xt,animation:a.p+"lottie/pathCharacters/d8995c025643e9a8b14df60490607117.json"},OSCAR_FLOWER:{activeImage:F,guidebookHeaderImage:ke,lockedImage:pt,darkImage:ea,animation:a.p+"lottie/pathCharacters/843367dca1d93f9279d29b44e03d78bf.json"},OSCAR_PAINTING:{activeImage:M,guidebookHeaderImage:we,lockedImage:gt,darkImage:ta,animation:a.p+"lottie/pathCharacters/760c257b6301764926b2437c5ef49396.json"},VIKRAM_GRILL:{activeImage:U,guidebookHeaderImage:Te,lockedImage:mt,darkImage:aa,animation:a.p+"lottie/pathCharacters/e2c0feab5bfdf0681026cf74a3e68780.json"},VIKRAM_NOODLES:{activeImage:H,guidebookHeaderImage:Ce,lockedImage:ht,darkImage:sa,animation:a.p+"lottie/pathCharacters/53827134d9f7d9bdcdf51aaa70c808fc.json"},VIKRAM_PANCAKES:{activeImage:j,guidebookHeaderImage:Re,lockedImage:_t,darkImage:na,animation:a.p+"lottie/pathCharacters/235a9512cd87635aae19380f4fd4ff46.json"},VIKRAM_PANSIES:{activeImage:G,guidebookHeaderImage:Le,lockedImage:vt,darkImage:ra,animation:a.p+"lottie/pathCharacters/4563de1e9b220d608fe1e0959e5bb74e.json"},ZARI_GAMING:{activeImage:B,guidebookHeaderImage:Oe,lockedImage:ft,darkImage:ia,animation:a.p+"lottie/pathCharacters/e3fe1ff10daf05e0cc2499af28f113db.json"},ZARI_KICK:{activeImage:V,guidebookHeaderImage:Pe,lockedImage:bt,darkImage:oa,animation:a.p+"lottie/pathCharacters/2eecad629ae938d2a280feeab1f33aac.json"},ZARI_LOLLIPOP:{activeImage:z,guidebookHeaderImage:Ae,lockedImage:St,darkImage:la,animation:a.p+"lottie/pathCharacters/f30c12ed93bdc41695cdded00b8f45a9.json"}}},63198:(e,t,a)=>{var s={"./sampleChallenges.json":[48033,223,5314,75],"./sampleChallengesCharacterWrite.json":[92485,5770],"./sampleChallengesJapanese.json":[89437,407,3860,5905],"./sampleChallengesKorean.json":[66265,407,7493,3860,7187,7764],"./sampleChallengesPuzzleArabic.json":[18451,3016,950,3869],"./sampleChallengesPuzzleKorean.json":[56158,4099],"./sampleChallengesSpanish.json":[90337,3016,6098,7253],"./sampleChallengesSpeak.json":[19872,5123],"./sampleChallengesSvgPuzzle.json":[42870,3746],"./sampleChallengesTrace.json":[54731,9481]};function n(e){if(!a.o(s,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=s[e],n=t[0];return Promise.all(t.slice(1).map(a.e)).then((()=>a.t(n,19)))}n.keys=()=>Object.keys(s),n.id=63198,e.exports=n},55081:(e,t,a)=>{var s={"./ar.duostrings":[99135,9135],"./bn.duostrings":[17464,7464],"./cs.duostrings":[96102,6102],"./de.duostrings":[82867,2867],"./el.duostrings":[49495,9495],"./en.duostrings":[39819,9819],"./es.duostrings":[12579,2579],"./experiments.duostrings":[69295,9295],"./fr.duostrings":[34970,4970],"./hi.duostrings":[40620,620],"./hu.duostrings":[39666,9666],"./id.duostrings":[71062,1062],"./it.duostrings":[87490,7490],"./ja.duostrings":[43162,7854],"./ko.duostrings":[15750,5750],"./language_string_mapping.duostrings":[91307,1307],"./metadata.duostrings":[84309,4309],"./nl-NL.duostrings":[67674,7674],"./pl.duostrings":[17716,7716],"./pt.duostrings":[37763,7763],"./ro.duostrings":[37292,7292],"./ru.duostrings":[25529,5529],"./te.duostrings":[87274,7274],"./th.duostrings":[39943,9943],"./tl.duostrings":[8324,821],"./tr.duostrings":[7396,7396],"./uk.duostrings":[78374,8374],"./vi.duostrings":[89036,9036],"./zh-CN.duostrings":[85189,5189],"./zh-TW.duostrings":[74615,4615]};function n(e){if(!a.o(s,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=s[e],n=t[0];return a.e(t[1]).then((()=>a.t(n,19)))}n.keys=()=>Object.keys(s),n.id=55081,e.exports=n},91575:(e,t,a)=>{!function(){var e="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,a){if(a.get||a.set)throw new TypeError("ES3 does not support getters and setters.");e!=Array.prototype&&e!=Object.prototype&&(e[t]=a.value)},t="undefined"!=typeof window&&window===this?this:void 0!==a.g&&null!=a.g?a.g:this;function s(){s=function(){},t.Symbol||(t.Symbol=r)}var n=0;function r(e){return"jscomp_symbol_"+(e||"")+n++}function i(){s();var a=t.Symbol.iterator;a||(a=t.Symbol.iterator=t.Symbol("iterator")),"function"!=typeof Array.prototype[a]&&e(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return o(this)}}),i=function(){}}function o(e){var a=0;return function(e){return i(),(e={next:e})[t.Symbol.iterator]=function(){return this},e}((function(){return a<e.length?{done:!1,value:e[a++]}:{done:!0}}))}function l(e){if(!(e instanceof Array)){i();var t=e[Symbol.iterator];e=t?t.call(e):o(e);for(var a=[];!(t=e.next()).done;)a.push(t.value);e=a}return e}var c=[];function d(e,t){var a=this;this.context=e,this.h=t,this.f=(this.c=/Task$/.test(t))?e.get(t):e[t],this.a=[],this.b=[],this.g=function(e){for(var t=[],s=0;s<arguments.length;++s)t[s-0]=arguments[s];return a.b[a.b.length-1].apply(null,[].concat(l(t)))},this.c?e.set(t,this.g):e[t]=this.g}function u(e,t){-1<(t=e.a.indexOf(t))&&(e.a.splice(t,1),0<e.a.length?p(e):-1<(t=c.indexOf(e))&&(c.splice(t,1),e.c?e.context.set(e.h,e.f):e.context[e.h]=e.f))}function p(e){e.b=[];for(var t,a=0;t=e.a[a];a++){var s=e.b[a-1]||e.f.bind(e.context);e.b.push(t(s))}}function g(e){var t=history,a=c.filter((function(a){return a.context==t&&a.h==e}))[0];return a||(a=new d(t,e),c.push(a)),a}var m,h,_,v=Object.assign||function(e,t){for(var a=[],s=1;s<arguments.length;++s)a[s-1]=arguments[s];s=0;for(var n=a.length;s<n;s++){var r,i=Object(a[s]);for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},f={l:1,m:2,o:3,u:4,v:5,w:6,A:7,B:8,j:9,s:10},b=Object.keys(f).length;function S(e,t){var a=f.j;e.set("&_av","2.4.1");var s=e.get("&_au");if((s=parseInt(s||"0",16).toString(2)).length<b)for(var n=b-s.length;n;)s="0"+s,n--;a=b-a,s=s.substr(0,a)+1+s.substr(a+1),e.set("&_au",parseInt(s||"0",2).toString(16)),history.pushState&&window.addEventListener&&(this.b=v({shouldTrackUrlChange:this.shouldTrackUrlChange,trackReplaceState:!1,fieldsObj:{},hitFilter:null},t),this.g=e,this.i=location.pathname+location.search,this.c=this.c.bind(this),this.f=this.f.bind(this),this.a=this.a.bind(this),e=this.c,(t=g("pushState")).a.push(e),p(t),e=this.f,(t=g("replaceState")).a.push(e),p(t),window.addEventListener("popstate",this.a))}function y(e,t){setTimeout((function(){var a=e.i,s=location.pathname+location.search;a!=s&&e.b.shouldTrackUrlChange.call(e,s,a)&&(e.i=s,e.g.set({page:s,title:document.title}),(t||e.b.trackReplaceState)&&e.g.send("pageview",function(e,t,a){var s={transport:"beacon"};if("function"==typeof a){var n=t.get("buildHitTask");return{buildHitTask:function(t){t.set(s,null,!0),t.set(e,null,!0),a(t,void 0,void 0),n(t)}}}return v({},s,e)}(e.b.fieldsObj,e.g,e.b.hitFilter)))}),0)}S.prototype.c=function(e){var t=this;return function(a){for(var s=[],n=0;n<arguments.length;++n)s[n-0]=arguments[n];e.apply(null,[].concat(l(s))),y(t,!0)}},S.prototype.f=function(e){var t=this;return function(a){for(var s=[],n=0;n<arguments.length;++n)s[n-0]=arguments[n];e.apply(null,[].concat(l(s))),y(t,!1)}},S.prototype.a=function(){y(this,!0)},S.prototype.shouldTrackUrlChange=function(e,t){return!(!e||!t)},S.prototype.remove=function(){var e=this.c;u(g("pushState"),e),e=this.f,u(g("replaceState"),e),window.removeEventListener("popstate",this.a)},m="urlChangeTracker",h=S,_=window.GoogleAnalyticsObject||"ga",window[_]=window[_]||function(e){for(var t=[],a=0;a<arguments.length;++a)t[a-0]=arguments[a];(window[_].q=window[_].q||[]).push(t)},window.gaDevIds=window.gaDevIds||[],0>window.gaDevIds.indexOf("i5iSjo")&&window.gaDevIds.push("i5iSjo"),window[_]("provide",m,h),window.gaplugins=window.gaplugins||{},window.gaplugins[m.charAt(0).toUpperCase()+m.slice(1)]=h}()},17833:(e,t,a)=>{"use strict";e.exports=a.p+"images/512eb76d3f55365106b6553583884c81.svg"},98149:(e,t,a)=>{"use strict";e.exports=a.p+"images/1fab4a7428381cbb290d8f591d7934fb.svg"},42158:(e,t,a)=>{"use strict";e.exports=a.p+"images/617c9bcf01673a55c983c7d0a14a6bd4.svg"},90778:(e,t,a)=>{"use strict";e.exports=a.p+"images/68388f00ef865490c5b79b3a7238a791.svg"},45437:(e,t,a)=>{"use strict";e.exports=a.p+"images/c29a13c4b115e8a9000ba1b6ac2e1918.svg"},20770:(e,t,a)=>{"use strict";e.exports=a.p+"images/goals/235433119ddbb9e7a011fce8d725610e.svg"},20750:(e,t,a)=>{"use strict";e.exports=a.p+"images/7da752378a3b1b8bbcd94a4d4f10561e.svg"},9115:(e,t,a)=>{"use strict";e.exports=a.p+"images/b294c1b7e661d8039b723d450e12a91e.svg"},13567:(e,t,a)=>{"use strict";e.exports=a.p+"images/9249183104c6fcd338c3dc70fe33612c.svg"},21778:(e,t,a)=>{"use strict";e.exports=a.p+"images/icons/f5358b2d4087a109790fc809eedc08c5.svg"},39631:(e,t,a)=>{"use strict";e.exports=a.p+"images/leagues/b2cfacfc26adff8e547866db1b4d2249.svg"},80869:(e,t,a)=>{"use strict";e.exports=a.p+"images/leagues/838ba65643baef4c8442317df514cab5.svg"},83577:(e,t,a)=>{"use strict";e.exports=a.p+"images/leagues/afe5c7067cd5fb7de936d3928ea7add6.svg"},92902:(e,t,a)=>{"use strict";e.exports=a.p+"images/leagues/020eeff7a4bb54d62dc430445102de8f.svg"},83831:(e,t,a)=>{"use strict";e.exports=a.p+"images/leagues/50e20c051d41d8446f13d5fae10f8797.svg"},8466:(e,t,a)=>{"use strict";e.exports=a.p+"images/leagues/80fecb328c5aefd400db229794fd7a08.svg"},8146:(e,t,a)=>{"use strict";e.exports=a.p+"images/leagues/58454634c8fdf43d606b85832102eb9b.svg"},79815:(e,t,a)=>{"use strict";e.exports=a.p+"images/leagues/fc303539a465de810900b8bf9101df5b.svg"},9175:(e,t,a)=>{"use strict";e.exports=a.p+"images/leagues/b7c96323c16272efa6794d33791686d2.svg"},40301:(e,t,a)=>{"use strict";e.exports=a.p+"images/leagues/8b3ff5d2a2b0ec2ff7cec8ebd639a5ab.svg"},26858:(e,t,a)=>{"use strict";e.exports=a.p+"images/leagues/968f56b566887d7718898cf8b5e74f40.svg"},65908:(e,t,a)=>{"use strict";e.exports=a.p+"images/leagues/eef523c872b71178ef5acb2442d453a2.svg"},66586:(e,t,a)=>{"use strict";e.exports=a.p+"images/leagues/9e4f18c0bc42c7508d5fa5b18346af11.svg"},25324:(e,t,a)=>{"use strict";e.exports=a.p+"images/leagues/cc7b8f8582e9cfb88408ab851ec2e9bd.svg"},87122:(e,t,a)=>{"use strict";e.exports=a.p+"images/dca3b978d07a7dfc05adb1d5526e9e21.svg"},26219:(e,t,a)=>{"use strict";e.exports=a.p+"images/streakCalendar/85f13bef0cec7175ae190a3a8a513d58.svg"},57127:(e,t,a)=>{"use strict";e.exports=a.p+"images/streakCalendar/ddd4794e495fca5c45bf358115bd9053.svg"},34049:(e,t,a)=>{"use strict";e.exports=a.p+"images/streakCalendar/8d8a819f30b6f538853e0877599ed7f1.svg"},480:(e,t,a)=>{"use strict";e.exports=a.p+"images/super/8183c77cba99daf1e900fb5f9b0cc671.svg"},89090:(e,t,a)=>{"use strict";e.exports=a.p+"images/48b38c250a652878bc0c779a07f2ca48.svg"},45633:(e,t,a)=>{"use strict";e.exports=a.p+"images/ed25a8cf69261b0c1e25b147f369f74a.svg"},76986:e=>{"use strict";e.exports=JSON.parse('[["[’\\\\\\"´‘`′ʻ́̀´]","\'"],["[\\\\[\\\\]\\\\{\\\\}\\\\<\\\\>\\\\)\\\\(\\\\^\\\\~\\\\_\\\\-\\\\‐\\\\;\\\\!\\\\¡\\\\|\\\\?\\\\¿\\\\/\\\\·\\\\\\"\\\\«\\\\»\\\\“\\\\”\\\\„\\\\–\\\\:\\\\,\\\\.\\\\▶\\\\*\\\\+\\\\’\\\\。\\\\，\\\\、\\\\､\\\\‚\\\\｡\\\\；\\\\：\\\\「\\\\」\\\\『\\\\』\\\\（\\\\）\\\\？\\\\！\\\\─\\\\…\\\\《\\\\》\\\\〈\\\\〉\\\\．\\\\～\\\\،\\\\؟\\\\।\\\\—\\\\‧]",""],["\\\\s+"," "],["^ | $",""]]')},72538:e=>{"use strict";e.exports=JSON.parse('{"ar":{"de":"الألمانية","en":"الإنجليزية","fr":"الفرنسية","sv":"السويدية"},"bn":{"en":"ইংরেজি"},"cs":{"en":"Angličtina"},"de":{"en":"Englisch","es":"Spanisch","fr":"Französisch","it":"Italienisch"},"el":{"en":"Αγγλικά"},"en":{"ar":"Arabic","cs":"Czech","cy":"Welsh","da":"Danish","de":"German","el":"Greek","eo":"Esperanto","es":"Spanish","fi":"Finnish","fr":"French","ga":"Irish","gd":"Scottish Gaelic","he":"Hebrew","hi":"Hindi","ht":"Haitian Creole","hu":"Hungarian","hv":"High Valyrian","hw":"Hawaiian","id":"Indonesian","it":"Italian","ja":"Japanese","ko":"Korean","la":"Latin","nl-NL":"Dutch","no-BO":"Norwegian (Bokmål)","nv":"Navajo","pl":"Polish","pt":"Portuguese","ro":"Romanian","ru":"Russian","sv":"Swedish","sw":"Swahili","tlh":"Klingon","tr":"Turkish","uk":"Ukrainian","vi":"Vietnamese","yi":"Yiddish","zh":"Chinese","zu":"Zulu"},"es":{"ca":"Catalán","de":"Alemán","en":"Inglés","eo":"Esperanto","fr":"Francés","gn":"Guaraní","it":"Italiano","pt":"Portugués","ru":"Ruso","sv":"Sueco"},"fr":{"de":"Allemand","en":"Anglais","eo":"Espéranto","es":"Espagnol","it":"Italien","pt":"Portugais"},"hi":{"en":"इंग्लिश"},"hu":{"de":"Német","en":"Angol"},"id":{"en":"Bahasa Inggris"},"it":{"de":"Tedesco","en":"Inglese","es":"Spagnolo","fr":"Francese"},"ja":{"en":"英語","fr":"フランス語","ko":"韓国語","zh":"中国語"},"ko":{"en":"영⁠어"},"nl-NL":{"de":"Duits","en":"Engels","fr":"Frans"},"pl":{"en":"Angielski"},"pt":{"de":"Alemão","en":"Inglês","eo":"Esperanto","es":"Espanhol","fr":"Francês","it":"Italiano"},"ro":{"en":"Engleză"},"ru":{"de":"Немецкий","en":"Английский","es":"Испанский","fr":"Французский"},"te":{"en":"ఆంగ్లము"},"th":{"en":"ภาษาอังกฤษ"},"tl":{"en":"Ingles"},"tr":{"de":"Almanca","en":"İngilizce","ru":"Rusça"},"uk":{"en":"Англійська"},"vi":{"en":"Tiếng Anh","zh":"Tiếng Hoa"},"zh-CN":{"en":"英语","es":"西班牙语","fr":"法语","it":"意大利语","ja":"日语","ko":"韩语","zh-HK":"中文（粤语）"},"zh-TW":{"en":"英語","es":"西班牙語","fr":"法語","it":"義大利語","ja":"日語","ko":"韓語","zh-HK":"中文（粵語）"}}')}},e=>{e.O(0,[2434],(()=>(54089,e(e.s=54089)))),e.O()}]);